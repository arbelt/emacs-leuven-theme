<!-- <xml version="1.0"> -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta name="generator" content=
  "HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org" />

  <title>Emacs Leuven</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="generator" content="Org-mode" />
  <meta name="author" content="Fabrice Niessen" />
  <link rel="stylesheet" type="text/css" href=
  "file:///D:/Users/fni/src/org-style/styles/bigblow/css/htmlize.css" />
  <link rel="stylesheet" type="text/css" href=
  "file:///D:/Users/fni/src/org-style/styles/bigblow/css/bigblow.css" />
  <link rel="stylesheet" type="text/css" href=
  "file:///D:/Users/fni/src/org-style/styles/bigblow/css/hideshow.css" />
<script type="text/javascript" src=
"file:///D:/Users/fni/src/org-style/styles/bigblow/js/jquery-1.9.1.min.js">
</script>
<script type="text/javascript" src=
"file:///D:/Users/fni/src/org-style/styles/bigblow/js/jquery-ui-1.10.2.min.js">
</script>
<script type="text/javascript" src=
"file:///D:/Users/fni/src/org-style/styles/bigblow/js/jquery.localscroll-min.js">
</script>
<script type="text/javascript" src=
"file:///D:/Users/fni/src/org-style/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js">
</script>
<script type="text/javascript" src=
"file:///D:/Users/fni/src/org-style/styles/bigblow/js/bigblow.js">
</script>
<script type="text/javascript" src=
"file:///D:/Users/fni/src/org-style/styles/bigblow/js/hideshow.js">
</script>
</head>

<body>
  <div id="content">
    <h1 class="title">Emacs Leuven</h1>

    <div id="table-of-contents">
      <h2>Table of Contents</h2>

      <div id="text-table-of-contents">
        <ul>
          <li><a href="#sec-1">Description</a></li>

          <li><a href="#sec-2">Header</a></li>

          <li><a href="#sec-3">Code</a></li>

          <li><a href="#sec-4">Loading Libraries of Lisp Code for
          Emacs</a></li>

          <li><a href="#sec-5">Environment</a></li>

          <li><a href="#sec-6">Debugging</a></li>

          <li>
            <a href="#sec-7">Emacs Lisp Packages</a>

            <ul>
              <li><a href="#sec-7-1">The Package Menu Buffer</a></li>

              <li><a href="#sec-7-2">Package Installation</a></li>

              <li><a href="#sec-7-3">Check Org mode version</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-8">The Organization of the Screen</a>

            <ul>
              <li><a href="#sec-8-1">The Echo Area</a></li>
            </ul>
          </li>

          <li><a href="#sec-9">Exiting Emacs</a></li>

          <li>
            <a href="#sec-10">Basic Editing Commands</a>

            <ul>
              <li><a href="#sec-10-1">Inserting Text</a></li>

              <li><a href="#sec-10-2">Moving Point Location</a></li>

              <li><a href="#sec-10-3">Basic Undoing Changes</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-11">The Minibuffer</a>

            <ul>
              <li><a href="#sec-11-1">Editing in the Minibuffer</a></li>

              <li><a href="#sec-11-2">Completion</a></li>

              <li><a href="#sec-11-3">Repeating Minibuffer Commands</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-12">Help</a>

            <ul>
              <li><a href="#sec-12-1">Help Summary</a></li>

              <li><a href="#sec-12-2">Apropos</a></li>

              <li><a href="#sec-12-3">Misc Help Commands</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-13">The Mark and the Region</a>

            <ul>
              <li><a href="#sec-13-1">Commands to Mark Textual Objects</a></li>

              <li><a href="#sec-13-2">Operating on the Region</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-14">Killing and Moving Text</a>

            <ul>
              <li><a href="#sec-14-1">Deletion and Killing</a></li>

              <li>
                <a href="#sec-14-2">Yanking</a>

                <ul>
                  <li><a href="#sec-14-2-1">Yanking Earlier Kills</a></li>
                </ul>
              </li>

              <li><a href="#sec-14-3">Cutting and Pasting on Graphical
              Displays</a></li>

              <li><a href="#sec-14-4">Rectangles</a></li>

              <li><a href="#sec-14-5">CUA Bindings</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-15">Registers</a>

            <ul>
              <li><a href="#sec-15-1">Bookmarks</a></li>

              <li><a href="#sec-15-2">Ace Jump</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-16">Controlling the Display</a>

            <ul>
              <li><a href="#sec-16-1">Scrolling</a></li>

              <li><a href="#sec-16-2">Automatic Scrolling</a></li>

              <li><a href="#sec-16-3">Narrowing</a></li>

              <li><a href="#sec-16-4">Font Lock mode</a></li>

              <li><a href="#sec-16-5">Interactive Highlighting</a></li>

              <li><a href="#sec-16-6">Window Fringes</a></li>

              <li><a href="#sec-16-7">Displaying Boundaries</a></li>

              <li><a href="#sec-16-8">Useless Whitespace</a></li>

              <li><a href="#sec-16-9">Selective Display</a></li>

              <li><a href="#sec-16-10">Optional Mode Line Features</a></li>

              <li><a href="#sec-16-11">How Text Is Displayed</a></li>

              <li><a href="#sec-16-12">Displaying the Cursor</a></li>

              <li><a href="#sec-16-13">Truncation of Lines</a></li>

              <li><a href="#sec-16-14">Customization of Display</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-17">Searching and Replacement</a>

            <ul>
              <li><a href="#sec-17-1">Incremental Search</a></li>

              <li><a href="#sec-17-2">Regexp Search</a></li>

              <li><a href="#sec-17-3">Search Case</a></li>

              <li><a href="#sec-17-4">Replacement Commands</a></li>

              <li>
                <a href="#sec-17-5">Other Search-and-Loop Commands</a>

                <ul>
                  <li><a href="#sec-17-5-1">Multi-buffer occur</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li>
            <a href="#sec-18">Commands for Fixing Typos</a>

            <ul>
              <li><a href="#sec-18-1">Checking and Correcting Spelling</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-19">Keyboard Macros</a>

            <ul>
              <li><a href="#sec-19-1">Basic Use</a></li>

              <li><a href="#sec-19-2">Naming and Saving Keyboard
              Macros</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-20">Files Handling</a>

            <ul>
              <li><a href="#sec-20-1">File Names</a></li>

              <li><a href="#sec-20-2">Visiting Files</a></li>

              <li><a href="#sec-20-3">Saving Files</a></li>

              <li><a href="#sec-20-4">Reverting a Buffer</a></li>

              <li><a href="#sec-20-5">Auto-Saving: Protection Against
              Disasters</a></li>

              <li><a href="#sec-20-6">Comparing Files</a></li>

              <li><a href="#sec-20-7">Diff Mode</a></li>

              <li><a href="#sec-20-8">Miscellaneous File Operations</a></li>

              <li><a href="#sec-20-9">Accessing Compressed Files</a></li>

              <li><a href="#sec-20-10">Auto Encryption</a></li>

              <li>
                <a href="#sec-20-11">Remote Files</a>

                <ul>
                  <li><a href="#sec-20-11-1">Ange-FTP</a></li>

                  <li><a href="#sec-20-11-2">TRAMP</a></li>

                  <li><a href="#sec-20-11-3">TEST Find file as root</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-20-12">Convenience Features for Finding Files</a>

                <ul>
                  <li><a href="#sec-20-12-1">FFAP</a></li>

                  <li><a href="#sec-20-12-2">Helm</a></li>

                  <li><a href="#sec-20-12-3">Image mode</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li>
            <a href="#sec-21">Using Multiple Buffers</a>

            <ul>
              <li><a href="#sec-21-1">Creating and Selecting Buffers</a></li>

              <li><a href="#sec-21-2">Listing Existing Buffers</a></li>

              <li><a href="#sec-21-3">Killing Buffers</a></li>

              <li><a href="#sec-21-4">Operating on Several Buffers</a></li>

              <li><a href="#sec-21-5">Convenience Features and Customization of
              Buffer Handling</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-22">Multiple Windows</a>

            <ul>
              <li><a href="#sec-22-1">Concepts of Emacs Windows</a></li>

              <li><a href="#sec-22-2">Using Other Windows</a></li>

              <li><a href="#sec-22-3">Deleting and Rearranging Windows</a></li>

              <li><a href="#sec-22-4">Displaying a Buffer in a Window</a></li>

              <li><a href="#sec-22-5">Window Handling Convenience Features and
              Customization</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-23">Frames and Graphical Displays</a>

            <ul>
              <li><a href="#sec-23-1">Mouse Commands for Editing</a></li>

              <li><a href="#sec-23-2">Creating Frames</a></li>

              <li><a href="#sec-23-3">Frame Commands</a></li>

              <li><a href="#sec-23-4">Speedbar Frames</a></li>

              <li><a href="#sec-23-5">Scroll Bars</a></li>

              <li><a href="#sec-23-6">Tool Bars</a></li>

              <li><a href="#sec-23-7">Using Dialog Boxes</a></li>

              <li><a href="#sec-23-8">Tooltips</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-24">International Character Set Support</a>

            <ul>
              <li><a href="#sec-24-1">Language Environments</a></li>

              <li><a href="#sec-24-2">Input Methods</a></li>

              <li><a href="#sec-24-3">Recognizing Coding Systems</a></li>

              <li><a href="#sec-24-4">Specifying a File’s Coding
              System</a></li>

              <li><a href="#sec-24-5">Bidirectional Editing</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-25">Major and Minor Modes</a>

            <ul>
              <li>
                <a href="#sec-25-1">How Major Modes are Chosen</a>

                <ul>
                  <li><a href="#sec-25-1-1">Choice based on the file
                  name</a></li>

                  <li><a href="#sec-25-1-2">Choice based on the interpreter
                  name</a></li>

                  <li><a href="#sec-25-1-3">Choice based on the text at the
                  start of the buffer</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li>
            <a href="#sec-26">Indentation</a>

            <ul>
              <li><a href="#sec-26-1">Indentation Commands</a></li>

              <li><a href="#sec-26-2">Tabs vs. Spaces</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-27">Commands for Human Languages</a>

            <ul>
              <li><a href="#sec-27-1">Words</a></li>

              <li><a href="#sec-27-2">Sentences</a></li>

              <li><a href="#sec-27-3">Filling Text</a></li>

              <li><a href="#sec-27-4">Case Conversion Commands</a></li>

              <li>
                <a href="#sec-27-5">Outline Mode</a>

                <ul>
                  <li><a href="#sec-27-5-1">outline-minor-mode</a></li>

                  <li><a href="#sec-27-5-2">org-global-cycle +
                  outline-magic</a></li>

                  <li><a href="#sec-27-5-3">org</a></li>

                  <li><a href="#sec-27-5-4">org-struct-mode</a></li>

                  <li><a href="#sec-27-5-5">fold-dwim-org</a></li>
                </ul>
              </li>

              <li><a href="#sec-27-6">Boxquote</a></li>

              <li><a href="#sec-27-7">Phonetic</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-28">Org Mode (Getting Things Done)</a>

            <ul>
              <li>
                <ul>
                  <li><a href="#sec-28-0-1">Activation</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-28-1">Document Structure</a>

                <ul>
                  <li><a href="#sec-28-1-1">Headlines</a></li>

                  <li><a href="#sec-28-1-2">Visibility cycling</a></li>

                  <li><a href="#sec-28-1-3">2.4 Motion</a></li>

                  <li><a href="#sec-28-1-4">Structure editing</a></li>

                  <li><a href="#sec-28-1-5">Sparse trees</a></li>

                  <li><a href="#sec-28-1-6">Plain lists</a></li>
                </ul>
              </li>

              <li><a href="#sec-28-2">Tables</a></li>

              <li>
                <a href="#sec-28-3">Hyperlinks</a>

                <ul>
                  <li><a href="#sec-28-3-1">External links</a></li>

                  <li><a href="#sec-28-3-2">Handling links</a></li>

                  <li><a href="#sec-28-3-3">Link abbreviations</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-28-4">“TODO” Items</a>

                <ul>
                  <li><a href="#sec-28-4-1">Basic TODO functionality</a></li>

                  <li><a href="#sec-28-4-2">Extended use of TODO
                  keywords</a></li>

                  <li><a href="#sec-28-4-3">Progress logging</a></li>

                  <li><a href="#sec-28-4-4">Breaking down tasks</a></li>
                </ul>
              </li>

              <li><a href="#sec-28-5">Tags</a></li>

              <li><a href="#sec-28-6">Properties and Columns</a></li>

              <li>
                <a href="#sec-28-7">Dates and Times</a>

                <ul>
                  <li><a href="#sec-28-7-1">Creating time stamps</a></li>

                  <li>
                    <a href="#sec-28-7-2">Deadlines and scheduling</a>

                    <ul>
                      <li><a href="#sec-28-7-2-1">Inserting
                      deadline/schedule</a></li>

                      <li><a href="#sec-28-7-2-2">Repeated tasks</a></li>
                    </ul>
                  </li>

                  <li><a href="#sec-28-7-3">Clocking work time</a></li>

                  <li><a href="#sec-28-7-4">Effort estimates</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-28-8">Capture - Refile - Archive</a>

                <ul>
                  <li>
                    <a href="#sec-28-8-1">Capture</a>

                    <ul>
                      <li><a href="#sec-28-8-1-1"><span class=
                      "todo TODO">TODO</span> Ask for refile location</a></li>

                      <li><a href="#sec-28-8-1-2">Email-to-Org</a></li>

                      <li><a href="#sec-28-8-1-3">Capture from command
                      line</a></li>
                    </ul>
                  </li>

                  <li><a href="#sec-28-8-2">Attachments</a></li>

                  <li><a href="#sec-28-8-3">Protocols for external
                  access</a></li>

                  <li><a href="#sec-28-8-4">Refile and copy</a></li>

                  <li><a href="#sec-28-8-5">Archiving</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-28-9">Agenda Views</a>

                <ul>
                  <li><a href="#sec-28-9-1">Agenda files</a></li>

                  <li><a href="#sec-28-9-2">The agenda dispatcher</a></li>

                  <li>
                    <a href="#sec-28-9-3">The Built-in agenda views</a>

                    <ul>
                      <li><a href="#sec-28-9-3-1">Advanced Search</a></li>
                    </ul>
                  </li>

                  <li><a href="#sec-28-9-4">Presentation and sorting</a></li>

                  <li><a href="#sec-28-9-5">Agenda commands</a></li>

                  <li><a href="#sec-28-9-6">Custom agenda views</a></li>

                  <li><a href="#sec-28-9-7">Display all active tasks from the
                  current directory</a></li>

                  <li><a href="#sec-28-9-8">Exporting Agenda Views</a></li>

                  <li><a href="#sec-28-9-9">Agenda column view</a></li>

                  <li>
                    <a href="#sec-28-9-10">Not sorted</a>

                    <ul>
                      <li><a href="#sec-28-9-10-1">Mouse cursor doesn’t
                      highlight agenda lines</a></li>

                      <li><a href="#sec-28-9-10-2">Mark a task as DONE and
                      create a follow-up task</a></li>

                      <li><a href="#sec-28-9-10-3">Capture something based on
                      the agenda</a></li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                <a href="#sec-28-10">Markup for rich export</a>

                <ul>
                  <li><a href="#sec-28-10-1">Images and Tables</a></li>

                  <li><a href="#sec-28-10-2">Macro replacement</a></li>

                  <li><a href="#sec-28-10-3">Embedded LaTeX</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-28-11">Exporting</a>

                <ul>
                  <li><a href="#sec-28-11-1">Export options</a></li>

                  <li><a href="#sec-28-11-2">HTML export</a></li>

                  <li><a href="#sec-28-11-3">LaTeX and PDF export</a></li>

                  <li><a href="#sec-28-11-4">LaTeX Beamer and PDF
                  export</a></li>

                  <li><a href="#sec-28-11-5">OpenDocument Text (ODT)</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-28-12">Publishing</a>

                <ul>
                  <li><a href="#sec-28-12-1">Uploading files</a></li>

                  <li><a href="#sec-28-12-2">Triggering publication</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-28-13">Working With Source Code</a>

                <ul>
                  <li><a href="#sec-28-13-1">Editing source code</a></li>

                  <li><a href="#sec-28-13-2">Evaluating code blocks</a></li>

                  <li><a href="#sec-28-13-3">Library of Babel</a></li>

                  <li><a href="#sec-28-13-4">Languages</a></li>

                  <li><a href="#sec-28-13-5">Prettier (or at least fancier)
                  code block delimiters</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-28-14">Miscellaneous</a>

                <ul>
                  <li><a href="#sec-28-14-1">Ispell</a></li>

                  <li><a href="#sec-28-14-2">Easy templates</a></li>

                  <li><a href="#sec-28-14-3">Speed keys</a></li>

                  <li><a href="#sec-28-14-4">Code evaluation and security
                  issues</a></li>

                  <li><a href="#sec-28-14-5">A cleaner outline view</a></li>

                  <li><a href="#sec-28-14-6">Interaction with other
                  packages</a></li>

                  <li><a href="#sec-28-14-7">Org-crypt</a></li>
                </ul>
              </li>

              <li><a href="#sec-28-15">Obsoleted syntax (since Org
              7.8)</a></li>

              <li><a href="#sec-28-16">Other</a></li>

              <li><a href="#sec-28-17">A.3 Adding hyperlink types</a></li>

              <li><a href="#sec-28-18">A.5 Tables and lists in arbitrary
              syntax</a></li>

              <li><a href="#sec-28-19">A.6 Dynamic blocks</a></li>

              <li>
                <a href="#sec-28-20">Org-contrib</a>

                <ul>
                  <li><a href="#sec-28-20-1">Org-effectiveness</a></li>

                  <li><a href="#sec-28-20-2">Org-notmuch</a></li>

                  <li><a href="#sec-28-20-3">Google Weather</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li>
            <a href="#sec-29">TeX</a>

            <ul>
              <li><a href="#sec-29-1">Native TeX Mode</a></li>

              <li><a href="#sec-29-2">AUCTeX</a></li>

              <li><a href="#sec-29-3">Preview-LaTeX</a></li>

              <li><a href="#sec-29-4">RefTeX</a></li>

              <li><a href="#sec-29-5">BibTeX</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-30">SGML and HTML Modes</a>

            <ul>
              <li>
                <a href="#sec-30-1">HTML</a>

                <ul>
                  <li><a href="#sec-30-1-1">html-mode</a></li>

                  <li><a href="#sec-30-1-2">html-helper-mode</a></li>
                </ul>
              </li>

              <li><a href="#sec-30-2">XHTML</a></li>

              <li><a href="#sec-30-3">XML</a></li>

              <li><a href="#sec-30-4">Highlight the closing tag</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-31">Editing Programs</a>

            <ul>
              <li><a href="#sec-31-1">Major Modes for Programming
              Languages</a></li>

              <li><a href="#sec-31-2">Top-Level Definitions, or Defuns</a></li>

              <li><a href="#sec-31-3">Indentation for Programs</a></li>

              <li><a href="#sec-31-4">Commands for Editing with
              Parentheses</a></li>

              <li><a href="#sec-31-5">Manipulating Comments</a></li>

              <li><a href="#sec-31-6">Documentation Lookup</a></li>

              <li><a href="#sec-31-7">Hideshow minor mode</a></li>

              <li><a href="#sec-31-8">Completion for Symbol Names</a></li>

              <li><a href="#sec-31-9">Glasses minor mode</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-32">Compiling and Testing Programs</a>

            <ul>
              <li><a href="#sec-32-1">Running Compilations under Emacs</a></li>

              <li><a href="#sec-32-2">Compilation Mode</a></li>

              <li><a href="#sec-32-3">Searching with Grep under Emacs</a></li>

              <li><a href="#sec-32-4">Running Debuggers Under Emacs</a></li>

              <li><a href="#sec-32-5">Debugging Lisp programs</a></li>

              <li><a href="#sec-32-6">Executing Lisp Expressions</a></li>

              <li><a href="#sec-32-7">Libraries of Lisp Code for Emacs</a></li>

              <li><a href="#sec-32-8">Evaluating Emacs Lisp
              Expressions</a></li>

              <li><a href="#sec-32-9">Lisp Interaction Buffers</a></li>

              <li><a href="#sec-32-10">Other</a></li>

              <li><a href="#sec-32-11"><span class="todo TODO">TODO</span> From
              Thierry Volpiatto</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-33">Maintaining Programs</a>

            <ul>
              <li>
                <a href="#sec-33-1">Version Control</a>

                <ul>
                  <li><a href="#sec-33-1-1">Version Control and the Mode
                  Line</a></li>

                  <li><a href="#sec-33-1-2">Features of the Log Entry
                  Buffer</a></li>

                  <li><a href="#sec-33-1-3">Examining And Comparing Old
                  Revisions</a></li>

                  <li><a href="#sec-33-1-4">VC Directory Mode</a></li>

                  <li><a href="#sec-33-1-5">Customizing VC</a></li>
                </ul>
              </li>

              <li><a href="#sec-33-2">Change Logs</a></li>

              <li>
                <a href="#sec-33-3">Tags Tables</a>

                <ul>
                  <li><a href="#sec-33-3-1">Creating Tags Tables</a></li>

                  <li><a href="#sec-33-3-2">Selecting a Tags Table</a></li>

                  <li><a href="#sec-33-3-3">Finding a Tag</a></li>

                  <li><a href="#sec-33-3-4">Select from multiple TAGS
                  files</a></li>

                  <li><a href="#sec-33-3-5">Find Emacs Lisp symbol
                  definition</a></li>
                </ul>
              </li>

              <li>
                <a href="#sec-33-4">Emacs Development Environment</a>

                <ul>
                  <li><a href="#sec-33-4-1">Collection of Emacs Development
                  Environment Tools</a></li>

                  <li><a href="#sec-33-4-2">Advanced Code Browsing</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li>
            <a href="#sec-34">Abbrevs</a>

            <ul>
              <li><a href="#sec-34-1">Controlling Abbrev Expansion</a></li>

              <li>
                <a href="#sec-34-2">Dynamic Abbrev Expansion</a>

                <ul>
                  <li><a href="#sec-34-2-1">Hippie-expand</a></li>

                  <li><a href="#sec-34-2-2">Auto-Complete</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li>
            <a href="#sec-35">Dired, the Directory Editor</a>

            <ul>
              <li><a href="#sec-35-1">Entering Dired</a></li>

              <li><a href="#sec-35-2">Deleting Files with Dired</a></li>

              <li>
                <a href="#sec-35-3">Visiting Files in Dired</a>

                <ul>
                  <li><a href="#sec-35-3-1">Reuse Dired buffers</a></li>

                  <li>
                    <a href="#sec-35-3-2">Open file with default tool (open
                    directory with Windows Explorer)</a>

                    <ul>
                      <li><a href="#sec-35-3-2-1">Ask a WWW browser to display
                      file</a></li>

                      <li><a href="#sec-35-3-2-2">Many files at once (for
                      Windows)</a></li>
                    </ul>
                  </li>

                  <li><a href="#sec-35-3-3">Open file with w3m</a></li>
                </ul>
              </li>

              <li><a href="#sec-35-4">Dired Marks vs. Flags</a></li>

              <li><a href="#sec-35-5">Operating on Files</a></li>

              <li><a href="#sec-35-6">Updating the Dired Buffer</a></li>

              <li><a href="#sec-35-7">Dired and <code>find</code></a></li>

              <li><a href="#sec-35-8">Editing the Dired Buffer</a></li>

              <li><a href="#sec-35-9">Viewing Image Thumbnails in
              Dired</a></li>

              <li><a href="#sec-35-10">Dired Extra</a></li>

              <li><a href="#sec-35-11">Dired+</a></li>

              <li><a href="#sec-35-12">Emulation of <code>ls</code> on
              MS-Windows</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-36">The Calendar and the Diary</a>

            <ul>
              <li><a href="#sec-36-1">Calendar Motion</a></li>

              <li><a href="#sec-36-2">Scroll Calendar</a></li>

              <li><a href="#sec-36-3">Times of Sunrise/Sunset</a></li>

              <li><a href="#sec-36-4">Diary</a></li>

              <li><a href="#sec-36-5">Appointments</a></li>

              <li><a href="#sec-36-6">Advanced Calendar/Diary Usage</a></li>

              <li><a href="#sec-36-7">Calendar framework</a></li>
            </ul>
          </li>

          <li><a href="#sec-37">Sending Mail</a></li>

          <li>
            <a href="#sec-38">Gnus</a>

            <ul>
              <li>
                <a href="#sec-38-1">BBDB</a>

                <ul>
                  <li><a href="#sec-38-1-1">Interfaces</a></li>

                  <li><a href="#sec-38-1-2">Reader-specific Features</a></li>

                  <li><a href="#sec-38-1-3">Options</a></li>

                  <li><a href="#sec-38-1-4">Utilities</a></li>
                </ul>
              </li>
            </ul>
          </li>

          <li>
            <a href="#sec-39">Document Viewing</a>

            <ul>
              <li><a href="#sec-39-1">Navigation</a></li>

              <li><a href="#sec-39-2">Conversion</a></li>

              <li><a href="#sec-39-3">XXX</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-40">Running Shell Commands from Emacs</a>

            <ul>
              <li><a href="#sec-40-1">Single Shell</a></li>

              <li><a href="#sec-40-2">Interactive Shell</a></li>

              <li><a href="#sec-40-3">Shell Mode</a></li>

              <li><a href="#sec-40-4">Shell Prompts</a></li>

              <li><a href="#sec-40-5">History</a></li>

              <li><a href="#sec-40-6">Directory Tracking</a></li>

              <li><a href="#sec-40-7">Options</a></li>

              <li><a href="#sec-40-8">Terminal emulator</a></li>

              <li><a href="#sec-40-9">Term Mode</a></li>

              <li><a href="#sec-40-10">Paging in Term</a></li>

              <li><a href="#sec-40-11">Remote Host</a></li>

              <li><a href="#sec-40-12">Serial Terminal</a></li>

              <li><a href="#sec-40-13">Helper for GNU Emacs on w32</a></li>

              <li><a href="#sec-40-14">Emacs Speaks Statistics (ESS)</a></li>

              <li><a href="#sec-40-15">Proced</a></li>
            </ul>
          </li>

          <li><a href="#sec-41">Using Emacs Server</a></li>

          <li><a href="#sec-42">Printing Hard Copies</a></li>

          <li><a href="#sec-43">Sorting Text</a></li>

          <li><a href="#sec-44">Saving Emacs Sessions</a></li>

          <li>
            <a href="#sec-45">Hyperlinking and Navigation Features</a>

            <ul>
              <li>
                <a href="#sec-45-1">Emacs-w3m</a>

                <ul>
                  <li><a href="#sec-45-1-1">9.1 Turning Gnus into a web
                  browser!</a></li>

                  <li><a href="#sec-45-1-2">EWW (Emacs Web Browser)</a></li>
                </ul>
              </li>

              <li><a href="#sec-45-2">Google Maps</a></li>

              <li><a href="#sec-45-3">Babel translator</a></li>
            </ul>
          </li>

          <li><a href="#sec-46">Other Amusements</a></li>

          <li>
            <a href="#sec-47">Customization</a>

            <ul>
              <li><a href="#sec-47-1">Color</a></li>

              <li><a href="#sec-47-2">Color theme</a></li>

              <li><a href="#sec-47-3">Not sorted</a></li>

              <li><a href="#sec-47-4">Variables</a></li>

              <li><a href="#sec-47-5">Key Bindings</a></li>

              <li><a href="#sec-47-6">Syntax Table</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-48">Emacs Display</a>

            <ul>
              <li>
                <a href="#sec-48-1">Faces</a>

                <ul>
                  <li><a href="#sec-48-1-1">UTF-8</a></li>

                  <li><a href="#sec-48-1-2">Anti-aliasing</a></li>

                  <li><a href="#sec-48-1-3">Adjust the height of the default
                  face</a></li>
                </ul>
              </li>

              <li><a href="#sec-48-2">Images</a></li>
            </ul>
          </li>

          <li>
            <a href="#sec-49">Calc</a>

            <ul>
              <li>
                <a href="#sec-49-1">Introduction</a>

                <ul>
                  <li><a href="#sec-49-1-1">Basic Commands</a></li>

                  <li><a href="#sec-49-1-2">“Quick Calculator” Mode</a></li>
                </ul>
              </li>

              <li><a href="#sec-49-2">Embedded Mode</a></li>
            </ul>
          </li>

          <li><a href="#sec-50">IRC client for Emacs</a></li>

          <li><a href="#sec-51">Emacs and Microsoft Windows/MS-DOS</a></li>

          <li><a href="#sec-52">Reporting Bugs</a></li>

          <li>
            <a href="#sec-53">Startup time</a>

            <ul>
              <li><a href="#sec-53-1">Context</a></li>

              <li><a href="#sec-53-2">Timings from my system</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <div id="outline-container-sec-1" class="outline-2">
      <h2 id="sec-1">Description</h2>

      <div class="outline-text-2" id="text-1">
        <p>Emacs can be very difficult for the beginner, as many of the default
        choices may seem (and sometimes are) ugly or awkward.</p>

        <p>But – that’s the joy of Emacs – nearly everything can be adjusted!
        Hence, this set of customizations to “short-cut” that initial
        process.</p>
      </div>
    </div>

    <div id="outline-container-sec-2" class="outline-2">
      <h2 id="sec-2">Header</h2>

      <div class="outline-text-2" id="text-2">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp" id="current-time">
(format-time-string <span style="color: #036A07;">"%Y%m%d.%H%M"</span>)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;; </span><span style=
"color: #8D8D84; font-style: italic;">emacs-leuven.el --- Emacs configuration file with more pleasant defaults</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Copyright (C) 1999-2014 Fabrice Niessen</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Author: Fabrice Niessen &lt;(concat "fniessen" at-sign "pirilampo.org")&gt;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">URL: https://github.com/fniessen/emacs-leuven</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Version: 20140407.1624</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Keywords: emacs, dotfile, config</span>

<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;;    </span><span style=
"color: #8D8D84; font-style: italic;">___ _ __ ___   __ _  ___ ___</span>
<span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">/ _ \ '_ ` _ \ / _` |/ __/ __|</span>
<span style="color: #8D8D84;">;;  </span><span style=
"color: #8D8D84; font-style: italic;">|  __/ | | | | | (_| | (__\__ \</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(_)___|_| |_| |_|\__,_|\___|___/</span>
<span style="color: #8D8D84;">;;</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">This file is NOT part of GNU Emacs.</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">This file is free software: you can redistribute it and/or</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">modify it under the terms of the GNU General Public License as</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">published by the Free Software Foundation, either version 3 of</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the License, or (at your option) any later version.</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">This file is distributed in the hope that it will be useful,</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">GNU General Public License for more details.</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">You should have received a copy of the GNU General Public License</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">along with this file. If not, see <a href="http://www.gnu.org/licenses/">&lt;http://www.gnu.org/licenses/&gt;</a>.</span>

<span style="color: #8D8D84;">;;; </span><span style=
"color: #8D8D84; font-style: italic;">Commentary:</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Emacs configuration file with many packages already enabled and a more</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">pleasant set of defaults.</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Operating systems: supposed to work both for Windows and for Linux.</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Minimal .emacs configuration file:</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(add-to-list 'load-path "/path/to/emacs-leuven/")</span>
<span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(require 'emacs-leuven)</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">To get more debug info about the packages getting loaded, add the following</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">line before requiring Emacs Leuven.</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">;; show messages describing progress of loading Emacs Leuven</span>
<span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(setq leuven-load-verbose t)</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">To avoid be questioned about packages to add to your local Emacs</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">installation (though, I think you should install them), add the following</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">line before requiring Emacs Leuven.</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">;; do not (try to) install extra Emacs packages</span>
<span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(setq leuven-elpa-packages nil)</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">For help on the Emacs Editor, see (info "(emacs)")  &lt;== `C-x C-e' here!</span>

<span style="color: #8D8D84;">;;; </span><span style=
"color: #8D8D84; font-style: italic;">Citations:</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">- Show me your ~/.emacs and I will tell you who you are.</span>
<span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">-- Bogdan Maryniuk</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">- Emacs is like a laser guided missile.  It only has to be slightly</span>
<span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">mis-configured to ruin your whole day.</span>
<span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">-- Sean McGrath</span>
<span style="color: #8D8D84;">;;</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">- While any text editor can save your files, only Emacs can save your soul.</span>
<span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">-- Per Abrahamsen</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-3" class="outline-2">
      <h2 id="sec-3">Code</h2>

      <div class="outline-text-2" id="text-3">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;; </span><span style=
"color: #8D8D84; font-style: italic;">Code:</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">This file is only provided as an example.  Customize it to your own taste!</span>

(message <span style=
"color: #036A07;">"* --[ Loading Emacs Leuven 20140407.1624]--"</span>)

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">uptimes</span>
(<span style="color: #0000FF;">when</span> (string-match <span style=
"color: #036A07;">"XEmacs"</span> (version))
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">XEmacs doesn't have `</span><span style=
"color: #D0372D; font-style: italic;">float-time</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">float-time</span> ()
    <span style="color: #008000;">"Convert `</span><span style=
"color: #D0372D;">current-time</span><span style=
"color: #008000;">' to a floating point number."</span>
    (multiple-value-bind (s0 s1 s2) (current-time)
      (+ (* (float (ash 1 16)) s0) (float s1) (* 0.0000001 s2)))))

(<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">leuven-before-time</span> (float-time)
  <span style="color: #008000;">"Value of `</span><span style=
"color: #D0372D;">float-time</span><span style=
"color: #008000;">' before loading the Emacs Leuven library."</span>)

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn on Common Lisp support</span>
(<span style="color: #0000FF;">eval-when-compile</span> (<span style=
"color: #0000FF;">require</span> '<span style=
"color: #D0372D;">cl</span>))       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">provide useful things like `</span><span style="color: #D0372D; font-style: italic;">loop</span><span style="color: #8D8D84; font-style: italic;">' and</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">setf</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;; </span><span style=
"color: #8D8D84; font-style: italic;">User Customizable Internal Variables</span>

(<span style="color: #0000FF;">defgroup</span> <span style=
"color: #6434A3;">leuven</span> nil
  <span style=
"color: #008000;">"Set of Emacs customizations (better defaults)."</span>
  <span style="color: #006FE0;">:group</span> 'convenience
  <span style="color: #006FE0;">:group</span> 'text)

(<span style="color: #0000FF;">defcustom</span> <span style=
"color: #BA36A5;">leuven-load-verbose</span> nil
  <span style=
"color: #008000;">"If non-nil, means show messages describing progress of loading Emacs Leuven."</span>
  <span style="color: #006FE0;">:group</span> 'emacs-leuven
  <span style="color: #006FE0;">:type</span> 'integer)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(<span style="color: #0000FF;">when</span> (and (string-match <span style=
"color: #036A07;">"GNU Emacs"</span> (version))
           leuven-load-verbose)
  (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">message</span> (before leuven-when-was-that activate)
    <span style="color: #008000;">"Add time stamps to `</span><span style=
"color: #D0372D;">message</span><span style="color: #008000;">' output."</span>
    (ad-set-arg 0 (concat (format-time-string <span style=
"color: #036A07;">"[%Y-%m-%d %T."</span>)
                          (substring (format-time-string <span style=
"color: #036A07;">"%N"</span>) 0 3)
                          (format-time-string <span style=
"color: #036A07;">"] "</span>)
                          (ad-get-arg 0)))))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">allow quick include/exclude of setup parts -- DO NOT EDIT the DEFVAR!</span>
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-0-environment</span> t) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">required</span>
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-0-loading-libraries</span> t) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">required</span>
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-0-debugging</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-47-packages</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-1-screen</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-6-exiting</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-7-basic</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-8-minibuffer</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-10-help</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-11-mark</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-12-killing</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-13-registers</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-14-display</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-15-search</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-16-fixit</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-17-keyboard-macros</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-18-files</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-19-buffers</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-20-windows</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-21-frames</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-22-international</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-23-major-and-minor-modes</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-24-indentation</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-25-text</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-25.9-org-mode</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-25.10-tex-mode</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-26-programs</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-27-building</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-28-maintaining</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-29-abbrevs</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-30-dired</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-31-calendar-diary</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-32-sending-mail</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-34-gnus</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-35-document-view</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-36-shell</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-37-emacs-server</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-38-printing</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-39-sorting</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-42-saving-emacs-sessions</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-45-hyperlinking</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-46-amusements</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-48-customization</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-AppG-ms-dos</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-XX-emacs-display</span> t)
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-chapter-99-debugging</span> t)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven--load-times-list</span> nil
  <span style=
"color: #008000;">"List of chapters and time to load them."</span>)

(<span style="color: #0000FF;">defmacro</span> <span style=
"color: #006699;">leuven--chapter</span> (chapterid chaptername <span style=
"color: #6434A3;">&amp;rest</span> body)
  <span style="color: #008000;">"Wrap Lisp expressions as CHAPTERNAME.</span>
<span style=
"color: #008000;">Evaluated only when CHAPTERID is not nil.  Save execution times in the global</span>
<span style="color: #008000;">list `</span><span style=
"color: #D0372D;">leuven--load-times-list</span><span style=
"color: #008000;">'."</span>
  `(<span style="color: #0000FF;">when</span> ,chapterid
     (<span style="color: #0000FF;">let</span> (before-chapter-time
           this-chapter-time)
       (<span style="color: #0000FF;">when</span> leuven-load-verbose
         (message <span style="color: #036A07;">"** %s"</span> ,chaptername))
       (setq before-chapter-time (float-time))
       (setq leuven--before-section-time (float-time)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">init section time</span>
       (<span style="color: #0000FF;">progn</span> ,@body)
       (leuven--section (concat <span style=
"color: #036A07;">"["</span> ,chaptername <span style=
"color: #036A07;">" ends here]"</span>) 'end-of-chapter)
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">add fake closing section</span>
       (setq this-chapter-time
             (format <span style=
"color: #036A07;">"%.3f"</span> (- (float-time) before-chapter-time)))
       (add-to-list 'leuven--load-times-list
                    (concat <span style=
"color: #036A07;">"| "</span> ,chaptername <span style=
"color: #036A07;">" "</span>
                            <span style=
"color: #036A07;">"| "</span> this-chapter-time <span style=
"color: #036A07;">" |"</span>)))))

(<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven--before-section-time</span>
  <span style="color: #036A07;">"Value of `</span><span style=
"color: #D0372D;">float-time</span><span style=
"color: #036A07;">' before loading some section."</span>)

(<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--section</span> (sectionname <span style=
"color: #6434A3;">&amp;optional</span> end-of-chapter)
  <span style=
"color: #008000;">"Output time taken since last saved time.</span>
<span style=
"color: #008000;">Last time is saved in global variable `</span><span style=
"color: #D0372D;">leuven--before-section-time</span><span style=
"color: #008000;">'."</span>
  (<span style="color: #0000FF;">let</span> ((this-section-time (- (float-time)
                              leuven--before-section-time)))
    (<span style="color: #0000FF;">when</span> leuven-load-verbose
      (<span style=
"color: #0000FF;">when</span> (not (equal this-section-time 0.000))
        (message <span style=
"color: #036A07;">"    Section time: %.3f s"</span> this-section-time))
      (<span style=
"color: #0000FF;">unless</span> end-of-chapter (message <span style=
"color: #036A07;">"*** %s"</span> sectionname)))
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">for next one</span>
    (setq leuven--before-section-time (float-time))))
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-4" class="outline-2">
      <h2 id="sec-4">Loading Libraries of Lisp Code for Emacs</h2>

      <div class="outline-text-2" id="text-4">
        <p>Adding the right Lisp directories to your <code>load-path</code>
        (list of directories where Emacs Lisp libraries – <code>.el</code> and
        <code>.elc</code> files – are installed) must be the very <b>first
        thing</b> in your <code>.emacs</code> file, before the first time
        packages are required, to make sure that you’re not picking up bits and
        pieces from older files (bundled with Emacs, and loaded before the path
        to the <b>newest</b> versions are set).</p>

        <p>The most important directories are the last to be added to
        <code>load-path</code> (so that they become the first of the list)!</p>

        <p>Use <code>M-x list-load-path-shadows &lt;RET&gt;</code> to display a
        list of external Emacs Lisp files that shadow Emacs builtins (listing
        potential load path problems).</p>

        <p>Some Emacs modes are over 10K lines of code (e.g.
        <code>nxml-mode</code>, <code>CEDET</code>). Many packages (e.g.
        <code>Org</code>, <code>Gnus</code>) make use of the
        <code>autoload</code> feature, so that you only need to load a single
        file that define autoloaded functions.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* Loading Libraries of Lisp Code for Emacs</span>

(leuven--chapter leuven-chapter-0-loading-libraries <span style=
"color: #036A07;">"0 Loading Libraries"</span>
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">load-path enhancement</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-add-to-load-path</span> (this-directory)
    <span style=
"color: #008000;">"Add THIS-DIRECTORY at the beginning of the load-path, if it exists."</span>
    (<span style="color: #0000FF;">when</span> (and this-directory
               (file-directory-p this-directory))
      <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Add </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">warning</span><span style="color: #8D8D84; font-style: italic;"> if directory does not exist</span>
      (<span style=
"color: #0000FF;">let*</span> ((this-directory (expand-file-name this-directory)))

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">directories containing a `</span><span style="color: #D0372D; font-style: italic;">.nosearch</span><span style="color: #8D8D84; font-style: italic;">' file (such as</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`auctex-11.87\style') should not made part of `</span><span style="color: #D0372D; font-style: italic;">load-path</span><span style="color: #8D8D84; font-style: italic;">'.</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> `</span><span style="color: #D0372D; font-style: italic;">RCS</span><span style="color: #8D8D84; font-style: italic;">' and `</span><span style="color: #D0372D; font-style: italic;">CVS</span><span style="color: #8D8D84; font-style: italic;">' directories should also be excluded.</span>
        (<span style=
"color: #0000FF;">unless</span> (file-exists-p (concat this-directory <span style="color: #036A07;">"/.nosearch"</span>))
          (add-to-list 'load-path this-directory)
          (<span style="color: #0000FF;">when</span> leuven-load-verbose
            (message <span style=
"color: #036A07;">"(Info) Added `</span><span style=
"color: #D0372D;">%s</span><span style=
"color: #036A07;">' to `</span><span style=
"color: #D0372D;">load-path</span><span style=
"color: #036A07;">'"</span> this-directory))))))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">remember this directory</span>
  (<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">leuven--directory</span>
    (file-name-directory (or load-file-name (buffer-file-name)))
    <span style="color: #008000;">"Directory path of Emacs Leuven."</span>)

  (leuven-add-to-load-path
   (concat leuven--directory <span style="color: #036A07;">"site-lisp"</span>))
</pre>
        </div>

        <p><code>leuven-local-repos-directory</code> is where you put Emacs
        Git/SVN/CSV repositories.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-local-repos-directory</span> <span style=
"color: #036A07;">"~/Public/Repositories/"</span>
    <span style=
"color: #008000;">"Directory containing additional Emacs Lisp public repositories."</span>)

  (leuven-add-to-load-path
   (concat leuven-local-repos-directory <span style=
"color: #036A07;">"babel"</span>))
  (leuven-add-to-load-path
   (concat leuven-local-repos-directory <span style=
"color: #036A07;">"emacs-bookmark-extension"</span>))
</pre>
        </div>

        <table class="inlinetask" width="100%">
          <tr>
            <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

            <td width="100%"><b>Specify variables using
            `defcustom’</b><br /></td>
          </tr>
        </table>

        <p><code>leuven-user-lisp-directory</code> is there so that you have an
        easy way of installing <b>your own Emacs add-ons</b> (which may be
        specific to the version of Emacs you’re running). This keeps your local
        add-ons apart from distro supplied ones.</p>

        <p>It also means you can do a complete re-install of Emacs (or even
        your Linux distro) without impacting on stuff you have added by
        hand.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-user-lisp-directory</span> <span style=
"color: #036A07;">"~/.emacs.d/lisp/"</span>
    <span style=
"color: #008000;">"Directory containing personal additional Emacs Lisp packages."</span>)

  (leuven-add-to-load-path leuven-user-lisp-directory)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">require a feature/library if available; if not, fail silently</span>
  (<span style="color: #0000FF;">unless</span> (fboundp 'try-require)
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">try-require</span> (feature)
      <span style=
"color: #008000;">"Attempt to load a feature or library.</span>
<span style=
"color: #008000;">    Return true if the library given as argument is successfully loaded.  If</span>
<span style="color: #008000;">    not, just print a message."</span>
      (<span style="color: #0000FF;">condition-case</span> err
          (<span style="color: #0000FF;">progn</span>
            (<span style="color: #0000FF;">if</span> (stringp feature)
                (load-library feature)
              (<span style="color: #0000FF;">require</span> <span style=
"color: #D0372D;">feature</span>))
            t)                              <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">necessary for correct behavior in</span>
                                            <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">conditional expressions</span>
        (file-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span>
         (message <span style="color: #036A07;">"Requiring `</span><span style=
"color: #D0372D;">%s</span><span style=
"color: #036A07;">'... missing"</span> feature)
         nil))))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">TEMPORARY</span>
  (<span style="color: #0000FF;">unless</span> (fboundp 'with-eval-after-load)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">wrapper around `</span><span style=
"color: #D0372D; font-style: italic;">eval-after-load</span><span style=
"color: #8D8D84; font-style: italic;">' (added in GNU Emacs 24.4)</span>
    (<span style="color: #0000FF;">defmacro</span> <span style=
"color: #006699;">with-eval-after-load</span> (mode <span style=
"color: #6434A3;">&amp;rest</span> body)
      <span style="color: #008000;">"`</span><span style=
"color: #D0372D;">eval-after-load</span><span style=
"color: #008000;">' MODE evaluate BODY."</span>
      (<span style="color: #0000FF;">declare</span> (indent defun))
      `(eval-after-load ,mode
         '(<span style="color: #0000FF;">progn</span> ,@body))))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">if</span> (try-require 'idle-require)

      (<span style="color: #0000FF;">progn</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">idle time in seconds after which autoload functions will be loaded</span>
        (setq idle-require-idle-delay 5)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">time in seconds between automatically loaded functions</span>
        (setq idle-require-load-break 2))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">fail-safe for `</span><span style=
"color: #D0372D; font-style: italic;">idle-require</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">idle-require</span> (feature <span style=
"color: #6434A3;">&amp;optional</span> file no<span style=
"color: #CC0000; background-color: #FFFF88;">error</span>)
      (try-require feature)))

  (add-hook 'after-init-hook
            (<span style="color: #0000FF;">lambda</span> ()
              (<span style=
"color: #0000FF;">when</span> (fboundp 'idle-require-mode)
                <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">starts loading</span>
                (idle-require-mode 1))))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 0-loading-libraries ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-5" class="outline-2">
      <h2 id="sec-5">Environment</h2>

      <div class="outline-text-2" id="text-5">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(list system-configuration system-type window-system)
</pre>
        </div>

        <dl class="org-dl">
          <dt><code>system-type</code></dt>

          <dd><code>darwin</code>, <code>gnu/linux</code>,
          <code>cygwin</code>.</dd>

          <dt><code>system-configuration</code></dt>

          <dd><code>i686-pc-linux-gnu</code>, <code>i686-pc-cygwin</code>.</dd>

          <dt><code>window-system</code></dt>

          <dd><code>nil</code>, <code>w32</code>, <code>x</code>,
          <code>mac</code>. Use <code>(display-graphic-p)</code> in
          conditions.</dd>
        </dl>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* Environment</span>

(leuven--chapter leuven-chapter-0-environment <span style=
"color: #036A07;">"0 Environment"</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Type of OS</span>

  (leuven--section <span style="color: #036A07;">"Type of OS"</span>)

  (<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">running-ms-windows</span>
    (eq system-type 'windows-nt)
    <span style=
"color: #008000;">"Running a native Microsoft Windows version of Emacs."</span>)

  (<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">running-cygwin</span>
    (eq system-type 'cygwin)
    <span style="color: #008000;">"Running a Cygwin version of Emacs."</span>)

  (<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">running-gnu-linux</span>
    (eq system-type 'gnu/linux)
    <span style=
"color: #008000;">"Running a GNU/Linux version of Emacs."</span>)

  (<span style="color: #0000FF;">defmacro</span> <span style=
"color: #006699;">MSWindows</span> (<span style=
"color: #6434A3;">&amp;rest</span> body)
    (list 'if running-ms-windows
          (cons 'progn body)))

  (<span style="color: #0000FF;">defmacro</span> <span style=
"color: #006699;">GNULinux</span> (<span style=
"color: #6434A3;">&amp;rest</span> body)
    (list 'if running-gnu-linux
          (cons 'progn body)))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Window system</span>

  (leuven--section <span style="color: #036A07;">"Window system"</span>)

  (<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">running-x-window</span>
    (eq window-system 'x)
    <span style="color: #008000;">"Running X Window System."</span>)

  (<span style="color: #0000FF;">defmacro</span> <span style=
"color: #006699;">XWindow</span> (<span style=
"color: #6434A3;">&amp;rest</span> body)
    <span style=
"color: #008000;">"Execute any number of forms if running X Window System."</span>
    (list 'if running-x-window
          (cons 'progn body)))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** MS Windows</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> The path is not correct under Cygwin Emacs (gsprint.exe not found)</span>
  (<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">windows-program-files-dir</span>   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">sys-path</span>
    (<span style="color: #0000FF;">if</span> running-ms-windows
        (file-name-as-directory (getenv <span style=
"color: #036A07;">"PROGRAMFILES"</span>))
      <span style="color: #036A07;">"/usr/local/bin/"</span>)
    <span style=
"color: #008000;">"Defines the default Windows Program Files folder."</span>)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Testing Emacs versions</span>

  (leuven--section <span style="color: #036A07;">"Emacs version"</span>)

  (<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">running-gnu-emacs</span>
    (string-match <span style="color: #036A07;">"GNU Emacs"</span> (version))
    <span style="color: #008000;">"Running GNU Emacs."</span>)

  (<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">running-xemacs</span>
    (string-match <span style="color: #036A07;">"XEmacs"</span> (version))
    <span style="color: #008000;">"Running XEmacs."</span>)

  (<span style="color: #0000FF;">defmacro</span> <span style=
"color: #006699;">GNUEmacs</span> (<span style=
"color: #6434A3;">&amp;rest</span> body)
    <span style=
"color: #008000;">"Execute any number of forms if running GNU Emacs."</span>
    (list 'if running-gnu-emacs
          (cons 'progn body)))

  (<span style="color: #0000FF;">defmacro</span> <span style=
"color: #006699;">GNUEmacs24</span> (<span style=
"color: #6434A3;">&amp;rest</span> body)
    (list 'if (string-match <span style=
"color: #036A07;">"GNU Emacs 24"</span> (version))
          (cons 'progn body)))

  (<span style="color: #0000FF;">defmacro</span> <span style=
"color: #006699;">XEmacs</span> (<span style=
"color: #6434A3;">&amp;rest</span> body)
    <span style=
"color: #008000;">"Execute any number of forms if running XEmacs."</span>
    (list 'if running-xemacs
          (cons 'progn body)))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Testing file accessibility</span>

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--file-exists-and-executable-p</span> (file)
    <span style=
"color: #008000;">"Make sure the file FILE exists and is executable."</span>
    (<span style="color: #0000FF;">if</span> file
        (<span style="color: #0000FF;">if</span> (file-executable-p file)
            file
          (message <span style="color: #036A07;">"(</span><span style=
"color: #CC0000; background-color: #FFFF88;">warning</span><span style=
"color: #036A07;">) Can't find executable `</span><span style=
"color: #D0372D;">%s</span><span style="color: #036A07;">'"</span> file)
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">sleep 1.5 s so that you can see the </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">warning</span>
          (sit-for 1.5))
      (<span style=
"color: #CC0000; background-color: #FFFF88; font-weight: bold;">error</span> <span style="color: #036A07;">"leuven--file-exists-and-executable-p: missing operand"</span>)))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Init</span>

  (leuven--section <span style="color: #036A07;">"Init"</span>)

  (XEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't load init file from `</span><span style="color: #D0372D; font-style: italic;">~/.xemacs/init.el</span><span style="color: #8D8D84; font-style: italic;">' (and don't offer its</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">migration)</span>
    (setq load-home-init-file t))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ensure that the echo area is always visible during the early stage of</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">startup (useful in case of </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">)</span>
  (modify-all-frames-parameters
   '((height . 32)))

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 0 ends here</span>
</pre>
        </div>

        <table class="inlinetask" width="100%">
          <tr>
            <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

            <td width="100%">
              <b>Function for finding executables</b><br />

              <p>See function <code>--find-program</code> at <a href=
              "http://www.visualco.de/src/elisp/.emacs.el.html">http://www.visualco.de/src/elisp/.emacs.el.html</a>.</p>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div id="outline-container-sec-6" class="outline-2">
      <h2 id="sec-6">Debugging</h2>

      <div class="outline-text-2" id="text-6">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* Debugging</span>

(leuven--chapter leuven-chapter-0-debugging <span style=
"color: #036A07;">"0 Debugging"</span>
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">get the backtrace when uncaught </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s occur</span>
  (setq debug-on-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span> t)               <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">will be unset at the end</span>

  (XEmacs
    (setq stack-trace-on-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span> t))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">hit `</span><span style=
"color: #D0372D; font-style: italic;">C-g</span><span style=
"color: #8D8D84; font-style: italic;">' while it's frozen to get an Emacs Lisp backtrace</span>
  (setq debug-on-quit nil)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 0 ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-7" class="outline-2">
      <h2 id="sec-7">Emacs Lisp Packages</h2>

      <div class="outline-text-2" id="text-7"></div>

      <div id="outline-container-sec-7-1" class="outline-3">
        <h3 id="sec-7-1">The Package Menu Buffer</h3>

        <div class="outline-text-3" id="text-7-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 47 Emacs Lisp (info "(emacs)Packages")</span>

(leuven--chapter leuven-chapter-47-packages <span style=
"color: #036A07;">"47 Emacs Lisp Packages"</span>
</pre>
          </div>

          <p>To upgrade packages after running
          <code>package-list-packages</code>, type:</p>

          <ul class="org-ul">
            <li><code>U</code> (<i>mark Upgradable packages</i>) and then</li>

            <li><code>x</code> (<i>eXecute the installs and
            deletions</i>).</li>
          </ul>

          <p>When it’s done installing all the packages, you delete the
          obsolete packages by hit <code>y</code> (<i>Yes</i>) when asked.</p>
        </div>
      </div>

      <div id="outline-container-sec-7-2" class="outline-3">
        <h3 id="sec-7-2">Package Installation</h3>

        <div class="outline-text-3" id="text-7-2">
          <ul class="org-ul">
            <li>User’s Emacs Lisp packages in <code>package-user-dir</code>
            (<code>~/.emacs.d/elpa</code>)</li>

            <li>System-wide Emacs Lisp packages in
            <code>package-directory-list</code></li>
          </ul>

          <p>In Marmalade, the developers themselves do the packaging. In
          MELPA, packages are generated programmatically from upstream
          Git-based sources.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 47.2 Package Installation</span>

  (leuven--section <span style=
"color: #036A07;">"47.2 Package Installation"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">simple package system for GNU Emacs</span>
  (GNUEmacs
    (<span style="color: #0000FF;">when</span> (try-require 'package)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">archives from which to fetch</span>
      (setq package-archives
            (append '((<span style=
"color: #036A07;">"org"</span>       . <span style=
"color: #036A07;">"http://orgmode.org/elpa/"</span>)
                      (<span style=
"color: #036A07;">"melpa"</span>     . <span style=
"color: #036A07;">"http://melpa.milkbox.net/packages/"</span>)
                      (<span style=
"color: #036A07;">"marmalade"</span> . <span style=
"color: #036A07;">"http://marmalade-repo.org/packages/"</span>)
                      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">("ELPA"      . "http://tromey.com/elpa/")</span>
                      )
                    package-archives))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">load the latest version of all installed packages, and activate them</span>
      (package-initialize)              <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">add ALL ELPA subdirs to `</span><span style="color: #D0372D; font-style: italic;">load-path</span><span style="color: #8D8D84; font-style: italic;">'</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">and load `</span><span style=
"color: #D0372D; font-style: italic;">&lt;pkg&gt;-autoloads.el</span><span style="color: #8D8D84; font-style: italic;">'</span>

      (<span style="color: #0000FF;">defcustom</span> <span style=
"color: #BA36A5;">leuven-elpa-packages</span>
        '(ace-jump-mode auctex auto-complete bbdb bookmark+ boxquote calfw circe
          csv-mode dictionary dired+ dired-single ess fuzzy git-commit-mode
          graphviz-dot-mode helm htmlize idle-require info+ interaction-log
          ledger-mode leuven-theme org-mime pager rainbow-mode redo+
          sml-modeline tidy yasnippet
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">jabber multi-term</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">paredit redshank w3m</span>
          )
        <span style=
"color: #008000;">"A list of packages to ensure are installed at Emacs startup."</span>
        <span style="color: #006FE0;">:group</span> 'emacs-leuven
        <span style="color: #006FE0;">:type</span> '(repeat (string)))

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--missing-elpa-packages</span> ()
        <span style=
"color: #008000;">"List packages to install which are neither built-in nor already installed."</span>
        (<span style="color: #0000FF;">let</span> (missing-elpa-packages)
          (<span style=
"color: #0000FF;">dolist</span> (pkg leuven-elpa-packages)
            (<span style=
"color: #0000FF;">unless</span> (or (package-installed-p pkg)
                        (locate-library (symbol-name pkg)))
              (push pkg missing-elpa-packages)))
          missing-elpa-packages))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">propose to install all the packages specified in `</span><span style="color: #D0372D; font-style: italic;">leuven-elpa-packages</span><span style="color: #8D8D84; font-style: italic;">'</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">which are missing</span>
      (<span style=
"color: #0000FF;">let</span> ((missing-elpa-packages (leuven--missing-elpa-packages)))
        (<span style="color: #0000FF;">when</span> missing-elpa-packages
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">download once the ELPA archive description</span>
          (package-refresh-contents)    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Ensure that the list of packages is</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">up-to-date.  Otherwise, new packages</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">(not present in the cache of the ELPA</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">contents) won't install.</span>
          (<span style=
"color: #0000FF;">dolist</span> (pkg missing-elpa-packages)
            (<span style=
"color: #0000FF;">if</span> (yes-or-no-p (format <span style=
"color: #036A07;">"Install ELPA package `</span><span style=
"color: #D0372D;">%s</span><span style="color: #036A07;">'? "</span> pkg))
                (<span style="color: #0000FF;">ignore-</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #0000FF;">s</span>
                  (package-install pkg))
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">must be run after initializing</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">package-initialize</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
              (message (concat <span style=
"color: #036A07;">"Customize `</span><span style=
"color: #D0372D;">leuven-elpa-packages</span><span style=
"color: #036A07;">' to ignore "</span>
                               <span style=
"color: #036A07;">"the `</span><span style=
"color: #D0372D;">%s</span><span style=
"color: #036A07;">' package at next startup..."</span>) pkg)
              (sit-for 1.5)))))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't truncate package names in Emacs package list</span>
      (add-hook 'package-menu-mode-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  (setq tabulated-list-format
                        [(<span style=
"color: #036A07;">"Package"</span> 28 package-menu--name-predicate)
                         (<span style=
"color: #036A07;">"Version"</span> 14 nil)
                         (<span style=
"color: #036A07;">"Status"</span>  10 package-menu--status-predicate)
                         (<span style=
"color: #036A07;">"Description"</span> 0 nil)])
                  (tabulated-list-init-header)))))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 47 ends here</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-7-3" class="outline-3">
        <h3 id="sec-7-3">Check Org mode version</h3>

        <div class="outline-text-3" id="text-7-3">
          <p>The following block checks for the Org mode version, and warns the
          user if not equal to 8 or more.</p>

          <p>Though, it does load the full Org mode right from the start…</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">version info</span>
(<span style=
"color: #0000FF;">let</span> ((org-install-dir (file-name-directory (locate-library <span style="color: #036A07;">"org-loaddefs"</span>)))
      (org-dir (file-name-directory (locate-library <span style=
"color: #036A07;">"org"</span>)))) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">org.(el|elc)</span>
  (message <span style=
"color: #036A07;">"Org mode version %s (org @ %s)"</span>
           (org-version)
           (<span style=
"color: #0000FF;">if</span> (string= org-dir org-install-dir)
               org-install-dir
             (concat <span style=
"color: #036A07;">"mixed installation! "</span> org-install-dir <span style=
"color: #036A07;">" and "</span> org-dir)
             (sit-for 1.5))))

(<span style="color: #0000FF;">unless</span> (string-match <span style=
"color: #036A07;">"^8"</span> (org-version))
  (message (concat <span style=
"color: #036A07;">"This version of Org mode is no longer supported.  "</span>
                   <span style=
"color: #036A07;">"Please upgrade to 8 or later"</span>))
  (sit-for 1.5))
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-8" class="outline-2">
      <h2 id="sec-8">The Organization of the Screen</h2>

      <div class="outline-text-2" id="text-8">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 1 The Organization of the (info "(emacs)Screen")</span>

(leuven--chapter leuven-chapter-1-screen <span style=
"color: #036A07;">"1 The Organization of the Screen"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-8-1" class="outline-3">
        <h3 id="sec-8-1">The Echo Area</h3>

        <div class="outline-text-3" id="text-8-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 1.2 The (info "(emacs)Echo Area")</span>

  (leuven--section <span style=
"color: #036A07;">"1.2 (emacs) The Echo Area"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't truncate the message log buffer when it becomes large</span>
  (setq message-log-max t)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 1 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-9" class="outline-2">
      <h2 id="sec-9">Exiting Emacs</h2>

      <div class="outline-text-2" id="text-9">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 6 (info "(emacs)Exiting") Emacs</span>

(leuven--chapter leuven-chapter-6-exiting <span style=
"color: #036A07;">"6 Exiting Emacs"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">quit with Alt + F4</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;M-f4&gt;"</span>) 'save-buffers-kill-terminal)

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 6 ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-10" class="outline-2">
      <h2 id="sec-10">Basic Editing Commands</h2>

      <div class="outline-text-2" id="text-10">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 7 (info "(emacs)Basic") Editing Commands</span>

(leuven--chapter leuven-chapter-7-basic <span style=
"color: #036A07;">"7 Basic Editing Commands"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-10-1" class="outline-3">
        <h3 id="sec-10-1">Inserting Text</h3>

        <div class="outline-text-3" id="text-10-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 7.1 (info "(emacs)Inserting Text")</span>

  (leuven--section <span style=
"color: #036A07;">"7.1 (emacs)Inserting Text"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enter characters by their code in octal (for `C-q NNN &lt;RET&gt;')</span>
  (setq read-quoted-char-radix 8)       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">16 for hexadecimal (for Unicode char)</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-10-2" class="outline-3">
        <h3 id="sec-10-2">Moving Point Location</h3>

        <div class="outline-text-3" id="text-10-2">
          <dl class="org-dl">
            <dt>M-r</dt>

            <dd><code>move-to-window-line</code>.</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 7.2 (info "(emacs)Moving Point") Location</span>

  (leuven--section <span style=
"color: #036A07;">"7.2 (emacs)Moving Point Location"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't add newlines to end of buffer when scrolling</span>
  (setq next-line-add-newlines nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">move point to a given line number (XEmacs default)</span>
  (GNUEmacs
    (global-set-key
      (kbd <span style="color: #036A07;">"M-g"</span>) 'goto-line))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">print the current buffer line number</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"M-G"</span>) 'what-line)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-10-3" class="outline-3">
        <h3 id="sec-10-3">Basic Undoing Changes</h3>

        <div class="outline-text-3" id="text-10-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 7.4 (info "(emacs)Basic Undo")ing Changes</span>

  (leuven--section <span style=
"color: #036A07;">"7.4 (emacs)Basic Undoing Changes"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">undo some previous changes</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;f11&gt;"</span>) 'undo)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">redo the most recent undo</span>
  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"redo+"</span>)
    (autoload 'redo <span style="color: #036A07;">"redo+"</span> <span style=
"color: #008000;">"Redo the the most recent undo."</span> t)
    (global-set-key
      (kbd <span style="color: #036A07;">"&lt;S-f11&gt;"</span>) 'redo))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 7 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-11" class="outline-2">
      <h2 id="sec-11">The Minibuffer</h2>

      <div class="outline-text-2" id="text-11">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 8 The (info "(emacs)Minibuffer")</span>

(leuven--chapter leuven-chapter-8-minibuffer <span style=
"color: #036A07;">"8 The Minibuffer"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">how long to display an echo-area message when the minibuffer is active</span>
  (setq minibuffer-message-timeout 0.5)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-11-1" class="outline-3">
        <h3 id="sec-11-1">Editing in the Minibuffer</h3>

        <div class="outline-text-3" id="text-11-1">
          <p>If the output is short enough to display in the echo area (which
          is determined by the variables <code>resize-mini-windows</code> and
          <code>max-mini-window-height</code>), it is shown in echo area.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 8.3 (info "(emacs)Minibuffer Edit")ing</span>

  (leuven--section <span style=
"color: #036A07;">"8.3 (emacs)Minibuffer Editing"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">minibuffer and echo area windows resize vertically as necessary to fit</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the text displayed in them</span>
  (setq resize-mini-windows t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-11-2" class="outline-3">
        <h3 id="sec-11-2">Completion</h3>

        <div class="outline-text-3" id="text-11-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 8.4 (info "(emacs)Completion")</span>

  (leuven--section <span style=
"color: #036A07;">"8.4 (emacs)Completion"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't consider case significant in completion (GNU Emacs default)</span>
  (XEmacs
    (setq completion-ignore-case t))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ignore case when reading a file name</span>
  (setq read-file-name-completion-ignore-case t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ignore case when reading a buffer name</span>
  (setq read-buffer-completion-ignore-case t)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">provide the same facility of `ls --color' inside Emacs</span>
  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"dircolors"</span>)
    (autoload 'dircolors <span style=
"color: #036A07;">"dircolors"</span> nil t)
    (add-hook 'completion-list-mode-hook 'dircolors))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-11-3" class="outline-3">
        <h3 id="sec-11-3">Repeating Minibuffer Commands</h3>

        <div class="outline-text-3" id="text-11-3">
          <p>Use <code>M-x list-command-history</code> to display the entire
          command history, showing all the commands <code>C-x &lt;ESC&gt;
          &lt;ESC&gt;</code> can repeat, most recent first.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 8 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-12" class="outline-2">
      <h2 id="sec-12">Help</h2>

      <div class="outline-text-2" id="text-12">
        <p>In general, the following functions are very interesting for finding
        useful functions and documentation.</p>

        <dl class="org-dl">
          <dt><code>apropos-documentation</code> (<code>C-h d</code>)</dt>

          <dd><b>Show symbols whose documentation contains matches for
          PATTERN.</b> For example, <code>C-h d yank properties
          &lt;RET&gt;</code>.</dd>

          <dt><code>describe-function</code> (<code>C-h f</code>)</dt>

          <dd>Used with TAB completion to show documentation of functions.</dd>

          <dt><code>elisp-index-search</code> (<code>C-h E</code> in Emacs
          Leuven)</dt>

          <dd>Look up documentation on broad Emacs Lisp topics (in the indices
          of the Emacs Lisp Reference Manual).</dd>

          <dt><code>info-lookup-symbol</code> (<code>C-h S</code>, or
          <code>C-f1</code> in Emacs Leuven)</dt>

          <dd><b>Bring the relevant section from the manual, which describes
          the topic in more detail.</b></dd>
        </dl>

        <p>With all prefix keys, if you follow them with <code>C-h</code>
        (<code>h</code> for help), a list of key bindings in that prefix map is
        displayed. This is automatic and is one of the self-documenting
        features of Emacs.</p>

        <p>Try, for example <code>C-x C-h</code> or <code>C-c C-x C-h</code> to
        see what it does. I do use it to remind myself of rarely used rectangle
        commands: <code>C-x r C-h</code>.</p>

        <p>FYI, <code>catman</code> create the database files that are used by
        <code>apropos</code> or <code>man -k</code>.</p>

        <p>Note about PHP documentation lookup – PHP Mode has a nice feature to
        lookup the function’s definition in PHP’s manual in your web browser
        (<code>M-x php-search-documentation</code> or <code>C-c C-f</code>).
        You can combine it with Emacs-w3m to get the relevant manual page
        without leaving Emacs.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 10 (info "(emacs)Help")</span>

(leuven--chapter leuven-chapter-10-help <span style=
"color: #036A07;">"10 Help"</span>
</pre>
        </div>

        <p><b>Close</b> the help buffer by pressing <code>Q</code>.</p>
      </div>

      <div id="outline-container-sec-12-1" class="outline-3">
        <h3 id="sec-12-1">Help Summary</h3>

        <div class="outline-text-3" id="text-12-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.1 (info "(emacs)Help Summary")</span>

  (leuven--section <span style=
"color: #036A07;">"10.1 (emacs)Help Summary"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">find convenient unbound keystrokes (undefined key bindings)</span>
  (autoload 'describe-unbound-keys <span style=
"color: #036A07;">"unbound"</span>
    <span style=
"color: #008000;">"Display a list of unbound keystrokes of complexity no greater than MAX."</span> t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">avoid the description of all minor modes</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">describe-major-mode</span> ()
    <span style="color: #008000;">"Describe only `</span><span style=
"color: #D0372D;">major-mode</span><span style="color: #008000;">'."</span>
    (interactive)
    (describe-function major-mode))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">look up subject in (the indices of the) Emacs Lisp manual</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-h E"</span>) 'elisp-index-search)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-2" class="outline-3">
        <h3 id="sec-12-2">Apropos</h3>

        <div class="outline-text-3" id="text-12-2">
          <p>You can ask what pertains to a given topic by typing <code>M-x
          apropos &lt;RET&gt; pattern &lt;RET&gt;</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.4 (info "(emacs)Apropos")</span>

  (leuven--section <span style="color: #036A07;">"10.4 (emacs)Apropos"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"apropos"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">check all variables and non-interactive functions as well</span>
    (setq apropos-do-all t))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show variables whose name matches the pattern</span>
  (GNUEmacs
    (global-set-key
      (kbd <span style="color: #036A07;">"C-h A"</span>) 'apropos-variable))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-12-3" class="outline-3">
        <h3 id="sec-12-3">Misc Help Commands</h3>

        <div class="outline-text-3" id="text-12-3">
          <p>The <code>*Messages*</code> buffer is called the "
          <b>Message-Log</b>” on XEmacs (note the initial space). To display
          the message log, execute the command <code>M-x
          show-message-log</code>.</p>

          <p><code>update-info-dir</code></p>

          <p>The utility <code>install-info</code> is used to maintain the
          <code>info/dir</code> file.</p>

          <p><code>C-h K</code> goes to the node in the Emacs manual describing
          the command bound to a key.</p>

          <p>In a manual, these key bindings will make your life easier:</p>

          <dl class="org-dl">
            <dt><code>^</code></dt>

            <dd>Move “up” from this node.</dd>

            <dt><code>]</code></dt>

            <dd>Go forward one node, considering all nodes as forming one
            sequence.</dd>

            <dt><code>l</code></dt>

            <dd>Move back in history to the last node you were at.</dd>

            <dt><code>L</code></dt>

            <dd>Go to menu of visited nodes.</dd>

            <dt><code>i</code></dt>

            <dd><b>Search for a topic in this manual’s Index</b> and go to
            index entry.</dd>

            <dt>s</dt>

            <dd><b>Search for a regexp</b> and select node it’s found in.</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.8 (info "(emacs)Misc Help")</span>

  (leuven--section <span style=
"color: #036A07;">"10.8 (emacs)Misc Help"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enter Info documentation browser</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;f1&gt;"</span>) 'info)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display symbol definitions, as found in the relevant manual</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(for AWK, C, Emacs Lisp, LaTeX, M4, Makefile, Sh and other languages that</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">have documentation in Info)</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;C-f1&gt;"</span>) 'info-lookup-symbol)
</pre>
          </div>

          <p>When Info is called, the variable <code>Info-directory-list</code>
          is populated from:</p>

          <ol class="org-ol">
            <li>the <code>INFOPATH</code> environment variable, or (if
            unset)</li>

            <li>the <code>Info-default-directory-list</code> variable –
            non-existent directories will be removed when copied to
            <code>Info-directory-list</code></li>
          </ol>

          <p>The best would be to set the <code>INFOPATH</code> environment
          variable so that you see the same manuals outside of Emacs, in the
          same shell from which you invoke Emacs.</p>

          <p>However, as EmacsW32 doesn’t see that Cygwin environment variable
          (it would well work with a Windows environment variable), I prefer to
          try and put the Windows configuration inside the Emacs configuration
          files.</p>

          <p>Normally, <code>Info-directory-list</code> is not intended to be
          settable by the user. But we must do so if we want to force our Info
          manuals before the standard ones (from Emacs).</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"info"</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of directories to search for Info documentation files (in the order</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">they are listed)</span>
    (<span style="color: #0000FF;">when</span> running-ms-windows
      (setq Info-directory-list
            `(,(expand-file-name
                (concat (file-name-directory (locate-library <span style=
"color: #036A07;">"org"</span>))
                        <span style="color: #036A07;">"../doc/"</span>))
              <span style="color: #036A07;">"c:/cygwin/usr/share/info/"</span>
              ,@Info-directory-list)))
</pre>
          </div>

          <p><code>Info+</code> fontifies entries for reference items
          (functions, macros, commands, special forms, constants, options,
          other variables), and that includes their parameters, even those on
          continuation lines.</p>

          <p>With <code>Info+</code>, you can also merge an Info node with its
          subnodes into the same buffer, by calling
          <code>Info-merge-subnodes</code> (bound to <code>+</code>).</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    (GNUEmacs
      (<span style="color: #0000FF;">when</span> (try-require 'info+)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show breadcrumbs in the header line</span>
        (setq Info-breadcrumbs-in-header-flag t)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't show breadcrumbs in the mode line</span>
        (setq Info-breadcrumbs-in-mode-line-mode nil)))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">some info related functions</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(to insert links such as `(info "(message)Insertion Variables")')</span>
    (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"rs-info"</span>)
      (autoload 'rs-info-insert-current-node <span style=
"color: #036A07;">"rs-info"</span>
        <span style=
"color: #008000;">"Insert reference to current Info node using STYPE in buffer."</span> t)
      (autoload 'rs-info-boxquote <span style=
"color: #036A07;">"rs-info"</span>
        <span style=
"color: #008000;">"Yank text (from an info node), box it and use current info node as title."</span> t)
      (autoload 'rs-info-reload <span style="color: #036A07;">"rs-info"</span>
        <span style="color: #008000;">"Reload current info node."</span> t)
      (autoload 'rs-info-insert-node-for-variable <span style=
"color: #036A07;">"rs-info"</span>
        <span style=
"color: #008000;">"Insert a custom style info node for the top level form at point."</span> t)
      (<span style="color: #0000FF;">defalias</span> '<span style=
"color: #006699;">boxquote-info</span> 'rs-info-boxquote))
    )
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">get a Unix manual page of the item under point</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;S-f1&gt;"</span>) 'man-follow)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"man"</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make the manpage the current buffer in the current window</span>
    (setq Man-notify-method 'pushy))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">alias man to woman</span>
  (<span style="color: #0000FF;">defalias</span> '<span style=
"color: #006699;">man</span> 'woman)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">decode and browse Unix man-pages "W.o. (without) Man"</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"woman"</span>
    (<span style="color: #0000FF;">defalias</span> '<span style=
"color: #006699;">man</span> 'woman))

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 10 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-13" class="outline-2">
      <h2 id="sec-13">The Mark and the Region</h2>

      <div class="outline-text-2" id="text-13">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 11 The (info "(emacs)Mark") and the Region</span>

(leuven--chapter leuven-chapter-11-mark <span style=
"color: #036A07;">"11 The Mark and the Region"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-13-1" class="outline-3">
        <h3 id="sec-13-1">Commands to Mark Textual Objects</h3>

        <div class="outline-text-3" id="text-13-1">
          <dl class="org-dl">
            <dt><code>M-@</code></dt>

            <dd>Set mark after end of next <b>word</b> (<code>mark-word</code>)
            without moving point.</dd>

            <dt><code>C-M-@</code></dt>

            <dd>Set mark after end of following <b>balanced expression</b>
            (<code>mark-sexp</code>) without moving point.</dd>
          </dl>
        </div>
      </div>

      <div id="outline-container-sec-13-2" class="outline-3">
        <h3 id="sec-13-2">Operating on the Region</h3>

        <div class="outline-text-3" id="text-13-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">inserting text while the mark is active causes the text in the region to</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">be deleted first</span>
  (delete-selection-mode 1)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 11 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-14" class="outline-2">
      <h2 id="sec-14">Killing and Moving Text</h2>

      <div class="outline-text-2" id="text-14">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 12 (info "(emacs)Killing") and Moving Text</span>

(leuven--chapter leuven-chapter-12-killing <span style=
"color: #036A07;">"12 Killing and Moving Text"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-14-1" class="outline-3">
        <h3 id="sec-14-1">Deletion and Killing</h3>

        <div class="outline-text-3" id="text-14-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 12.1 (info "(emacs)Deletion and Killing")</span>

  (leuven--section <span style=
"color: #036A07;">"12.1 (emacs)Deletion and Killing"</span>)

  (GNUEmacs
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">old ([2012-09-07 Fri] remove "compile" after "activate")</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add the ability to copy or cut the current line without marking it</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(no active region) -- idea stolen from SlickEdit</span>
    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">kill-ring-save</span> (before leuven-slick-copy activate)
      <span style=
"color: #008000;">"When called with no active region, copy the current line instead."</span>
      (interactive
       (<span style=
"color: #0000FF;">if</span> (use-region-p) (list (region-beginning) (region-end))
         (message <span style=
"color: #036A07;">"Copied the current line"</span>)
         (list (line-beginning-position)
               (line-beginning-position 2)))))

    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">kill-region</span> (before leuven-slick-cut activate)
      <span style=
"color: #008000;">"When called with no active region, kill the current line instead."</span>
      (interactive
       (<span style=
"color: #0000FF;">if</span> (use-region-p) (list (region-beginning) (region-end))
         (list (line-beginning-position)
               (line-beginning-position 2))))))

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">new</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defadvice kill-ring-save (around leuven-slick-copy activate)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"When called interactively with no active region, copy a single line instead."</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(if (or (use-region-p) (not (called-interactively-p)))</span>
    <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">ad-do-it</span>
    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(kill-new (buffer-substring (line-beginning-position)</span>
    <span style=
"color: #8D8D84;">;;                                 </span><span style=
"color: #8D8D84; font-style: italic;">(line-beginning-position 2)))</span>
    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(message "Copied line")))</span>
    <span style="color: #8D8D84;">;;</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defadvice kill-region (around leuven-slick-cut activate)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"When called interactively with no active region, kill a single line instead."</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(if (or (use-region-p) (not (called-interactively-p)))</span>
    <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">ad-do-it</span>
    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(kill-new (filter-buffer-substring (line-beginning-position)</span>
    <span style=
"color: #8D8D84;">;;                                        </span><span style=
"color: #8D8D84; font-style: italic;">(line-beginning-position 2) t))))</span>
    <span style="color: #8D8D84;">;;</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun yank-line (string)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"Insert STRING above the current line."</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(beginning-of-line)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(unless (= (elt string (1- (length string))) ?\n)</span>
    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(save-excursion (insert "\n")))</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(insert string))</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> perf 2.00 s requiring bytecomp and </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">warning</span><span style="color: #8D8D84; font-style: italic;">s...</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-14-2" class="outline-3">
        <h3 id="sec-14-2">Yanking</h3>

        <div class="outline-text-3" id="text-14-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 12.2 (info "(emacs)Yanking")</span>

  (leuven--section <span style="color: #036A07;">"12.2 (emacs)Yanking"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">auto-indentation of pasted code in the listed programming modes (fall</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">back to default, non-indented yanking by preceding the yanking</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">command `</span><span style=
"color: #D0372D; font-style: italic;">C-y</span><span style=
"color: #8D8D84; font-style: italic;">' with `</span><span style=
"color: #D0372D; font-style: italic;">C-u</span><span style=
"color: #8D8D84; font-style: italic;">')</span>
  (<span style="color: #0000FF;">dolist</span> (command '(yank yank-pop))
    (eval `(<span style=
"color: #0000FF;">defadvice</span> ,command (after leuven-indent-region activate)
             (and (not current-prefix-arg)
                  (derived-mode-p 'prog-mode)
                  (<span style=
"color: #0000FF;">let</span> ((mark-even-if-inactive transient-mark-mode))
                    (indent-region (region-beginning) (region-end) nil))))))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-14-2-1" class="outline-4">
          <h4 id="sec-14-2-1">Yanking Earlier Kills</h4>

          <div class="outline-text-4" id="text-14-2-1">
            <p>Interactively insert items from kill ring with <code>M-x
            helm-show-kill-ring</code> (see <a href=
            "#sec-20-12-2">Helm</a>).</p>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-14-3" class="outline-3">
        <h3 id="sec-14-3">Cutting and Pasting on Graphical Displays</h3>

        <div class="outline-text-3" id="text-14-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 12.3 (info "(emacs)Cut and Paste")</span>

  (leuven--section <span style=
"color: #036A07;">"12.3 (emacs)Cut and Paste on Graphical Displays"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">copy/paste with Gnome desktop</span>
  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; cutting and pasting uses the clipboard</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq x-select-enable-clipboard t) ; default in Emacs 24</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make cut, copy and paste (keys and menu bar items) use the clipboard</span>
    (menu-bar-enable-clipboard))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-14-4" class="outline-3">
        <h3 id="sec-14-4">Rectangles</h3>

        <div class="outline-text-3" id="text-14-4">
          <p>To kill the text of the “region-rectangle”, use <code>C-x r
          k</code> (<code>kill-rectangle</code>). Or just “delete” the
          rectangle (without “killing” it) with <code>C-x r d</code>.</p>

          <p>To copy a (series of) Org column(s) while avoiding the use of
          registers:</p>

          <ol class="org-ol">
            <li>select the region-rectangle,</li>

            <li>use the command <code>copy-rectangle-as-kill</code> (bound to
            <code>C-x r M-w</code>), then</li>

            <li>paste the copied rectangle by doing <code>yank-rectangle</code>
            (<code>C-x r y</code>).</li>
          </ol>

          <p>To do the same with registers:</p>

          <ol class="org-ol">
            <li>select the region-rectangle,</li>

            <li>use <code>C-x r r R</code> to copy the rectangle to the
            register named <code>R</code>,</li>

            <li>use <code>C-x r i R</code> to insert the rectangle that is
            being held in the register named <code>R</code>.</li>
          </ol>

          <p>To shift cells up/down within a column of an Org table while
          leaving remaining columns intact, use <code>kill-rectangle</code> and
          <code>yank-rectangle</code>.</p>

          <p>To delete whitespace in each of the lines on the specified
          rectangle, use <code>M-x delete-whitespace-rectangle</code>.</p>

          <p>Use <code>C-x r t STRING &lt;RET&gt;</code> to replace each line
          of a region-rectangle with a given string.</p>

          <div class="note">
            <p>On the Emacs trunk, you can do: <code>C-x SPC</code> &lt;…move
            around…&gt; <code>DEL</code> to delete the rectangle and <code>C-x
            SPC</code> &lt;…move around…&gt; <code>C-t</code> to invoke
            <code>string-rectangle</code>.</p>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-14-5" class="outline-3">
        <h3 id="sec-14-5">CUA Bindings</h3>

        <div class="outline-text-3" id="text-14-5">
          <p>CUA mode sets up key bindings used in many other applications
          (<code>C-x</code>, <code>C-c</code>, <code>C-v</code> and
          <code>C-z</code>).</p>

          <p>The <code>C-x</code> and <code>C-c</code> keys only do cut and
          copy when the region is active, so in most cases, they do not
          conflict with the normal function of these prefix keys.</p>

          <p>If you really need to perform a command which starts with one of
          the prefix keys even when the region is active, you have three
          options:</p>

          <ul class="org-ul">
            <li>press the prefix key twice very quickly (within 0.2
            seconds),</li>

            <li>press the prefix key and the following key within 0.2 seconds,
            or</li>

            <li>use the Shift key with the prefix key, i.e. <code>C-S-x</code>
            or <code>C-S-c</code>.</li>
          </ul>

          <p>You can customize <code>cua-enable-cua-keys</code> to completely
          disable the CUA bindings, or
          <code>cua-prefix-override-inhibit-delay</code> to change the prefix
          fallback behavior.</p>

          <p>CUA mode also provides enhanced rectangle support with visible
          rectangle highlighting. Check out <a href=
          "http://www.vimeo.com/1168225?pg=embed&amp;sec=1168225">Emacs Column
          Editing on Vimeo</a>.</p>

          <ul class="org-ul">
            <li><code>&lt;C-RET&gt;</code> runs the command
            <code>cua-set-rectangle-mark</code></li>

            <li><code>M-n</code> runs the command
            <code>cua-sequence-rectangle</code></li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 12 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-15" class="outline-2">
      <h2 id="sec-15">Registers</h2>

      <div class="outline-text-2" id="text-15">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 13 (info "(emacs)Registers")</span>

(leuven--chapter leuven-chapter-13-registers <span style=
"color: #036A07;">"13 Registers"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; Enable position saving through shortcuts.</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; Save current position with  Ctrl-F1 Ctrl-F2 Ctrl-F3 and Ctrl-F4</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key [C-f1] (lambda () (interactive) (point-to-register ?1)))</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key [C-f2] (lambda () (interactive) (point-to-register ?2)))</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key [C-f3] (lambda () (interactive) (point-to-register ?3)))</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key [C-f4] (lambda () (interactive) (point-to-register ?4)))</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun jump-to-register-other (reg)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(other-window 1)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(jump-to-register reg)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(hilit-recenter (/ (window-height) 2)))</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun jump-to-register-here (reg)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(jump-to-register reg)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(hilit-recenter (/ (window-height) 2)))</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; Move to saved position with F1 F2 F3 and F4</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key [f1] (lambda () (interactive) (jump-to-register-here ?1)))</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key [f2] (lambda () (interactive) (jump-to-register-here ?2)))</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key [f3] (lambda () (interactive) (jump-to-register-here ?3)))</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key [f4] (lambda () (interactive) (jump-to-register-here ?4)))</span>
</pre>
        </div>

        <p>Jump between configuration files</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(global-set-key (kbd <span style=
"color: #036A07;">"C-j"</span>) 'jump-to-register)

(set-register ?a (cons 'file <span style=
"color: #036A07;">"/sudo::/etc/apt/sources.list"</span>))
(set-register ?b (cons 'file <span style=
"color: #036A07;">"~/News/KILL"</span>))
(set-register ?C (cons 'file <span style=
"color: #036A07;">"/sudo::/etc/default/console-setup"</span>))
(set-register ?c (cons 'file <span style=
"color: #036A07;">"~/.irssi/config"</span>))
(set-register ?d (cons 'file <span style=
"color: #036A07;">"~/.emacs-dired"</span>))
<span style="color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">etc.</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-15-1" class="outline-3">
        <h3 id="sec-15-1">Bookmarks</h3>

        <div class="outline-text-3" id="text-15-1">
          <p>Bookmarks are <b>persistent</b> and they have <b>names</b>; not
          <i>markers</i>. Bookmarked positions can also be <b>relocated</b>
          (found) if they move slightly because of text changes.</p>

          <p>To navigate to a bookmark (linking to a file or directory), just
          press <code>C-x r b</code>. You’ll be prompted for the bookmark name,
          and it will open that file or directory.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 13.7 (info "(emacs)Bookmarks")</span>

  (leuven--section <span style=
"color: #036A07;">"13.7 (emacs)Bookmarks"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"bookmark"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">where to save the bookmarks</span>
    (setq bookmark-default-file <span style=
"color: #036A07;">"~/.emacs.d/bookmarks.bmk"</span>)
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! a .txt extension would load Org at</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! the time `</span><span style=
"color: #D0372D; font-style: italic;">bookmark</span><span style=
"color: #8D8D84; font-style: italic;">' is required!</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">each command that sets a bookmark will also save your bookmarks</span>
    (setq bookmark-save-flag 1)
</pre>
          </div>

          <p>Visible bookmarks in buffer.</p>

          <p><b>Bookmark+</b> offers everything that <code>bm.el</code> offers,
          and quite a bit more.</p>

          <dl class="org-dl">
            <dt><code>C-x p RET</code></dt>

            <dd><b>Set</b> (or delete) a <b>bookmark</b> at point.</dd>

            <dt><code>C-x p C-down</code></dt>

            <dd>Cycle to the <b>next</b> highlighted <b>bookmark</b> in the
            current buffer.</dd>

            <dt><code>C-x p C-up</code></dt>

            <dd>Cycle to the <b>previous</b> highlighted <b>bookmark</b> in the
            current buffer.</dd>

            <dt><code>C-x (4) j h</code></dt>

            <dd>Jump to a highlighted bookmark (in another window).</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">extensions to standard library `</span><span style="color: #D0372D; font-style: italic;">bookmark.el</span><span style="color: #8D8D84; font-style: italic;">'</span>
    (<span style="color: #0000FF;">when</span> (try-require 'bookmark+)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically highlight bookmarks when set</span>
      (setq bmkp-auto-light-when-set 'any-bookmark)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically highlight bookmarks when jumped to</span>
      (setq bmkp-auto-light-when-jump 'any-bookmark)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't propertize bookmark names to hold full bookmark data</span>
      (setq bmkp-propertize-bookmark-names-flag nil)))
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">we will often be going back and forth</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">between using Bookmark+ and using</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">vanilla Emacs</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-15-2" class="outline-3">
        <h3 id="sec-15-2">Ace Jump</h3>

        <div class="outline-text-3" id="text-15-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">quickly jump to a position in the current view</span>
  (<span style="color: #0000FF;">when</span> (try-require 'ace-jump-mode)
    (define-key global-map (kbd <span style=
"color: #036A07;">"C-c SPC"</span>) 'ace-jump-mode))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 13 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-16" class="outline-2">
      <h2 id="sec-16">Controlling the Display</h2>

      <div class="outline-text-2" id="text-16">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 14 Controlling the (info "(emacs)Display")</span>

(leuven--chapter leuven-chapter-14-display <span style=
"color: #036A07;">"14 Controlling the Display"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-16-1" class="outline-3">
        <h3 id="sec-16-1">Scrolling</h3>

        <div class="outline-text-3" id="text-16-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.1 (info "(emacs)Scrolling")</span>

  (leuven--section <span style=
"color: #036A07;">"14.1 (emacs)Scrolling"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">keep screen position of point when scrolling</span>
  (setq scroll-preserve-screen-position t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">better scrolling in Emacs (doing a &lt;PageDown&gt; followed by a &lt;PageUp&gt; will</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">place the point at the same place)</span>
  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"pager"</span>)
    (autoload 'pager-page-up <span style="color: #036A07;">"pager"</span>
      <span style=
"color: #008000;">"Like scroll-down, but moves a fixed amount of lines."</span> t)
    (autoload 'pager-page-down <span style="color: #036A07;">"pager"</span>
      <span style=
"color: #008000;">"Like scroll-up, but moves a fixed amount of lines."</span> t)

    (global-set-key
      (kbd <span style=
"color: #036A07;">"&lt;prior&gt;"</span>) 'pager-page-up)
    (global-set-key
      (kbd <span style=
"color: #036A07;">"&lt;next&gt;"</span>) 'pager-page-down))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-2" class="outline-3">
        <h3 id="sec-16-2">Automatic Scrolling</h3>

        <div class="outline-text-3" id="text-16-2">
          <p>“Smooth” (civilized) scrolling.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.3 (info "(emacs)Auto Scrolling")</span>

  (leuven--section <span style=
"color: #036A07;">"14.3 (emacs)Auto Scrolling"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">scroll only one line at a time (redisplay will never recenter point)</span>
  (setq scroll-conservatively 10000)    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">or `</span><span style=
"color: #D0372D; font-style: italic;">most-positive-fixnum</span><span style=
"color: #8D8D84; font-style: italic;">'</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of lines of margin at the top and bottom of a window</span>
  (setq scroll-margin 1) <span style="color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">or 3?        ; also for `</span><span style="color: #D0372D; font-style: italic;">isearch-forward</span><span style="color: #8D8D84; font-style: italic;">'</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">scrolling down looks much better</span>
  (setq auto-window-vscroll nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-3" class="outline-3">
        <h3 id="sec-16-3">Narrowing</h3>

        <div class="outline-text-3" id="text-16-3">
          <dl class="org-dl">
            <dt><code>C-x n n</code></dt>

            <dd><b>Narrow</b> down to between point and mark.</dd>

            <dt><code>C-x n d</code></dt>

            <dd><b>Narrow</b> down to the current <b>defun</b>.</dd>

            <dt><code>C-x n s</code></dt>

            <dd><b>Narrow</b> buffer to the current <b>subtree</b> (bound in
            Org mode).</dd>

            <dt><code>C-x n w</code></dt>

            <dd><b>Widen</b> to make the entire buffer accessible again.</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.5 (info "(emacs)Narrowing")</span>

  (leuven--section <span style=
"color: #036A07;">"14.5 (emacs)Narrowing"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable the use of the command `</span><span style="color: #D0372D; font-style: italic;">narrow-to-region</span><span style="color: #8D8D84; font-style: italic;">' without confirmation</span>
  (put 'narrow-to-region 'disabled nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-4" class="outline-3">
        <h3 id="sec-16-4">Font Lock mode</h3>

        <div class="outline-text-3" id="text-16-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.12 (info "(emacs)Font Lock")</span>

  (leuven--section <span style=
"color: #036A07;">"14.12 (emacs)Font Lock"</span>)

  (XEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">stop showing that annoying progress bar when fontifying</span>
    (setq progress-feedback-use-echo-area nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable Font Lock mode</span>
    (font-lock-mode))
</pre>
          </div>

          <p>All text-based major modes run <code>text-mode-hook</code>, and
          all programming language modes run <code>prog-mode-hook</code>, prior
          to running their own mode hooks.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">highlight </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> notes</span>
  (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-highlight-keywords</span>
    <span style="color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #CC0000; background-color: #FFFF88;">FIXME</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #CC0000; background-color: #FFFF88;">XXX</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #CC0000; background-color: #FFFF88;">BUG</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">[Ee]rror</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #CC0000; background-color: #FFFF88;">ERROR</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">[Ww]arning</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #CC0000; background-color: #FFFF88;">WARNING</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">"</span>
    <span style="color: #008000;">"Patterns to highlight."</span>)

  (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-highlight-keywords-in-org</span>
    <span style="color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #CC0000; background-color: #FFFF88;">FIXME</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #CC0000; background-color: #FFFF88;">XXX</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #CC0000; background-color: #FFFF88;">BUG</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">"</span>
    <span style=
"color: #008000;">"Patterns to highlight (for Org mode only).</span>
<span style=
"color: #008000;">  The goal is to ensure no conflict with the Org mode </span><span style="color: #CC0000; background-color: #FFFF88;">TODO</span><span style="color: #008000;"> keyword."</span>)

  (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-highlight-face</span>
    '((t (<span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#CC0000"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FFFF88"</span>)))
    <span style="color: #008000;">"Face for making </span><span style=
"color: #CC0000; background-color: #FFFF88;">FIXME</span><span style=
"color: #008000;"> and other </span><span style=
"color: #CC0000; background-color: #FFFF88;">warning</span><span style=
"color: #008000;">s stand out."</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add highlighting keywords for selected major modes only</span>
  (<span style="color: #0000FF;">dolist</span> (mode '(fundamental-mode
                  text-mode))
    (font-lock-add-keywords mode
     `((,leuven-highlight-keywords 1 'leuven-highlight-face prepend))
     'end))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add highlighting keywords for Org mode only</span>
  (<span style="color: #0000FF;">dolist</span> (mode '(org-mode))
    (font-lock-add-keywords mode
     `((,leuven-highlight-keywords-in-org 1 'leuven-highlight-face prepend))
     'end))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add highlighting keywords for selected major modes *and* all major modes</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">derived from them</span>
  (<span style="color: #0000FF;">dolist</span> (hook '(prog-mode-hook
                  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">text-mode-hook        ; avoid Org</span>
                  css-mode-hook         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[parent: fundamental]</span>
                  latex-mode-hook
                  shell-mode-hook       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[parent: fundamental]</span>
                  ssh-config-mode-hook))
    (add-hook hook
     (<span style="color: #0000FF;">lambda</span> ()
       (font-lock-add-keywords nil      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">in the current buffer</span>
        `((,leuven-highlight-keywords 1 'leuven-highlight-face prepend))
        <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;">                      0                        t</span>
        'end))))
</pre>
          </div>

          <p>See doc of <code>font-lock-keywords</code> and
          <code>font-lock-add-keywords</code>.</p>

          <p>For FIXME to be highlighted in Org tables as well, use:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">fp-fontify-fixme</span> ()
    (font-lock-add-keywords nil
     '((<span style="color: #036A07;">"\\&lt;</span><span style=
"color: #CC0000; background-color: #FFFF88;">FIXME</span><span style=
"color: #036A07;">\\&gt;"</span> 0 font-lock-<span style=
"color: #CC0000; background-color: #FFFF88;">warning</span>-face t)) t))
                                                   ^!!!
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">just-in-time fontification</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"jit-lock"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">stealth fontification should show status messages</span>
    (setq jit-lock-stealth-verbose t))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">colorize color names in buffers</span>
  (GNUEmacs
    (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"rainbow-mode"</span>)
      (autoload 'rainbow-mode <span style=
"color: #036A07;">"rainbow-mode"</span>
        <span style=
"color: #008000;">"Colorize strings that represent colors."</span> t)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-5" class="outline-3">
        <h3 id="sec-16-5">Interactive Highlighting</h3>

        <div class="outline-text-3" id="text-16-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.13 (info "(emacs)Highlight Interactively") by Matching</span>

  (leuven--section <span style=
"color: #036A07;">"14.13 (emacs)Highlight Interactively by Matching"</span>)
</pre>
          </div>

          <p>You can use <b>Hi Lock</b> (part of Emacs since version 21) to
          highlight a regexp (identical tokens) throughout a buffer.</p>

          <dl class="org-dl">
            <dt><code>M-x hi-lock-mode &lt;RET&gt;</code></dt>

            <dd>Enable or disable Hi Lock mode.</dd>

            <dt><code>C-x w h REGEXP &lt;RET&gt; &lt;RET&gt;</code></dt>

            <dd>Highlight text that matches REGEXP.</dd>

            <dt><code>C-x w l REGEXP &lt;RET&gt; &lt;RET&gt;</code></dt>

            <dd>Highlight entire lines containing a match for REGEXP.</dd>

            <dt><code>C-x w r REGEXP &lt;RET&gt;</code></dt>

            <dd>Unhighlight REGEXP.</dd>
          </dl>

          <p>It is complementary to the features of the library
          <b>Highlight</b> (from Drew Adams):</p>

          <dl class="org-dl">
            <dt><code>hlt-highlight-regexp-region</code></dt>

            <dd>Highlight a REGEXP throughout the region.</dd>

            <dt><code>hlt-unhighlight-region</code></dt>

            <dd>Unhighlight the region.</dd>
          </dl>

          <p>Comparison:</p>

          <ul class="org-ul">
            <li>Hi Lock uses text properties, Highlight can use either text
            properties or overlays (= default, see option
            <code>hlt-use-overlays-flag</code>). When overlays are used,
            copying and pasting text will not also paste the highlighting.</li>

            <li>Hi Lock highlights new text as you type it.</li>

            <li>Highlight lets you navigate among highlights:
            <code>hlt-next-highlight</code>,
            <code>hlt-previous-highlight</code>.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable Hi Lock mode for all buffers</span>
    (global-hi-lock-mode 1)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-highlight-current-word</span> ()
      <span style=
"color: #008000;">"Highlight the word that point is on throughout the buffer.</span>
<span style=
"color: #008000;">    If already highlighted, unhighlight the word at point."</span>
      (interactive)
      (<span style="color: #0000FF;">let</span> ((cword (current-word t)))
        (<span style="color: #0000FF;">when</span> cword
          (<span style=
"color: #0000FF;">if</span> (not (equal (get-text-property (point) 'face) 'highlight))
              (highlight-regexp (regexp-quote cword) 'highlight)
            (unhighlight-regexp (regexp-quote cword))))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">emulation of Vim's `*' search</span>
    (global-set-key
      (kbd <span style=
"color: #036A07;">"C-*"</span>) 'leuven-highlight-current-word))
</pre>
          </div>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%">
                <b>Use rainbow colors for word highlighting</b><br />

                <p>Use <code>highlight-symbol</code> which chooses rainbow
                colors automatically and makes it much easier to follow some
                key variables through a block of code.</p>
              </td>
            </tr>
          </table>
        </div>
      </div>

      <div id="outline-container-sec-16-6" class="outline-3">
        <h3 id="sec-16-6">Window Fringes</h3>

        <div class="outline-text-3" id="text-16-6">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
(<span style="color: #0000FF;">when</span> (window-system)
  (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">git-gutter</span>))

(global-git-gutter-mode +1)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-7" class="outline-3">
        <h3 id="sec-16-7">Displaying Boundaries</h3>

        <div class="outline-text-3" id="text-16-7">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.15 (info "(emacs)Displaying Boundaries")</span>

  (leuven--section <span style=
"color: #036A07;">"14.15 (emacs)Displaying Boundaries"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">visually indicate buffer boundaries and scrolling in the fringe</span>
  (setq indicate-buffer-boundaries t)   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">'left</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-8" class="outline-3">
        <h3 id="sec-16-8">Useless Whitespace</h3>

        <div class="outline-text-3" id="text-16-8">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.16 (info "(emacs)Useless Whitespace")</span>

  (leuven--section <span style=
"color: #036A07;">"14.16 (emacs)Useless Whitespace"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">highlight trailing whitespaces in all modes</span>
  (setq-default show-trailing-whitespace t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">nuke all trailing whitespaces in the buffer</span>
  (add-hook 'before-save-hook
            (<span style="color: #0000FF;">lambda</span> ()
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">except for Message mode where "-- " is the signature separator</span>
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(for when using emacsclient to compose emails and doing C-x #)</span>
              (<span style=
"color: #0000FF;">unless</span> (eq major-mode 'message-mode)
                (delete-trailing-whitespace))))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">visually indicate empty lines after the buffer end in the fringe</span>
  (setq-default indicate-empty-lines t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; control highlighting of non-ASCII space and hyphen chars, using the</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; `</span><span style=
"color: #D0372D; font-style: italic;">nobreak-space</span><span style=
"color: #8D8D84; font-style: italic;">' or `</span><span style=
"color: #D0372D; font-style: italic;">escape-glyph</span><span style=
"color: #8D8D84; font-style: italic;">' face respectively</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq nobreak-char-display t)      ; default</span>
</pre>
          </div>

          <p>When Whitespace mode is on, it takes care of highlighting some
          special characters over the default mechanism of
          <code>nobreak-char-display</code> and
          <code>show-trailing-whitespace</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">whitespace mode</span>
    (add-hook 'text-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (whitespace-mode 1)))

    (add-hook 'prog-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (whitespace-mode 1)))

    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"whitespace"</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">which kind of blank is visualized</span>
      (setq whitespace-style
            '(face trailing tabs
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">lines-tail</span>
              indentation::space space-mark tab-mark))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">column beyond which the line is highlighted</span>
      (setq whitespace-line-column 80)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">mappings for displaying characters</span>
      (setq whitespace-display-mappings
            '((space-mark ?\u00A0 [?\u2423] [?.]) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">nbsp - open box (bottom square bracket)</span>
              (space-mark ?\u202F [?\u00B7] [?.]) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">narrow nbsp - centered dot</span>
              (tab-mark ?\t [?\u00BB ?\t] [?\\ ?\t]))) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">tab - left quote mark</span>
      ))
</pre>
          </div>

          <p>Example : VPATH=
          /home/jt/src/cygwin/cygwin-packages/1.7/python-2.6.8-2/python-2.6.8-2/src/Python-2.6.8
          LDLAST= SGI_ABI= PYTHON_OBJS= \ Python/pythonrun.o \ Python/random.o
          \ Python/structmember.o</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; show zero-width spaces</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(font-lock-add-keywords nil</span>
  <span style="color: #8D8D84;">;;  </span><span style=
"color: #8D8D84; font-style: italic;">`((,(format "\\(%c\\)" ?\u200B) ; #\ZERO_WIDTH_SPACE</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(1 (progn (compose-region (match-beginning 1) (match-end 1)</span>
  <span style=
"color: #8D8D84;">;;                               </span><span style=
"color: #8D8D84; font-style: italic;">?\u2B1B ; #\BLACK_LARGE_SQUARE</span>
  <span style=
"color: #8D8D84;">;;                               </span><span style=
"color: #8D8D84; font-style: italic;">'decompose-region)</span>
  <span style="color: #8D8D84;">;;               </span><span style=
"color: #8D8D84; font-style: italic;">nil)))))</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-9" class="outline-3">
        <h3 id="sec-16-9">Selective Display</h3>

        <div class="outline-text-3" id="text-16-9">
          <p>Emacs has the ability to <b>hide lines indented more than a given
          number of columns</b>. You can use this to get an overview of a part
          of a program.</p>

          <p>To hide lines with at least 1 column of indentation (replacing
          them by an ellipsis), type <code>C-1 C-x $</code> (or <code>C-x
          $</code> and give it <code>1</code> as depth argument). It gives a
          quick overview any source file.</p>

          <p>To make all lines visible again, type <code>C-x $</code> with no
          argument.</p>

          <p>See also <b>Outline Mode</b> for another way to hide part of the
          text in a buffer.</p>
        </div>
      </div>

      <div id="outline-container-sec-16-10" class="outline-3">
        <h3 id="sec-16-10">Optional Mode Line Features</h3>

        <div class="outline-text-3" id="text-16-10">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.18 (info "(emacs)Optional Mode Line") Features</span>

  (leuven--section <span style=
"color: #036A07;">"14.18 (emacs)Optional Mode Line Features"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show the line number in each mode line</span>
  (line-number-mode 1)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show the column number in each mode line</span>
  (column-number-mode 1)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use inactive face for mode line in non-selected windows</span>
  (setq mode-line-in-non-selected-windows t)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show buffer position like a scroll bar in mode line</span>
  (<span style="color: #0000FF;">when</span> (try-require 'sml-modeline)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">mode line indicator total length</span>
    (setq sml-modeline-len 10)

    (sml-modeline-mode))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-11" class="outline-3">
        <h3 id="sec-16-11">How Text Is Displayed</h3>

        <div class="outline-text-3" id="text-16-11">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.19 How (info "(emacs)Text Display")ed</span>

  (leuven--section <span style=
"color: #036A07;">"14.19 (emacs)How Text Displayed"</span>)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-dos2unix</span> ()
    <span style=
"color: #008000;">"Convert a plain text file in DOS format to Unix format."</span>
    (interactive)
    (<span style="color: #0000FF;">save-excursion</span>
      (goto-char (point-min))
      (<span style="color: #0000FF;">while</span> (search-forward <span style=
"color: #036A07;">"\r"</span> nil t)
        (replace-match <span style="color: #036A07;">""</span>))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-unix2dos</span> ()
    <span style=
"color: #008000;">"Convert a plain text file in Unix format to DOS format."</span>
    (interactive)
    (<span style="color: #0000FF;">save-excursion</span>
      (goto-char (point-min))
      (<span style="color: #0000FF;">while</span> (search-forward <span style=
"color: #036A07;">"\n"</span> nil t)
        (replace-match <span style="color: #036A07;">"\r\n"</span>))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-12" class="outline-3">
        <h3 id="sec-16-12">Displaying the Cursor</h3>

        <div class="outline-text-3" id="text-16-12">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.20 The (info "(emacs)Cursor Display")</span>

  (leuven--section <span style=
"color: #036A07;">"14.20 (emacs)The Cursor Display"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">cursor of the selected window blinks</span>
  (XEmacs
    (blink-cursor-mode))

  (GNUEmacs
    (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-default-cursor-color</span> <span style=
"color: #036A07;">"black"</span>
      <span style="color: #008000;">"Default cursor color."</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">using cursor color to indicate some modes (read-only, overwrite and</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insert modes)</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--set-cursor-color-according-to-mode</span> ()
      <span style=
"color: #008000;">"Change cursor color according to some minor modes."</span>
      (<span style="color: #0000FF;">let</span> ((color (<span style=
"color: #0000FF;">if</span> buffer-read-only
                       <span style="color: #036A07;">"purple1"</span>
                     (<span style="color: #0000FF;">if</span> overwrite-mode
                         <span style="color: #036A07;">"red"</span>
                       <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">normal insert mode</span>
                       leuven-default-cursor-color))))
        (set-cursor-color color)))

    (add-hook 'post-command-hook 'leuven--set-cursor-color-according-to-mode))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-13" class="outline-3">
        <h3 id="sec-16-13">Truncation of Lines</h3>

        <div class="outline-text-3" id="text-16-13">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.21 (info "(emacs)Line Truncation")</span>

  (leuven--section <span style=
"color: #036A07;">"14.21 (emacs)Line Truncation"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">switch wrap mode from "wrap long lines to next screen line" (continued</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">line) to "non-wrap", or vice-versa</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-c t"</span>) 'toggle-truncate-lines)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">respect the value of `</span><span style=
"color: #D0372D; font-style: italic;">truncate-lines</span><span style=
"color: #8D8D84; font-style: italic;">' in all windows less than the</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">full width of the frame</span>
  (setq truncate-partial-width-windows nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-16-14" class="outline-3">
        <h3 id="sec-16-14">Customization of Display</h3>

        <div class="outline-text-3" id="text-16-14">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.23 (info "(emacs)Display Custom")ization</span>

  (leuven--section <span style=
"color: #036A07;">"14.23 (emacs)Display Customization"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">echo what I'm typing *immediately*</span>
  (setq echo-keystrokes 0.1)
</pre>
          </div>

          <p>Display pressed keyboard shortcuts on screen during presentations
          or screencasts.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">exhaustive log of interactions with Emacs (display keystrokes, etc.)</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"interaction-log"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; maximum number of lines to keep in the *Emacs Log* buffer</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq ilog-log-max 10)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable logging of keys, commands, file loads and messages</span>
    (interaction-log-mode 1)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">hotkey for showing the log buffer</span>
    (global-set-key
      (kbd <span style="color: #036A07;">"C-h C-l"</span>)
      (<span style="color: #0000FF;">lambda</span> ()
        (interactive)
        (display-buffer ilog-buffer-name))))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 14 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-17" class="outline-2">
      <h2 id="sec-17">Searching and Replacement</h2>

      <div class="outline-text-2" id="text-17">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 15 (info "(emacs)Search")ing and Replacement</span>

(leuven--chapter leuven-chapter-15-search <span style=
"color: #036A07;">"15 Searching and Replacement"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-17-1" class="outline-3">
        <h3 id="sec-17-1">Incremental Search</h3>

        <div class="outline-text-3" id="text-17-1">
          <p>Have a look at the “Standard Isearch Keys” on <a href=
          "http://www.emacswiki.org/emacs/IncrementalSearch">http://www.emacswiki.org/emacs/IncrementalSearch</a></p>

          <p>Isearch has a binding which deletes all the non-matching
          characters from the search string: <code>C-g</code> (not a very
          intuitive binding, because it’s usually associated with aborting
          operations, not with correcting things).</p>

          <p>If you hit <code>M-e</code> (to edit the search string), the
          cursor is moved to the mismatch position.</p>

          <p>Since Emacs 24.3:</p>

          <ul class="org-ul">
            <li><code>M-s _</code> starts a symbol (identifier) incremental
            search.</li>

            <li><code>M-s _</code> in Isearch toggles symbol search mode.</li>

            <li><code>M-s c</code> in Isearch toggles search
            case-sensitivity.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 15.1 (info "(emacs)Incremental Search")</span>

  (leuven--section <span style=
"color: #036A07;">"15.1 (emacs)Incremental Search"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">Error</span><span style="color: #8D8D84; font-style: italic;"> when selecting search string from kill ring (`</span><span style="color: #D0372D; font-style: italic;">M-p</span><span style="color: #8D8D84; font-style: italic;">')</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; always exit searches at the beginning of the expression found</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'isearch-mode-end-hook 'isearch-goto-match-beginning)</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun isearch-goto-match-beginning ()</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"Use with isearch hook to end search at first char of match."</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(when isearch-forward (goto-char isearch-other-end)))</span>

  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">incremental search will open the contents</span>
    (setq search-invisible 'open)       <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">re-hide an invisible match right away</span>
    (setq isearch-hide-immediately nil)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">scrolling commands are allowed during incremental search (without</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">canceling Isearch mode)</span>
  (setq isearch-allow-scroll t)

  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">fuzzy matching utilities (a must-have)</span>
    (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"fuzzy"</span>)

      (add-hook 'isearch-mode-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">fuzzy</span>)))

      (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"fuzzy"</span>
       (turn-on-fuzzy-isearch))))
</pre>
          </div>

          <p>When search-invisible is t, perform-replace can replace matches in
          any invisible text, but does not display it when prompting the user
          for confirmation.</p>

          <p>When search-invisible is ‘open, perform-replace can replace
          matches only in hidden text (invisible through an overlay), and
          displays it when prompting the user.</p>

          <p>We lack a way to reveal truly invisible text when performing a
          search and replace. The URL of a bracket link in Org is an example of
          such truly invisible text.</p>

          <p>Juri’s solution to add ‘open-all could also be used in
          perform-replace to let the user see truly invisible matches before
          replacing them.</p>
        </div>
      </div>

      <div id="outline-container-sec-17-2" class="outline-3">
        <h3 id="sec-17-2">Regexp Search</h3>

        <div class="outline-text-3" id="text-17-2">
          <p>Emacs uses basic regular expressions, which means that the
          extended regexp operators have to be escaped. This means you have to
          use <code>\(</code>, <code>\|</code>, and <code>\)</code> instead of
          <code>(</code>, <code>|</code>, and <code>)</code>.</p>

          <p>You can build regexps with visual feedback by using:</p>

          <ul class="org-ul">
            <li><code>M-x re-builder</code> or</li>

            <li><code>M-x regex-tool</code> (by John Wiegley)</li>
          </ul>

          <p>Optimize regexps with <code>regexp-opt.el</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 15.5 (info "(emacs)Regexp Search")</span>

  (leuven--section <span style=
"color: #036A07;">"15.4 (emacs)Regexp Search"</span>)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use regexps by default (allows searching across line breaks)</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-s"</span>) 'isearch-forward-regexp)
  (global-set-key
    (kbd <span style="color: #036A07;">"C-r"</span>) 'isearch-backward-regexp)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">shift the meaning of `</span><span style=
"color: #D0372D; font-style: italic;">C-M-s/r</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-M-s"</span>) 'isearch-forward)
  (global-set-key
    (kbd <span style="color: #036A07;">"C-M-r"</span>) 'isearch-backward)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-17-3" class="outline-3">
        <h3 id="sec-17-3">Search Case</h3>

        <div class="outline-text-3" id="text-17-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 15.9 (info "(emacs)Search Case")</span>

  (leuven--section <span style=
"color: #036A07;">"15.8 (emacs)Search Case"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">searches should ignore case by default (in all buffers that do not</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">override this)</span>
  (setq-default case-fold-search t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-17-4" class="outline-3">
        <h3 id="sec-17-4">Replacement Commands</h3>

        <div class="outline-text-3" id="text-17-4">
          <p>Pass the string or the regexp directly to
          <code>query-replace</code>, so you can’t mangle it on the way, by
          pressing <code>M-%</code> while at the <code>I-search:</code>
          prompt.</p>
        </div>
      </div>

      <div id="outline-container-sec-17-5" class="outline-3">
        <h3 id="sec-17-5">Other Search-and-Loop Commands</h3>

        <div class="outline-text-3" id="text-17-5">
          <p><code>M-x flush-lines</code> (or
          <code>delete-matching-lines</code>) deletes each line that contains a
          match for REGEXP.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 15.11 (info "(emacs)Other Repeating Search") Commands</span>

  (leuven--section <span style=
"color: #036A07;">"15.10 (emacs)Other Repeating Search Commands"</span>)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-isearch-occur</span> ()
    <span style="color: #008000;">"Invoke `</span><span style=
"color: #D0372D;">occur</span><span style=
"color: #008000;">' from within `</span><span style=
"color: #D0372D;">isearch</span><span style="color: #008000;">'."</span>
    (interactive)
    (<span style=
"color: #0000FF;">let</span> ((case-fold-search isearch-case-fold-search))
      (occur
       (<span style="color: #0000FF;">if</span> isearch-regexp
           isearch-string
         (regexp-quote isearch-string)))))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">activate `</span><span style=
"color: #D0372D; font-style: italic;">occur</span><span style=
"color: #8D8D84; font-style: italic;">' easily while at the `</span><span style="color: #D0372D; font-style: italic;">I-search:</span><span style="color: #8D8D84; font-style: italic;">' prompt</span>
  (define-key isearch-mode-map
    (kbd <span style="color: #036A07;">"C-o"</span>) 'leuven-isearch-occur)
</pre>
          </div>

          <p>Occur Edit mode applies edits made in <code>*Occur*</code> buffers
          to the original buffers. It is bound to <code>e</code> in Occur
          mode.</p>
        </div>

        <div id="outline-container-sec-17-5-1" class="outline-4">
          <h4 id="sec-17-5-1">Multi-buffer occur</h4>

          <div class="outline-text-4" id="text-17-5-1">
            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%"><b>Have a look at <a href=
                "http://www.emacswiki.org/emacs/color-moccur.el">http://www.emacswiki.org/emacs/color-moccur.el</a>
                for searching regexp in buffer</b><br /></td>
              </tr>
            </table>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"color-moccur"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">multi-buffer occur (grep) mode</span>
    (mapc (function
           (<span style="color: #0000FF;">lambda</span> (x)
             (autoload x <span style=
"color: #036A07;">"color-moccur"</span> nil t)))
          '(moccur
            dmoccur
            dired-do-moccur
            Buffer-menu-moccur
            grep-buffers
            search-buffers
            occur-by-moccur
            isearch-moccur
            moccur-grep
            moccur-grep-find)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">multi-buffer occur (grep) mode</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"color-moccur"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">input word splited by space</span>
    (setq moccur-split-word t))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 15 ends here</span>
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-18" class="outline-2">
      <h2 id="sec-18">Commands for Fixing Typos</h2>

      <div class="outline-text-2" id="text-18">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 16 Commands for (info "(emacs)Fixit") Typos</span>

(leuven--chapter leuven-chapter-16-fixit <span style=
"color: #036A07;">"16 Commands for Fixing Typos"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-18-1" class="outline-3">
        <h3 id="sec-18-1">Checking and Correcting Spelling</h3>

        <div class="outline-text-3" id="text-18-1">
          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"></td>

              <td width="100%">
                <b>Install <a href=
                "http://ftp.gnu.org/gnu/aspell/w32/Aspell-0-50-3-3-Setup.exe">GNU
                Aspell 0.50.3</a> on Windows (more dictionaries than Cygwin
                Aspell)</b><br />

                <ul class="org-ul">
                  <li>Install <a href=
                  "http://ftp.gnu.org/gnu/aspell/w32/Aspell-en-0.50-2-3.exe">Aspell
                  English dictionary-0.50-2</a></li>

                  <li>Add <code>C:\Program Files (x86)\Aspell\bin</code> to the
                  System <code>PATH</code></li>
                </ul>
              </td>
            </tr>
          </table>

          <p>GNU <b>Aspell</b> is better than <b>Ispell</b>:</p>

          <ul class="org-ul">
            <li>It does recognize words with apostrophes (l’avion)… but it is
            slower.</li>

            <li>It can handle UTF-8 documents far better than Ispell can.</li>
          </ul>

          <p>See <a href=
          "https://github.com/rolandwalker/flyspell-lazy">Flyspell-lazy</a> if
          you are experiencing performance issues with Emacs’ built-in
          <code>flyspell-mode</code>.</p>

          <p>When spellchecking a buffer, the <code>A</code> command accepts an
          incorrect word, and adds it to the <b>file word list</b>
          (<code>ispell-add-per-file-word-list</code>).</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 16.4 Checking and Correcting (info "(emacs)Spelling")</span>

  (leuven--section <span style=
"color: #036A07;">"16.4 (emacs)Checking and Correcting Spelling"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">spelling checker program</span>
  (setq ispell-program-name             <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> undefined</span>
        (or (executable-find <span style="color: #036A07;">"aspell"</span>)
            (executable-find <span style="color: #036A07;">"ispell"</span>)
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">nil                         ; [default: "ispell"]</span>
            ))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">check if `</span><span style=
"color: #D0372D; font-style: italic;">ispell-program-name</span><span style=
"color: #8D8D84; font-style: italic;">' seems correct</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">ispell-check-program-name</span> ()
    <span style="color: #008000;">"Ensure that `</span><span style=
"color: #D0372D;">ispell-program-name</span><span style=
"color: #008000;">' is defined and non-nil."</span>
    (interactive)
    (and (boundp 'ispell-program-name)
         ispell-program-name))

  (<span style="color: #0000FF;">when</span> (ispell-check-program-name)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">ispell-region-or-buffer</span> ()
      <span style=
"color: #008000;">"Interactively check the current region or buffer for spelling </span><span style="color: #CC0000; background-color: #FFFF88;">error</span><span style="color: #008000;">s."</span>
      (interactive)
      (<span style="color: #0000FF;">if</span> mark-active
          (<span style="color: #0000FF;">if</span> (&lt; (mark) (point))
              (ispell-region (mark) (point))
              (ispell-region (point) (mark)))
          (ispell-buffer)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">key bindings (or `C-c i' prefix key binding?)</span>
    (global-set-key
      (kbd <span style=
"color: #036A07;">"C-$"</span>) 'ispell-region-or-buffer)
    (global-set-key
      (kbd <span style=
"color: #036A07;">"C-M-$"</span>) 'ispell-change-dictionary)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; default dictionary to use (if `</span><span style="color: #D0372D; font-style: italic;">ispell-local-dictionary</span><span style="color: #8D8D84; font-style: italic;">' is nil, that</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; is if there is no local dictionary to use in the buffer)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq ispell-dictionary "american") ; see `</span><span style="color: #D0372D; font-style: italic;">sentence-end-double-space</span><span style="color: #8D8D84; font-style: italic;">'</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable on-the-fly spell checking</span>
    (add-hook 'org-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (<span style=
"color: #0000FF;">if</span> (or (eq (aref (buffer-name) 0) ?\s) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">buffer starting with " *"</span>
                        (and (boundp 'org-babel-exp-reference-buffer)
                             org-babel-exp-reference-buffer)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">export buffer</span>
                    (message <span style=
"color: #036A07;">"DON'T TURN ON Flyspell mode in `</span><span style=
"color: #D0372D;">%s</span><span style=
"color: #036A07;">'"</span> (buffer-name))
                  (message <span style=
"color: #036A07;">"Turn on Flyspell mode in `</span><span style=
"color: #D0372D;">%s</span><span style=
"color: #036A07;">'"</span> (buffer-name))
                  (turn-on-flyspell))))
</pre>
          </div>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%"><b>Enable Flyspell in other modes deriving from
              Text (HTML, etc.)</b><br /></td>
            </tr>
          </table>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable on-the-fly spell checking</span>
    (add-hook 'text-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (message <span style=
"color: #036A07;">"Turn on Flyspell mode in `</span><span style=
"color: #D0372D;">%s</span><span style=
"color: #036A07;">'"</span> (buffer-name))
                (turn-on-flyspell)))

    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">org-export-as</span> (around leuven-org-export-as activate)
      <span style=
"color: #008000;">"Turn off Text mode hooks (Flyspell, etc.) when exporting current Org buffer."</span>
      (<span style="color: #0000FF;">let</span> (text-mode-hook)
        ad-do-it))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">prevent flyspell from finding mistakes in the code, well in comments and</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">strings</span>
    (add-hook 'prog-mode-hook 'flyspell-prog-mode)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ispell"</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">save the personal dictionary without confirmation</span>
      (setq ispell-silently-savep t)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">extensions and extra switches to pass to the `</span><span style="color: #D0372D; font-style: italic;">ispell</span><span style="color: #8D8D84; font-style: italic;">' program</span>
      (<span style="color: #0000FF;">cond</span>
</pre>
          </div>

          <p>Tell <code>aspell</code> to speed up, though this reduces somewhat
          the quality of its suggestions. According to the <code>aspell</code>
          documentation:</p>

          <ul class="org-ul">
            <li>“ultra” is the fastest suggestion mode, which is still twice as
            slow as <code>ispell</code>.</li>

            <li>If your machine is fast enough, a better option might be to try
            “fast” mode, which is twice as slow as “ultra”, but more
            accurate.</li>

            <li>The “normal” mode, which is the <code>aspell</code> default, is
            even more accurate, but is reportedly 10 times slower than “fast”
            mode.</li>
          </ul>

          <p>Use the <code>-C</code> option which will
          ConsiderCamelCaseToBeCorrect.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
       ((string-match <span style=
"color: #036A07;">"aspell"</span> ispell-program-name)
        (setq ispell-extra-args '(<span style=
"color: #036A07;">"--sug-mode=ultra"</span> <span style=
"color: #036A07;">"-C"</span>))
        (setq ispell-really-aspell t)
        (setq ispell-really-hunspell nil))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
       ((string-match <span style=
"color: #036A07;">"ispell"</span> ispell-program-name)
        (setq ispell-extra-args '())
        (setq ispell-really-aspell nil)
        (setq ispell-really-hunspell nil)))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; solve the problem of words separated by `-' flagged as</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; erroneous by removing the `-' from the value of otherchars</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(if (fboundp 'ispell-get-decoded-string)</span>
      <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(defun ispell-get-otherchars ()</span>
      <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">(replace-regexp-in-string "-" "" (ispell-get-decoded-string 3))))</span>
</pre>
          </div>

          <p>Add language indicator.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      (setq-default mode-line-format
                    (cons
                     '(<span style="color: #006FE0;">:eval</span>
                       (<span style=
"color: #0000FF;">let</span> ((dict (and (<span style=
"color: #0000FF;">featurep</span> '<span style="color: #D0372D;">ispell</span>)
                                        (not buffer-read-only)
                                        (or ispell-local-dictionary
                                            ispell-dictionary
                                            <span style=
"color: #036A07;">"--"</span> <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">default dictionary</span>
                                            ))))
                         (and dict
                              (propertize (concat <span style=
"color: #036A07;">" "</span> (substring dict 0 2))
                                          'face 'mode-line-highlight))))
                     (default-value 'mode-line-format)))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      )
</pre>
          </div>

          <p>Note – Each time you cycle to another window (<code>C-x o</code>),
          the <b>Ispell process</b> gets <b>killed</b> and a <b>new Ispell
          process</b> is <b>started</b>, if the language in the next window is
          different from the language in the current window…</p>

          <p><code>flyspell-auto-correct-word</code> is bound to
          <code>C-.</code>. Press it one time to correct the word under the
          cursor. If several spellings are possible, they appear in the
          minibuffer. Just keep hitting <code>C-.</code> to replace the word
          with the successive suggestions.</p>

          <p><code>flyspell-goto-next-error</code> is bound to “C-,”. Press it
          to go to the next previously detected error.</p>

          <p><code>flyspell-correct-word-before-point</code> is bound to
          <code>C-c $</code>. Press it to <b>pop up a menu</b> of possible
          corrections for misspelled word before point.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't use `</span><span style=
"color: #D0372D; font-style: italic;">M-TAB</span><span style=
"color: #8D8D84; font-style: italic;">' to auto-correct the current word (only use `</span><span style="color: #D0372D; font-style: italic;">C-.</span><span style="color: #8D8D84; font-style: italic;">')</span>
    (setq flyspell-use-meta-tab nil)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> M-TAB is still bound to `</span><span style="color: #D0372D; font-style: italic;">flyspell-auto-correct-word</span><span style="color: #8D8D84; font-style: italic;">' when this</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">chunk of code is placed within (with-eval-after-load "flyspell"...)</span>

    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"flyspell"</span>

     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't consider that a word repeated twice is an </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span>
     (setq flyspell-mark-duplications-flag nil)

     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">fix the "enabling flyspell mode gave an </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">" bug</span>
     (setq flyspell-issue-welcome-flag nil)

     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; don't print messages for every word (when checking the entire buffer)</span>
     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; as it causes a (small) slowdown</span>
     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq flyspell-issue-message-flag nil)</span>

     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">dash character (`-') is considered as a word delimiter</span>
     (setq-default flyspell-consider-dash-as-word-delimiter-flag t)
     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">'("francais" "deutsch8" "norsk")</span>

     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">spell-check your XHTML (by adding `</span><span style="color: #D0372D; font-style: italic;">nxml-text-face</span><span style="color: #8D8D84; font-style: italic;">' to the list of</span>
     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">faces corresponding to text in programming-mode buffers)</span>
     (add-to-list 'flyspell-prog-text-faces 'nxml-text-face)

     (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-flyspell-toggle-dictionary</span> ()
       <span style=
"color: #008000;">"Toggle the local dictionary between French and US English."</span>
       (interactive)
       (<span style=
"color: #0000FF;">let</span> ((dict (or ispell-local-dictionary
                       ispell-dictionary)))
         (setq dict (<span style=
"color: #0000FF;">if</span> (string= dict <span style=
"color: #036A07;">"francais"</span>) <span style=
"color: #036A07;">"american"</span> <span style=
"color: #036A07;">"francais"</span>))
         (message <span style="color: #036A07;">"Switched to %S"</span> dict)
         (sit-for 0.5)
         (ispell-change-dictionary dict)
         (force-mode-line-update)
         (<span style="color: #0000FF;">when</span> flyspell-mode
           <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(flyspell-delete-all-overlays)</span>
           <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">if above is executed, the advised `</span><span style="color: #D0372D; font-style: italic;">org-mode-flyspell-verify</span><span style="color: #8D8D84; font-style: italic;">'</span>
           <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">won't work anymore</span>
           (flyspell-buffer))))

     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">key bindings</span>
     (global-set-key
       (kbd <span style="color: #036A07;">"C-$"</span>) 'flyspell-buffer)
     (global-set-key
       (kbd <span style=
"color: #036A07;">"C-M-$"</span>) 'leuven-flyspell-toggle-dictionary)))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">client for rfc2229 dictionary servers</span>
  (<span style="color: #0000FF;">when</span> (try-require <span style=
"color: #036A07;">"dictionary-autoloads"</span>)

    (global-set-key
      (kbd <span style="color: #036A07;">"C-c d s"</span>) 'dictionary-search)
    (global-set-key
      (kbd <span style=
"color: #036A07;">"C-c d l"</span>) 'dictionary-lookup-definition)
    (global-set-key
      (kbd <span style=
"color: #036A07;">"C-c d m"</span>) 'dictionary-match-words)

    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"dictionary"</span>

      (global-dictionary-tooltip-mode 1)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; server contacted for searching the dictionary</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq dictionary-server "localhost")</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; connect via a HTTP proxy (using the CONNECT command)</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq dictionary-use-http-proxy t)</span>
      <span style="color: #8D8D84;">;;</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; name of the HTTP proxy to use</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq dictionary-proxy-server "hellman") ; </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>
      <span style="color: #8D8D84;">;;</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; port of the proxy server</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq dictionary-proxy-port 8080) ; </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use proxy</span>
      (setq url-proxy-services          <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! Emacs expects just hostname and port</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! in `</span><span style=
"color: #D0372D; font-style: italic;">url-proxy-services</span><span style=
"color: #8D8D84; font-style: italic;">',</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! NOT prefixed with "http://"</span>
            `((<span style=
"color: #036A07;">"http"</span>     . ,(getenv <span style=
"color: #036A07;">"http_proxy"</span>))
              (<span style=
"color: #036A07;">"ftp"</span>      . ,(getenv <span style=
"color: #036A07;">"http_proxy"</span>))
              (<span style="color: #036A07;">"no_proxy"</span> . <span style=
"color: #036A07;">"^.*example.com"</span>)))
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">disable proxy for some hosts</span>
    ))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> excellent!</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-answers-define</span> ()
    <span style=
"color: #008000;">"Look up the word under cursor in a browser."</span>
    (interactive)
    (browse-url
     (concat <span style=
"color: #036A07;">"http://www.answers.com/main/ntquery?s="</span> (find-tag-default))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-lookup-word-definition-in-w3m</span> ()
    <span style=
"color: #008000;">"Look up the word's definition in a emacs-w3m.</span>
<span style=
"color: #008000;">  If a region is active (a phrase), lookup that phrase."</span>
    (interactive)
    (<span style="color: #0000FF;">let</span> (word
          url)
      (setq word
            (<span style="color: #0000FF;">if</span> (use-region-p)
                (buffer-substring-no-properties (region-beginning)
                                                (region-end))
              (find-tag-default)))
      (setq word (replace-regexp-in-string <span style=
"color: #036A07;">" "</span> <span style="color: #036A07;">"%20"</span> word))
      (setq url (concat <span style=
"color: #036A07;">"http://www.answers.com/main/ntquery?s="</span> word))
      (w3m-browse-url url)))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 16 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-19" class="outline-2">
      <h2 id="sec-19">Keyboard Macros</h2>

      <div class="outline-text-2" id="text-19">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 17 (info "(emacs)Keyboard Macros")</span>

(leuven--chapter leuven-chapter-17-keyboard-macros <span style=
"color: #036A07;">"17 Keyboard Macros"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-19-1" class="outline-3">
        <h3 id="sec-19-1">Basic Use</h3>

        <div class="outline-text-3" id="text-19-1">
          <dl class="org-dl">
            <dt><code>&lt;S-f8&gt;</code></dt>

            <dd>Start recording your keyboard macro.</dd>

            <dt><code>&lt;S-f8&gt;</code> again</dt>

            <dd>Stop recording it.</dd>

            <dt><code>&lt;f8&gt;</code></dt>

            <dd>Call the keyboard macro.</dd>
          </dl>

          <p>If you want to check the result each time before repeating, type
          <code>&lt;f8&gt; e e...</code>.</p>

          <p>If you want to repeat only N times, type <code>C-u N
          &lt;f8&gt;</code>.</p>

          <p>If you want to repeat forever or until error, type <code>C-u 0
          &lt;f8&gt;</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 17.1 (info "(emacs)Basic Keyboard Macro") Use</span>

  (leuven--section <span style=
"color: #036A07;">"17.1 (emacs)Basic Keyboard Macro Use"</span>)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-kmacro-turn-on-recording</span> ()
    <span style=
"color: #008000;">"Start recording a keyboard macro and toggle functionality of key binding."</span>
    (interactive)
    (global-set-key
      (kbd <span style=
"color: #036A07;">"&lt;S-f8&gt;"</span>) 'leuven-kmacro-turn-off-recording)
    (kmacro-start-macro nil))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-kmacro-turn-off-recording</span> ()
    <span style=
"color: #008000;">"Stop recording a keyboard macro and toggle functionality of key binding."</span>
    (interactive)
    (global-set-key
      (kbd <span style=
"color: #036A07;">"&lt;S-f8&gt;"</span>) 'leuven-kmacro-turn-on-recording)
    (kmacro-end-macro nil))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">start/stop recording a keyboard macro</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;S-f8&gt;"</span>) 'leuven-kmacro-turn-on-recording)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">execute the most recent keyboard macro</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;f8&gt;"</span>) 'kmacro-call-macro)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-19-2" class="outline-3">
        <h3 id="sec-19-2">Naming and Saving Keyboard Macros</h3>

        <div class="outline-text-3" id="text-19-2">
          <dl class="org-dl">
            <dt><code>&lt;C-f8&gt;</code></dt>

            <dd>Give the keyboard macro a name (to invoke it under that
            name).</dd>
          </dl>

          <p>Assign the last macro to a free key binding of your choice with
          <code>kmacro-bind-to-key</code> (bound to <code>C-x C-k
          b</code>).</p>

          <p>To <b>save a named keyboard macro</b> (with its key binding) for
          future use, switch to your <code>.emacs</code> buffer, and run
          <code>C-u M-x insert-kbd-macro</code> (if you leave out the
          <code>C-u</code>, then it will just insert the macro definition
          without the <code>global-set-key</code> sequence).</p>

          <p>You can add <code>(interactive)</code> to make it a command, so
          that you can use it with <code>M-x</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 17.5 Name and (info "(emacs)Save Keyboard Macro")s</span>

  (leuven--section <span style=
"color: #036A07;">"17.5 (emacs)Name and Save Keyboard Macros"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">assign a name to the last keyboard macro defined</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;C-f8&gt;"</span>) 'kmacro-name-last-macro)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 17 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-20" class="outline-2">
      <h2 id="sec-20">Files Handling</h2>

      <div class="outline-text-2" id="text-20">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 18 (info "(emacs)Files") Handling</span>

(leuven--chapter leuven-chapter-18-files <span style=
"color: #036A07;">"18 Files Handling"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-20-1" class="outline-3">
        <h3 id="sec-20-1">File Names</h3>

        <div class="outline-text-3" id="text-20-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.1 (info "(emacs)File Names")</span>

  (leuven--section <span style=
"color: #036A07;">"18.1 (emacs)File Names"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; name of default directory</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq default-directory (concat (getenv "HOME") "/"))</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-20-2" class="outline-3">
        <h3 id="sec-20-2">Visiting Files</h3>

        <div class="outline-text-3" id="text-20-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.2 (info "(emacs)Visiting") Files</span>

  (leuven--section <span style=
"color: #036A07;">"18.2 (emacs)Visiting Files"</span>)

  (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">find-file</span> (around leuven-find-file activate)
    <span style=
"color: #008000;">"Open the file named FILENAME and report time spent."</span>
    (<span style="color: #0000FF;">let</span> ((filename (ad-get-arg 0))
          (find-file-time-start (float-time)))
      (message <span style=
"color: #036A07;">"(Info) Finding file %s..."</span> filename)
      ad-do-it
      (message <span style=
"color: #036A07;">"(Info) Found file %s in %.2f s"</span> filename
               (- (float-time) find-file-time-start))))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">visit a file</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;f3&gt;"</span>) 'find-file)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-20-3" class="outline-3">
        <h3 id="sec-20-3">Saving Files</h3>

        <div class="outline-text-3" id="text-20-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.3 (info "(emacs)Saving") Files</span>

  (leuven--section <span style=
"color: #036A07;">"18.3 (emacs)Saving Files"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make your changes permanent</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;f2&gt;"</span>) 'save-buffer)
</pre>
          </div>

          <p>Builtin file version control of Emacs.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make numbered backups</span>
  (setq version-control t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">save backup files (i.e., `</span><span style="color: #D0372D; font-style: italic;">foo~</span><span style="color: #8D8D84; font-style: italic;">' or `</span><span style="color: #D0372D; font-style: italic;">foo.~i~</span><span style="color: #8D8D84; font-style: italic;">') in one central location</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(instead of in the local directory)</span>
  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">filenames matching a regexp are backed up in the corresponding</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">directory</span>
    (setq backup-directory-alist
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Emacs will `</span><span style=
"color: #D0372D; font-style: italic;">make-directory</span><span style=
"color: #8D8D84; font-style: italic;">' it, if necessary</span>
          '((<span style="color: #036A07;">".*"</span> . <span style=
"color: #036A07;">"~/.emacs.d/backups/"</span>)))) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">regexp =&gt; directory mappings</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; number of oldest versions to keep when a new numbered backup is made</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq kept-old-versions 0)            ; [default: 2]</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of newest versions to keep when a new numbered backup is made</span>
  (setq kept-new-versions 20)           <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[default: 2]</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't ask me about deleting excess backup versions</span>
  (setq delete-old-versions t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">always use copying to create backup files (don't clobber symlinks)</span>
  (setq backup-by-copying t)
</pre>
          </div>

          <p>Customize saving of files.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ensure a file ends in a newline when it is saved</span>
  (setq require-final-newline t)
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Do this only for text and Fundamental modes, because I could</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">edit binary files (see `</span><span style="color: #D0372D; font-style: italic;">mode-require-final-newline</span><span style="color: #8D8D84; font-style: italic;">')</span>
</pre>
          </div>

          <p>Update time stamps (and copyright notice) automatically.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">update time stamps every time you save a buffer</span>
  (add-hook 'before-save-hook 'time-stamp)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">maintain last change time stamps (`Time-stamp: &lt;&gt;' occurring within</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the first 8 lines) in files edited by Emacs</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"time-stamp"</span>

   <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">format of the string inserted by `M-x time-stamp':</span>
   <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`YYYY-MM-DD Day HH:MM' (see `</span><span style="color: #D0372D; font-style: italic;">system-time-locale</span><span style="color: #8D8D84; font-style: italic;">' for non-numeric</span>
   <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">formatted items of time)</span>
   (setq-default time-stamp-format <span style=
"color: #036A07;">"%:y-%02m-%02d %3a %02H:%02M"</span>))

  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">update the copyright notice in current buffer</span>
    (add-hook 'before-save-hook 'copyright-update))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-20-4" class="outline-3">
        <h3 id="sec-20-4">Reverting a Buffer</h3>

        <div class="outline-text-3" id="text-20-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.4 (info "(emacs)Reverting") a Buffer</span>

  (leuven--section <span style=
"color: #036A07;">"18.4 (emacs)Reverting a Buffer"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">replace current buffer text with the text of the visited file on disk</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-revert-buffer-without-query</span> ()
    <span style=
"color: #008000;">"Unconditionally revert current buffer."</span>
    (interactive)
    (revert-buffer t t)                 <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">ignore-auto(-save), noconfirm</span>
    (message <span style=
"color: #036A07;">"Buffer is up to date with file on disk"</span>))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">key binding</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;C-f12&gt;"</span>) 'leuven-revert-buffer-without-query)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-20-5" class="outline-3">
        <h3 id="sec-20-5">Auto-Saving: Protection Against Disasters</h3>

        <div class="outline-text-3" id="text-20-5">
          <p>How to get Emacs to auto-save to your local disk
          (<code>#file#</code>).</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.6 (info "(emacs)Auto Save"): Protection Against Disasters</span>

  (leuven--section <span style=
"color: #036A07;">"18.6 (emacs)Auto Save: Protection Against Disasters"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">auto-save every 100 input events</span>
  (setq auto-save-interval 100)         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[default: 300]</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">auto-save after 10 seconds idle time</span>
  (setq auto-save-timeout 10)           <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[default: 30]</span>
</pre>
          </div>

          <p>Disable backups and auto-save only in the current buffer with
          <code>M-x sensitive-mode</code>:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">define-minor-mode</span> <span style=
"color: #006699;">sensitive-mode</span>
    <span style=
"color: #008000;">"For sensitive files like password lists.</span>
<span style=
"color: #008000;">  It disables backup creation and auto saving in the current buffer.</span>

<span style=
"color: #008000;">  With no argument, this command toggles the mode.  Non-null prefix argument</span>
<span style=
"color: #008000;">  turns on the mode.  Null prefix argument turns off the mode."</span>
    nil                                 <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">initial value</span>
    <span style=
"color: #036A07;">" Sensitive"</span>                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">indicator for the mode line</span>
    nil                                 <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">minor mode bindings</span>
    (<span style="color: #0000FF;">if</span> (symbol-value sensitive-mode)
        (<span style="color: #0000FF;">progn</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">disable backups</span>
          (set (make-local-variable 'backup-inhibited) t)
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">disable auto-save</span>
          (<span style="color: #0000FF;">if</span> auto-save-default
              (auto-save-mode -1)))
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">resort to default value of backup-inhibited</span>
      (kill-local-variable 'backup-inhibited)
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">resort to default auto save setting</span>
      (<span style="color: #0000FF;">if</span> auto-save-default
          (auto-save-mode 1))))
</pre>
          </div>

          <p>Make the message “<i>FILENAME has auto save data</i>”
          unmissable:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">recover-this-file</span>
    '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FF3F3F"</span>)))
    <span style=
"color: #008000;">"Face for buffers visiting files with auto save data."</span>
    <span style="color: #006FE0;">:group</span> 'files)

  (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven--recover-this-file</span> nil
    <span style=
"color: #008000;">"If non-nil, an overlay indicating that the visited file has auto save data."</span>)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--recover-this-file</span> ()
    (<span style="color: #0000FF;">let</span> ((<span style=
"color: #ff0000; font-weight: bold;">warn</span> (not buffer-read-only)))
      (<span style="color: #0000FF;">when</span> (and warn
                 <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">no need to warn if buffer is auto-saved under the name of</span>
                 <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the visited file</span>
                 (not (and buffer-file-name
                           auto-save-visited-file-name))
                 (file-newer-than-file-p (or buffer-auto-save-file-name
                                             (make-auto-save-file-name))
                                         buffer-file-name))
        (set (make-local-variable 'leuven--recover-this-file)
             (make-overlay (point-min) (point-max)))
        (overlay-put leuven--recover-this-file
                     'face 'recover-this-file))))

  (add-hook 'find-file-hook 'leuven--recover-this-file)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-20-6" class="outline-3">
        <h3 id="sec-20-6">Comparing Files</h3>

        <div class="outline-text-3" id="text-20-6">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.9 (info "(emacs)Comparing Files")</span>

  (leuven--section <span style=
"color: #036A07;">"18.9 (emacs)Comparing Files"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default to unified diffs</span>
  (setq diff-switches <span style="color: #036A07;">"-u"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">compare text in current window with text in next window</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-="</span>) 'compare-windows)
</pre>
          </div>

          <p>You can use <code>M-x smerge-mode</code> to edit a file with
          conflict markers (output from the <code>diff3</code> program). Smerge
          does not automatically select regions but provides convenient key
          bindings to navigate between conflicts and to choose the A or B
          variant.</p>
        </div>
      </div>

      <div id="outline-container-sec-20-7" class="outline-3">
        <h3 id="sec-20-7">Diff Mode</h3>

        <div class="outline-text-3" id="text-20-7">
          <p>In Diff mode, I can <b>select a hunk and apply it (in
          reverse)</b>. Nice following <code>C-x v =</code> to show what’s
          changed, and decide to reverse a change.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.10 (info "(emacs)Diff Mode")</span>

  (leuven--section <span style=
"color: #036A07;">"18.10 (emacs)Diff Mode"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">mode for viewing/editing context diffs</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"diff-mode"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">highlight the changes with better granularity</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-diff-make-fine-diffs</span> ()
      <span style="color: #008000;">"Enable Diff Auto-Refine mode."</span>
      (interactive)
      (<span style=
"color: #0000FF;">let</span> (diff-auto-refine-mode)      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">avoid refining the hunks redundantly ...</span>
        (<span style="color: #0000FF;">condition-case</span> nil
            (<span style="color: #0000FF;">save-excursion</span>
              (goto-char (point-min))
              (<span style="color: #0000FF;">while</span> (not (eobp))
                (diff-hunk-next)
                (diff-refine-hunk)))    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">... when this does it.</span>
          (<span style=
"color: #CC0000; background-color: #FFFF88; font-weight: bold;">error</span> nil))
        (run-at-time 0.0 nil
                     (<span style="color: #0000FF;">lambda</span> ()
                       (<span style=
"color: #0000FF;">if</span> (eq major-mode 'diff-mode)
                           <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">put back the cursor only if still in a Diff buffer</span>
                           <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">after the delay</span>
                           (goto-char (point-min)))))))

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--diff-make-fine-diffs-if-necessary</span> ()
      <span style=
"color: #008000;">"Auto-refine only the regions of 14,000 bytes or less."</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">check for auto-refine limit</span>
      (<span style="color: #0000FF;">unless</span> (&gt; (buffer-size) 14000)
        (leuven-diff-make-fine-diffs)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(when (fboundp 'advice-add)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(advice-add 'vc-diff :after</span>
    <span style="color: #8D8D84;">;;    </span><span style=
"color: #8D8D84; font-style: italic;">(lambda (&amp;rest _)</span>
    <span style="color: #8D8D84;">;;      </span><span style=
"color: #8D8D84; font-style: italic;">(leuven--diff-make-fine-diffs-if-necessary))))</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> I tried this simpler form, but does not work.</span>
    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">vc-diff</span> (after leuven-vc-diff activate)
      <span style=
"color: #008000;">"Push the auto-refine function after `</span><span style=
"color: #D0372D;">vc-diff</span><span style="color: #008000;">'."</span>
      (leuven--diff-make-fine-diffs-if-necessary))

    )
</pre>
          </div>

          <p>To compare 2 text files, you can also use Ediff if the following
          command works.</p>
          <pre class="example">
M-: (executable-find "diff") RET
</pre>

          <p>In Ediff, press:</p>

          <ul class="org-ul">
            <li><code>?</code> to get help</li>

            <li><code>|</code> to change from vertical window layout to
            horizontal window layout, and vice versa</li>

            <li><code>a</code> or <code>b</code> key to merge the code from A
            to B or from B to A</li>

            <li><code>ra</code> or <code>rb</code> to revert your change</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; Ediff, a comprehensive visual interface to diff &amp; patch</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; setup for Ediff's menus and autoloads</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(try-require 'ediff-hook)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">already loaded (by Emacs?)</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ediff"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">skip over difference regions that differ only in white space and line</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">breaks</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq-default ediff-ignore-similar-regions  t)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> Make another key binding (than `E') with that value in a let-bind</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">sometimes grab the mouse and put it in the control frame</span>
    (setq ediff-grab-mouse 'maybe)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">do everything in one frame</span>
    (setq ediff-window-setup-function 'ediff-setup-windows-plain)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">split the window (horizontally or vertically) depending on the frame</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">width</span>
    (setq ediff-split-window-function
          (<span style="color: #0000FF;">lambda</span> (<span style=
"color: #6434A3;">&amp;optional</span> arg)
            (<span style="color: #0000FF;">if</span> (&gt; (frame-width) 160)
                (split-window-horizontally arg)
              (split-window-vertically
               arg)))))
</pre>
          </div>

          <p>For <b>comparing two directories</b>, you can use
          <code>ediff-directories</code> or <a href=
          "http://meldmerge.org/">Meld</a>.</p>

          <p><code>ediff-directories</code> combined with the key sequence “= h
          x” shows you only the files which differ.</p>

          <p>It is not recursive, but it gives you also subdirectory pairs to
          compare. Just hit <code>RET</code> on such a pair.</p>

          <p>As bonus, it even works for remote directories.</p>

          <p>CAUTION – <code>ediff-directories</code> does not list files in
          one directory with no corresponding files in the other directory.</p>
        </div>
      </div>

      <div id="outline-container-sec-20-8" class="outline-3">
        <h3 id="sec-20-8">Miscellaneous File Operations</h3>

        <div class="outline-text-3" id="text-20-8">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.11 (info "(emacs)Misc File Ops")</span>

  (leuven--section <span style=
"color: #036A07;">"18.11 (emacs)Misc File Ops"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use the system's Trash (when it is available)</span>
  (setq delete-by-moving-to-trash t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-20-9" class="outline-3">
        <h3 id="sec-20-9">Accessing Compressed Files</h3>

        <div class="outline-text-3" id="text-20-9">
          <ul class="org-ul">
            <li>Display the <b>contents</b> of the archive</li>

            <li><b>View or edit</b> the actual files contained withing the
            archive</li>
          </ul>

          <p>Using the Emacs Dired utility, you can compress or uncompress
          marked files (using <code>gzip</code>) by pressing
          <code>Z</code>.</p>

          <p>If you want to create one <b>archive</b> file from marked files,
          you can use:</p>
          <pre class="example">
! tar -cf out.tar *
</pre>

          <p>And if you actually want to <b>compress</b> the resulting archive,
          use one of the two commands:</p>
          <pre class="example">
! tar -cZf out.tar.Z
! tar -czf out.tar.gz
</pre>
        </div>
      </div>

      <div id="outline-container-sec-20-10" class="outline-3">
        <h3 id="sec-20-10">Auto Encryption</h3>

        <div class="outline-text-3" id="text-20-10">
          <p>History:</p>

          <ol class="org-ol">
            <li>mailcrypt</li>

            <li>PGG</li>

            <li>EasyPG (= epg) is a GnuPG interface for Emacs.

              <p>It allows you to encrypt/decrypt files within Emacs. When you
              use <code>C-x C-f</code> to access an encrypted file, Emacs
              prompts you for the passphrase and then decrypts the file before
              displaying it. When you save the file, Emacs automatically
              encrypts it again with that same key.</p>

              <p>It has two aspects:</p>

              <ul class="org-ul">
                <li>convenient tools which allow to use GnuPG from Emacs
                (EasyPG Assistant), and</li>

                <li>a fully functional interface library to GnuPG (EasyPG
                Library).

                  <table class="inlinetask" width="100%">
                    <tr>
                      <td valign="top"><b><span class=
                      "todo TODO">TODO</span></b></td>

                      <td width="100%">
                        <b>Fetch the key automatically</b><br />

                        <p>Set the <code>keyserver</code> entry in the
                        <code>~/.gnupg/gpg.conf</code> file properly.</p>
                      </td>
                    </tr>
                  </table>
                </li>
              </ul>
            </li>
          </ol>

          <p>What is PGP/MIME, what is OpenPGP, and how Gnus handles them?</p>

          <ul class="org-ul">
            <li>PGP/MIME is a standard, which mml2015* implements using
            ep[ag]-*.</li>

            <li>OpenPGP is a standard, which ep[ag]-* implements.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the EasyPG Assistant, transparent file encryption</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"epa-file"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">stop EasyPG from asking for the recipient used for encrypting files</span>
    (setq epa-file-encrypt-to <span style=
"color: #036A07;">"johndoe@example.com"</span>)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">if no one is selected (""), symmetric encryption will always be</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">performed</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">cache passphrase for symmetric encryption (VERY important)</span>
    (setq epa-file-cache-passphrase-for-symmetric-encryption t)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Not to sound paranoid.  But if you want caching, it's recommended to</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use *public-key encryption* instead of symmetric encryption.</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">gpg-agent</span><span style=
"color: #8D8D84; font-style: italic;">' is the preferred way to do this.</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">prompt for the password in the Emacs minibuffer (instead of using a</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">graphical password prompt for GPG)</span>
    (setenv <span style="color: #036A07;">"GPG_AGENT_INFO"</span> nil))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-20-11" class="outline-3">
        <h3 id="sec-20-11">Remote Files</h3>

        <div class="outline-text-3" id="text-20-11">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.14 (info "(emacs)Remote Files")</span>

  (leuven--section <span style=
"color: #036A07;">"18.14 (emacs)Remote Files"</span>)
</pre>
          </div>
        </div>

        <div id="outline-container-sec-20-11-1" class="outline-4">
          <h4 id="sec-20-11-1">Ange-FTP</h4>

          <div class="outline-text-4" id="text-20-11-1">
            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%">
                  <b>Check out why network share aren’t accessible</b><br />

                  <p>I should be able to open <i>/CAUCHY/fsd</i>…</p>
                </td>
              </tr>
            </table>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** Ange-FTP</span>

  (leuven--section <span style="color: #036A07;">"Ange-FTP"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">transparent FTP support</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ange-ftp"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">try to use passive mode in ftp, if the client program supports it</span>
    (setq ange-ftp-try-passive-mode t)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">needed for Ubuntu</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-20-11-2" class="outline-4">
          <h4 id="sec-20-11-2">TRAMP</h4>

          <div class="outline-text-4" id="text-20-11-2">
            <p>(other protocols than just FTP)</p>

            <p><code>/method:user@host:/path/file</code></p>

            <p>Examples:</p>

            <ul class="org-ul">
              <li><code>C-x C-f /ssh:user@host:/home/user/.bashrc</code></li>

              <li><code>C-x C-f /plink:user@host:/home/user/.bashrc</code>
              (from Windows)</li>

              <li><code>C-x C-f /sudo:root@localhost:/etc/group</code></li>
            </ul>

            <p>Also <code>M-x find-dired</code>, <code>rgrep</code>,
            <code>lgrep</code>, <code>compile -</code> properly work with TRAMP
            (run on remote server and show result in your Emacs).</p>

            <p>Note – `sshfs’ can give me the same functionality as TRAMP: it
            is like a personal NFS (another mounted file system) over SSH. If
            you can SSH to a server, you can probably do `sshfs’.</p>

            <p>&gt; I’m in shell mode, logged in on another machine over ssh,
            and I want to do &gt; some ‘crontab -e’ editing on that machine.
            But that will bring up a new &gt; editor, which is whatever you set
            in your EDITOR env variable, and both vi &gt; and emacs cannot be
            used in this dumb shell. How can I edit the crontab in &gt; my
            emacs session?</p>

            <p>Create the crontab on the remote machine, open it using TRAMP
            from your machine, edit and save and then reinstall it. That or
            simply enable X forwarding so running emacs on the remote bring up
            Emacs gtk/x on your main machine editing your cron file on the
            remote.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** TRAMP - Transparent Remote Access, Multiple Protocols</span>

  (leuven--section <span style="color: #036A07;">"TRAMP"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"tramp"</span>         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">the autoloads are predefined</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 4 (info "(tramp)Configuration") of TRAMP for use</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4.6 Selecting a (info "(tramp)Default Method")</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default transfer method</span>
    (setq tramp-default-method          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[default: "scp"]</span>
          (<span style="color: #0000FF;">cond</span> (running-ms-windows
                 <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(issues with Cygwin `</span><span style=
"color: #D0372D; font-style: italic;">ssh</span><span style=
"color: #8D8D84; font-style: italic;">' which does not cooperate</span>
                 <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">with Emacs processes -&gt; use `</span><span style="color: #D0372D; font-style: italic;">plink</span><span style="color: #8D8D84; font-style: italic;">' from PuTTY, it</span>
                 <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">definitely does work under Windows)</span>
                 <span style="color: #8D8D84;">;;</span>
                 <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`C-x C-f /plink:user@host:/some/directory/file'</span>
                 <span style="color: #036A07;">"plink"</span>)
                (t
                 <span style="color: #036A07;">"ssh"</span>)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">You might try out the `</span><span style="color: #D0372D; font-style: italic;">rsync</span><span style="color: #8D8D84; font-style: italic;">' method, which saves the remote</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">files quite a bit faster than SSH.  It's based on SSH, so it</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">works the same, just saves faster.</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(nconc (cadr (assq 'tramp-login-args (assoc "ssh" tramp-methods)))</span>
    <span style="color: #8D8D84;">;;        </span><span style=
"color: #8D8D84; font-style: italic;">'(("bash" "-i")))</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setcdr (assq 'tramp-remote-sh (assoc "ssh" tramp-methods))</span>
    <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">'("bash -i"))</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4.9 Connecting to a remote host using (info "(tramp)Multi-hops")</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">new proxy system (introduced with Tramp 2.1, instead of the old</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"multi-hop" filename syntax) to edit files on a remote server by</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">going via another server</span>
    (<span style=
"color: #0000FF;">when</span> (boundp 'tramp-default-proxies-alist)
      (add-to-list 'tramp-default-proxies-alist
                   <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"final host" "user" "proxy in the middle"</span>
                   '(<span style=
"color: #036A07;">"10.10.13.123"</span> <span style=
"color: #036A07;">"\\`root\\'"</span> <span style=
"color: #036A07;">"/ssh:%h:"</span>)))
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Opening `</span><span style=
"color: #D0372D; font-style: italic;">/sudo:10.10.13.123:</span><span style=
"color: #8D8D84; font-style: italic;">' would connect first `</span><span style="color: #D0372D; font-style: italic;">10.10.13.123</span><span style="color: #8D8D84; font-style: italic;">'</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">via `</span><span style=
"color: #D0372D; font-style: italic;">ssh</span><span style=
"color: #8D8D84; font-style: italic;">' under your account name, and perform `sudo -u root' on</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">that host afterwards.  It is important to know that the given</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">method is applied on the host which has been reached so far.  The</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">trick is to think from the end.</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4.12 (info "(tramp)Password handling") for several connections</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">how many seconds passwords are cached</span>
    (setq password-cache-expiry 60)     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[default: 16]</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4.15 (info "(tramp)Remote shell setup") hints</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">string used for end of line in rsh connections</span>
    (setq tramp-rsh-end-of-line         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[default: "\n"]</span>
          (<span style=
"color: #0000FF;">cond</span> (running-ms-windows <span style=
"color: #036A07;">"\n"</span>)
                (t <span style="color: #036A07;">"\r"</span>)))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4.16 (info "(tramp)Auto-save and Backup") configuration</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">faster auto saves</span>
    (setq tramp-auto-save-directory temporary-file-directory)
</pre>
            </div>

            <p>The usual way to debug Tramp is to set
            <code>tramp-verbose</code> to 6. This will produce a debug buffer,
            which you can show at <code>tramp-devel@gnu.org</code>.</p>

            <p>The best way to report a Tramp bug is to call <code>M-x
            tramp-bug</code>; this prepares an email, including several trace
            information for analysis.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 9 How to Customize (info "(tramp)Traces and Profiles")</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">debugging Tramp</span>
    (setq tramp-verbose 6)              <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[maximum: 10]</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"turn off" the effect of `</span><span style="color: #D0372D; font-style: italic;">backup-directory-alist</span><span style="color: #8D8D84; font-style: italic;">' for TRAMP</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">files</span>
    (add-to-list 'backup-directory-alist
                 (cons tramp-file-name-regexp nil))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make Emacs beep after reading from or writing to the remote host</span>
    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">tramp-handle-write-region</span> <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>
      (after leuven-tramp-write-beep-advice activate)
      <span style=
"color: #008000;">"Make Tramp beep after writing a file."</span>
      (interactive)
      (beep))

    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">tramp-handle-do-copy-or-rename-file</span> <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>
      (after leuven-tramp-copy-beep-advice activate)
      <span style=
"color: #008000;">"Make Tramp beep after copying a file."</span>
      (interactive)
      (beep))

    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">tramp-handle-insert-file-contents</span>
      (after leuven-tramp-insert-beep-advice activate)
      <span style=
"color: #008000;">"Make Tramp beep after inserting contents of a file."</span>
      (interactive)
      (beep))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-20-11-3" class="outline-4">
          <h4 id="sec-20-11-3">TEST Find file as root</h4>

          <div class="outline-text-4" id="text-20-11-3">
            <p>You can just do <code>C-x C-f
            /sudo:user@localhost:/foo/bar/baz.txt &lt;RET&gt;</code>.</p>

            <p>Because I’m lazy, I have a hack (from Tassilo Horn): if I try to
            open a file for which I don’t have permissions for, I’m queried if
            I want to open it as root using the <code>sudo</code> tramp
            method.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-find-file-sudo-header-</span><span style=
"color: #CC0000; background-color: #FFFF88;">warning</span> ()
      <span style="color: #008000;">"*Display a </span><span style=
"color: #CC0000; background-color: #FFFF88;">warning</span><span style=
"color: #008000;"> in header line of the current buffer."</span>
      (<span style="color: #0000FF;">let*</span> ((<span style=
"color: #CC0000; background-color: #FFFF88;">warning</span> <span style=
"color: #036A07;">"</span><span style=
"color: #CC0000; background-color: #FFFF88;">WARNING</span><span style=
"color: #036A07;">: EDITING FILE WITH ROOT PRIVILEGES!"</span>)
             (space (+ 6 (- (frame-width) (length <span style=
"color: #CC0000; background-color: #FFFF88;">warning</span>))))
             (bracket (make-string (/ space 2) ?-))
             (<span style=
"color: #CC0000; background-color: #FFFF88;">warning</span> (concat bracket <span style="color: #CC0000; background-color: #FFFF88;">warning</span> bracket)))
        (setq header-line-format
              (propertize <span style=
"color: #CC0000; background-color: #FFFF88;">warning</span> 'face 'header-line))))

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-find-file-sudo</span> (filename)
      <span style=
"color: #008000;">"Open FILENAME with root privileges."</span>
      (interactive <span style="color: #036A07;">"F"</span>)
      (set-buffer (find-file (concat <span style=
"color: #036A07;">"/sudo::"</span> filename)))
      (leuven-find-file-sudo-header-<span style=
"color: #CC0000; background-color: #FFFF88;">warning</span>))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> already an existing defadvice around find-file!!</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defadvice find-file (around leuven-find-file activate)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"Open FILENAME using tramp's sudo method if it's read-only."</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(if (and (file-exists-p (ad-get-arg 0))</span>
    <span style="color: #8D8D84;">;;            </span><span style=
"color: #8D8D84; font-style: italic;">(not (file-writable-p (ad-get-arg 0)))</span>
    <span style="color: #8D8D84;">;;            </span><span style=
"color: #8D8D84; font-style: italic;">(not (file-remote-p (ad-get-arg 0)))</span>
    <span style="color: #8D8D84;">;;            </span><span style=
"color: #8D8D84; font-style: italic;">(y-or-n-p (concat "File "</span>
    <span style=
"color: #8D8D84;">;;                              </span><span style=
"color: #8D8D84; font-style: italic;">(ad-get-arg 0)</span>
    <span style=
"color: #8D8D84;">;;                              </span><span style=
"color: #8D8D84; font-style: italic;">" is read-only.  Open it as root? ")))</span>
    <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">(leuven-find-file-sudo (ad-get-arg 0))</span>
    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">ad-do-it))</span>

    )
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-20-12" class="outline-3">
        <h3 id="sec-20-12">Convenience Features for Finding Files</h3>

        <div class="outline-text-3" id="text-20-12">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 18.17 (info "(emacs)File Conveniences")</span>

  (leuven--section <span style=
"color: #036A07;">"18.17 (emacs)File Conveniences"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">filenames excluded from the recent list</span>
  (setq recentf-exclude                 <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! has to be set before your require</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! `</span><span style=
"color: #D0372D; font-style: italic;">recentf</span><span style=
"color: #8D8D84; font-style: italic;">'</span>

        '(
          <span style=
"color: #036A07;">"~$"</span>                          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Emacs (and others) backup</span>
          <span style=
"color: #036A07;">"\\.log$"</span>                     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">LaTeX</span>
          <span style=
"color: #036A07;">"\\.toc$"</span>                     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">LaTeX</span>
          <span style=
"color: #036A07;">"\\.aux$"</span>                     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">LaTeX</span>
          <span style="color: #036A07;">"/tmp/"</span>
          ))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">setup a menu of recently opened files</span>
  (GNUEmacs
    (idle-require 'recentf))

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"recentf"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">maximum number of items that will be saved</span>
    (setq recentf-max-saved-items 100)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">file to save the recent list into</span>
    (setq recentf-save-file <span style=
"color: #036A07;">"~/.emacs.d/.recentf"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(when using Tramp) turn off the cleanup feature of `</span><span style="color: #D0372D; font-style: italic;">recentf</span><span style="color: #8D8D84; font-style: italic;">'</span>
    (setq recentf-auto-cleanup 'never)  <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">disable before we start recentf!</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">save file names relative to my current home directory</span>
    (setq recentf-filename-handlers '(abbreviate-file-name))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable `</span><span style=
"color: #D0372D; font-style: italic;">recentf</span><span style=
"color: #8D8D84; font-style: italic;">' mode</span>
    (recentf-mode 1))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-20-12-1" class="outline-4">
          <h4 id="sec-20-12-1">FFAP</h4>

          <div class="outline-text-4" id="text-20-12-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (leuven--section <span style="color: #036A07;">"FFAP"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">visit a file</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;f3&gt;"</span>) 'find-file-at-point)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">find file (or URL) at point</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ffap"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">function called to fetch an URL</span>
    (setq ffap-url-fetcher 'browse-url))
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">could be `</span><span style=
"color: #D0372D; font-style: italic;">browse-url-emacs</span><span style=
"color: #8D8D84; font-style: italic;">' or `</span><span style=
"color: #D0372D; font-style: italic;">w3m-browse-url</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-20-12-2" class="outline-4">
          <h4 id="sec-20-12-2"><a id="ID-59418189-b87e-45a2-b128-5cbdc8a16430"
          name="ID-59418189-b87e-45a2-b128-5cbdc8a16430"></a>Helm</h4>

          <div class="outline-text-4" id="text-20-12-2">
            <p>For Helm documentation, see the <a href=
            "https://github.com/emacs-helm/helm/wiki">Emacs-helm wiki</a> and
            the <a href=
            "https://github.com/thierryvolpiatto/emacs-tv-config/blob/master/init-helm-thierry.el">
            Helm configuration file of Thierry Volpiatto</a>!</p>

            <p>With <code>helm-M-x</code>, to pass prefix arguments to the
            command you want to run, you have to type <code>C-u</code>
            <b>after</b> typing <code>M-x</code>.</p>

            <p>In Helm, generally, look at the mode line; you will see
            <code>C-c ?:Help</code>, it is your friend: hit it for more
            info.</p>

            <ul class="org-ul">
              <li>Narrow the list by typing some patterns (use the <b>space as
              separator</b> for multiple patterns),</li>

              <li>Select an element with <code>&lt;Up&gt;</code> /
              <code>&lt;Down&gt;</code> / <code>&lt;PageUp&gt;</code> /
              <code>&lt;PageDown&gt;</code> / <code>C-p</code> /
              <code>C-n</code> / <code>C-v</code> / <code>M-v</code>,</li>

              <li>Choose with <code>&lt;RET&gt;</code>.</li>

              <li>
                <code>C-z</code> executes an action without quitting the Helm
                session (persistent action):

                <p>For <code>helm-find-files</code>:</p>

                <ul class="org-ul">
                  <li>On a regular file,

                    <ul class="org-ul">
                      <li>First hit on <code>C-z</code> expands the file
                      name</li>

                      <li>Second hit opens the file and displays its contents
                      in the other window</li>

                      <li>Third hit kills the buffer (unless it was already
                      open before starting helm session).</li>
                    </ul>
                  </li>

                  <li>On image files (<code>.jpg</code>, etc..)

                    <ul class="org-ul">
                      <li>Second hit (or <code>C-u C-z</code>) displays the
                      image in the other window</li>

                      <li>If you then turn on <code>helm-follow-mode</code>
                      (<code>C-c C-f</code>), you turn on Helm in <b>image
                      browser</b> (i.e., use <code>C-n/p</code> or
                      <code>arrows/down/up</code>).</li>

                      <li>You can rotate image with <code>M-l/r</code> (these
                      are persistent actions too).</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>

            <p>To go back to the <b>previous element</b> of the minibuffer
            history, use <code>M-p</code>.</p>

            <p>As a starting point for all <b>searches in buffers and
            files</b>, use <code>helm-buffers-list</code> and
            <code>helm-find-files</code>: you can launch
            <code>helm-multi-occur</code> and <code>helm-do-grep</code> from
            there.</p>

            <p>You can also use the <code>@</code> prefix to <b>search buffer
            contents</b>.</p>

            <p>To mark all candidates in a Helm buffer, use <code>M-a</code>
            (<code>helm-mark-all</code>) or <code>M-m</code>
            (<code>helm-toggle-all-marks</code>).</p>

            <p>Locate for <b>Windows</b> users: you have to install <a href=
            "http://www.voidtools.com/download.php">Everything</a> with his
            command line interface.</p>

            <p>Switch to <code>*Helm Log*</code> buffer with <code>M-x
            helm-open-last-log</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (GNUEmacs

    (leuven--section <span style="color: #036A07;">"Helm"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">open Helm (QuickSilver-like candidate-selection framework)</span>
    (<span style="color: #0000FF;">when</span> (try-require 'helm-config)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">sort locate results by full path</span>
      (<span style="color: #0000FF;">when</span> running-ms-windows
        (setq helm-locate-command <span style=
"color: #036A07;">"es -s %s %s"</span>))

      (global-set-key
        (kbd <span style=
"color: #036A07;">"&lt;f3&gt;"</span>) 'helm-for-files)   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">better than `</span><span style=
"color: #D0372D; font-style: italic;">helm-find-files</span><span style=
"color: #8D8D84; font-style: italic;">'</span>

      (global-set-key
        (kbd <span style="color: #036A07;">"M-x"</span>) 'helm-M-x)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">buffers only</span>
      (global-set-key
        (kbd <span style="color: #036A07;">"C-x b"</span>) 'helm-buffers-list)

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-helm-org-prog-menu</span> ()
        <span style=
"color: #008000;">"Jump to a place in the buffer using an Index menu.</span>
<span style=
"color: #008000;">      For Org mode buffers, show Org headlines.</span>
<span style=
"color: #008000;">      For programming mode buffers, show functions, variables, etc."</span>
        (interactive)
        (<span style="color: #0000FF;">if</span> (derived-mode-p 'org-mode)
            (helm-org-headlines)
          (helm-imenu)))

      (global-set-key
        (kbd <span style=
"color: #036A07;">"&lt;f4&gt;"</span>) 'leuven-helm-org-prog-menu) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">awesome</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">and `C-c =' (like in RefTeX)?</span>

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-helm-grep-org-files</span> ()
        <span style=
"color: #008000;">"Launch grep on Org files in `</span><span style=
"color: #D0372D;">~/org</span><span style="color: #008000;">'."</span>
        (interactive)
        (<span style=
"color: #0000FF;">let</span> ((files (helm-walk-directory <span style=
"color: #036A07;">"~/org"</span>
                                          <span style=
"color: #006FE0;">:path</span> 'full
                                          <span style=
"color: #006FE0;">:directories</span> nil
                                          <span style=
"color: #006FE0;">:match</span> <span style=
"color: #036A07;">".*\\.</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">org</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">txt</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">$"</span>
                                          <span style=
"color: #006FE0;">:skip-subdirs</span> t)))
          (helm-do-grep-1 files)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">activate (a better version of) `</span><span style="color: #D0372D; font-style: italic;">occur</span><span style="color: #8D8D84; font-style: italic;">' easily globally</span>
      (global-set-key
        (kbd <span style="color: #036A07;">"C-o"</span>) 'helm-occur)

      (global-set-key
        (kbd <span style="color: #036A07;">"C-x r l"</span>) 'helm-bookmarks)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">install from https://github.com/thierryvolpiatto/emacs-bmk-ext</span>
      (global-set-key
        (kbd <span style=
"color: #036A07;">"C-x r b"</span>) 'helm-bookmark-ext)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; prefix key for all Helm commands in the global map</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq helm-command-prefix-key "C-c C-f") ; [default: "C-x c"]</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use the *current window* (no popup) to show the candidates</span>
      (setq helm-full-frame nil)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">always display `</span><span style=
"color: #D0372D; font-style: italic;">helm-buffer</span><span style=
"color: #8D8D84; font-style: italic;">' in current window</span>
      (setq helm-split-window-default-side 'same)

      (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-separator</span>
        '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"slate gray"</span>)))
        <span style="color: #008000;">"Face used to display state NEW."</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">candidates separator of `</span><span style="color: #D0372D; font-style: italic;">multiline</span><span style="color: #8D8D84; font-style: italic;">' source</span>
      (setq helm-candidate-separator
            (propertize <span style=
"color: #036A07;">"--separator-------------------------------"</span>
                        'face 'leuven-separator))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">suppress displaying sources which are out of screen at first</span>
      (setq helm-quick-update t)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">time that the user has to be idle for, before candidates from</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">DELAYED sources are collected</span>
      (setq helm-idle-delay 0.1)
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">useful for sources involving heavy operations, so that</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">candidates from the source are not retrieved unnecessarily if</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the user keeps typing</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">time that the user has to be idle for, before ALL candidates</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">are collected (&gt;= `</span><span style=
"color: #D0372D; font-style: italic;">helm-idle-delay</span><span style=
"color: #8D8D84; font-style: italic;">')</span>
      (setq helm-input-idle-delay 0.1)
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">also effective for NON-DELAYED sources</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">do not show more candidates than this limit from individual</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">sources</span>
      (setq helm-candidate-number-limit 100) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">more than one screen page</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; don't save history information to file</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(remove-hook 'kill-emacs-hook 'helm-c-adaptive-save-history)</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't show only basename of candidates in `</span><span style="color: #D0372D; font-style: italic;">helm-find-files</span><span style="color: #8D8D84; font-style: italic;">'</span>
      (setq helm-ff-transformer-show-only-basename nil)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't truncate buffer names</span>
      (setq helm-buffer-max-length nil)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">allow to call M-x R with helm-M-x without waiting for 2+ chars</span>
      (setq helm-M-x-requires-pattern 0)

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">helm-toggle-debug</span> ()
        <span style="color: #008000;">"Toggle Helm debug on/off."</span>
        (interactive)
        (setq helm-debug (not helm-debug))
        (message <span style=
"color: #036A07;">"Helm debug %s"</span> (<span style=
"color: #0000FF;">if</span> helm-debug
                                     <span style=
"color: #036A07;">"enabled"</span>
                                   <span style=
"color: #036A07;">"disabled"</span>)))))

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"helm"</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; enable generic Helm completion (for all functions in Emacs that use</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; `</span><span style=
"color: #D0372D; font-style: italic;">completing-read</span><span style=
"color: #8D8D84; font-style: italic;">' or `</span><span style=
"color: #D0372D; font-style: italic;">read-file-name</span><span style=
"color: #8D8D84; font-style: italic;">' and friends)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(helm-mode 1)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; enable adaptative sorting in all sources</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(helm-adaptative-mode 1)</span>
    )
</pre>
            </div>

            <ul class="org-ul">
              <li><code>volatile</code> means your candidates are recomputed
              each time you enter a character in pattern (cached candidates are
              not reused). Async sources are by essence volatile.</li>

              <li><code>delayed</code> means your candidates are computed after
              <code>helm-input-idle-delay</code> seconds.</li>

              <li><code>no-matchplugin</code> means to not use the multi regexp
              matching provided by <code>helm-match-plugin.el</code>.</li>
            </ul>
          </div>
        </div>

        <div id="outline-container-sec-20-12-3" class="outline-4">
          <h4 id="sec-20-12-3">Image mode</h4>

          <div class="outline-text-4" id="text-20-12-3">
            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%"><b>auto-image-file-mode in find-file-hook for
                performance reasons!?</b><br /></td>
              </tr>
            </table>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (leuven--section <span style="color: #036A07;">"Image mode"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show image files as images (not as semi-random bits)</span>
  (GNUEmacs
    (add-hook 'find-file-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (auto-image-file-mode 1))))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 18 ends here</span>
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-21" class="outline-2">
      <h2 id="sec-21">Using Multiple Buffers</h2>

      <div class="outline-text-2" id="text-21">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 19 Using Multiple (info "(emacs)Buffers")</span>

(leuven--chapter leuven-chapter-19-buffers <span style=
"color: #036A07;">"19 Using Multiple Buffers"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-21-1" class="outline-3">
        <h3 id="sec-21-1">Creating and Selecting Buffers</h3>

        <div class="outline-text-3" id="text-21-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 19.1 Creating and (info "(emacs)Select Buffer")</span>

  (leuven--section <span style=
"color: #036A07;">"19.1 (emacs)Select Buffer"</span>)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">switch-or-start</span> (function buffer)
    <span style=
"color: #008000;">"If the BUFFER is current, bury it.  If there is a buffer with that name,</span>
<span style=
"color: #008000;">  switch to it; otherwise, invoke the FUNCTION."</span>
    (<span style=
"color: #0000FF;">if</span> (equal (buffer-name (current-buffer)) buffer)
        (bury-buffer)
      (<span style="color: #0000FF;">if</span> (get-buffer buffer)
          (switch-to-buffer buffer)
        (funcall function))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">switch-or-find-file</span> (file)
    <span style=
"color: #008000;">"If the FILE is current, bury it.  If there is a buffer with that name,</span>
<span style="color: #008000;">  switch to it; otherwise, open it."</span>
    (<span style="color: #0000FF;">when</span> (file-exists-p file)
      (<span style="color: #0000FF;">if</span> (and (buffer-file-name)
               (string= (expand-file-name file)
                        (expand-file-name (buffer-file-name))))
          (bury-buffer)
        (find-file file))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-21-2" class="outline-3">
        <h3 id="sec-21-2">Listing Existing Buffers</h3>

        <div class="outline-text-3" id="text-21-2">
          <ul class="org-ul">
            <li>The <code>C</code> (current) column has a <code>.</code> for
            the buffer from which you came.</li>

            <li>The <code>R</code> (read-only) column has a <code>%</code> if
            the buffer is read-only.</li>

            <li>The <code>M</code> (modified) column has a <code>*</code> if it
            is modified.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 19.2 (info "(emacs)List Buffers")</span>

  (leuven--section <span style=
"color: #036A07;">"19.2 (emacs)List Buffers"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">rebind `C-x C-b'</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-x C-b"</span>) 'electric-buffer-list)
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">buffer-menu</span><span style=
"color: #8D8D84; font-style: italic;">' moves point in the window which lists your buffers</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">electric-buffer-list</span><span style=
"color: #8D8D84; font-style: italic;">' pops up a buffer describing the set of buffers</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">operate on buffers like Dired</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-x C-b"</span>) 'ibuffer)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ibuffer"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">completely replaces `</span><span style=
"color: #D0372D; font-style: italic;">list-buffer</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
    (<span style="color: #0000FF;">defalias</span> '<span style=
"color: #006699;">ibuffer-list-buffers</span> 'list-buffer)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't show the names of filter groups which are empty</span>
    (setq ibuffer-show-empty-filter-groups nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">filtering groups</span>
    (setq ibuffer-saved-filter-groups
          '((<span style="color: #036A07;">"default"</span>
             (<span style="color: #036A07;">"Chat"</span>
              (mode . circe-mode))
             (<span style="color: #036A07;">"Org"</span>
              (or
               (mode . diary-mode)
               (mode . org-mode)
               (mode . org-agenda-mode)))
             (<span style="color: #036A07;">"LaTeX"</span>
              (or
               (mode . latex-mode)
               (mode . LaTeX-mode)
               (mode . bibtex-mode)
               (mode . reftex-mode)))
             (<span style="color: #036A07;">"Gnus &amp; News"</span>
              (or
               (mode . message-mode)
               (mode . bbdb-mode)
               (mode . mail-mode)
               (mode . gnus-group-mode)
               (mode . gnus-summary-mode)
               (mode . gnus-article-mode)
               (name . <span style="color: #036A07;">"^</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">\\.bbdb</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">dot-bbdb</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">$"</span>)
               (name . <span style=
"color: #036A07;">"^\\.newsrc-dribble$"</span>)
               (mode . newsticker-mode)))
             (<span style="color: #036A07;">"Files"</span>
              (filename . <span style="color: #036A07;">".*"</span>))
             (<span style="color: #036A07;">"Dired"</span>
              (mode . dired-mode))
             (<span style="color: #036A07;">"Shell"</span>
              (mode . shell-mode))
             (<span style="color: #036A07;">"Version Control"</span>
              (or
               (mode . svn-status-mode)
               (mode . svn-log-edit-mode)
               (name . <span style="color: #036A07;">"^\\*svn-"</span>)
               (name . <span style="color: #036A07;">"^\\*vc\\*$"</span>)
               (name . <span style="color: #036A07;">"^\\*Annotate"</span>)
               (name . <span style="color: #036A07;">"^\\*git-"</span>)
               (name . <span style="color: #036A07;">"^\\*vc-"</span>)))
             (<span style="color: #036A07;">"Emacs"</span>
              (or
               (name . <span style="color: #036A07;">"^\\*scratch\\*$"</span>)
               (name . <span style="color: #036A07;">"^\\*Messages\\*$"</span>)
               (name . <span style="color: #036A07;">"^TAGS</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">&lt;[0-9]+&gt;</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">?$"</span>)
               (name . <span style="color: #036A07;">"^\\*Occur\\*$"</span>)
               (name . <span style="color: #036A07;">"^\\*grep\\*$"</span>)
               (name . <span style=
"color: #036A07;">"^\\*Compile-Log\\*$"</span>)
               (name . <span style=
"color: #036A07;">"^\\*Backtrace\\*$"</span>)
               (name . <span style=
"color: #036A07;">"^\\*Process List\\*$"</span>)
               (name . <span style="color: #036A07;">"^\\*gud\\*$"</span>)
               (name . <span style=
"color: #036A07;">"^\\*Kill Ring\\*$"</span>)
               (name . <span style=
"color: #036A07;">"^\\*Completions\\*$"</span>)
               (name . <span style="color: #036A07;">"^\\*tramp"</span>)
               (name . <span style=
"color: #036A07;">"^\\*compilation\\*$"</span>)))
             (<span style="color: #036A07;">"Emacs Source"</span>
              (mode . emacs-lisp-mode))
             (<span style="color: #036A07;">"Documentation"</span>
              (or
               (mode . Info-mode)
               (mode . apropos-mode)
               (mode . woman-mode)
               (mode . help-mode)
               (mode . Man-mode))))))

    (add-hook 'ibuffer-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (ibuffer-switch-to-saved-filter-groups <span style=
"color: #036A07;">"default"</span>)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">order the groups so the order is: [Default], [agenda], [emacs]</span>
    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">ibuffer-generate-filter-groups</span>
      (after leuven-reverse-ibuffer-groups activate)
      (setq ad-return-value (nreverse ad-return-value))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-21-3" class="outline-3">
        <h3 id="sec-21-3">Killing Buffers</h3>

        <div class="outline-text-3" id="text-21-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 19.4 (info "(emacs)Kill Buffer")</span>

  (leuven--section <span style=
"color: #036A07;">"19.4 (emacs)Kill Buffer"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">kill buffer without confirmation (if not modified)</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-kill-this-buffer-without-query</span> ()
    <span style=
"color: #008000;">"Kill the current buffer without confirmation (if not modified)."</span>
    (interactive)
    (kill-buffer nil))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">key binding</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;S-f12&gt;"</span>) 'leuven-kill-this-buffer-without-query)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-21-4" class="outline-3">
        <h3 id="sec-21-4">Operating on Several Buffers</h3>

        <div class="outline-text-3" id="text-21-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 19.5 (info "(emacs)Several Buffers")</span>

  (leuven--section <span style=
"color: #036A07;">"19.5 (emacs)Several Buffers"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">put the current buffer at the end of the list of all buffers</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;f12&gt;"</span>) 'bury-buffer)         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">conflict when GDB'ing Emacs under</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Win32</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-21-5" class="outline-3">
        <h3 id="sec-21-5">Convenience Features and Customization of Buffer
        Handling</h3>

        <div class="outline-text-3" id="text-21-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 19.7 (info "(emacs)Buffer Convenience") and Customization of Buffer Handling</span>

  (leuven--section <span style=
"color: #036A07;">"19.7 (emacs)Buffer Convenience and Customization of Buffer Handling"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">unique buffer names dependent on file name</span>
  (try-require 'uniquify)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"uniquify"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">style used for uniquifying buffer names with parts of directory</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name</span>
    (setq uniquify-buffer-name-style 'forward)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">distinguish directories by adding extra separator</span>
    (setq uniquify-trailing-separator-p t))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 19 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-22" class="outline-2">
      <h2 id="sec-22">Multiple Windows</h2>

      <div class="outline-text-2" id="text-22">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 20 Multiple (info "(emacs)Windows")</span>

(leuven--chapter leuven-chapter-20-windows <span style=
"color: #036A07;">"20 Multiple Windows"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-22-1" class="outline-3">
        <h3 id="sec-22-1">Concepts of Emacs Windows</h3>

        <div class="outline-text-3" id="text-22-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 20.1 (info "(emacs)Basic Window")</span>

  (leuven--section <span style=
"color: #036A07;">"20.1 (emacs)Basic Window"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn off this horrible tab thingy in XEmacs</span>
  (XEmacs
    (<span style=
"color: #0000FF;">when</span> (boundp 'default-gutter-visible-p)
      (set-specifier default-gutter-visible-p nil)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-22-2" class="outline-3">
        <h3 id="sec-22-2">Using Other Windows</h3>

        <div class="outline-text-3" id="text-22-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 20.3 (info "(emacs)Other Window")</span>

  (leuven--section <span style=
"color: #036A07;">"20.3 (emacs)Other Window"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">cycle through all windows on current frame</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;f6&gt;"</span>) 'other-window)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">reverse operation of `C-x o' (or `</span><span style="color: #D0372D; font-style: italic;">f6</span><span style="color: #8D8D84; font-style: italic;">')</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;S-f6&gt;"</span>)
    (<span style="color: #0000FF;">lambda</span> ()
      (interactive)
      (other-window -1)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-22-3" class="outline-3">
        <h3 id="sec-22-3">Deleting and Rearranging Windows</h3>

        <div class="outline-text-3" id="text-22-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 20.5 (info "(emacs)Change Window")</span>

  (leuven--section <span style=
"color: #036A07;">"20.5 (emacs)Change Window"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">delete all windows in the selected frame except the selected window</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;f5&gt;"</span>) 'delete-other-windows)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enlarge or shrink windows more easily than with `C-x {', `C-x }' and the</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">like</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;C-S-up&gt;"</span>) 'enlarge-window)
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;C-S-down&gt;"</span>) 'shrink-window)
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;C-S-left&gt;"</span>) 'enlarge-window-horizontally)
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;C-S-right&gt;"</span>) 'shrink-window-horizontally)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make all visible windows the same height (approximately)</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;C-f6&gt;"</span>) 'balance-windows)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">swap 2 windows</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-swap-windows</span> ()
    <span style="color: #008000;">"If you have 2 windows, swap them."</span>
    (interactive)
    (<span style="color: #0000FF;">cond</span> ((not (= (count-windows) 2))
           (message <span style=
"color: #036A07;">"You need exactly 2 windows to swap them."</span>))
          (t
           (<span style=
"color: #0000FF;">let*</span> ((wind-1 (first (window-list)))
                  (wind-2 (second (window-list)))
                  (buf-1 (window-buffer wind-1))
                  (buf-2 (window-buffer wind-2))
                  (start-1 (window-start wind-1))
                  (start-2 (window-start wind-2)))
             (set-window-buffer wind-1 buf-2)
             (set-window-buffer wind-2 buf-1)
             (set-window-start wind-1 start-2)
             (set-window-start wind-2 start-1)))))

  (global-set-key
    (kbd <span style="color: #036A07;">"C-c ~"</span>) 'leuven-swap-windows)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-toggle-window-split</span> ()
    <span style=
"color: #008000;">"Toggle between vertical and horizontal split.</span>
<span style=
"color: #008000;">  Vertical split shows more of each line, horizontal split shows more lines.</span>
<span style=
"color: #008000;">  This code only works for frames with exactly two windows."</span>
    (interactive)
    (<span style="color: #0000FF;">cond</span> ((not (= (count-windows) 2))
           (message <span style=
"color: #036A07;">"You need exactly 2 windows to toggle the window split."</span>))
          (t
           (<span style=
"color: #0000FF;">let*</span> ((this-win-buffer (window-buffer))
                  (next-win-buffer (window-buffer (next-window)))
                  (this-win-edges (window-edges (selected-window)))
                  (next-win-edges (window-edges (next-window)))
                  (this-win-2nd (not (and (&lt;= (car this-win-edges)
                                              (car next-win-edges))
                                          (&lt;= (cadr this-win-edges)
                                              (cadr next-win-edges)))))
                  (splitter
                   (<span style=
"color: #0000FF;">if</span> (= (car this-win-edges)
                          (car (window-edges (next-window))))
                       'split-window-horizontally
                     'split-window-vertically)))
             (delete-other-windows)
             (<span style=
"color: #0000FF;">let</span> ((first-win (selected-window)))
               (funcall splitter)
               (<span style=
"color: #0000FF;">if</span> this-win-2nd (other-window 1))
               (set-window-buffer (selected-window) this-win-buffer)
               (set-window-buffer (next-window) next-win-buffer)
               (select-window first-win)
               (<span style=
"color: #0000FF;">if</span> this-win-2nd (other-window 1)))))))

  (global-set-key
    (kbd <span style=
"color: #036A07;">"C-c |"</span>) 'leuven-toggle-window-split)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-22-4" class="outline-3">
        <h3 id="sec-22-4">Displaying a Buffer in a Window</h3>

        <div class="outline-text-3" id="text-22-4">
          <p>Splits screen vertically if the width of the window is large
          enough.</p>

          <p>See <a href=
          "http://stackoverflow.com/questions/1381794/too-many-split-screens-opening-in-emacs">
          http://stackoverflow.com/questions/1381794/too-many-split-screens-opening-in-emacs</a>
          for alternative code…</p>

          <p>See as well <code>split-window-preferred-function</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 20.6 (info "(emacs)Displaying Buffers")</span>

  (leuven--section <span style=
"color: #036A07;">"20.6 (emacs)Pop Up Window"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't allow splitting windows vertically</span>
  (setq split-height-threshold nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">minimum width for splitting windows horizontally</span>
  (setq split-width-threshold 160)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-22-5" class="outline-3">
        <h3 id="sec-22-5">Window Handling Convenience Features and
        Customization</h3>

        <div class="outline-text-3" id="text-22-5">
          <p>Use <code>M-x scroll-all-mode</code> to scroll all visible windows
          together in parallel.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 20 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-23" class="outline-2">
      <h2 id="sec-23">Frames and Graphical Displays</h2>

      <div class="outline-text-2" id="text-23">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 21 (info "(emacs)Frames") and Graphical Displays</span>

(leuven--chapter leuven-chapter-21-frames <span style=
"color: #036A07;">"21 Frames and Graphical Displays"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-23-1" class="outline-3">
        <h3 id="sec-23-1">Mouse Commands for Editing</h3>

        <div class="outline-text-3" id="text-23-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 21.1 (info "(emacs)Mouse Commands")</span>

  (leuven--section <span style=
"color: #036A07;">"21.1 (emacs)Mouse Commands"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">scroll one line at a time</span>
  (setq mouse-wheel-scroll-amount
        '(1
          ((shift) . 1)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-23-2" class="outline-3">
        <h3 id="sec-23-2">Creating Frames</h3>

        <div class="outline-text-3" id="text-23-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 21.6 (info "(emacs)Creating Frames")</span>

  (leuven--section <span style=
"color: #036A07;">"21.6 (emacs)Creating Frames"</span>)
</pre>
          </div>

          <ol class="org-ol">
            <li>Resize the frame to the size you want</li>

            <li>Enter <code>(frame-parameters)</code> in the
            <code>*scratch*</code> buffer</li>

            <li>Evaluate the form: place the cursor after the closing paren,
            and type <code>C-j</code>, so that the output goes right into the
            <code>*scratch*</code> buffer</li>
          </ol>

          <p>By putting customizations <code>default-frame-alist</code> in your
          init file, you can control the appearance of <b>all the frames</b>
          Emacs creates, including the initial one.</p>

          <p><code>initial-frame-alist</code> is just for overriding properties
          for the first frame.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">when</span> (display-graphic-p)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">put Emacs exactly where you want it, every time it starts up</span>
    (setq initial-frame-alist
          '((top . 0)
            (left . 0)))

    (GNUEmacs
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">auto-detect the screen dimensions and compute the size of Emacs</span>
      (add-to-list 'default-frame-alist
                   (cons 'height
                         (/ (- (x-display-pixel-height) 106)
                            (frame-char-height)))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; avoid Emacs hanging for a while (old hack from 2001)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-to-list 'default-frame-alist</span>
    <span style="color: #8D8D84;">;;              </span><span style=
"color: #8D8D84; font-style: italic;">'(wait-for-wm . nil))</span>
    )

  (XEmacs
    (set-frame-position (buffer-dedicated-frame) 0 0)
    (set-frame-width (buffer-dedicated-frame) 80)
    (set-frame-height (buffer-dedicated-frame) 42))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">title bar display of visible frames</span>
  (setq frame-title-format
        (format <span style=
"color: #036A07;">"Emacs %s (r%s) of %s - PID: %d"</span>
                <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(capitalize (symbol-name system-type))</span>
                emacs-version
                (<span style="color: #0000FF;">ignore-</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #0000FF;">s</span>
                  (replace-regexp-in-string <span style=
"color: #036A07;">" .*"</span> <span style=
"color: #036A07;">""</span> emacs-bzr-version))
                (format-time-string <span style=
"color: #036A07;">"%Y-%m-%d"</span> emacs-build-time)
                (emacs-pid)))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">detach-window</span> ()
    <span style=
"color: #008000;">"Close current window and re-open it in new frame."</span>
    (interactive)
    (<span style=
"color: #0000FF;">let</span> ((current-buffer (window-buffer)))
      (delete-window)
      (select-frame (make-frame))
      (set-window-buffer (selected-window) current-buffer)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-23-3" class="outline-3">
        <h3 id="sec-23-3">Frame Commands</h3>

        <div class="outline-text-3" id="text-23-3">
          <dl class="org-dl">
            <dt><code>toggle-frame-fullscreen</code></dt>

            <dd>Toggle fullscreen mode of the selected frame. <b>Ignore window
            manager screen decorations.</b></dd>

            <dt><code>toggle-frame-maximized</code></dt>

            <dd>Toggle maximization state of the selected frame. Respect window
            manager screen decorations.</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 21.7 (info "(emacs)Frame Commands")</span>

  (leuven--section <span style=
"color: #036A07;">"21.7 (emacs)Frame Commands"</span>)

  (XWindow
   (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">toggle-fullscreen</span> ()
     <span style=
"color: #008000;">"Toggle between full screen and partial screen display on X11."</span>
     (interactive)
     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">WM must support EWMH</span>
     <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">http://standards.freedesktop.org/wm-spec/wm-spec-latest.html</span>
     (x-send-client-message nil 0 nil <span style=
"color: #036A07;">"_NET_WM_STATE"</span> 32
                            '(2 <span style=
"color: #036A07;">"_NET_WM_STATE_FULLSCREEN"</span> 0)))

   (global-set-key
     (kbd <span style="color: #036A07;">"C-c z"</span>) 'toggle-fullscreen))

  (GNUEmacs
    (<span style="color: #0000FF;">when</span> running-ms-windows
      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">w32-maximize-frame</span> ()
        <span style="color: #008000;">"Maximize the current frame."</span>
        (interactive)
        (w32-send-sys-command 61488)
        (global-set-key
          (kbd <span style=
"color: #036A07;">"C-c z"</span>) 'w32-restore-frame))

      (global-set-key
        (kbd <span style="color: #036A07;">"C-c z"</span>) 'w32-maximize-frame)

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">w32-restore-frame</span> ()
        <span style="color: #008000;">"Restore a minimized frame."</span>
        (interactive)
        (w32-send-sys-command 61728)
        (global-set-key
          (kbd <span style=
"color: #036A07;">"C-c z"</span>) 'w32-maximize-frame))))
</pre>
          </div>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%"><b>Try to use the name
              <code>toggle-fullscreen</code> for Windows as well</b><br /></td>
            </tr>
          </table>

          <p>See <code>(display-pixel-width)</code>:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">set the new height, allowing for title bars</span>
  (setq lframe-width (- (/ (x-display-pixel-width) (frame-char-width)) 8))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">set the new height, allowing for title bars</span>
  (setq lframe-height (- (/ (x-display-pixel-height) (frame-char-height)) 5))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-23-4" class="outline-3">
        <h3 id="sec-23-4">Speedbar Frames</h3>

        <div class="outline-text-3" id="text-23-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 21.9 (info "(emacs)Speedbar")</span>

  (leuven--section <span style=
"color: #036A07;">"21.9 (emacs)Speedbar Frames"</span>)

  (<span style="color: #0000FF;">unless</span> (locate-library <span style=
"color: #036A07;">"helm-config"</span>) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">helm is better than speedbar!</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">jump to speedbar frame</span>
    (global-set-key (kbd <span style=
"color: #036A07;">"&lt;f4&gt;"</span>) 'speedbar-get-focus))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">everything browser (into individual source files), or Dired on</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">steroids</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"speedbar"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of spaces used for indentation</span>
    (setq speedbar-indentation-width 2)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add new extensions for speedbar tagging (allow to expand/collapse</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">sections, etc.) -- do this BEFORE firing up speedbar?</span>
    (speedbar-add-supported-extension
     '(<span style="color: #036A07;">".bib"</span> <span style=
"color: #036A07;">".css"</span> <span style=
"color: #036A07;">".jpg"</span> <span style=
"color: #036A07;">".js"</span> <span style=
"color: #036A07;">".nw"</span> <span style=
"color: #036A07;">".org"</span> <span style=
"color: #036A07;">".php"</span> <span style=
"color: #036A07;">".png"</span> <span style=
"color: #036A07;">".R"</span> <span style=
"color: #036A07;">".tex"</span> <span style="color: #036A07;">".txt"</span>
       <span style="color: #036A07;">".w"</span> <span style=
"color: #036A07;">"README"</span>))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">bind the arrow keys in the speedbar tree</span>
    (define-key speedbar-key-map
      (kbd <span style=
"color: #036A07;">"&lt;right&gt;"</span>) 'speedbar-expand-line)
    (define-key speedbar-key-map
      (kbd <span style=
"color: #036A07;">"&lt;left&gt;"</span>) 'speedbar-contract-line)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">parameters to use when creating the speedbar frame in Emacs</span>
    (setq speedbar-frame-parameters '((width . 30)
                                      (height . 45)
                                      (foreground-color . <span style=
"color: #036A07;">"blue"</span>)
                                      (background-color . <span style=
"color: #036A07;">"white"</span>)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">speedbar in the current frame (vs in a new frame)</span>
    (<span style=
"color: #0000FF;">when</span> (and (not (locate-library <span style=
"color: #036A07;">"helm-config"</span>))
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">helm is better than speedbar!</span>
               (locate-library <span style=
"color: #036A07;">"sr-speedbar"</span>))

      (autoload 'sr-speedbar-toggle <span style=
"color: #036A07;">"sr-speedbar"</span> nil t)
      (global-set-key (kbd <span style=
"color: #036A07;">"&lt;f4&gt;"</span>) 'sr-speedbar-toggle)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-23-5" class="outline-3">
        <h3 id="sec-23-5">Scroll Bars</h3>

        <div class="outline-text-3" id="text-23-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 21.12 (info "(emacs)Scroll Bars")</span>

  (leuven--section <span style=
"color: #036A07;">"21.12 (emacs)Scroll Bars"</span>)

  (<span style="color: #0000FF;">if</span> (and (display-graphic-p)
           (fboundp 'sml-modeline-mode))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn scroll bar off</span>
      (scroll-bar-mode -1)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">position of the vertical scroll bar</span>
    (setq-default vertical-scroll-bar 'right))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-23-6" class="outline-3">
        <h3 id="sec-23-6">Tool Bars</h3>

        <div class="outline-text-3" id="text-23-6">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 21.15 (info "(emacs)Tool Bars")</span>

  (leuven--section <span style=
"color: #036A07;">"21.15 (emacs)Tool Bars"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn tool bar off</span>
  (<span style="color: #0000FF;">when</span> (display-graphic-p)
    (GNUEmacs
      (tool-bar-mode -1))
    (XEmacs
      (set-specifier default-toolbar-visible-p nil)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-23-7" class="outline-3">
        <h3 id="sec-23-7">Using Dialog Boxes</h3>

        <div class="outline-text-3" id="text-23-7">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 21.16 Using (info "(emacs)Dialog Boxes")</span>

  (leuven--section <span style=
"color: #036A07;">"21.16 (emacs)Using Dialog Boxes"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't use dialog boxes to ask questions</span>
  (setq use-dialog-box nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't use a file dialog to ask for files</span>
  (setq use-file-dialog nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-23-8" class="outline-3">
        <h3 id="sec-23-8">Tooltips</h3>

        <div class="outline-text-3" id="text-23-8">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 21.17 (info "(emacs)Tooltips")</span>

  (leuven--section <span style=
"color: #036A07;">"21.17 (emacs)Tooltips"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use the echo area for help and GUD tooltips</span>
  (setq tooltip-use-echo-area t)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 21 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-24" class="outline-2">
      <h2 id="sec-24">International Character Set Support</h2>

      <div class="outline-text-2" id="text-24">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 22 (info "(emacs)International") Character Set Support</span>

(leuven--chapter leuven-chapter-22-international <span style=
"color: #036A07;">"22 International Character Set Support"</span>
</pre>
        </div>

        <p>For any user who needs symbols that are not in the 7-bit ASCII set,
        our recommendation is to move to Unicode UTF-8. That is the only
        encoding that is the same across all platforms and operating systems
        that support it.</p>

        <p>To open (or save) a file in UTF-8, you can press <code>C-x
        &lt;RET&gt; c utf-8 &lt;RET&gt;</code>
        (<code>universal-coding-system-argument</code>) before the <code>C-x
        C-f</code> (or <code>C-x C-s</code>).</p>

        <p>To help you find all the chars you need to replace by escape
        sequences, you can use <code>C-u C-s [^[:ascii:]]</code>.</p>

        <p>To check your locale settings, you can have a look to what Emacs
        produce (in a mail buffer) under “Important settings” when you type
        <code>M-x report-emacs-bug &lt;RET&gt; foo &lt;RET&gt;</code>:</p>

        <p><b>Important settings</b>:</p>

        <ul class="org-ul">
          <li>value of <code>$LC_ALL</code>: <code>nil</code></li>

          <li>value of <code>$LC_COLLATE</code>: <code>nil</code></li>

          <li>value of <code>$LC_CTYPE</code>: <code>nil</code></li>

          <li>value of <code>$LC_MESSAGES</code>: <code>nil</code></li>

          <li>value of <code>$LC_MONETARY</code>: <code>nil</code></li>

          <li>value of <code>$LC_NUMERIC</code>: <code>nil</code></li>

          <li>value of <code>$LC_TIME</code>: <code>nil</code></li>

          <li>value of <code>$LANG</code>: <code>en_US.UTF-8</code></li>

          <li>value of <code>$XMODIFIERS</code>: <code>nil</code></li>

          <li><code>locale-coding-system</code>: <code>utf-8-unix</code></li>

          <li><code>default-enable-multibyte-characters</code>:
          <code>t</code></li>
        </ul>
      </div>

      <div id="outline-container-sec-24-1" class="outline-3">
        <h3 id="sec-24-1">Language Environments</h3>

        <div class="outline-text-3" id="text-24-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 22.3 (info "(emacs)Language Environments")</span>

  (leuven--section <span style=
"color: #036A07;">"22.3 (emacs)Language Environments"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">specify your character-set locale</span>
  (setenv <span style="color: #036A07;">"LANG"</span> <span style=
"color: #036A07;">"en_US.utf8"</span>)          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">for svn not to report </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">warning</span><span style="color: #8D8D84; font-style: italic;">s</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">system locale to use for formatting time values</span>
  (setq system-time-locale <span style=
"color: #036A07;">"C"</span>)         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">make sure that the weekdays in the</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">time stamps of your Org mode files</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">and in the agenda appear in English</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq system-time-locale (getenv "LANG"))</span>
  <span style=
"color: #8D8D84;">;;                                       </span><span style=
"color: #8D8D84; font-style: italic;">; for weekdays in your locale settings</span>
</pre>
          </div>

          <p>One could use:</p>

          <ul class="org-ul">
            <li><code>LC_ALL</code>,</li>

            <li><code>LC_COLLATE=C</code> (or
            <code>LC_COLLATE=POSIX</code>),</li>

            <li><code>LC_CTYPE</code>,</li>

            <li><code>LC_ALL</code> or</li>

            <li><code>LANG</code></li>
          </ul>

          <p>but this won’t work for a Windows binary (well for the Cygwin
          version of Emacs).</p>
        </div>
      </div>

      <div id="outline-container-sec-24-2" class="outline-3">
        <h3 id="sec-24-2">Input Methods</h3>

        <div class="outline-text-3" id="text-24-2">
          <p><code>M-x describe-coding-system &lt;RET&gt;
          &lt;RET&gt;</code></p>

          <p>To see all the non-ASCII characters you can type with the
          <code>C-x 8</code> prefix, type <code>C-x 8 C-h</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 22.4 (info "(emacs)Input Methods")</span>

  (leuven--section <span style=
"color: #036A07;">"22.4 (emacs)Input Methods"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">get 8-bit characters in terminal mode (Cygwin Emacs)</span>
  (set-input-mode (car (current-input-mode))
                  (nth 1 (current-input-mode))
                  0)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-24-3" class="outline-3">
        <h3 id="sec-24-3">Recognizing Coding Systems</h3>

        <div class="outline-text-3" id="text-24-3">
          <p>In GNU Emacs, when you specify the coding explicitly in the file,
          that overrides <code>file-coding-system-alist</code>.</p>

          <p>XXX Declare PDF files as binary</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 22.7 (info "(emacs)Recognize Coding") Systems</span>

  (leuven--section <span style=
"color: #036A07;">"22.7 (emacs)Recognize Coding Systems"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default coding system (for new files),</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">also moved to the front of the priority list for automatic detection</span>
  (GNUEmacs
   (prefer-coding-system 'utf-8-unix))  <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Unix flavor for code blocks executed</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">via Org-babel</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-24-4" class="outline-3">
        <h3 id="sec-24-4">Specifying a File’s Coding System</h3>

        <div class="outline-text-3" id="text-24-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 22.8 (info "(emacs)Specify Coding") System of a File</span>

  (leuven--section <span style=
"color: #036A07;">"22.8 (emacs)Specify Coding System of a File"</span>)

  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">to copy and paste to and from Emacs through the clipboard (with</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">coding system conversion)</span>
    (<span style="color: #0000FF;">cond</span> (running-ms-windows
           (set-selection-coding-system 'compound-text-with-extensions))
          (t
           (set-selection-coding-system 'utf-8))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-24-5" class="outline-3">
        <h3 id="sec-24-5">Bidirectional Editing</h3>

        <div class="outline-text-3" id="text-24-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 22.20 (info "(emacs)Bidirectional Editing")</span>

  (leuven--section <span style=
"color: #036A07;">"22.20 (emacs)Bidirectional Editing"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">faster scrolling (if you never expect to have to display bidirectional</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">scripts, like Arabic)</span>
  (setq-default bidi-paragraph-direction 'left-to-right)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 22 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-25" class="outline-2">
      <h2 id="sec-25">Major and Minor Modes</h2>

      <div class="outline-text-2" id="text-25">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 23 (info "(emacs)Modes")</span>

(leuven--chapter leuven-chapter-23-major-and-minor-modes <span style=
"color: #036A07;">"23 Major and Minor Modes"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-25-1" class="outline-3">
        <h3 id="sec-25-1">How Major Modes are Chosen</h3>

        <div class="outline-text-3" id="text-25-1">
          <p>See “Syntax of Regexps”:</p>

          <ul class="org-ul">
            <li><code>\'</code> matches end of string</li>

            <li><code>$</code> matches end of line</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 23.3 (info "(emacs)Choosing Modes")</span>

  (leuven--section <span style=
"color: #036A07;">"23.3 (emacs)Choosing File Modes"</span>)
</pre>
          </div>
        </div>

        <div id="outline-container-sec-25-1-1" class="outline-4">
          <h4 id="sec-25-1-1">Choice based on the file name</h4>

          <div class="outline-text-4" id="text-25-1-1">
            <p>Instead of superseding the binding in
            <code>auto-mode-alist</code>, you can replace it (brute force) with
            <code>(setcdr (rassq 'old-mode auto-mode-alist)
            'new-mode)</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of filename patterns</span>
  (setq auto-mode-alist
        (append '((<span style=
"color: #036A07;">"\\.log\\'"</span>       . text-mode)
                  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">("\\.[tT]e[xX]\\'" . latex-mode)</span>
                  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">("\\.cls\\'"       . LaTeX-mode)</span>
                  (<span style=
"color: #036A07;">"\\.cgi\\'"</span>       . perl-mode)
                  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">("[mM]akefile"     . makefile-mode)</span>
                  (<span style=
"color: #036A07;">".ssh/config\\'"</span>  . ssh-config-mode)
                  (<span style=
"color: #036A07;">"sshd?_config\\'"</span> . ssh-config-mode)
                  ) auto-mode-alist))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">major mode for fontifiying ssh config files</span>
  (autoload 'ssh-config-mode <span style=
"color: #036A07;">"ssh-config-mode"</span>
    <span style=
"color: #008000;">"Major mode for fontifiying ssh config files."</span> t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ledger</span>
  (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.dat\\'"</span> . ledger-mode))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">major mode for editing comma-separated value files</span>
  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"csv-mode"</span>)

    (autoload 'csv-mode <span style="color: #036A07;">"csv-mode"</span>
      <span style=
"color: #008000;">"Major mode for editing comma-separated value files."</span> t)

    (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.csv\\'"</span> . csv-mode))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">field separators: a list of *single-character* strings</span>
    (setq csv-separators '(<span style=
"color: #036A07;">","</span> <span style="color: #036A07;">";"</span>)))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-25-1-2" class="outline-4">
          <h4 id="sec-25-1-2">Choice based on the interpreter name</h4>

          <div class="outline-text-4" id="text-25-1-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of interpreters specified in the first line (starts with `#!')</span>
  (push '(<span style=
"color: #036A07;">"expect"</span> . tcl-mode) interpreter-mode-alist)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-25-1-3" class="outline-4">
          <h4 id="sec-25-1-3">Choice based on the text at the start of the
          buffer</h4>

          <div class="outline-text-4" id="text-25-1-3">
            <p>For a list of buffer beginnings, see
            <code>magic-mode-alist</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; load generic modes which support e.g. batch files</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(try-require 'generic-x)</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 23 ends here</span>
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-26" class="outline-2">
      <h2 id="sec-26">Indentation</h2>

      <div class="outline-text-2" id="text-26">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 24 (info "(emacs)Indentation")</span>

(leuven--chapter leuven-chapter-24-indentation <span style=
"color: #036A07;">"24 Indentation"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-26-1" class="outline-3">
        <h3 id="sec-26-1">Indentation Commands</h3>

        <div class="outline-text-3" id="text-26-1">
          <dl class="org-dl">
            <dt><code>M-m</code></dt>

            <dd><code>back-to-indentation</code>.</dd>

            <dt><code>C-M-\</code></dt>

            <dd>runs the command <code>indent-region</code> (which does the job
            of the imaginary command <code>unsuck-html-layout</code> in
            <code>html-mode</code>).</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 24.1 (info "(emacs)Indentation Commands") and Techniques</span>

  (leuven--section <span style=
"color: #036A07;">"24.1 (emacs)Indentation Commands and Techniques"</span>)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">indent-whole-buffer</span> ()
    (interactive)
    (<span style="color: #0000FF;">save-excursion</span>
      (mark-whole-buffer)
      (indent-for-tab-command)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-26-2" class="outline-3">
        <h3 id="sec-26-2">Tabs vs. Spaces</h3>

        <div class="outline-text-3" id="text-26-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 24.3 TABs vs. (info "(emacs)Just Spaces")</span>

  (leuven--section <span style=
"color: #036A07;">"24.3 TABs vs. (emacs)Just Spaces"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">indentation can't insert TABs</span>
  (setq-default indent-tabs-mode nil)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 24 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-27" class="outline-2">
      <h2 id="sec-27">Commands for Human Languages</h2>

      <div class="outline-text-2" id="text-27">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 25 Commands for (info "(emacs)Text") Human Languages</span>

(leuven--chapter leuven-chapter-25-text <span style=
"color: #036A07;">"25 Commands for Human Languages"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-27-1" class="outline-3">
        <h3 id="sec-27-1">Words</h3>

        <div class="outline-text-3" id="text-27-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 25.1 (info "(emacs)Words")</span>

  (leuven--section <span style="color: #036A07;">"25.1 (emacs)Words"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">GNU Emacs default for killing back to the beginning of a word</span>
  (XEmacs
    (global-set-key
      (kbd <span style=
"color: #036A07;">"&lt;C-backspace&gt;"</span>) 'backward-kill-word))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-27-2" class="outline-3">
        <h3 id="sec-27-2">Sentences</h3>

        <div class="outline-text-3" id="text-27-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 25.2 (info "(emacs)Sentences")</span>

  (leuven--section <span style=
"color: #036A07;">"25.2 (emacs)Sentences"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; a single space does end a sentence</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq-default sentence-end-double-space nil) ; see `</span><span style="color: #D0372D; font-style: italic;">ispell-dictionary</span><span style="color: #8D8D84; font-style: italic;">'</span>
</pre>
          </div>

          <p>The default value of <code>sentence-end-double-space</code> is
          good for French as well, as we put two spaces after a
          interrogation/question mark. That way, those two spaces won’t be
          transformed into one…</p>
        </div>
      </div>

      <div id="outline-container-sec-27-3" class="outline-3">
        <h3 id="sec-27-3">Filling Text</h3>

        <div class="outline-text-3" id="text-27-3">
          <p>There are several <b>non-break space</b> characters required for
          French punctuation:</p>

          <ul class="org-ul">
            <li><b>No-break thin space</b> (<code>202F</code>), known in
            Unicode as “Narrow No-Break Space”, required before <code>?</code>,
            <code>!</code> and <code>;</code>.</li>

            <li>
              <b>No-break space</b> (<code>00A0</code>), required before
              <code>:</code> and <code>»</code>, and required after
              <code>«</code>.

              <p>It can be inserted with <code>S-SPC</code>:</p>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
(<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-nbsp-command</span> ()
  <span style=
"color: #008000;">"Insert the no-break space character 00A0."</span>
  (interactive)
  (insert-char ?\u00A0))

(global-set-key
  (kbd <span style="color: #036A07;">"S-SPC"</span>) 'leuven-nbsp-command)
</pre>
              </div>
            </li>
          </ul>

          <p>They could be used to avoid breaking at certain bad places.</p>

          <p>Another solution to avoid that is to add
          <code>fill-french-nobreak-p</code> to
          <code>fill-nobreak-predicate</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 25.5 (info "(emacs)Filling") Text</span>

  (leuven--section <span style=
"color: #036A07;">"25.5 (emacs)Filling Text"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">line-wrapping beyond that column (when pressing `</span><span style="color: #D0372D; font-style: italic;">M-q</span><span style="color: #8D8D84; font-style: italic;">')</span>
  (setq-default fill-column 79)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(un-)fill paragraph</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-fill-paragraph</span> (<span style=
"color: #6434A3;">&amp;optional</span> arg)
    <span style="color: #008000;">"`</span><span style=
"color: #D0372D;">M-q</span><span style=
"color: #008000;">' runs the command `</span><span style=
"color: #D0372D;">fill-paragraph</span><span style="color: #008000;">'.</span>
<span style=
"color: #008000;">  `C-u M-q' runs \"unfill-paragraph\": it takes a multi-line paragraph and</span>
<span style="color: #008000;">  converts it into a single line of text."</span>
    (interactive <span style="color: #036A07;">"P"</span>)
    (<span style="color: #0000FF;">let</span> ((fill-column (<span style=
"color: #0000FF;">if</span> arg
                           (point-max)
                         fill-column)))
      (fill-paragraph nil)))

  (global-set-key (kbd <span style=
"color: #036A07;">"M-q"</span>) 'leuven-fill-paragraph)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">prevent breaking lines just before a punctuation mark such as `?' or `:'</span>
  (add-hook 'fill-nobreak-predicate 'fill-french-nobreak-p)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">activate Auto Fill for all text mode buffers</span>
  (add-hook 'text-mode-hook 'turn-on-auto-fill)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-replace-nbsp-by-spc</span> ()
    <span style="color: #008000;">"Replace all nbsp by normal spaces."</span>
    (interactive <span style="color: #036A07;">"*"</span>)
    (<span style="color: #0000FF;">save-excursion</span>
      (<span style="color: #0000FF;">save-restriction</span>
        (<span style="color: #0000FF;">save-match-data</span>
          (<span style="color: #0000FF;">progn</span>
            (goto-char (point-min))
            (<span style=
"color: #0000FF;">while</span> (re-search-forward <span style=
"color: #036A07;">"[  ]"</span> nil t)
              (replace-match <span style=
"color: #036A07;">" "</span> nil nil)))))))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-good-old-fill-paragraph</span> ()
    (interactive)
    (<span style="color: #0000FF;">let</span> ((fill-paragraph-function nil)
          (adaptive-fill-function nil))
      (fill-paragraph)))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-smart-punctuation-apostrophe</span> ()
    <span style=
"color: #008000;">"Replace second apostrophe by backquote in front of symbol."</span>
    (interactive)
    (<span style="color: #0000FF;">cond</span>
     ((or (bolp) (not (looking-back <span style="color: #036A07;">"'"</span>)))
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insert just one '</span>
      (self-insert-command 1))
     ((<span style="color: #0000FF;">save-excursion</span>
        (backward-char)
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Skip symbol backwards.</span>
        (and (not (zerop (skip-syntax-backward <span style=
"color: #036A07;">"w_"</span>)))
             (not (looking-back <span style="color: #036A07;">"`"</span>))
             (or (insert-and-inherit <span style=
"color: #036A07;">"`"</span>) t))))
     (t
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insert `' around following symbol</span>
      (delete-backward-char 1)
      (<span style="color: #0000FF;">unless</span> (looking-back <span style=
"color: #036A07;">"`"</span>) (insert-and-inherit <span style=
"color: #036A07;">"`"</span>))
      (<span style="color: #0000FF;">save-excursion</span>
        (skip-syntax-forward <span style="color: #036A07;">"w_"</span>)
        (<span style="color: #0000FF;">unless</span> (looking-at <span style=
"color: #036A07;">"'"</span>) (insert-and-inherit <span style=
"color: #036A07;">"'"</span>))))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-smart-punctuation-quotation-mark</span> ()
    <span style=
"color: #008000;">"Replace two following double quotes by French quotes."</span>
    (interactive)
    (<span style=
"color: #0000FF;">let</span> ((dict (or ispell-local-dictionary
                    ispell-dictionary)))
      (<span style="color: #0000FF;">if</span> (and (string= dict <span style=
"color: #036A07;">"francais"</span>)
               (eq (char-before) ?\")
               (or (not (equal mode-name <span style=
"color: #036A07;">"Org"</span>))
                   (not (member (org-element-type (org-element-at-point))
                                '(src-block keyword table dynamic-block)))))
          (<span style="color: #0000FF;">progn</span>
            (backward-delete-char 1)
            (insert <span style="color: #036A07;">"«  »"</span>)
            (backward-char 2))
        (insert <span style="color: #036A07;">"\""</span>))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-smart-punctuation</span> ()
    <span style=
"color: #008000;">"Replace second apostrophe or quotation mark."</span>
    (interactive)
    (local-set-key [39] 'leuven-smart-punctuation-apostrophe)
    (local-set-key <span style=
"color: #036A07;">"\""</span> 'leuven-smart-punctuation-quotation-mark))

  (add-hook 'text-mode-hook 'leuven-smart-punctuation)
  (add-hook 'message-mode-hook 'leuven-smart-punctuation)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-27-4" class="outline-3">
        <h3 id="sec-27-4">Case Conversion Commands</h3>

        <div class="outline-text-3" id="text-27-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 25.6 (info "(emacs)Case") Conversion Commands</span>

  (leuven--section <span style=
"color: #036A07;">"25.6 (emacs)Case Conversion Commands"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable the use of the commands `</span><span style="color: #D0372D; font-style: italic;">downcase-region</span><span style="color: #8D8D84; font-style: italic;">' and `</span><span style="color: #D0372D; font-style: italic;">upcase-region</span><span style="color: #8D8D84; font-style: italic;">'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">without confirmation</span>
  (put 'downcase-region 'disabled nil)
  (put 'upcase-region 'disabled nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-27-5" class="outline-3">
        <h3 id="sec-27-5"><a id="ID-42ad895e-c049-4710-a877-5014a7f6acfc" name=
        "ID-42ad895e-c049-4710-a877-5014a7f6acfc"></a>Outline Mode</h3>

        <div class="outline-text-3" id="text-27-5">
          <p>Outline is line-oriented and does not distinguish
          end-of-block.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 25.8 (info "(emacs)Outline Mode")</span>

  (leuven--section <span style=
"color: #036A07;">"25.8 (emacs)Outline Mode"</span>)
</pre>
          </div>
        </div>

        <div id="outline-container-sec-27-5-1" class="outline-4">
          <h4 id="sec-27-5-1">outline-minor-mode</h4>

          <div class="outline-text-4" id="text-27-5-1">
            <p>Though Outline minor mode has NOTHING to do with folding of code
            as such, some people have the following code in their
            <code>ruby-mode-hook</code> to enable code folding using
            <code>outline-minor-mode</code> + <code>outline-magic</code>.</p>
            <pre class="example">
(outline-minor-mode 1)
(set (make-local-variable 'outline-regexp) "^[ \t]*\\(?:def\\|class\\|module\\)\\|^[ \t]*###==")
</pre>

            <p>Outline minor mode is also used to collapse Lisp code (i.e., to
            see in the buffer just the definition of a function instead of the
            whole body).</p>

            <p>See also the library <a href="#sec-31-7">hs-minor-mode</a>.</p>

            <p>You can use <code>org-cycle</code> in other modes, with
            <code>outline-minor-mode</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">outline mode commands for Emacs</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"outline"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">bind the outline minor mode functions to an easy to remember prefix</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">key (more accessible than the horrible prefix `C-c @')</span>
    (setq outline-minor-mode-prefix (kbd <span style=
"color: #036A07;">"C-c C-o"</span>)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">like in nXML mode</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; make other `</span><span style=
"color: #D0372D; font-style: italic;">outline-minor-mode</span><span style=
"color: #8D8D84; font-style: italic;">' files (LaTeX, etc.) feel the Org</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; mode outline navigation (written by Carsten Dominik)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(when (try-require 'outline-magic)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'outline-minor-mode-hook</span>
    <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">(lambda ()</span>
    <span style="color: #8D8D84;">;;               </span><span style=
"color: #8D8D84; font-style: italic;">(define-key outline-minor-mode-map</span>
    <span style="color: #8D8D84;">;;                 </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;S-tab&gt;") 'outline-cycle)</span>
    <span style="color: #8D8D84;">;;               </span><span style=
"color: #8D8D84; font-style: italic;">(define-key outline-minor-mode-map</span>
    <span style="color: #8D8D84;">;;                 </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;M-left&gt;") 'outline-promote)</span>
    <span style="color: #8D8D84;">;;               </span><span style=
"color: #8D8D84; font-style: italic;">(define-key outline-minor-mode-map</span>
    <span style="color: #8D8D84;">;;                 </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;M-right&gt;") 'outline-demote)</span>
    <span style="color: #8D8D84;">;;               </span><span style=
"color: #8D8D84; font-style: italic;">(define-key outline-minor-mode-map</span>
    <span style="color: #8D8D84;">;;                 </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;M-up&gt;") 'outline-move-subtree-up)</span>
    <span style="color: #8D8D84;">;;               </span><span style=
"color: #8D8D84; font-style: italic;">(define-key outline-minor-mode-map</span>
    <span style="color: #8D8D84;">;;                 </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;M-down&gt;") 'outline-move-subtree-down))))</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; extra support for outline minor mode</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(try-require 'out-xtra)</span>


    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Org-style folding for a `</span><span style="color: #D0372D; font-style: italic;">.emacs</span><span style="color: #8D8D84; font-style: italic;">' (and much more)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> This should be in an `</span><span style="color: #D0372D; font-style: italic;">eval-after-load</span><span style="color: #8D8D84; font-style: italic;">' of Org, so that</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">org-level-N</span><span style=
"color: #8D8D84; font-style: italic;">' are defined when used</span>

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--outline-regexp</span> ()
      <span style=
"color: #008000;">"Calculate the outline regexp for the current mode."</span>
      (<span style=
"color: #0000FF;">let</span> ((comment-starter (replace-regexp-in-string
                              <span style=
"color: #036A07;">"[[:space:]]+"</span> <span style=
"color: #036A07;">""</span> comment-start)))
        (<span style=
"color: #0000FF;">when</span> (string= comment-start <span style=
"color: #036A07;">";"</span>)
          (setq comment-starter <span style="color: #036A07;">";;"</span>))
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(concat "^" comment-starter "\\*+")))</span>
        (concat <span style=
"color: #036A07;">"^"</span> comment-starter <span style=
"color: #036A07;">"[*]+ "</span>)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">fontify the whole line for headings (with a background color)</span>
    (setq org-fontify-whole-heading-line t)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--outline-minor-mode-hook</span> ()
      (setq outline-regexp (leuven--outline-regexp))
      (<span style=
"color: #0000FF;">let*</span> ((org-fontify-whole-headline-regexp <span style=
"color: #036A07;">""</span>) <span style=
"color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">"\n?")</span>
             (heading-1-regexp
              (concat (substring outline-regexp 0 -1)
                      <span style=
"color: #036A07;">"\\{1\\} </span><span style="color: #036A07; font-weight: bold;">\\</span><span style="color: #036A07; font-weight: bold;">(</span><span style="color: #036A07;">.*"</span> org-fontify-whole-headline-regexp <span style="color: #036A07;">"</span><span style="color: #036A07; font-weight: bold;">\\</span><span style="color: #036A07; font-weight: bold;">)</span><span style="color: #036A07;">"</span>))
             (heading-2-regexp
              (concat (substring outline-regexp 0 -1)
                      <span style=
"color: #036A07;">"\\{2\\} </span><span style="color: #036A07; font-weight: bold;">\\</span><span style="color: #036A07; font-weight: bold;">(</span><span style="color: #036A07;">.*"</span> org-fontify-whole-headline-regexp <span style="color: #036A07;">"</span><span style="color: #036A07; font-weight: bold;">\\</span><span style="color: #036A07; font-weight: bold;">)</span><span style="color: #036A07;">"</span>))
             (heading-3-regexp
              (concat (substring outline-regexp 0 -1)
                      <span style=
"color: #036A07;">"\\{3\\} </span><span style="color: #036A07; font-weight: bold;">\\</span><span style="color: #036A07; font-weight: bold;">(</span><span style="color: #036A07;">.*"</span> org-fontify-whole-headline-regexp <span style="color: #036A07;">"</span><span style="color: #036A07; font-weight: bold;">\\</span><span style="color: #036A07; font-weight: bold;">)</span><span style="color: #036A07;">"</span>))
             (heading-4-regexp
              (concat (substring outline-regexp 0 -1)
                      <span style=
"color: #036A07;">"\\{4,\\} </span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">.*"</span> org-fontify-whole-headline-regexp <span style=
"color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">"</span>)))
        (font-lock-add-keywords nil
         `((,heading-1-regexp 1 'org-level-1 t)
           (,heading-2-regexp 1 'org-level-2 t)
           (,heading-3-regexp 1 'org-level-3 t)
           (,heading-4-regexp 1 'org-level-4 t)))))

    (add-hook 'outline-minor-mode-hook
              'leuven--outline-minor-mode-hook)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Add the following as the top line of your `</span><span style="color: #D0372D; font-style: italic;">.emacs</span><span style="color: #8D8D84; font-style: italic;">':</span>
    <span style="color: #8D8D84;">;;</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">; -*- mode: emacs-lisp; eval: (outline-minor-mode 1); -*-</span>
    <span style="color: #8D8D84;">;;</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Now you can add `;;' and `;;*', etc. as headings in your `</span><span style="color: #D0372D; font-style: italic;">.emacs</span><span style="color: #8D8D84; font-style: italic;">'</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">and cycle using `</span><span style=
"color: #D0372D; font-style: italic;">&lt;S-tab&gt;</span><span style=
"color: #8D8D84; font-style: italic;">', `</span><span style=
"color: #D0372D; font-style: italic;">&lt;M-left&gt;</span><span style=
"color: #8D8D84; font-style: italic;">' and `</span><span style=
"color: #D0372D; font-style: italic;">&lt;M-right&gt;</span><span style=
"color: #8D8D84; font-style: italic;">' will collapse</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">or expand all headings respectively.  I am guessing you mean to make</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">segments such as `;; SHORTCUTS' and `;; VARIABLES', this will do</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">that, but not too much more.</span>
    )
</pre>
            </div>

            <p>For Emacs Lisp, Stefan Monnier additionally uses:</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    (add-hook 'outline-minor-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (<span style=
"color: #0000FF;">when</span> (and outline-minor-mode (derived-mode-p 'emacs-lisp-mode))
                  (hide-sublevels 1000))))
</pre>
            </div>

            <p>which starts outline-minor-mode by hiding all the bodies of
            functions. He also uses <code>reveal-mode</code> which
            automatically unhides the bodies when you try to move the cursor
            into them (so you don’t need to remember the key sequences to use
            for opening/closing elements).</p>
          </div>
        </div>

        <div id="outline-container-sec-27-5-2" class="outline-4">
          <h4 id="sec-27-5-2">org-global-cycle + outline-magic</h4>

          <div class="outline-text-4" id="text-27-5-2">
            <p>The visibility-cycling features are written in a way that they
            are independent of the outline setup. The following setup provides
            standard Org mode functionality (headline folding and unfolding) in
            <code>outline-minor-mode</code> on <code>&lt;C-tab&gt;</code> and
            <code>&lt;S-tab&gt;</code>. We use <code>&lt;C-tab&gt;</code>
            instead of <code>&lt;tab&gt;</code>, because
            <code>&lt;tab&gt;</code> usually has mode-specific tasks.</p>

            <p>Note that for <code>&lt;C-tab&gt;</code> to work, the cursor
            needs to be on a headline (the line where the ellipsis shows).</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'outline-minor-mode-hook</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(lambda ()</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(define-key outline-minor-mode-map [(control tab)] 'org-cycle)</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(define-key outline-minor-mode-map [(shift tab)] 'org-global-cycle))) ; backtab?</span>
</pre>
            </div>

            <p>Now doing</p>

            <p>M-x find-library RET ox.el RET</p>

            <p>S-TAB (one or more times)</p>

            <p>will give you a give quick overview of all the function
            names.</p>

            <p>Or check out <code>outline-magic.el</code>, which does this and
            also provides <b>promotion and demotion</b> functionality.</p>
          </div>
        </div>

        <div id="outline-container-sec-27-5-3" class="outline-4">
          <h4 id="sec-27-5-3">org</h4>

          <div class="outline-text-4" id="text-27-5-3">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;S-tab&gt;"</span>) 'org-cycle) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">that works (but on level 1+)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Look at org-cycle-global and local below, they work better, but</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">still on level 1+</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Replace it by a function which alternatively does `</span><span style="color: #D0372D; font-style: italic;">hide-body</span><span style="color: #8D8D84; font-style: italic;">' and</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">show-all</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-27-5-4" class="outline-4">
          <h4 id="sec-27-5-4">org-struct-mode</h4>

          <div class="outline-text-4" id="text-27-5-4">
            <p>&gt; Experienced users use outline-minor-mode - It takes time to
            getting used to &gt; it.</p>

            <p>You can also use <code>orgstruct-mode</code>, a minor mode that
            comes with <code>org-mode</code>.</p>

            <p><code>org-global-cycle</code> (!= <code>org-cycle-global</code>)
            now works fine in buffers using <code>orgstruct-mode</code>.</p>

            <p>As for handling “large” files, I use this:</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">from Bastien</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> 2010-06-21 Conflicts with outline-minor-mode bindings</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add a hook to use `</span><span style=
"color: #D0372D; font-style: italic;">orgstruct-mode</span><span style=
"color: #8D8D84; font-style: italic;">' in Emacs Lisp buffers</span>
  (add-hook 'emacs-lisp-mode-hook 'orgstruct-mode)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">org-cycle-global</span> ()
    (interactive)
    (org-cycle t))

  (global-set-key                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> ok on Emacs Lisp, not on LaTeX</span>
    (kbd <span style=
"color: #036A07;">"C-M-]"</span>) 'org-cycle-global)    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">&lt;S-tab&gt;?</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun org-cycle-local ()</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(interactive)</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(save-excursion</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(move-beginning-of-line nil)</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(org-cycle)))</span>

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">org-cycle-local</span> ()
    (interactive)
    (<span style="color: #0000FF;">ignore-</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #0000FF;">s</span>
      (end-of-defun)
      (beginning-of-defun))
    (org-cycle))

  (global-set-key                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> ok on Emacs Lisp, not on LaTeX</span>
    (kbd <span style="color: #036A07;">"M-]"</span>) 'org-cycle-local)

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">C-M-] and M-] fold the whole buffer or the current defun.</span>
</pre>
            </div>

            <p>I made a video to demonstrate it quickly: <a href=
            "https://vimeo.com/55570133">navigating-emacs</a>.</p>

            <p>This helps me survive in files like <code>org.el</code> and
            <code>org-agenda.el</code>.</p>
          </div>
        </div>

        <div id="outline-container-sec-27-5-5" class="outline-4">
          <h4 id="sec-27-5-5">fold-dwim-org</h4>

          <div class="outline-text-4" id="text-27-5-5">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; unified user interface for Emacs folding modes, bound to Org</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; key-strokes</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(GNUEmacs</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(try-require 'fold-dwim-org))</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">25.8.2</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;M-f6&gt;"</span>) 'visible-mode)
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-27-6" class="outline-3">
        <h3 id="sec-27-6">Boxquote</h3>

        <div class="outline-text-3" id="text-27-6">
          <p>Use Unicode characters.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs-goodies-el)boxquote")</span>

  (leuven--section <span style=
"color: #036A07;">"(emacs-goodies-el)boxquote"</span>)

  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"boxquote"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">quote text with a semi-box</span>
    (autoload 'boxquote-region <span style="color: #036A07;">"boxquote"</span>
      <span style=
"color: #008000;">"Draw a box around the left hand side of a region bounding START and END."</span> t)

    (global-set-key
      (kbd <span style="color: #036A07;">"C-c q"</span>) 'boxquote-region)

    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"boxquote"</span>
      (setq boxquote-top-and-tail <span style="color: #036A07;">"────"</span>)
      (setq boxquote-title-format <span style="color: #036A07;">" %s"</span>)
      (setq boxquote-top-corner    <span style="color: #036A07;">"  ╭"</span>)
      (setq boxquote-side          <span style="color: #036A07;">"  │ "</span>)
      (setq boxquote-bottom-corner <span style=
"color: #036A07;">"  ╰"</span>)))
</pre>
          </div>

          <p>In Gnus, you can mark some region with enclosing tags by pressing
          <code>C-c M-m</code> (<code>message-mark-inserted-region</code>) or
          by clicking on <code>&lt;menu-bar&gt; &lt;Message&gt; &lt;Insert
          Region Marked&gt;</code>.</p>
          <pre class="example">
--8&lt;---------------cut here---------------start-------------&gt;8---
...
...
...
--8&lt;---------------cut here---------------end---------------&gt;8---
</pre>
        </div>
      </div>

      <div id="outline-container-sec-27-7" class="outline-3">
        <h3 id="sec-27-7">Phonetic</h3>

        <div class="outline-text-3" id="text-27-7">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "phonetic")</span>

  (leuven--section <span style="color: #036A07;">"phonetic"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">phonetic spelling</span>
  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"phonetic"</span>)
    (autoload 'phonetize-region <span style="color: #036A07;">"phonetic"</span>
      <span style=
"color: #008000;">"Translate the region according to the phonetic alphabet."</span> t))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 25 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-28" class="outline-2">
      <h2 id="sec-28"><a id="ID-737b836b-ac1f-4120-94ca-c9e0282268f0" name=
      "ID-737b836b-ac1f-4120-94ca-c9e0282268f0"></a>Org Mode (Getting Things
      Done)</h2>

      <div class="outline-text-2" id="text-28">
        <ul class="org-ul">
          <li>40 variables most frequently customized in Org <a href=
          "http://orgmode.org/worg/org-configs/org-customization-survey.html">http://orgmode.org/worg/org-configs/org-customization-survey.html</a></li>

          <li>Org config examples <a href=
          "http://repo.or.cz/w/Worg.git/tree/HEAD:/org-configs">http://repo.or.cz/w/Worg.git/tree/HEAD:/org-configs</a></li>
        </ul>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 25.9 Org Mode</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(info "(org)Top") outline-based notes management and organizer</span>

(leuven--chapter leuven-chapter-25.9-org-mode <span style=
"color: #036A07;">"25.9 Getting Things Done (with Org mode)"</span>
</pre>
        </div>

        <p>After all the configuration has been done, you can easily manage
        your daily work and tasks with Org mode.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 1 (info "(org)Introduction")</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 1.2 (info "(org)Installation")</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">autoload functions</span>
  (GNUEmacs
    (<span style="color: #0000FF;">unless</span> (try-require 'org-loaddefs)
      (try-require 'org-install)))      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">obsolete since Emacs 24.3</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">getting started</span>
  (GNUEmacs
    (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.txt\\'"</span> . org-mode))
    (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.org\\'"</span> . org-mode))
    (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.org_archive\\'"</span> . org-mode)))

  (define-key global-map
    (kbd <span style="color: #036A07;">"C-c l"</span>) 'org-store-link)
  (define-key global-map
    (kbd <span style="color: #036A07;">"C-c c"</span>) 'org-capture)
  (define-key global-map
    (kbd <span style="color: #036A07;">"C-c a"</span>) 'org-agenda)
  (define-key global-map
    (kbd <span style="color: #036A07;">"C-c b"</span>) 'org-switchb)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">using links outside Org</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-c L"</span>) 'org-insert-link-global)
  (global-set-key
    (kbd <span style=
"color: #036A07;">"C-c O"</span>) 'org-open-at-point-global)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display the Org mode manual in Info mode</span>
    (define-key global-map
      (kbd <span style=
"color: #036A07;">"C-h o"</span>) 'org-info))         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">not autoloaded</span>
</pre>
        </div>

        <p>These variables need to be set before Org mode is loaded.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">These variables need to be set before org.el is loaded...</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">face to be used by `</span><span style=
"color: #D0372D; font-style: italic;">font-lock</span><span style=
"color: #8D8D84; font-style: italic;">' for highlighting in Org mode Emacs</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">buffers, and tags to be used to convert emphasis fontifiers for HTML</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">export</span>
  (setq org-emphasis-alist              <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">remove the strike-through emphasis</span>
        '((<span style="color: #036A07;">"*"</span> bold <span style=
"color: #036A07;">"&lt;b&gt;"</span> <span style=
"color: #036A07;">"&lt;/b&gt;"</span>)
          (<span style="color: #036A07;">"/"</span> italic <span style=
"color: #036A07;">"&lt;i&gt;"</span> <span style=
"color: #036A07;">"&lt;/i&gt;"</span>)
          (<span style="color: #036A07;">"_"</span> underline <span style=
"color: #036A07;">"&lt;span style=\"text-decoration:underline;\"&gt;"</span> <span style="color: #036A07;">"&lt;/span&gt;"</span>)
          (<span style="color: #036A07;">"="</span> org-verbatim <span style=
"color: #036A07;">"&lt;code&gt;"</span> <span style=
"color: #036A07;">"&lt;/code&gt;"</span> verbatim)
          (<span style="color: #036A07;">"~"</span> org-code <span style=
"color: #036A07;">"&lt;code&gt;"</span> <span style=
"color: #036A07;">"&lt;/code&gt;"</span> verbatim)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-emphasis-alist</span>
  <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">'(("&amp;" (:weight ultra-bold :foreground "#000000" :background "#FBFF00"))</span>
  <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">;; ("?" (:box t))</span>
  <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">("!" (:weight ultra-bold :foreground "#B40000")) ; = alert in some Wikis</span>
</pre>
        </div>

        <p><code>org-emphasis-alist</code> has a <code>:set</code> handler
        <code>org-set-emph-re</code> which will do the job of setting up the
        regexps. I don’t want to call <code>org-set-emph-re</code> directly,
        instead I set <code>org-emphasis-alist</code> to itself and let the
        customize interface call the handler for me.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">allow both single and double quotes in the border</span>
    (setcar (nthcdr 2 org-emphasis-regexp-components) <span style=
"color: #036A07;">" \t\r\n,"</span>)
    (custom-set-variables `(org-emphasis-alist ',org-emphasis-alist)))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">single character alphabetical bullets (a, b, c, ..., X, Y, Z) are allowed</span>
  (setq org-list-allow-alphabetical t)
</pre>
        </div>

        <p>If you use <code>org-emphasis-alist</code> to do simple
        highlighting, you should better use <a href=
        "http://www.emacswiki.org/emacs/AddKeywords">font-lock-add-keywords</a>.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">libraries that should (always) be loaded along with `</span><span style="color: #D0372D; font-style: italic;">org.el</span><span style="color: #8D8D84; font-style: italic;">'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(loaded when opening the first Org file)</span>
  (setq org-modules nil)
</pre>
        </div>

        <p>Original value was:</p>

        <ul class="org-ul">
          <li><code>org-bbdb</code></li>

          <li><code>org-bibtex</code></li>

          <li><code>org-docview</code></li>

          <li><code>org-gnus</code></li>

          <li><code>org-info</code></li>

          <li><code>org-jsinfo</code></li>

          <li><code>org-irc</code></li>

          <li><code>org-mew</code></li>

          <li><code>org-mhe</code></li>

          <li><code>org-rmail</code></li>

          <li><code>org-vm</code></li>

          <li><code>org-w3m</code></li>

          <li><code>org-wl</code></li>
        </ul>

        <p>When you have <code>org-id</code> in <code>org-modules</code>,
        unique <b>ID’s</b> are generated when you link to a task (using
        <code>org-id-get-create</code>) — instead of links containing
        <b>headline text</b>.</p>

        <p>ID’s are saved in <code>~/.emacs.d/.org-id-locations</code> on my
        system (see <code>org-id-locations-file</code>).</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">set the RESET_CHECK_BOXES and LIST_EXPORT_BASENAME properties in items as</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">needed</span>
  (add-to-list 'org-modules 'org-checklist)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">globally unique ID for Org mode entries (see `</span><span style="color: #D0372D; font-style: italic;">org-store-link</span><span style="color: #8D8D84; font-style: italic;">')</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(takes care of automatically creating unique targets for internal</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">links, see `C-h v org-id-link-to-org-use-id &lt;RET&gt;')</span>
  (add-to-list 'org-modules 'org-id)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">support for links to Gnus groups and messages from within Org mode</span>
  (add-to-list 'org-modules 'org-gnus)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">habit tracking code for Org mode</span>
  (add-to-list 'org-modules 'org-habit)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make sure to turn `</span><span style=
"color: #D0372D; font-style: italic;">org-info</span><span style=
"color: #8D8D84; font-style: italic;">' on in order to link to info nodes</span>
  (add-to-list 'org-modules 'org-info)
</pre>
        </div>

        <table class="inlinetask" width="100%">
          <tr>
            <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

            <td width="100%">
              <b>Look at other modules</b><br />

              <ul class="org-ul">
                <li><code>org-eval</code></li>

                <li><code>org-eval-light</code></li>

                <li><code>org-exp-bibtex</code></li>

                <li><code>org-exp-blocks</code> (supported by the new exporter
                out of the box)</li>

                <li><code>org-man</code></li>

                <li><code>org-mouse</code></li>

                <li><code>org-mtags</code></li>

                <li><code>org-panel</code></li>

                <li><code>org-R</code></li>
              </ul>
            </td>
          </tr>
        </table>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  (add-hook 'org-mode-hook
            (<span style="color: #0000FF;">lambda</span> ()
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(local-set-key</span>
              <span style="color: #8D8D84;">;;  </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "M-n") 'outline-next-visible-heading)</span>
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(local-set-key</span>
              <span style="color: #8D8D84;">;;  </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "M-p") 'outline-previous-visible-heading)</span>

              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; create a binding for `</span><span style="color: #D0372D; font-style: italic;">org-show-subtree</span><span style="color: #8D8D84; font-style: italic;">'</span>
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(org-defkey org-mode-map</span>
              <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "C-c C-S-s") 'org-show-subtree)</span>
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(org-defkey org-mode-map</span>
              <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "C-c s") 'org-show-subtree)</span>

              (local-set-key
                (kbd <span style="color: #036A07;">"C-c h"</span>) 'hide-other)

              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">table</span>
              (local-set-key
                (kbd <span style=
"color: #036A07;">"C-M-w"</span>) 'org-table-copy-region)
              (local-set-key
                (kbd <span style=
"color: #036A07;">"C-M-y"</span>) 'org-table-paste-rectangle)
              (local-set-key
                (kbd <span style=
"color: #036A07;">"C-M-l"</span>) 'org-table-sort-lines)

              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">remove the binding of `C-c SPC' (in Org tables), used by Ace Jump</span>
              (local-set-key
                (kbd <span style="color: #036A07;">"C-c SPC"</span>) nil)))
</pre>
        </div>
      </div>

      <div id="outline-container-sec-28-0-1" class="outline-4">
        <h4 id="sec-28-0-1">Activation</h4>

        <div class="outline-text-4" id="text-28-0-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Introduction"</span>)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 1.3 (info "(org)Activation")</span>

    (leuven--section <span style=
"color: #036A07;">"1.3 (org)Activation"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insert the first line setting Org mode in empty files</span>
    (setq org-insert-mode-line-in-empty-file t))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-1" class="outline-3">
        <h3 id="sec-28-1">Document Structure</h3>

        <div class="outline-text-3" id="text-28-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 2 (info "(org)Document Structure")</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Document Structure"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">improve display of the ellipsis</span>
    (set-face-attribute 'org-ellipsis nil
                        <span style=
"color: #006FE0;">:box</span> '(<span style="color: #006FE0;">:line-width</span> 1 <span style="color: #006FE0;">:color</span> <span style="color: #036A07;">"#999999"</span>)
                        <span style=
"color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#999999"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FFF8C0"</span>
                        <span style="color: #006FE0;">:underline</span> nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ellipsis to use in the Org mode outline</span>
    (setq org-ellipsis
          (<span style=
"color: #0000FF;">if</span> (char-displayable-p ?\u25B7) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">white right-pointing triangle</span>
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">this test takes ~ 0.40s; hence, wrapped in eval-after-load</span>
              <span style=
"color: #036A07;">" \u25B7"</span>                 <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">string</span>
            'org-ellipsis)))            <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">face</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">&lt;RET&gt; follows links (except in tables, where you must use `C-c C-o')</span>
  (setq org-return-follows-link t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">blank lines</span>
  (setq org-blank-before-new-entry
        '(<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insert  a blank line before new heading</span>
          (heading . t)

          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">try to make an intelligent decision whether to insert a</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">blank line or not before a new item</span>
          (plain-list-item . auto)))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-1-1" class="outline-4">
          <h4 id="sec-28-1-1">Headlines</h4>

          <div class="outline-text-4" id="text-28-1-1">
            <p><code>C-e</code> goes <b>right before</b> the end of the
            invisible region and <code>TAB</code> will unfold as expected, both
            in a folded subtree or in a folded drawer.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(org)Headlines")</span>

  (leuven--section <span style="color: #036A07;">"2.2 (org)Headlines"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; `</span><span style=
"color: #D0372D; font-style: italic;">C-a</span><span style=
"color: #8D8D84; font-style: italic;">' and `</span><span style=
"color: #D0372D; font-style: italic;">C-e</span><span style=
"color: #8D8D84; font-style: italic;">' behave specially in headlines and items</span>
  (setq org-special-ctrl-a/e 'reversed)
</pre>
            </div>

            <p>The package <code>org-inlinetask.el</code> (for <b>tasks
            independent of outline hierarchy</b>) installs the key binding
            <code>C-c C-x t</code> to insert a new <b>inline task</b>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Headlines"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insert an inline task (independent of outline hierarchy)</span>
    (<span style=
"color: #0000FF;">when</span> (try-require 'org-inlinetask) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">needed</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">initial state (</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> keyword) of inline tasks</span>
      (setq org-inlinetask-default-state <span style=
"color: #036A07;">"</span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;">"</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">template for inline tasks in HTML exporter</span>
      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--org-html-format-inlinetask</span> (todo todo-type priority title
                                                 tags contents)
        <span style=
"color: #008000;">"Format an inline task element for HTML export."</span>
        (<span style="color: #0000FF;">let</span> ((todo-kw
               (<span style="color: #0000FF;">if</span> todo
                   (format <span style=
"color: #036A07;">"&lt;span class=\"%s %s\"&gt;%s&lt;/span&gt; "</span> todo-type todo todo)
                 <span style="color: #036A07;">""</span>))
              (full-title-w/o-todo-kw
               (concat
                (<span style=
"color: #0000FF;">when</span> priority (format <span style=
"color: #036A07;">"[#%c] "</span> priority))
                title
                (<span style="color: #0000FF;">when</span> tags
                  (concat <span style=
"color: #036A07;">"&amp;nbsp;&amp;nbsp;&amp;nbsp;"</span>
                          <span style=
"color: #036A07;">"&lt;span class=\"tag\"&gt;"</span>
                          (mapconcat (<span style=
"color: #0000FF;">lambda</span> (tag)
                                       (concat <span style=
"color: #036A07;">"&lt;span class= \""</span> tag <span style=
"color: #036A07;">"\"&gt;"</span> tag
                                               <span style=
"color: #036A07;">"&lt;/span&gt;"</span>))
                                     tags
                                     <span style=
"color: #036A07;">"&amp;nbsp;"</span>)
                          <span style=
"color: #036A07;">"&lt;/span&gt;"</span>)))))
          (concat <span style=
"color: #036A07;">"&lt;table class=\"inlinetask\" width=\"100%\"&gt;"</span>
                    <span style="color: #036A07;">"&lt;tr&gt;"</span>
                      <span style=
"color: #036A07;">"&lt;td valign=\"top\"&gt;&lt;b&gt;"</span> todo-kw <span style="color: #036A07;">"&lt;/b&gt;&lt;/td&gt;"</span>
                      <span style=
"color: #036A07;">"&lt;td width=\"100%\"&gt;&lt;b&gt;"</span> full-title-w/o-todo-kw <span style="color: #036A07;">"&lt;/b&gt;&lt;br /&gt;"</span>
                        (or contents <span style=
"color: #036A07;">""</span>) <span style="color: #036A07;">"&lt;/td&gt;"</span>
                    <span style="color: #036A07;">"&lt;/tr&gt;"</span>
                  <span style="color: #036A07;">"&lt;/table&gt;"</span>)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">function called to format an inlinetask in HTML code</span>
      (setq org-html-format-inlinetask-function
            'leuven--org-html-format-inlinetask)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">template for inline tasks in LaTeX exporter</span>
      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--org-latex-format-inlinetask</span> (todo todo-type priority title
                                                  tags contents)
        <span style=
"color: #008000;">"Format an inline task element for LaTeX export."</span>
        (<span style=
"color: #0000FF;">let*</span> ((tags-string (format <span style=
"color: #036A07;">":%s:"</span> (mapconcat 'identity tags <span style=
"color: #036A07;">":"</span>)))
               (opt-color
                (<span style="color: #0000FF;">if</span> tags
                    (<span style=
"color: #0000FF;">cond</span> ((string-match <span style=
"color: #036A07;">":info:"</span> tags-string)
                           <span style=
"color: #036A07;">"color=yellow!40"</span>)
                          ((string-match <span style=
"color: #036A07;">":</span><span style=
"color: #CC0000; background-color: #FFFF88;">warning</span><span style=
"color: #036A07;">:"</span> tags-string)
                           <span style=
"color: #036A07;">"color=orange!40"</span>)
                          ((string-match <span style=
"color: #036A07;">":</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #036A07;">:"</span> tags-string)
                           <span style="color: #036A07;">"color=red!40"</span>)
                          (t <span style="color: #036A07;">""</span>))
                  <span style="color: #036A07;">""</span>))
               (full-title
                (concat
                 (<span style="color: #0000FF;">when</span> todo
                   (format <span style=
"color: #036A07;">"{\\color{red}\\textbf{\\textsf{\\textsc{%s}}}} "</span>
                           todo))
                 (<span style="color: #0000FF;">when</span> priority
                   (format <span style=
"color: #036A07;">"\\textsf{\\framebox{\\#%c}} "</span> priority))
                 title
                 (<span style="color: #0000FF;">when</span> tags
                   (format <span style="color: #036A07;">"\\hfill{}:%s:"</span>
                           (mapconcat 'identity tags <span style=
"color: #036A07;">":"</span>)))))
               (opt-rule
                (<span style="color: #0000FF;">if</span> contents
                    <span style=
"color: #036A07;">"\\\\ \\rule[.3em]{\\textwidth}{0.2pt}\n"</span>
                  <span style="color: #036A07;">""</span>))
               (opt-contents
                (or contents <span style="color: #036A07;">""</span>)))
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">this requires the `</span><span style=
"color: #D0372D; font-style: italic;">todonotes</span><span style=
"color: #8D8D84; font-style: italic;">' package</span>
          (format (concat <span style=
"color: #036A07;">"\\todo[inline,caption={},%s]{\n"</span>
                          <span style="color: #036A07;">"  %s\n"</span>
                          <span style="color: #036A07;">"  %s"</span>
                          <span style="color: #036A07;">"  %s"</span>
                          <span style="color: #036A07;">"}"</span>)
                  opt-color
                  full-title
                  opt-rule
                  opt-contents)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">function called to format an inlinetask in LaTeX code</span>
      (setq org-latex-format-inlinetask-function
            'leuven--org-latex-format-inlinetask))

    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "org" ends here</span>
</pre>
            </div>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%"><b>Have a solution for base article, report,
                book (w/o todonotes)</b><br /></td>
              </tr>
            </table>
          </div>
        </div>

        <div id="outline-container-sec-28-1-2" class="outline-4">
          <h4 id="sec-28-1-2">Visibility cycling</h4>

          <div class="outline-text-4" id="text-28-1-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(org)Visibility cycling")</span>

  (leuven--section <span style=
"color: #036A07;">"2.3 (org)Visibility cycling"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">do not switch to OVERVIEW at startup</span>
  (setq org-startup-folded nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">inhibit startup when preparing agenda buffers -- agenda optimization</span>
  (setq org-agenda-inhibit-startup t)
</pre>
            </div>

            <p>Display outline path in mode line:</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'org-mode-hook</span>
  <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">(lambda()</span>
  <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">(add-to-list 'mode-line-format</span>
  <span style="color: #8D8D84;">;;                          </span><span style=
"color: #8D8D84; font-style: italic;">'(:eval (org-propertize</span>
  <span style=
"color: #8D8D84;">;;                                   </span><span style=
"color: #8D8D84; font-style: italic;">(org-display-outline-path nil t " / " t)</span>
  <span style=
"color: #8D8D84;">;;                                   </span><span style=
"color: #8D8D84; font-style: italic;">'face 'mode-line-emphasis</span>
  <span style=
"color: #8D8D84;">;;                                   </span><span style=
"color: #8D8D84; font-style: italic;">'help-echo "Outline path")) t)))</span>
</pre>
            </div>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%">
                  <b>Fix Error during redisplay</b><br />

                  <p>(eval (org-propertize (org-display-outline-path nil t " /
                  " t) (quote face) (quote mode-line-emphasis) (quote
                  help-echo) “Outline path”)) signaled (wrong-type-argument
                  stringp nil)</p>
                </td>
              </tr>
            </table>

            <p>Note that <b>Imenu</b> does display the current Org subtree in
            the mode line, not the full outline path.</p>
          </div>
        </div>

        <div id="outline-container-sec-28-1-3" class="outline-4">
          <h4 id="sec-28-1-3">2.4 Motion</h4>

          <div class="outline-text-4" id="text-28-1-3">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(org)Motion")</span>

  (leuven--section <span style="color: #036A07;">"2.4 (org)Motion"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">outline-node based navigation similar to the behavior of paredit-mode in</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Lisp files</span>
  (add-hook 'org-mode-hook
            (<span style="color: #0000FF;">lambda</span> ()
              (local-set-key
               (kbd <span style=
"color: #036A07;">"C-M-n"</span>) 'outline-next-visible-heading)
              (local-set-key
               (kbd <span style=
"color: #036A07;">"C-M-p"</span>) 'outline-previous-visible-heading)
              (local-set-key
               (kbd <span style=
"color: #036A07;">"C-M-u"</span>) 'outline-up-heading)))
</pre>
            </div>

            <p>Move through an Org file like <code>cd</code> on a file system
            with <code>org-goto</code>: <code>C-c C-j /foo/bar/baz
            &lt;RET&gt;</code></p>

            <p>vs <code>C-u C-c C-j</code></p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">headlines in the current buffer are offered via completion</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(interface also used by the `</span><span style="color: #D0372D; font-style: italic;">refile</span><span style="color: #8D8D84; font-style: italic;">' command)</span>
  (setq org-goto-interface 'outline-path-completion)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-reveal</span> (<span style=
"color: #6434A3;">&amp;optional</span> all-siblings)
      <span style="color: #008000;">"Show all siblings of current level.</span>
<span style=
"color: #008000;">    `C-u C-c C-r' does the same as default Org mode: show all hidden siblings."</span>
      (interactive <span style="color: #036A07;">"P"</span>)
      (<span style="color: #0000FF;">if</span> all-siblings
          (org-reveal t)
        (org-show-siblings)))

    (define-key org-mode-map
      (kbd <span style="color: #036A07;">"C-c C-r"</span>) 'leuven-org-reveal))
</pre>
            </div>

            <p>See also <i>Sparse trees</i> for behavior when revealing a
            location.</p>
          </div>
        </div>

        <div id="outline-container-sec-28-1-4" class="outline-4">
          <h4 id="sec-28-1-4">Structure editing</h4>

          <div class="outline-text-4" id="text-28-1-4">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(org)Structure editing")</span>

  (leuven--section <span style=
"color: #036A07;">"2.5 (org)Structure editing"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> Choose the right value!</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-M-RET-may-split-line nil)</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-1-5" class="outline-4">
          <h4 id="sec-28-1-5"><a id="ID-a9fe61b7-cdbd-478e-a4af-da9e122fb2d9"
          name="ID-a9fe61b7-cdbd-478e-a4af-da9e122fb2d9"></a>Sparse trees</h4>

          <div class="outline-text-4" id="text-28-1-5">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(org)Sparse trees")</span>

  (leuven--section <span style=
"color: #036A07;">"2.6 (org)Sparse trees"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show full hierarchy when revealing a location</span>
  (setq org-show-hierarchy-above t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't show following heading when revealing a location</span>
  (setq org-show-following-heading nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't show all sibling headings when revealing a location</span>
  (setq org-show-siblings nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show the entry below a headline when revealing a location</span>
  (setq org-show-entry-below t)
  (setq org-show-entry-below '((org-goto . t)))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-1-6" class="outline-4">
          <h4 id="sec-28-1-6">Plain lists</h4>

          <div class="outline-text-4" id="text-28-1-6">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(org)Plain lists")</span>

  (leuven--section <span style="color: #036A07;">"2.7 (org)Plain lists"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">maximum indentation for the second line of a description list</span>
  (setq org-description-max-indent 3)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't make tab cycle visibility on plain list items</span>
  (setq org-cycle-include-plain-lists nil) <span style=
"color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">'integrate?</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">an empty line does not end all plain list levels</span>
  (setq org-empty-line-terminates-plain-lists nil)
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-2" class="outline-3">
        <h3 id="sec-28-2">Tables</h3>

        <div class="outline-text-3" id="text-28-2">
          <p>See <a href=
          "http://orgmode.org/worg/org-tutorials/org-spreadsheet-intro.html">Org
          as a spreadsheet system: a short introduction</a>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 3 (info "(org)Tables")</span>

  (setq org-table-use-standard-references 'from)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 3.1 The (info "(org)Built-in table editor")</span>

  (leuven--section <span style=
"color: #036A07;">"3.1 The (org)Built-in table editor"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default export parameters for `</span><span style="color: #D0372D; font-style: italic;">org-table-export</span><span style="color: #8D8D84; font-style: italic;">'</span>
  (setq org-table-export-default-format <span style=
"color: #036A07;">"orgtbl-to-csv"</span>)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 3.5 (info "(org)The spreadsheet")</span>

  (leuven--section <span style=
"color: #036A07;">"3.5 (org)The spreadsheet"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-table"</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">some Calc mode settings for use in `</span><span style="color: #D0372D; font-style: italic;">calc-eval</span><span style="color: #8D8D84; font-style: italic;">' for table formulas</span>
    (setcar (cdr (memq 'calc-float-format org-calc-default-modes))
            '(float 12)))               <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[default: 8]</span>
</pre>
          </div>

          <p>To <b>update all tables</b> in a file, use
          <code>org-table-recalculate-buffer-tables</code> if the dependencies
          are only backwards.</p>

          <p>If you have dependencies in both directions, to iterate all tables
          in a file, in order to converge table-to-table dependencies, use
          <code>org-table-iterate-buffer-tables</code>.</p>
        </div>
      </div>

      <div id="outline-container-sec-28-3" class="outline-3">
        <h3 id="sec-28-3">Hyperlinks</h3>

        <div class="outline-text-3" id="text-28-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 4 (info "(org)Hyperlinks")</span>
</pre>
          </div>

          <p>If you insert a <a href="http:///">http:///</a> link containing
          equal signs (such as <a href=
          "http://test/test?name=me">http://test/test?name=me</a>), the
          verbatim link being inserted in the Org document has the equal signs
          escaped, unless you have:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't hexify URL when creating a link</span>
  (setq org-url-hexify-p nil)
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-3-1" class="outline-4">
          <h4 id="sec-28-3-1">External links</h4>

          <div class="outline-text-4" id="text-28-3-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Hyperlinks"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">open non-existing files</span>
    (setq org-open-non-existing-files t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">function and arguments to call for following `</span><span style="color: #D0372D; font-style: italic;">mailto</span><span style="color: #8D8D84; font-style: italic;">' links</span>
    (setq org-link-mailto-program '(compose-mail <span style=
"color: #036A07;">"%a"</span> <span style="color: #036A07;">"%s"</span>)))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">support for links to Gnus groups and messages from within Org mode</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-gnus"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">create web links to Google groups or Gmane (instead of Gnus</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">messages)</span>
    (setq org-gnus-prefer-web-links t))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-3-2" class="outline-4">
          <h4 id="sec-28-3-2">Handling links</h4>

          <div class="outline-text-4" id="text-28-3-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">global identifiers for Org-mode entries</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-id"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">storing a link to an Org file will use entry IDs</span>
    (setq org-id-link-to-org-use-id
          'create-if-interactive-and-no-custom-id))
</pre>
            </div>

            <p>PDF viewer? See <code>org-file-apps</code>. Just change to your
            favorite viewer. And make sure that you’re calling
            <code>org-return</code> to open (it’s bound to
            <code>C-m</code>).</p>

            <p>If I inline an image in an Org file, I can toggle its display
            with <code>C-c C-x C-v</code> and resize it to a specific
            width.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Handling links"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">4.4 show inline images when loading a new Org file</span>
    (setq org-startup-with-inline-images t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">4.4 try to get the width from an #+ATTR.* keyword and fall back on the</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">original width if none is found</span>
    (setq org-image-actual-width nil)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-3-3" class="outline-4">
          <h4 id="sec-28-3-3">Link abbreviations</h4>

          <div class="outline-text-4" id="text-28-3-3">
            <p>Link abbreviations provide a quick way of linking to resources
            that are frequently referenced, so that you can type just the key
            term instead of the complete URL.</p>

            <p>Here is an example: every time you need to use <a href=
            "http://www.google.com/search?q=searchterms">http://www.google.com/search?q=searchterms</a>,
            you can just type <code>[[google:searchterms]]</code> or
            <code>[[google:searchterms][description]]</code> instead.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">shortcut links</span>
    (setq org-link-abbrev-alist
          '((<span style="color: #036A07;">"cache"</span> .
             <span style=
"color: #036A07;">"http://www.google.com/search?q=cache:%s"</span>)
            (<span style="color: #036A07;">"dictionary"</span> .
             <span style=
"color: #036A07;">"http://www.dict.org/bin/Dict?Database=*&amp;Form=Dict1&amp;Strategy=*&amp;Query=%s"</span>)
            (<span style="color: #036A07;">"google"</span> .
             <span style=
"color: #036A07;">"http://www.google.com/search?q=%s"</span>)
            (<span style="color: #036A07;">"googlegroups"</span> .
             <span style=
"color: #036A07;">"http://groups.google.com/groups?q=%s"</span>)
            (<span style="color: #036A07;">"googlemaps"</span> .
             <span style=
"color: #036A07;">"http://maps.google.com/maps?q=%s"</span>)
            (<span style="color: #036A07;">"imdb"</span> .
             <span style=
"color: #036A07;">"http://us.imdb.com/Title?%s"</span>)
            (<span style="color: #036A07;">"openstreetmap"</span> .
             <span style=
"color: #036A07;">"http://nominatim.openstreetmap.org/search?q=%s&amp;polygon=1"</span>)
            (<span style="color: #036A07;">"wpen"</span> .
             <span style=
"color: #036A07;">"http://en.wikipedia.org/wiki/%s"</span>)
            (<span style="color: #036A07;">"wpfr"</span> .
             <span style=
"color: #036A07;">"http://fr.wikipedia.org/wiki/%s"</span>))))
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-4" class="outline-3">
        <h3 id="sec-28-4">“TODO” Items</h3>

        <div class="outline-text-3" id="text-28-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 5 (info "(org)</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Items")</span>
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-4-1" class="outline-4">
          <h4 id="sec-28-4-1">Basic TODO functionality</h4>

          <div class="outline-text-4" id="text-28-4-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 5.1 (info "(org)</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> basics") functionality</span>

  (leuven--section <span style="color: #036A07;">"5.1 (org)</span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;"> basics functionality"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">5.1 select a </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> state and bypass any logging associated with that</span>
  (setq org-treat-S-cursor-todo-selection-as-state-change nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">some commands act upon headlines in the active region</span>
  (setq org-loop-over-headlines-in-active-region 'start-level)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-4-2" class="outline-4">
          <h4 id="sec-28-4-2">Extended use of TODO keywords</h4>

          <div class="outline-text-4" id="text-28-4-2">
            <p>We use statuses to <b>create a workflow</b> for tasks.</p>

            <p>The statuses we use are a simple as possible to work well in the
            context of work.</p>

            <p>We use the following 4-letter status keywords:</p>

            <dl class="org-dl">
              <dt><code>TODO</code></dt>

              <dd>Approved task, to be done.</dd>

              <dt><code>STRT</code></dt>

              <dd>Some progress has already been done on the task.</dd>

              <dt><code>WAIT</code></dt>

              <dd>Task delegated to someone else. Or waiting for some external
              event to be able to work on the task.</dd>

              <dt><code>SDAY</code></dt>

              <dd>Task to be approved (and eventually done) in the future.</dd>

              <dt><code>DONE</code></dt>

              <dd>Task is completed.</dd>

              <dt><code>CANX</code></dt>

              <dd>Task is declined (but kept documented, instead of being
              deleted).</dd>
            </dl>

            <p>There is just 1 exception (made on purpose) to the 4-letter
            scheme:</p>

            <dl class="org-dl">
              <dt><code>NEW</code></dt>

              <dd>Proposed task, idea or wish, <b>not approved yet</b>.
              Draft.</dd>
            </dl>

            <p>One could add a <code>CLSD</code> or <code>VRFD</code> state for
            bug fixes, for example, which need to be verified before really
            closing the task.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 5.2 Use of (info "(org)</span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> extensions")</span>

  (leuven--section <span style=
"color: #036A07;">"5.2 Use of (org)</span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;"> extensions"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> entry keyword sequences (+ fast access keys and specifiers</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">for state change logging)</span>
  (setq org-todo-keywords
        '((sequence <span style=
"color: #036A07;">"NEW(n!)"</span>           <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">proposal</span>
                    <span style="color: #036A07;">"</span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;">(t!)"</span>          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">open, not started</span>
                    <span style=
"color: #036A07;">"STRT(s!)"</span>          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">in progress</span>
                    <span style=
"color: #036A07;">"WAIT(w!)"</span>          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">on hold, assigned, feedback</span>
                    <span style=
"color: #036A07;">"SDAY(y!)"</span>          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">someday, maybe, perhaps, may be undertaken in the future, wish</span>
                    <span style="color: #036A07;">"|"</span>
                    <span style=
"color: #036A07;">"DONE(d!)"</span>          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">completed, closed, resolved</span>
                    <span style=
"color: #036A07;">"CANX(x!)"</span>)         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">wontfix, rejected</span>
          (sequence <span style="color: #036A07;">"QTE(q!)"</span> <span style=
"color: #036A07;">"QTD(Q!)"</span> <span style="color: #036A07;">"|"</span>
                    <span style="color: #036A07;">"APP(A!)"</span> <span style=
"color: #036A07;">"EXP(E!)"</span> <span style=
"color: #036A07;">"REJ(R!)"</span>)
          (sequence <span style=
"color: #036A07;">"OPENPO(O!)"</span> <span style="color: #036A07;">"|"</span>
                    <span style="color: #036A07;">"CLSDPO(C!)"</span>)))
</pre>
            </div>

            <p><code>SDAY</code> is <b>not</b> a completion state (in order not
            to be struck through).</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-faces"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">faces for specific </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> keywords</span>
    (setq org-todo-keyword-faces
          '((<span style=
"color: #036A07;">"NEW"</span>  . leuven-org-created-kwd)
            (<span style="color: #036A07;">"</span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;">"</span> . org-todo)
            (<span style=
"color: #036A07;">"STRT"</span> . leuven-org-inprogress-kwd)
            (<span style=
"color: #036A07;">"WAIT"</span> . leuven-org-waiting-for-kwd)
            (<span style=
"color: #036A07;">"SDAY"</span> . leuven-org-someday-kwd)
            (<span style="color: #036A07;">"DONE"</span> . org-done)
            (<span style="color: #036A07;">"CANX"</span> . org-done)

            (<span style="color: #036A07;">"QTE"</span> . leuven-org-quote-kwd)
            (<span style=
"color: #036A07;">"QTD"</span> . leuven-org-quoted-kwd)
            (<span style=
"color: #036A07;">"APP"</span> . leuven-org-approved-kwd)
            (<span style=
"color: #036A07;">"EXP"</span> . leuven-org-expired-kwd)
            (<span style=
"color: #036A07;">"REJ"</span> . leuven-org-rejected-kwd)

            (<span style=
"color: #036A07;">"OPENPO"</span> . leuven-org-openpo-kwd)
            (<span style=
"color: #036A07;">"CLSDPO"</span> . leuven-org-closedpo-kwd)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Org standard faces</span>
    (set-face-attribute 'org-todo nil
                        <span style=
"color: #006FE0;">:weight</span> 'bold <span style=
"color: #006FE0;">:box</span> '(<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#D8ABA7"</span>)
                        <span style=
"color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#D8ABA7"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FFE6E4"</span>)

    (set-face-attribute 'org-done nil
                        <span style=
"color: #006FE0;">:weight</span> 'bold <span style=
"color: #006FE0;">:box</span> '(<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#BBBBBB"</span>)
                        <span style=
"color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#BBBBBB"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#F0F0F0"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Org non-standard faces</span>
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-created-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> normal <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#EEE9C3"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#1A1A1A"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FDFCD8"</span>)))
      <span style="color: #008000;">"Face used to display state NEW."</span>)
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-inprogress-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#D9D14A"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#D9D14A"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FCFCDC"</span>)))
      <span style="color: #008000;">"Face used to display state STRT."</span>)
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-waiting-for-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#89C58F"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#89C58F"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#E2FEDE"</span>)))
      <span style="color: #008000;">"Face used to display state WAIT."</span>)
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-someday-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#9EB6D4"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#9EB6D4"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#E0EFFF"</span>)))
      <span style="color: #008000;">"Face used to display state SDAY."</span>)

    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-quote-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#FC5158"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#FC5158"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FED5D7"</span>)))
      <span style="color: #008000;">"Face used to display ."</span>)
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-quoted-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#55BA80"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#55BA80"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#DFFFDF"</span>)))
      <span style="color: #008000;">"Face used to display ."</span>)
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-approved-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#969696"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#969696"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#F2F2EE"</span>)))
      <span style="color: #008000;">"Face used to display ."</span>)
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-expired-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#42B5FF"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#42B5FF"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#D3EEFF"</span>)))
      <span style=
"color: #008000;">"Face used to display state EXPIRED."</span>)
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-rejected-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#42B5FF"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#42B5FF"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#D3EEFF"</span>)))
      <span style=
"color: #008000;">"Face used to display state REJECTED."</span>)

    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-openpo-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#FC5158"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#FC5158"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FED5D7"</span>)))
      <span style=
"color: #008000;">"Face used to display OPEN purchase order."</span>)
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-closedpo-kwd</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#969696"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#969696"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#F2F2EE"</span>)))
      <span style=
"color: #008000;">"Face used to display CLOSED purchase order."</span>))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">block switching entries to DONE if</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">1) there are undone child entries, or</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">2) the parent has an `</span><span style=
"color: #D0372D; font-style: italic;">:ORDERED:</span><span style=
"color: #8D8D84; font-style: italic;">' property and there are prior</span>
  <span style="color: #8D8D84;">;;    </span><span style=
"color: #8D8D84; font-style: italic;">siblings not yet done</span>
  (setq org-enforce-todo-dependencies t)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">5.2.7 don't dim blocked tasks in the agenda display -- agenda optimization</span>
  (setq org-agenda-dim-blocked-tasks nil) <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> not sure about this one</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">block switching the parent to DONE if</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">there are unchecked checkboxes</span>
  (setq org-enforce-todo-checkbox-dependencies t)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-4-3" class="outline-4">
          <h4 id="sec-28-4-3">Progress logging</h4>

          <div class="outline-text-4" id="text-28-4-3">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 5.3 (info "(org)Progress logging")</span>

  (leuven--section <span style=
"color: #036A07;">"5.3 (org)Progress logging"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">5.3.1 insert a CLOSED time stamp each time a </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> entry is marked DONE</span>
  (setq org-log-done nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">5.3.2 the notes will be ordered according to time</span>
  (setq org-log-states-order-reversed nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">5.3.2 insert state change notes and time stamps into a LOGBOOK drawer</span>
  (setq org-log-into-drawer t)          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">should be the default</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">~5.3.2 heading for state change added to entries</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Progress logging"</span>)

    (setcdr (assq 'state org-log-note-headings)
            <span style=
"color: #036A07;">"State %-12S  -&gt;  %-12s %t"</span>)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">"State old -&gt; new + timestamp"</span>
</pre>
            </div>

            <p>Warning! The docstring of <code>org-log-note-headings</code>
            mentions that “in fact, it is <b>not a good idea to change the
            `state’ entry</b>, because agenda log mode depends on the format of
            these entries.”</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-habit"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show habits for future days</span>
    (setq org-habit-show-habits-only-for-today nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use character "heavy check mark" to show completed days on which</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">a task was done</span>
    (setq org-habit-completed-glyph ?\u2714)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use character "heavy quadruple dash vertical" to identify today</span>
    (setq org-habit-today-glyph ?\u250B))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-4-4" class="outline-4">
          <h4 id="sec-28-4-4">Breaking down tasks</h4>

          <div class="outline-text-4" id="text-28-4-4">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 5.5 (info "(org)Breaking down tasks")</span>

  (leuven--section <span style=
"color: #036A07;">"5.5 (org)Breaking down tasks"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically change a </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> entry to DONE when all children are done</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">org-summary-todo</span> (n-done n-not-done)
    <span style=
"color: #008000;">"Switch entry to DONE when all subentries are done, to </span><span style="color: #CC0000; background-color: #FFFF88;">TODO</span><span style="color: #008000;"> otherwise."</span>
    (<span style=
"color: #0000FF;">let</span> (org-log-done org-log-states)  <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">turn off logging</span>
      (org-todo (<span style=
"color: #0000FF;">if</span> (= n-not-done 0) <span style=
"color: #036A07;">"DONE"</span> <span style=
"color: #036A07;">"</span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;">"</span>))))

  (add-hook 'org-after-todo-statistics-hook 'org-summary-todo)
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-5" class="outline-3">
        <h3 id="sec-28-5">Tags</h3>

        <div class="outline-text-3" id="text-28-5">
          <p>Context (place, time or particular resources for doing a task) and
          people are something best implemented with tags.</p>

          <p>By convention, <b>user-defined tags are written in lowercase</b>;
          built-in tags with special meaning are written with all capitals.</p>

          <p><code>org-use-tag-inheritance</code> can be setup to a regular
          expression, for example so that all tags starting with <code>@</code>
          or <code>#</code> will be excluded from inheritance with:</p>
          <pre class="example">
(setq org-use-tag-inheritance "^[^@#]")
</pre>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 6 (info "(org)Tags")</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">column to which tags should be indented in a headline</span>
  (setq org-tags-column -79)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">6.2 list of tags ("contexts") allowed in Org mode files</span>
  (setq org-tag-alist '((<span style=
"color: #006FE0;">:startgroup</span> . nil)
                         (<span style=
"color: #036A07;">"personal"</span>  . ?p)
                         (<span style=
"color: #036A07;">"work"</span>      . ?w)
                        (<span style="color: #006FE0;">:endgroup</span> . nil)
                        (<span style=
"color: #036A07;">"call"</span>        . ?c)
                        (<span style=
"color: #036A07;">"errands"</span>     . ?e)
                        (<span style=
"color: #036A07;">"finance"</span>     . ?f)
                        (<span style=
"color: #036A07;">"mail"</span>        . ?m)

                        (<span style=
"color: #036A07;">"notbillable"</span> . ?B)
                        (<span style=
"color: #036A07;">"now"</span>         . ?N)
                        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">("reading" . ?r)</span>
                        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">("proj" . ?P)</span>

                        (<span style=
"color: #036A07;">"ARCHIVE"</span>     . ?a) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">speed command + action in task list</span>
                        (<span style=
"color: #036A07;">"crypt"</span>       . ?C)
                        (<span style=
"color: #036A07;">"FLAGGED"</span>     . ??)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">faces for specific tags</span>
  (setq org-tag-faces
        '((<span style="color: #036A07;">"refile"</span>
           (<span style="color: #006FE0;">:slant</span> italic
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#A9876E"</span>))     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">:background "#FCEEB3"</span>
          (<span style="color: #036A07;">"personal"</span>
           (<span style="color: #006FE0;">:slant</span> italic
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#5C88D3"</span>))     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">:background "#BBDDFF"</span>
          (<span style="color: #036A07;">"work"</span>
           (<span style="color: #006FE0;">:slant</span> italic
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#699761"</span>))     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">:background "#C1D996"</span>
          (<span style="color: #036A07;">"FLAGGED"</span>
           (<span style="color: #006FE0;">:slant</span> italic
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#C15F4E"</span>))     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">:background "#EDC6C8"</span>
          (<span style="color: #036A07;">"now"</span>
           (<span style="color: #006FE0;">:slant</span> italic
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#000000"</span>))     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">:background "#FFEA80"</span>
          (<span style="color: #036A07;">"notbillable"</span>
           (<span style="color: #006FE0;">:slant</span> italic
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#8774AF"</span>))     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">:background "#DED0EA"</span>
          ))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">6.2 exit fast tag selection after first change (toggle this with `</span><span style="color: #D0372D; font-style: italic;">C-c</span><span style="color: #8D8D84; font-style: italic;">')</span>
  (setq org-fast-tag-selection-single-key t)
</pre>
          </div>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%"><b>Extend the following function to take
              <code>filetags</code> into account</b><br /></td>
            </tr>
          </table>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%"><b>Check whether this function removes tags of
              DIRECT parent</b><br /></td>
            </tr>
          </table>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">remove redundant tags of headlines (from David Maus)</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-remove-redundant-tags</span> ()
    <span style=
"color: #008000;">"Remove redundant tags of headlines in current buffer.</span>
<span style=
"color: #008000;">  A tag is considered redundant if it is local to a headline and inherited by</span>
<span style="color: #008000;">  a parent headline."</span>
    (interactive)
    (<span style="color: #0000FF;">when</span> (eq major-mode 'org-mode)
      (<span style="color: #0000FF;">save-excursion</span>
        (org-map-entries
         (<span style="color: #0000FF;">lambda</span> ()
           (<span style="color: #0000FF;">let</span> ((alltags (split-string
                           (or (org-entry-get (point) <span style=
"color: #036A07;">"ALLTAGS"</span>) <span style="color: #036A07;">""</span>)
                           <span style="color: #036A07;">":"</span>))
                 local inherited tag)
             (<span style="color: #0000FF;">dolist</span> (tag alltags)
               (<span style=
"color: #0000FF;">if</span> (get-text-property 0 'inherited tag)
                   (push tag inherited)
                 (push tag local)))
             (<span style="color: #0000FF;">dolist</span> (tag local)
               (<span style=
"color: #0000FF;">when</span> (member tag inherited)
                 (org-toggle-tag tag 'off)))))
         t nil))))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; always offer completion for all tags of all agenda files</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-complete-tags-always-offer-all-agenda-tags t)</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-6" class="outline-3">
        <h3 id="sec-28-6">Properties and Columns</h3>

        <div class="outline-text-3" id="text-28-6">
          <p>By convention, <b>user-defined properties are capitalized</b>;
          built-in properties with special meaning are written with all
          capitals.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 7 (info "(org)Properties and Columns")</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 7.1 (info "(org)Property syntax")</span>

  (leuven--section <span style=
"color: #036A07;">"7.1 (org)Property syntax"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of property/value pairs that can be inherited by any entry</span>
  (setq org-global-properties
        '((<span style="color: #036A07;">"Effort_ALL"</span> .
           <span style=
"color: #036A07;">"0 0:10 0:30 1:00 2:00 3:00 4:00 5:00 6:00 8:00"</span>
           <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"0d 1d 2d 3d 4d 5d 6d 7d 8d 10d"</span>
           <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"0 1:00 4:00 1d 2d 1w 2w"</span>
           )))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-7" class="outline-3">
        <h3 id="sec-28-7">Dates and Times</h3>

        <div class="outline-text-3" id="text-28-7">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 8 (info "(org)Dates and Times")</span>

  (leuven--section <span style=
"color: #036A07;">"8 (org)Dates and Times"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insinuate appt if Org mode is loaded</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Dates and Times"</span>)

    (try-require 'appt))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-7-1" class="outline-4">
          <h4 id="sec-28-7-1">Creating time stamps</h4>

          <div class="outline-text-4" id="text-28-7-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 8.2 (info "(org)Creating timestamps")</span>

  (leuven--section <span style=
"color: #036A07;">"8.2 (org)Creating time stamps"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">prefer the future for incomplete dates</span>
  (setq org-read-date-prefer-future 'time)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; advise `</span><span style=
"color: #D0372D; font-style: italic;">org-read-date</span><span style=
"color: #8D8D84; font-style: italic;">' to bury the calendar buffer after selecting</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; a date, so it is out of the way</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defadvice org-read-date</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(after leuven-bury-calendar-after-org-read-date</span>
  <span style="color: #8D8D84;">;;          </span><span style=
"color: #8D8D84; font-style: italic;">(&amp;optional with-time to-time from-string prompt</span>
  <span style="color: #8D8D84;">;;          </span><span style=
"color: #8D8D84; font-style: italic;">default-time default-input) protect)</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"Bury the *Calendar* buffer after reading a date."</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(bury-buffer "*Calendar*"))</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(ad-activate 'org-read-date)</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of minutes to round time stamps to</span>
  (setq org-time-stamp-rounding-minutes '(1 1))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-7-2" class="outline-4">
          <h4 id="sec-28-7-2">Deadlines and scheduling</h4>

          <div class="outline-text-4" id="text-28-7-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 8.3 (info "(org)Deadlines and scheduling")</span>

  (leuven--section <span style=
"color: #036A07;">"8.3 (org)Deadlines and scheduling"</span>)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">information to record when the scheduling date is modified</span>
  (setq org-log-reschedule nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">information to record when the deadline date is modified</span>
  (setq org-log-redeadline 'time)
</pre>
            </div>
          </div>

          <div id="outline-container-sec-28-7-2-1" class="outline-5">
            <h5 id="sec-28-7-2-1">Inserting deadline/schedule</h5>

            <div class="outline-text-5" id="text-28-7-2-1">
              <p>Schedule it with <code>C-c C-s</code>:</p>

              <dl class="org-dl">
                <dt>RET</dt>

                <dd>Today.</dd>

                <dt>+1d RET</dt>

                <dd>Tomorrow.</dd>

                <dt>+1w RET</dt>

                <dd>Next week.</dd>

                <dt>+4w RET</dt>

                <dd>Next “month”.</dd>
              </dl>

              <p>Remove scheduling date with <code>C-u C-c C-s</code>.</p>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of days before expiration during which a deadline becomes active</span>
  (setq org-deadline-<span style=
"color: #CC0000; background-color: #FFFF88;">warning</span>-days 7)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">skip deadline pre</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">warning</span><span style="color: #8D8D84; font-style: italic;"> (up to 7 days before the actual deadline)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">when entry is also scheduled</span>
  (setq org-agenda-skip-deadline-pre<span style=
"color: #CC0000; background-color: #FFFF88;">warning</span>-if-scheduled 7)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't show deadlines when the corresponding item is done</span>
  (setq org-agenda-skip-deadline-if-done t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">skip scheduling line if same entry shows because of deadline</span>
  (setq org-agenda-skip-scheduled-if-deadline-is-shown t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't show scheduled items in agenda when they are done</span>
  (setq org-agenda-skip-scheduled-if-done t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">~8.3 don't select item by time stamp or -range if it is DONE</span>
  (setq org-agenda-skip-timestamp-if-done t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; show all days between the first and the last date</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-timeline-show-empty-dates t)</span>
</pre>
              </div>
            </div>
          </div>

          <div id="outline-container-sec-28-7-2-2" class="outline-5">
            <h5 id="sec-28-7-2-2">Repeated tasks</h5>

            <div class="outline-text-5" id="text-28-7-2-2">
              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> state to which a repeater should return the repeating task</span>
  (setq org-todo-repeat-to-state <span style=
"color: #036A07;">"</span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;">"</span>)
</pre>
              </div>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-7-3" class="outline-4">
          <h4 id="sec-28-7-3">Clocking work time</h4>

          <div class="outline-text-4" id="text-28-7-3">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 8.4 (info "(org)Clocking work time")</span>

  (leuven--section <span style=
"color: #036A07;">"8.4 (org)Clocking work time"</span>)

  (global-set-key
    (kbd <span style="color: #036A07;">"C-c C-x C-i"</span>) 'org-clock-in)
  (global-set-key
    (kbd <span style="color: #036A07;">"C-c C-x C-j"</span>) 'org-clock-goto)
  (global-set-key
    (kbd <span style="color: #036A07;">"C-c C-x C-o"</span>) 'org-clock-out)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the time clocking code for Org mode</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(try-require 'org-clock)</span>
  <span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">! needed for trying to automatically re-clock at Emacs startup</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Alternative: resume clocks when opening the first Org file</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-clock"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">8.4 save both the running clock and the entire clock history when Emacs</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">is closed, and resume it next time Emacs is started up</span>
    (setq org-clock-persist t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">8.4 set up hooks for clock persistence</span>
    (org-clock-persistence-insinuate)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">resume clocking task on clock-in if the clock is open</span>
    (setq org-clock-in-resume t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of clock tasks to remember in history: 1-9A-Z</span>
    (setq org-clock-history-length 35)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">8.4.2 include the current clocking task time in clock reports</span>
    (setq org-clock-report-include-clocking-task t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">8.4.2 format string used when creating CLOCKSUM lines and when generating a</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">time duration (avoid showing days)</span>
    (setq org-time-clocksum-format
          '(<span style="color: #006FE0;">:hours</span> <span style=
"color: #036A07;">"%d"</span> <span style=
"color: #006FE0;">:require-hours</span> t <span style=
"color: #006FE0;">:minutes</span> <span style=
"color: #036A07;">":%02d"</span> <span style=
"color: #006FE0;">:require-minutes</span> t))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; 8.4.2 use fractional times</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-time-clocksum-use-fractional t)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">format string for the total time cells</span>
    (setq org-clock-total-time-cell-format <span style=
"color: #036A07;">"%s"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">format string for the file time cells</span>
    (setq org-clock-file-time-cell-format <span style=
"color: #036A07;">"%s"</span>)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-clock-in-interrupted-task</span> ()
      <span style=
"color: #008000;">"Clock back into the task that has been interrupted, if there is one."</span>
      (interactive)
      (<span style=
"color: #0000FF;">if</span> (and (not org-clock-resolving-clocks-due-to-idleness)
               (marker-buffer org-clock-marker)
               (marker-buffer org-clock-interrupted-task))
          (org-with-point-at org-clock-interrupted-task
            (org-clock-in nil))
        (org-clock-out)))

    (global-set-key
      (kbd <span style=
"color: #036A07;">"C-c C-x C-q"</span>) 'leuven-org-clock-in-interrupted-task)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">8.4.3 resolve open clocks if the user is idle more than 120 minutes</span>
    (setq org-clock-idle-time 120)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--org-switch-to-started</span> (kwd)
      <span style="color: #008000;">"Switch task state to STRT.</span>
<span style=
"color: #008000;">    Skip normal headlines and capture tasks."</span>
      (<span style="color: #0000FF;">if</span> (and kwd
               (not (string-equal kwd <span style=
"color: #036A07;">"STRT"</span>))
               (not (and (boundp 'org-capture-mode) org-capture-mode)))
          <span style="color: #036A07;">"STRT"</span>
        nil))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">8.4.3 set task to todo state STRT while clocking it</span>
    (setq org-clock-in-switch-to-state 'leuven--org-switch-to-started)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">clock won't be stopped when the clocked entry is marked DONE</span>
    (setq org-clock-out-when-done nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">time included for the mode line clock is all time clocked into this</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">task today</span>
    (setq org-clock-modeline-total 'today)
    (setq org-clock-modeline-total 'all)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">get an alert (notification) when your planned time is over</span>
    (setq org-clock-sound <span style=
"color: #036A07;">"~/Public/Music/Sounds/alarm.wav"</span>)
    <span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">! Use start-process to have an external program play the sound to</span>
    <span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">! avoid ignored keystrokes until after the sound plays (start-process</span>
    <span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">! "ding" nil "play" "~/Public/Music/Sounds/alarm.wav")</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">remove the clock line when the resulting time is 0:00</span>
    (setq org-clock-out-remove-zero-time-clocks t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; when clocking into a task with a clock entry which has not been</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; closed, resume the clock from that point</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-clock-in-resume t)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ask the user if they wish to clock out before killing Emacs</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--org-query-clock-out</span> ()
      <span style="color: #008000;">"Ask the user before clocking out.</span>
<span style=
"color: #008000;">    This is a useful function for adding to `</span><span style="color: #D0372D;">kill-emacs-query-functions</span><span style="color: #008000;">'."</span>
      (<span style="color: #0000FF;">if</span> (and (<span style=
"color: #0000FF;">featurep</span> '<span style=
"color: #D0372D;">org-clock</span>)
               (funcall 'org-clocking-p)
               (y-or-n-p <span style=
"color: #036A07;">"You are currently clocking time, clock out? "</span>))
          (org-clock-out)
        t))                             <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">only fails on keyboard quit or </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span>

    (add-hook 'kill-emacs-query-functions 'leuven--org-query-clock-out)

    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "org-clock" ends here</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-7-4" class="outline-4">
          <h4 id="sec-28-7-4">Effort estimates</h4>

          <div class="outline-text-4" id="text-28-7-4">
            <p>If you have an <code>Effort</code> property defined, the
            <b>estimated time</b> is also shown in the mode line, against the
            <b>actual time</b> spent (reported through <b>time
            clocking</b>).</p>

            <p>When clocking in, ask for a time estimate if the property is not
            yet defined.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 8.5 (info "(org)Effort estimates")</span>

  (leuven--section <span style=
"color: #036A07;">"8.5 (org)Effort estimates"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add an effort estimate on the fly when clocking in</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--org-ask-effort</span> ()
    <span style=
"color: #008000;">"Ask for an effort estimate when clocking in."</span>
    (<span style=
"color: #0000FF;">unless</span> (org-entry-get (point) <span style=
"color: #036A07;">"Effort"</span>)
      (<span style="color: #0000FF;">let</span> ((effort
             (completing-read
              <span style="color: #036A07;">"Estimated time (H:MM): "</span>
              (org-entry-get-multivalued-property (point) <span style=
"color: #036A07;">"Effort"</span>))))
        (<span style="color: #0000FF;">unless</span> (equal effort <span style=
"color: #036A07;">""</span>)
          (org-set-property <span style=
"color: #036A07;">"Effort"</span> effort)))))

  (add-hook 'org-clock-in-prepare-hook
            'leuven--org-ask-effort)
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-8" class="outline-3">
        <h3 id="sec-28-8">Capture - Refile - Archive</h3>

        <div class="outline-text-3" id="text-28-8"></div>

        <div id="outline-container-sec-28-8-1" class="outline-4">
          <h4 id="sec-28-8-1">Capture</h4>

          <div class="outline-text-4" id="text-28-8-1">
            <p>The ultimate capture tool to <b>quickly add</b> tasks or
            notes.</p>

            <p>Structure:</p>

            <ul class="org-ul">
              <li>Contacts</li>

              <li>Calendar</li>

              <li>Tasks</li>

              <li>Notes</li>

              <li>Journal</li>
            </ul>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 9 (info "(org)Capture - Refile - Archive")</span>

  (leuven--section <span style="color: #036A07;">"9.1 (org)Capture"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">9.1.2 directory with Org files</span>
  (setq org-directory
        (directory-file-name            <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">this function removes the final slash</span>
         (<span style=
"color: #0000FF;">cond</span> ((file-directory-p <span style=
"color: #036A07;">"~/org/"</span>) <span style=
"color: #036A07;">"~/org/"</span>)
               (t <span style="color: #036A07;">"~/"</span>))))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">9.1.2 default target for storing notes</span>
  (setq org-default-notes-file          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">inbox for collecting [default: "~/.notes"]</span>
        (concat org-directory <span style=
"color: #036A07;">"/refile.org"</span>))
</pre>
            </div>

            <p><code>%</code>-escapes:</p>

            <dl class="org-dl">
              <dt>%a</dt>

              <dd>Annotation (<b>link</b>).</dd>

              <dt>%i</dt>

              <dd>Initial content (<b>selected text</b>).</dd>

              <dt>%?</dt>

              <dd>Cursor position.</dd>

              <dt>%^T</dt>

              <dd>Prompt for a date and time.</dd>

              <dt>%^G</dt>

              <dd>Prompt for tags with completion on tags in all agenda
              files.</dd>

              <dt>%t</dt>

              <dd>Time stamp (date only).</dd>

              <dt>%<sup>prompt</sup></dt>

              <dd>Prompt the user for a string.</dd>

              <dt>%[file]</dt>

              <dd>Insert the contents of the file.</dd>

              <dt>%U</dt>

              <dd>Inactive time stamp with date and time.</dd>
            </dl>

            <p>Use <code>:jump-to-captured</code> to tell capture to jump to
            the note after storing it.</p>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%"><b>Look at
                <code>:kill-buffer</code></b><br /></td>
              </tr>
            </table>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">9.1.2 templates for the creation of capture buffers</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">("Receipt"   ?r "** %^{BriefDesc} %U %^g\n%?"   "~/Personal/finances.org")</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">fast note taking in Org mode (the ultimate capture tool)</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-capture"</span>

    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"t"</span> <span style=
"color: #036A07;">"Task"</span> entry
                   (file+headline ,org-default-notes-file <span style=
"color: #036A07;">"Tasks"</span>)
                   <span style="color: #036A07;">"* NEW %^{Task}%?</span>

<span style="color: #036A07;">%i"</span>
                   <span style="color: #006FE0;">:empty-lines</span> 1) t)

    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"T"</span> <span style=
"color: #036A07;">"Task in current file"</span> entry
                   (file+headline
                    (buffer-file-name (org-capture-get <span style=
"color: #006FE0;">:original-buffer</span>))
                    <span style="color: #036A07;">"Tasks"</span>)
                   <span style="color: #036A07;">"* </span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;"> %?</span>
<span style="color: #036A07;">  %U %a %n"</span>
                   <span style="color: #006FE0;">:prepend</span> t) t)

    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"a"</span> <span style=
"color: #036A07;">"Appt"</span> entry
                   (file+headline ,org-default-notes-file <span style=
"color: #036A07;">"Calendar"</span>)
                   <span style="color: #036A07;">"* %^{Appointment}%?</span>
<span style="color: #036A07;">%^T</span>

<span style="color: #036A07;">%i"</span>
                   <span style="color: #006FE0;">:empty-lines</span> 1) t)
                   <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Prompt only for date, not time...</span>
</pre>
            </div>
          </div>

          <div id="outline-container-sec-28-8-1-1" class="outline-5">
            <h5 id="sec-28-8-1-1"><span class="todo TODO">TODO</span> Ask for
            refile location</h5>

            <div class="outline-text-5" id="text-28-8-1-1">
              <p>Find a location for refiling on capture.</p>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"Z"</span> <span style=
"color: #036A07;">"Refile me!"</span> entry
                   (function leuven-find-location)
                   <span style="color: #036A07;">"** </span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;"> Put this in some other file\n\n"</span>
                   <span style="color: #006FE0;">:prepend</span> t) t)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-find-location</span> ()
      <span style=
"color: #008000;">"Find my CollectBox file and some headline in the current buffer."</span>
      (find-file org-default-notes-file)
      (goto-char (point-min))
      (helm-org-headlines)
      (org-forward-heading-same-level 1))
</pre>
              </div>
            </div>
          </div>

          <div id="outline-container-sec-28-8-1-2" class="outline-5">
            <h5 id="sec-28-8-1-2">Email-to-Org</h5>

            <div class="outline-text-5" id="text-28-8-1-2">
              <p>Instantly <b>create tasks</b> and notes <b>from emails</b>,
              with a <b>link</b> back <b>to the emails</b>.</p>

              <p>The following rules will apply to interpret an email to a
              task:</p>

              <dl class="org-dl">
                <dt>Email subject</dt>

                <dd>Task name.</dd>

                <dt>Person in the <code>From:</code> field</dt>

                <dd>Task creator.</dd>

                <dt>Person(s) in the <code>To:</code> field</dt>

                <dd>Task assignee(s).</dd>

                <dt>Email body (or selected region)</dt>

                <dd>Task description / notes.</dd>

                <dt>Email attachment(s)</dt>

                <dd>
                  Task attachment(s).

                  <p>XXX Wouldn’t it be great if files attached to email can be
                  quickly added to the tasks or projects you create?</p>
                </dd>
              </dl>

              <p>Additional parameters can be included via the commands you
              use:</p>

              <dl class="org-dl">
                <dt>Create a TODO Action</dt>

                <dd>Create a new action.</dd>

                <dt>Create a TODO Action Remind 3</dt>

                <dd>Create a new action. Set reminder in 3 days.</dd>

                <dt>Create a TODO Action Due Date 7</dt>

                <dd>Create a new action. Set due date in 7 days.</dd>

                <dt>Create a TODO Action of an existing Project</dt>

                <dd>Attach it to something that we’re already working on.</dd>

                <dt>Create a WAIT Item</dt>

                <dd>Create a new “Waiting For” item, eventually with an
                “Assignee” property.</dd>

                <dt>Create a SDAY Item</dt>

                <dd>Create a new “Someday” item.</dd>

                <dt>Create a Reference Item</dt>

                <dd>Create a new “Reference” item.</dd>
              </dl>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"m"</span> <span style=
"color: #036A07;">"Email processing..."</span>) t)

    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"mt"</span> <span style=
"color: #036A07;">"Create a </span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;"> Action + edit"</span> entry
                   (file+headline ,org-default-notes-file <span style=
"color: #036A07;">"Email"</span>) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">#+FILETAGS: :mail:</span>
                   <span style="color: #036A07;">"* </span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;"> %^{Creating action}%? (from %:fromname)</span>
<span style="color: #036A07;">   %:date-timestamp-inactive</span>

<span style="color: #036A07;">#+begin_verse</span>
<span style="color: #036A07;">%i</span>
<span style="color: #036A07;">#+end_verse</span>

<span style="color: #036A07;">From %a"</span>
                   <span style="color: #006FE0;">:empty-lines</span> 1) t)

    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"mr"</span> <span style=
"color: #036A07;">"Create a </span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;"> Action Remind 3"</span> entry
                   (file+headline ,org-default-notes-file <span style=
"color: #036A07;">"Email"</span>) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">#+FILETAGS: :mail:</span>
                   <span style="color: #036A07;">"* </span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;"> %:subject%? (from %:fromname)</span>
<span style=
"color: #036A07;">   DEADLINE: %(org-insert-time-stamp (org-read-date nil t \"+3d\") nil nil nil nil \" -0d\")</span>
<span style="color: #036A07;">   %:date-timestamp-inactive</span>

<span style="color: #036A07;">#+begin_verse</span>
<span style="color: #036A07;">%i</span>
<span style="color: #036A07;">#+end_verse</span>

<span style="color: #036A07;">From %a"</span>
                   <span style=
"color: #006FE0;">:empty-lines</span> 1 <span style=
"color: #006FE0;">:immediate-finish</span> t) t)
</pre>
              </div>

              <p>The property <code>:immediate-finish</code>, when set,
              immediately files the item without further prompt (skipping
              <code>C-c C-c</code>); very handy for quick storing of
              emails.</p>

              <p>With the clock options, <code>org-capture</code> automatically
              clocks in. When pressing <code>C-c C-c</code>, it clocks out.</p>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"p"</span> <span style=
"color: #036A07;">"Phone call"</span> entry
                   (file+headline ,org-default-notes-file <span style=
"color: #036A07;">"Phone calls"</span>)
                   <span style="color: #036A07;">"* %?"</span>
                   <span style=
"color: #006FE0;">:empty-lines</span> 1 <span style=
"color: #006FE0;">:clock-in</span> t <span style=
"color: #006FE0;">:clock-resume</span> t) t)

    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"i"</span> <span style=
"color: #036A07;">"interruption"</span> entry
                   (file ,org-default-notes-file)
                   <span style="color: #036A07;">"A TEMPLATE HERE"</span>
                   <span style=
"color: #006FE0;">:clock-in</span> t <span style="color: #006FE0;">:clock-resume</span> t) t)
</pre>
              </div>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">thought</span>
    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"n"</span> <span style=
"color: #036A07;">"Note"</span> entry
                   (file+headline ,(concat org-directory <span style=
"color: #036A07;">"/notes.org"</span>) <span style=
"color: #036A07;">"Notes"</span>)
                   <span style="color: #036A07;">"* %^{Thought}%?</span>

<span style="color: #036A07;">%i"</span>
                   <span style="color: #006FE0;">:empty-lines</span> 1) t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">shopping list (stuff to buy)</span>
    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"b"</span> <span style=
"color: #036A07;">"Buy"</span> checkitem
                   (file+headline ,org-default-notes-file <span style=
"color: #036A07;">"Shopping"</span>)) t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add a note to the currently clocked task</span>
    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"c"</span> <span style=
"color: #036A07;">"Clock sibling"</span> entry
                   (clock)
                   <span style="color: #036A07;">"* %^{Title}</span>
<span style="color: #036A07;">  %U</span>
<span style="color: #036A07;">%a</span>

<span style="color: #036A07;">%i"</span>) t)

    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"j"</span> <span style=
"color: #036A07;">"Journal"</span> entry
                   (file+datetree ,(concat org-directory <span style=
"color: #036A07;">"/journal.org"</span>))
                   <span style="color: #036A07;">"* %T %?</span>

<span style="color: #036A07;">  %U</span>

<span style="color: #036A07;">%i</span>

<span style="color: #036A07;">From %a"</span>
                   <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"* %^{Title}\n  :PROPERTIES:\n  :on: %T\n  :END:\n  %?\n  %x"</span>
                   <span style="color: #006FE0;">:empty-lines</span> 1) t)

    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"S"</span> <span style=
"color: #036A07;">"secure"</span> entry
                   (file+datetree+prompt <span style=
"color: #036A07;">"~/org/notes/secure.org.gpg"</span>)
                   <span style=
"color: #036A07;">"* %(format-time-string \"%H:%M\") %^{Entry} %^G</span>
<span style="color: #036A07;">%i%?"</span>) t)
</pre>
              </div>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;;          </span><span style=
"color: #8D8D84; font-style: italic;">("w" "org-protocol" entry</span>
    <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">(file ,org-default-notes-file)</span>
    <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">"* </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Review %c</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">%U"</span>
    <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">:immediate-finish t :clock-in t :clock-resume t)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">("web-clippings" ?w</span>
    <span style="color: #8D8D84;">;;  </span><span style=
"color: #8D8D84; font-style: italic;">"* %^{Title} %^g \n  :PROPERTIES:\n  :date: %^t\n  :link: %^{link}\n  :END:\n\n %x %?"</span>
    <span style="color: #8D8D84;">;;  </span><span style=
"color: #8D8D84; font-style: italic;">"~/org/data.org" "Web Clippings")</span>
</pre>
              </div>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    (add-to-list 'org-capture-templates
                 `(<span style="color: #036A07;">"w"</span> <span style=
"color: #036A07;">"Default template"</span> entry
                   <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">org-protocol-default-template-key</span><span style="color: #8D8D84; font-style: italic;">'</span>
                   (file+headline ,(concat org-directory <span style=
"color: #036A07;">"/capture.org"</span>) <span style=
"color: #036A07;">"Notes"</span>)
                   <span style="color: #036A07;">"* %^{Title}%?</span>
<span style="color: #036A07;">  %u</span>

<span style="color: #036A07;">%i</span>

<span style="color: #036A07;">From %c"</span>
                   <span style=
"color: #006FE0;">:empty-lines</span> 1 <span style=
"color: #006FE0;">:immediate-finish</span> t) t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default `</span><span style=
"color: #D0372D; font-style: italic;">org-capture-templates</span><span style=
"color: #8D8D84; font-style: italic;">' key to use</span>
    (setq org-protocol-default-template-key <span style=
"color: #036A07;">"w"</span>)
</pre>
              </div>
            </div>
          </div>

          <div id="outline-container-sec-28-8-1-3" class="outline-5">
            <h5 id="sec-28-8-1-3">Capture from command line</h5>

            <div class="outline-text-5" id="text-28-8-1-3">
              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">make-capture-frame</span> ()
      <span style=
"color: #008000;">"Create a new frame and run `</span><span style=
"color: #D0372D;">org-capture</span><span style="color: #008000;">'."</span>
      (interactive)
      (make-frame '((name . <span style="color: #036A07;">"capture"</span>)
                    (width . 80)
                    (height . 10)))
      (select-frame-by-name <span style="color: #036A07;">"capture"</span>)
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; setup buffer to wrap</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq truncate-lines nil</span>
      <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">word-wrap t)</span>
      (org-capture))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make the frame contain a single window (by default, `</span><span style="color: #D0372D; font-style: italic;">org-capture</span><span style="color: #8D8D84; font-style: italic;">'</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">splits the window)</span>
    (add-hook 'org-capture-mode-hook 'delete-other-windows)

    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">org-capture-finalize</span>
      (after leuven-delete-capture-finalize-frame activate)
      <span style=
"color: #008000;">"Advise org-capture-finalize to close the frame (if it is the capture frame)."</span>
      (<span style="color: #0000FF;">if</span> (equal <span style=
"color: #036A07;">"capture"</span> (frame-parameter nil 'name))
          (delete-frame)))

    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">org-capture-destroy</span>      <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>
      (after leuven-delete-capture-destroy-frame activate)
      <span style=
"color: #008000;">"Advise capture-destroy to close the frame (if it is the capture frame)."</span>
      (<span style="color: #0000FF;">if</span> (equal <span style=
"color: #036A07;">"capture"</span> (frame-parameter nil 'name))
          (delete-frame)))

    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "org-capture" ends here</span>
</pre>
              </div>

              <div class="org-src-container">
                <pre class="src src-sh">
emacsclient -n -e <span style="color: #036A07;">'(make-capture-frame)'</span>
</pre>
              </div>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-8-2" class="outline-4">
          <h4 id="sec-28-8-2">Attachments</h4>

          <div class="outline-text-4" id="text-28-8-2">
            <p>Use the following for conveniently accessing your data.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">bug when C-c C-l</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; 4.6 shortcut links</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-to-list 'org-link-abbrev-alist '(("att" . org-attach-expand-link)))</span>
</pre>
            </div>

            <p>Instead of modifying <code>org-link-abbrev-alist</code>, you can
            also use</p>
            <pre class="example">
#+LINK: att %(org-attach-expand-link)
</pre>

            <p>in your Org buffers.</p>
          </div>
        </div>

        <div id="outline-container-sec-28-8-3" class="outline-4">
          <h4 id="sec-28-8-3">Protocols for external access</h4>

          <div class="outline-text-4" id="text-28-8-3">
            <p>Open Org source (and Capture) from Firefox.</p>

            <p>Have a look at <a href="http://vimeo.com/5662410">Store links in
            Emacs Org using org-protocol.el</a>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (leuven--section <span style="color: #036A07;">"9.4 (org)Protocols"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">9.4 capture from Firefox (to store links and text)</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-protocol"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">map online URL to an existing working file</span>
    (add-to-list 'org-protocol-project-alist
                 '(<span style=
"color: #036A07;">"Worg at http://orgmode.org/worg/"</span>
                   <span style=
"color: #006FE0;">:online-suffix</span> <span style=
"color: #036A07;">".html"</span>
                   <span style=
"color: #006FE0;">:working-suffix</span> <span style=
"color: #036A07;">".org"</span>
                   <span style="color: #006FE0;">:base-url</span> <span style=
"color: #036A07;">"http://orgmode.org/worg/"</span>
                   <span style=
"color: #006FE0;">:working-directory</span> <span style=
"color: #036A07;">"~/Public/Repositories/worg/"</span>) t))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-8-4" class="outline-4">
          <h4 id="sec-28-8-4">Refile and copy</h4>

          <div class="outline-text-4" id="text-28-8-4">
            <p>Once a date has been scheduled, move the task to the appropriate
            category, by using the refile note command <code>C-c C-w</code>.
            This lets me select (with completion) the header under which the
            entry will be placed.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Refile"</span>)

    (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-org-refile-extra-files</span>
      (<span style="color: #0000FF;">if</span> (file-exists-p <span style=
"color: #036A07;">"~/org/notes/"</span>)
          (directory-files <span style=
"color: #036A07;">"~/org/notes/"</span> t <span style=
"color: #036A07;">"^[</span><span style="color: #036A07;">^</span><span style=
"color: #036A07;">\\.#].*\\.</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">txt</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">org</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">$"</span>)
        nil)
      <span style=
"color: #008000;">"List of extra files to be used as targets for refile commands."</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">9.5 any headline with level &lt;= 3 is a target</span>
    (setq org-refile-targets
          `((nil
             <span style=
"color: #006FE0;">:maxlevel</span> . 3)             <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">current file</span>
            (,(append org-agenda-files leuven-org-refile-extra-files)
             <span style="color: #006FE0;">:maxlevel</span> . 3)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">cache refile targets to speed up the process</span>
    (setq org-refile-use-cache t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">9.5 provide refile targets as paths, including the file name</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(without directory) as level 1 of the path</span>
    (setq org-refile-use-outline-path 'file)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">9.5 allow to create new nodes (must be confirmed by the user) as</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">refile targets</span>
    (setq org-refile-allow-creating-parent-nodes 'confirm)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">refile only within the current buffer</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-refile-within-current-buffer</span> ()
      <span style=
"color: #008000;">"Move the entry at point to another heading in the current buffer."</span>
      (interactive)
      (<span style=
"color: #0000FF;">let</span> ((org-refile-targets '((nil <span style=
"color: #006FE0;">:maxlevel</span> . 4))))
        (org-refile)))
    <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> Add a smart key binding</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">exclude DONE state tasks from refile targets</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">bh/verify-refile-target</span> ()
      <span style="color: #008000;">"Exclude </span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #008000;"> keywords with a DONE state from refile targets."</span>
      (not (member (nth 2 (org-heading-components)) org-done-keywords)))

    (setq org-refile-target-verify-function 'bh/verify-refile-target)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-8-5" class="outline-4">
          <h4 id="sec-28-8-5">Archiving</h4>

          <div class="outline-text-4" id="text-28-8-5">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    (leuven--section <span style="color: #036A07;">"9.6 (org)Archiving"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">9.6.1 subtrees should be archived in the current file</span>
    (setq org-archive-location <span style=
"color: #036A07;">"::* Archive"</span>)

    )
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-9" class="outline-3">
        <h3 id="sec-28-9">Agenda Views</h3>

        <div class="outline-text-3" id="text-28-9">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (leuven--section <span style="color: #036A07;">"10 (org)Agenda Views"</span>)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 10 (info "(org)Agenda Views")</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-agenda"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">multiple same-day time stamps in entry make multiple agenda lines</span>
    (setq org-agenda-skip-additional-timestamps-same-entry nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show outline path in echo area after line motion (though, may bring</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">some slowness)</span>
    (setq org-agenda-show-outline-path t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.0 restore the window configuration when exiting the agenda</span>
    (setq org-agenda-restore-windows-after-quit t)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; speed up agenda by avoiding to update some text properties</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-agenda-ignore-drawer-properties '(effort category)) ; org.el</span>
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-9-1" class="outline-4">
          <h4 id="sec-28-9-1">Agenda files</h4>

          <div class="outline-text-4" id="text-28-9-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.1 (info "(org)Agenda files")</span>

    (leuven--section <span style=
"color: #036A07;">"10.1 (org)Agenda files"</span>)

    (<span style="color: #0000FF;">when</span> (boundp 'org-agenda-files)
      (message <span style=
"color: #036A07;">"(Info) Found %s entries in `</span><span style=
"color: #D0372D;">org-agenda-files</span><span style=
"color: #036A07;">'"</span>
               (length org-agenda-files))
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(sit-for 0.5)</span>
      )
</pre>
            </div>

            <p>Avoid any possibility of getting a customized version of
            <code>org-agenda-files</code> added at the end of your
            <code>.emacs</code> file.</p>
            <pre class="example">
(add-hook 'org-mode-hook
          (lambda ()
            (org-defkey org-mode-map
                        (kbd "C-c [") 'undefined)
            (org-defkey org-mode-map
                        (kbd "C-c ]") 'undefined)))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-9-2" class="outline-4">
          <h4 id="sec-28-9-2">The agenda dispatcher</h4>

          <div class="outline-text-4" id="text-28-9-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.2 (info "(org)Agenda dispatcher")</span>

    (leuven--section <span style=
"color: #036A07;">"10.2 (org)Agenda dispatcher"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable sticky agenda: `q' key will bury agenda buffers (instead of</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">killing)</span>
    (setq org-agenda-sticky t)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-9-3" class="outline-4">
          <h4 id="sec-28-9-3">The Built-in agenda views</h4>

          <div class="outline-text-4" id="text-28-9-3">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.3 The (info "(org)Built-in agenda views")</span>

    (leuven--section <span style=
"color: #036A07;">"10.3 (org)Built-in agenda views"</span>)
</pre>
            </div>

            <p>Press <code>C-c a a</code> to jump you to this week’s task page
            from anywhere.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default duration for appointments that only have a starting time</span>
    (setq org-agenda-default-appointment-duration nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; duration of an appointment will add to day effort</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-agenda-columns-add-appointments-to-effort-sum t)</span>
</pre>
            </div>

            <p><code>C-c a t</code> should show <b>all</b> the TODO items…
            but…</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show dated entries in the global `</span><span style="color: #D0372D; font-style: italic;">todo</span><span style="color: #8D8D84; font-style: italic;">' list</span>
    (setq org-agenda-todo-ignore-with-date nil) <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">!! tricky setting</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show entries with a time stamp in the global `</span><span style="color: #D0372D; font-style: italic;">todo</span><span style="color: #8D8D84; font-style: italic;">' list</span>
    (setq org-agenda-todo-ignore-timestamp nil)
</pre>
            </div>

            <p>Don’t tell me about stuff that isn’t due yet: tasks scheduled in
            the future should no longer show up in global todo or tags searches
            until that date arrives – at which point it will be in all
            lists.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.3.2 don't show scheduled entries in the global `</span><span style="color: #D0372D; font-style: italic;">todo</span><span style="color: #8D8D84; font-style: italic;">' list</span>
    (setq org-agenda-todo-ignore-scheduled 'future) <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">!! tricky setting</span>
    (setq org-agenda-todo-ignore-scheduled nil)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.3.2 don't show entries scheduled in the future in the global</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">todo</span><span style=
"color: #8D8D84; font-style: italic;">' list (until they are within the </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">warning</span><span style="color: #8D8D84; font-style: italic;"> period)</span>
    (setq org-agenda-todo-ignore-deadlines 'near) <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">!! tricky setting</span>
    (setq org-agenda-todo-ignore-deadlines nil)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.3.2 check also the sublevels of a </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> entry for </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> entries,</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">resulting in potentially much longer `</span><span style="color: #D0372D; font-style: italic;">todo</span><span style="color: #8D8D84; font-style: italic;">' lists</span>
    (setq org-agenda-todo-list-sublevels t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.3.3 honor `</span><span style=
"color: #D0372D; font-style: italic;">todo</span><span style=
"color: #8D8D84; font-style: italic;">' list `</span><span style=
"color: #D0372D; font-style: italic;">org-agenda-todo-ignore...</span><span style="color: #8D8D84; font-style: italic;">' options also</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">in the `</span><span style=
"color: #D0372D; font-style: italic;">tags-todo</span><span style=
"color: #8D8D84; font-style: italic;">' list</span>
    (setq org-agenda-tags-todo-honor-ignore-options t)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; highlight current line (may bring some slowness)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'org-agenda-mode-hook 'hl-line-mode)</span>
</pre>
            </div>
          </div>

          <div id="outline-container-sec-28-9-3-1" class="outline-5">
            <h5 id="sec-28-9-3-1">Advanced Search</h5>

            <div class="outline-text-5" id="text-28-9-3-1">
              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.3.5 list of extra files to be searched by text search commands</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(C-c a s)</span>
    (setq org-agenda-text-search-extra-files nil) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">org.el</span>

    (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-org-search-extra-files</span> nil
      <span style=
"color: #008000;">"List of extra files to be searched by custom search commands (`R s' and `R S')."</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn on individual word search (for Google addicts)</span>
    (setq org-agenda-search-view-always-boolean t
          org-agenda-search-view-search-words-only t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">match part of a word</span>
    (setq org-agenda-search-view-force-full-words nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't search headline for a time-of-day</span>
    (setq org-agenda-search-headline-for-time nil)
</pre>
              </div>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.3.6 how to identify stuck projects</span>
    (setq org-stuck-projects
          '(<span style=
"color: #036A07;">"+LEVEL=2/-DONE"</span>            <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">identify a project</span>
            (<span style="color: #036A07;">"</span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;">"</span> <span style=
"color: #036A07;">"STRT"</span>)             <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> keywords</span>
            nil <span style=
"color: #036A07;">""</span>))                    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">tags, regexp</span>
</pre>
              </div>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-9-4" class="outline-4">
          <h4 id="sec-28-9-4">Presentation and sorting</h4>

          <div class="outline-text-4" id="text-28-9-4">
            <p>See <a href=
            "http://www.dgtale.ch/index.php?option=com_content&amp;view=article&amp;id=52&amp;Itemid=61">
            http://www.dgtale.ch/index.php?option=com_content&amp;view=article&amp;id=52&amp;Itemid=61</a></p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.4 (info "(org)Presentation and sorting")</span>

    (leuven--section <span style=
"color: #036A07;">"10.4 (org)Presentation and sorting"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.4 format specifications for the prefix of items in the agenda views</span>
    (setq org-agenda-prefix-format
          '((agenda   . <span style=
"color: #036A07;">" %-11s%i %?-12t"</span>) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">agenda</span>
            (timeline . <span style=
"color: #036A07;">" % s"</span>)         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">timeline</span>
            (todo     . <span style=
"color: #036A07;">" %i %-12:c"</span>)   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">todo, alltodo</span>
            (tags     . <span style=
"color: #036A07;">" %i %-12:c"</span>)   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">tags, tags-todo, stuck</span>
            (search   . <span style=
"color: #036A07;">" %i %-12:c"</span>))) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">search</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">text preceding scheduled items in the agenda view</span>
    (setq org-agenda-scheduled-leaders
          '(<span style="color: #036A07;">"Scheduled  "</span>
            <span style="color: #036A07;">"           "</span>))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">text preceding item pulled into the agenda by inactive time stamps</span>
    (setq org-agenda-inactive-leader <span style="color: #036A07;">"["</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">text preceding deadline items in the agenda view</span>
    (setq org-agenda-deadline-leaders
          '(<span style="color: #036A07;">"Deadline   "</span>
            <span style=
"color: #036A07;">"In %d d"</span>                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">or "%d d left"</span>
            <span style="color: #036A07;">"%d d ago"</span>))

    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "org-agenda" ends here</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-faces"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">faces for showing deadlines in the agenda</span>
    (setq org-agenda-deadline-faces
          '((1.0001 . leuven-org-deadline-overdue)
            (0.9999 . leuven-org-deadline-today)
            (0.8571 . leuven-org-deadline-tomorrow) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">= 6/7, see `</span><span style=
"color: #D0372D; font-style: italic;">org-deadline-</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">warning</span><span style="color: #D0372D; font-style: italic;">-days</span><span style="color: #8D8D84; font-style: italic;">'</span>
            (0.0000 . leuven-org-deadline-future)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">see http://www.dgtale.ch/index.php?option=com_content&amp;view=article&amp;id=52&amp;Itemid=61</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Org non-standard faces</span>
    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-deadline-overdue</span>
      '((t (<span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#F22659"</span>)))
      <span style=
"color: #008000;">"Face used to highlight tasks whose due date is in the past."</span>)

    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-deadline-today</span>
      '((t (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#4F4A3D"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FFFFCC"</span>)))
      <span style=
"color: #008000;">"Face used to highlight tasks whose due date is today."</span>)

    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-deadline-tomorrow</span>
      '((t (<span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#34AD00"</span>)))
      <span style=
"color: #008000;">"Face used to highlight tasks whose due date is tomorrow."</span>)

    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">leuven-org-deadline-future</span>
      '((t (<span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#34AD00"</span>)))
      <span style=
"color: #008000;">"Face used to highlight tasks whose due date is for later."</span>))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.4 column to shift tags to (in agenda items)</span>
  (setq org-agenda-tags-column -132)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-agenda"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">type "(" in agenda and todo buffers to show category name and task</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">length for each task</span>
    (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven--org-agenda-show-tasks-details</span> nil)
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-agenda-toggle-tasks-details</span> ()
      <span style=
"color: #008000;">"Hide/show tasks details (category and time estimate) in agenda views."</span>
      (interactive)
      (<span style=
"color: #0000FF;">if</span> leuven--org-agenda-show-tasks-details
          (<span style="color: #0000FF;">progn</span>
            (setq leuven--org-agenda-show-tasks-details nil)
            (setq org-agenda-prefix-format
                  '((agenda    . <span style=
"color: #036A07;">" %-11s%i %?-12t"</span>)
                    (timeline  . <span style="color: #036A07;">" % s"</span>)
                    (todo      . <span style="color: #036A07;">" "</span>)
                    (search    . <span style="color: #036A07;">" "</span>)
                    (tags      . <span style="color: #036A07;">" "</span>))))
        (setq leuven--org-agenda-show-tasks-details t)
        (setq org-agenda-prefix-format
              '((agenda   . <span style=
"color: #036A07;">" %-11s%i %-12:c%?-12t%7e "</span>)
                (timeline . <span style="color: #036A07;">" % s"</span>)
                (todo     . <span style="color: #036A07;">" %i %-12:c"</span>)
                (search   . <span style="color: #036A07;">" %i %-12:c"</span>)
                (tags     . <span style=
"color: #036A07;">" %i %-12:c"</span>))))
      (org-agenda-redo))

    (define-key org-agenda-mode-map
      (kbd <span style=
"color: #036A07;">"("</span>) 'leuven-org-agenda-toggle-tasks-details))
</pre>
            </div>

            <p>Show the time grid in the daily agenda but not in the weekly
            agenda, except for today’s date:</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.4.2 settings for time grid for agenda display</span>
  (setq org-agenda-time-grid '((daily remove-match)
                               <span style="color: #036A07;">""</span>
                               (0800 1000 1200 1400 1600 1800 2000)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">string for the current time marker in the agenda</span>
  (setq org-agenda-current-time-string <span style=
"color: #036A07;">"Right now"</span>)
</pre>
            </div>

            <p><code>time-up</code> will only be applied to those items have a
            time stamp for the day in question, so that other sorting
            parameters will not be outranked by <code>time-up</code> for the
            rest of the entries.</p>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%">
                  <b>refile.org should come first</b><br />

                  <p>Current workaround: added <code>#+CATEGORY: @refile</code>
                  at the end of that file (the <code>@</code> symbol is
                  alphabetically before the letters)</p>
                </td>
              </tr>
            </table>

            <p>Agenda view: put related tasks together, then by priority.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.4.3 sorting structure for the agenda items of a single day</span>
  (setq org-agenda-sorting-strategy   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">custom value</span>
        '((agenda time-up category-up priority-down effort-down)
          (todo category-up priority-down effort-down)
          (tags category-up priority-down effort-down)
          (search category-up)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-sort-agenda-notime-is-late nil)</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show agenda in the current window, keeping all other windows</span>
  (setq org-agenda-window-setup 'current-window)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-9-5" class="outline-4">
          <h4 id="sec-28-9-5">Agenda commands</h4>

          <div class="outline-text-4" id="text-28-9-5">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.5 (info "(org)Agenda commands")</span>

  (leuven--section <span style=
"color: #036A07;">"10.5 (org)Agenda commands"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">get a compact view during follow mode in the agenda</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--compact-follow</span> ()
    <span style=
"color: #008000;">"Make the view compact, then show the necessary minimum."</span>
    (<span style="color: #0000FF;">ignore-</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #0000FF;">s</span>
      (<span style="color: #0000FF;">save-excursion</span>
        (<span style="color: #0000FF;">while</span> (org-up-heading-safe))
        (hide-subtree)))
    (<span style="color: #0000FF;">let</span> ((org-show-siblings nil)
          (org-show-hierarchy-above t))
      (org-reveal))
    (<span style="color: #0000FF;">save-excursion</span>
      (org-back-to-heading t)
      (show-children)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> When this is enabled, clicking on a clock line from `v c'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(log check) does not jump to the right line</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'org-agenda-after-show-hook 'leuven--compact-follow)</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.5 number of days to include in overview display</span>
  (setq org-agenda-span 'day)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">always start the overview on the current day</span>
  (setq org-agenda-start-on-weekday nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">format string for displaying dates in the daily/weekly agenda</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">and in the timeline</span>
  (setq org-agenda-format-date
        (concat <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"\n"</span>
                <span style="color: #036A07;">"%Y-%m-%d"</span> <span style=
"color: #036A07;">" %a "</span>
                (make-string (1- (window-width)) (string-to-char <span style=
"color: #036A07;">"_"</span>))))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.5 only show clocked entries in agenda log mode (no closed</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">entries, no state changes)</span>
  (setq org-agenda-log-mode-items '(clock))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.5 parameters for the clocktable in clockreport mode</span>
  (setq org-agenda-clockreport-parameter-plist
        '(<span style="color: #006FE0;">:link</span> nil <span style=
"color: #006FE0;">:maxlevel</span> 3 <span style=
"color: #006FE0;">:fileskip0</span> t))
  (setq org-agenda-clockreport-parameter-plist
        '(<span style="color: #006FE0;">:link</span> t <span style=
"color: #006FE0;">:maxlevel</span> 3 <span style=
"color: #006FE0;">:fileskip0</span> t))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.5 definition of what constitutes a clocking problem (overlapping</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">clock entries, clocking gaps)</span>
  (setq org-agenda-clock-consistency-checks
        '(<span style="color: #006FE0;">:max-duration</span> <span style=
"color: #036A07;">"10:00"</span>
          <span style="color: #006FE0;">:min-duration</span> 0
          <span style="color: #006FE0;">:max-gap</span> <span style=
"color: #036A07;">"0:00"</span>
          <span style="color: #006FE0;">:gap-ok-around</span> (<span style=
"color: #036A07;">"4:00"</span>)
          <span style="color: #006FE0;">:default-face</span>
          ((<span style="color: #006FE0;">:weight</span> bold
            <span style="color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#AAEE77"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"black"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#BFFA9E"</span>))
          <span style="color: #006FE0;">:gap-face</span>
          ((<span style="color: #006FE0;">:weight</span> bold
            <span style="color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#BBDDFF"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"black"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#D0EDFF"</span>))))
</pre>
            </div>

            <p>If you press <code>E</code>, it will <b>show</b> the <b>first
            notes</b> about the tasks.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.5 text prepended to the entry text in agenda buffers</span>
  (setq org-agenda-entry-text-leaders <span style=
"color: #036A07;">"               │ "</span>)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.5 file to which to add new entries with the `i' key in agenda and</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">calendar (org.el)</span>
  (setq org-agenda-diary-file <span style=
"color: #036A07;">"~/org/diary.org"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.5? keep filters from one agenda view to the next</span>
  (setq org-agenda-persistent-filter t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">faces for specific Priorities (#A, #B and #C)</span>
  (setq org-priority-faces
        '((?A . (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#F92F50"</span>))
          (?B . (<span style="color: #006FE0;">:weight</span> bold <span style=
"color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#FBAA44"</span>))
          (?C . (<span style=
"color: #006FE0;">:slant</span> italic <span style="color: #006FE0;">:foreground</span> <span style="color: #036A07;">"#90ABD6"</span>))))
</pre>
            </div>

            <p>Contextual auto-exclusion for tags in the Agenda view. For
            example, I use the following tags for TODOs:</p>

            <dl class="org-dl">
              <dt>Phone</dt>

              <dd>Needs a phone.</dd>

              <dt>Errands</dt>

              <dd>Done in town.</dd>

              <dt>Home</dt>

              <dd>Done at home.</dd>
            </dl>

            <p>Now, it’s quite easy for my computer to figure out which of
            these are possible, based on my location:</p>

            <dl class="org-dl">
              <dt>Phone</dt>

              <dd>Am I outside of normal calling hours?</dd>

              <dt>Errands</dt>

              <dd>Am I outside of business hours?</dd>

              <dt>Home</dt>

              <dd>Does my IP address begin with 192.168?</dd>
            </dl>

            <p>I can now define the function
            <code>leuven--org-auto-exclude-function</code> to auto-exclude
            based on this type of context information.</p>

            <p>All I have to do is type <code>/ &lt;RET&gt;</code> in the
            agenda view now, and it excludes based on my machine’s current
            temporal and physical context.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.5 Commands in the agenda buffer</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--weekday-p</span> ()
    <span style=
"color: #008000;">"Return t if current day is between Monday and Friday."</span>
    (<span style="color: #0000FF;">let</span> ((dow (nth 6 (decode-time))))
      (and (&gt; dow 0)
           (&lt; dow 6))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--working-p</span> ()
    <span style=
"color: #008000;">"Return t if current time is inside normal working hours.</span>
<span style="color: #008000;">  Currently: 08:30-12:30 and 13:30-17:30."</span>
    (<span style="color: #0000FF;">let*</span> ((time (decode-time))
           (hour (nth 2 time))
           (mins (nth 1 time)))
      (and (leuven--weekday-p)
           (or (or (and (= hour 8) (&gt;= mins 30))
                   (and (&lt; 8 hour) (&lt; hour 12))
                   (and (= hour 12) (&lt;= mins 30)))
               (or (and (= hour 13) (&gt;= mins 30))
                   (and (&lt; 13 hour) (&lt; hour 17))
                   (and (= hour 17) (&lt;= mins 30)))))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--calling-hours-p</span> ()
    <span style=
"color: #008000;">"Return t if current time is inside normal calling hours.</span>
<span style="color: #008000;">  Currently: 08:00-21:59."</span>
    (<span style="color: #0000FF;">let*</span> ((hour (nth 2 (decode-time))))
      (and (&lt;= 8 hour) (&lt;= hour 21))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--org-auto-exclude-function</span> (tag)
    (and (<span style="color: #0000FF;">cond</span>
          ((string= tag <span style="color: #036A07;">"personal"</span>)
           (<span style="color: #0000FF;">with-temp-buffer</span>
             (call-process <span style=
"color: #036A07;">"/sbin/ifconfig"</span> nil t nil <span style=
"color: #036A07;">"en0"</span> <span style="color: #036A07;">"inet"</span>)
             (goto-char (point-min))
             (not (re-search-forward <span style=
"color: #036A07;">"inet 192\\.168\\.9\\."</span> nil t))))
          ((or (string= tag <span style="color: #036A07;">"errands"</span>)
               (string= tag <span style="color: #036A07;">"call"</span>))
           (<span style=
"color: #0000FF;">let</span> ((hour (nth 2 (decode-time))))
             (or (&lt; hour 8) (&gt; hour 21)))))
         (concat <span style="color: #036A07;">"-"</span> tag)))

  <span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">! ensure that `</span><span style=
"color: #D0372D; font-style: italic;">:refile:</span><span style=
"color: #8D8D84; font-style: italic;">' tags never will be excluded!</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--org-auto-exclude-function</span> (tag)
    (and (<span style="color: #0000FF;">cond</span>
          ((string= tag <span style="color: #036A07;">"personal"</span>)
           (leuven--working-p))
          ((string= tag <span style="color: #036A07;">"work"</span>)
           (not (leuven--working-p)))
          ((or (string= tag <span style="color: #036A07;">"errands"</span>)
               (string= tag <span style="color: #036A07;">"call"</span>))
           (not (leuven--calling-hours-p))))
         (concat <span style="color: #036A07;">"-"</span> tag)))

  (setq org-agenda-auto-exclude-function 'leuven--org-auto-exclude-function)
</pre>
            </div>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%">
                  <b>We should ensure that appointments don’t disappear when
                  filtering late at nite</b><br />

                  <ul class="org-ul">
                    <li>Look at appointments tagged <code>errands</code></li>

                    <li>Filter at 23:00 with <code>/ &lt;RET&gt;</code></li>

                    <li>Appointments such as “going to the doctor” will be
                    removed from the agenda view…</li>
                  </ul>
                </td>
              </tr>
            </table>
          </div>
        </div>

        <div id="outline-container-sec-28-9-6" class="outline-4">
          <h4 id="sec-28-9-6">Custom agenda views</h4>

          <div class="outline-text-4" id="text-28-9-6">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make the block agenda more compact (no agenda span name, no week</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number, no separator line)</span>
  (setq org-agenda-compact-blocks t)
  (setq org-agenda-compact-blocks nil)

  (setq org-agenda-block-separator
        #(<span style=
"color: #036A07;">"____________________________________________________________________________________________________________________________________"</span>
          0 132 (face (<span style=
"color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#E5E5E5"</span>))))
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(make-string 132 (string-to-char "_"))</span>
</pre>
            </div>

            <p>Links to common agenda views:</p>

            <ul class="org-ul">
              <li><a href="(org-agenda%20nil">(org-agenda nil "a")</a></li>

              <li><a href="(org-agenda%20nil">Show Waiting Tasks</a></li>

              <li><a href="(org-agenda%20nil">Show Projects</a></li>
            </ul>

            <p>You can as well use your agenda and use <code>/</code> to limit
            the view to what you want (<code>C-c a a / TAG</code>).</p>

            <p>Commands:</p>

            <ul class="org-ul">
              <li><a href="ls%20-l">ls -l</a></li>

              <li><a href="pwd">pwd</a></li>
            </ul>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.6 (info "(org)Custom agenda views")</span>

  (leuven--section <span style=
"color: #036A07;">"10.6 (org)Custom agenda views"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-agenda"</span>
    (<span style=
"color: #0000FF;">let</span> ((leuven-org-agenda-views <span style=
"color: #036A07;">"~/src/emacs-leuven/org-custom-agenda-views.el"</span>))
      (<span style=
"color: #0000FF;">when</span> (file-exists-p leuven-org-agenda-views)
        (load-file leuven-org-agenda-views)))) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "org-agenda" ends here</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-9-7" class="outline-4">
          <h4 id="sec-28-9-7">Display all active tasks from the current
          directory</h4>

          <div class="outline-text-4" id="text-28-9-7">
            <p>The function <code>leuven-org-todo-list-current-dir</code> will
            display your tasks from the current directory (including from local
            files <code>TODO.org</code> and <code>BUGS.org</code>, for
            example).</p>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%"><b>Add recursive option to show all tasks from
                subdir</b><br /></td>
              </tr>
            </table>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-todo-list-current-dir</span> ()
    <span style=
"color: #008000;">"Produce a view from all Org files in the current directory."</span>
    (interactive)
    (<span style="color: #0000FF;">let*</span> ((fname (buffer-file-name))
           (dname (<span style="color: #0000FF;">if</span> fname
                      (<span style=
"color: #0000FF;">if</span> (file-directory-p fname)
                          fname
                        (file-name-directory fname))
                    default-directory))
           (org-agenda-files (directory-files dname t <span style=
"color: #036A07;">"\\.</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">org</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">txt</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">$"</span>))
           (org-agenda-sorting-strategy '(todo-state-up priority-down))
           (org-agenda-overriding-header
            (format <span style="color: #036A07;">"List of </span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #036A07;"> items restricted to directory\n%s"</span> dname))
           (org-agenda-sticky nil))
      (message <span style=
"color: #036A07;">"%s..."</span> org-agenda-overriding-header)
      (org-todo-list)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> list" without asking for a directory</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;C-f3&gt;"</span>) 'leuven-org-todo-list-current-dir)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-9-8" class="outline-4">
          <h4 id="sec-28-9-8">Exporting Agenda Views</h4>

          <div class="outline-text-4" id="text-28-9-8">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.7 (info "(org)Exporting Agenda Views")</span>

  (leuven--section <span style=
"color: #036A07;">"10.7 (org)Exporting Agenda Views"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.7 alist of variable/value pairs that should be active during</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">agenda export</span>
  (setq org-agenda-exporter-settings
        '((ps-number-of-columns 1)      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">2?</span>
          (ps-landscape-mode t)
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(org-agenda-add-entry-text-maxlines 5)</span>
          (htmlize-output-type 'css)))
</pre>
            </div>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%"><b>htmlize-output-type is duplicated lots of
                times!</b><br /></td>
              </tr>
            </table>
          </div>
        </div>

        <div id="outline-container-sec-28-9-9" class="outline-4">
          <h4 id="sec-28-9-9">Agenda column view</h4>

          <div class="outline-text-4" id="text-28-9-9">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 10.8 (info "(org)Agenda column view")</span>

  (leuven--section <span style=
"color: #036A07;">"10.8 (org)Agenda column view"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.8 default column format, if no other format has been defined</span>
  (setq org-columns-default-format
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"%65ITEM(Task) %DEADLINE(Due Date) %PRIORITY %6CLOCKSUM(Spent) %6Effort(Estim.){:}")</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"%1BLOCKED %4</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> %CATEGORY %5Effort{:} %50ITEM %20TAGS %21ALLTAGS")</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"%65ITEM(Task) %4</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> %PRIORITY %6Effort(Estim.) %14SCHEDULED %14DEADLINE(Due Date)")</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"%65ITEM(Task) %4</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> %PRIORITY %20TAGS %6Effort(Estim.) %14SCHEDULED %14DEADLINE(Due Date)")</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"%40ITEM(Task) %17Effort(Estimated Effort){:} %CLOCKSUM"</span>
        <span style=
"color: #036A07;">"%60ITEM(Details) %5PRIORITY(Prio) %14SCHEDULED(Scheduled) %15TAGS(Context) %7</span><span style="color: #CC0000; background-color: #FFFF88;">TODO</span><span style="color: #036A07;">(To Do) %6CLOCKSUM(Clock) %5Effort(Effort){:} "</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">DUPLICATE Obey `</span><span style=
"color: #D0372D; font-style: italic;">eval</span><span style=
"color: #8D8D84; font-style: italic;">' variables -- RISKY!</span>
  (setq enable-local-eval t)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-9-10" class="outline-4">
          <h4 id="sec-28-9-10">Not sorted</h4>

          <div class="outline-text-4" id="text-28-9-10"></div>

          <div id="outline-container-sec-28-9-10-1" class="outline-5">
            <h5 id="sec-28-9-10-1">Mouse cursor doesn’t highlight agenda
            lines</h5>

            <div class="outline-text-5" id="text-28-9-10-1">
              <p>XXX Does this work?</p>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
  (add-hook 'org-agenda-finalize-hook
            (<span style="color: #0000FF;">lambda</span> ()
              (remove-text-properties (point-min) (point-max)
                                      '(mouse-face t))))
</pre>
              </div>

              <table class="inlinetask" width="100%">
                <tr>
                  <td valign="top"><b><span class=
                  "todo TODO">TODO</span></b></td>

                  <td width="100%"><b>Adding “:tangle yes” on the above code
                  block results in partial tangling!</b><br /></td>
                </tr>
              </table>
            </div>
          </div>

          <div id="outline-container-sec-28-9-10-2" class="outline-5">
            <h5 id="sec-28-9-10-2">Mark a task as DONE and create a follow-up
            task</h5>

            <div class="outline-text-5" id="text-28-9-10-2">
              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-agenda"</span>

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-agenda-mark-done-and-add-followup</span> ()
      <span style="color: #008000;">"Mark the current </span><span style=
"color: #CC0000; background-color: #FFFF88;">TODO</span><span style=
"color: #008000;"> as done and add another task after it.</span>
<span style=
"color: #008000;">    Creates it at the same level as the previous task, so it's better to use</span>
<span style=
"color: #008000;">    this with to-do items than with projects or headings."</span>
      (interactive)
      (org-agenda-todo <span style="color: #036A07;">"DONE"</span>)
      (org-agenda-switch-to)
      (org-capture 0 <span style="color: #036A07;">"t"</span>))

    (define-key org-agenda-mode-map
      <span style=
"color: #036A07;">"Z"</span> 'leuven-org-agenda-mark-done-and-add-followup)
</pre>
              </div>

              <p>Source: Sacha Chua.</p>
            </div>
          </div>

          <div id="outline-container-sec-28-9-10-3" class="outline-5">
            <h5 id="sec-28-9-10-3">Capture something based on the agenda</h5>

            <div class="outline-text-5" id="text-28-9-10-3">
              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-agenda-new</span> ()
      <span style=
"color: #008000;">"Create a new note or task at the current agenda item.</span>
<span style=
"color: #008000;">    Creates it at the same level as the previous task, so it's better to use</span>
<span style=
"color: #008000;">    this with to-do items than with projects or headings."</span>
      (interactive)
      (org-agenda-switch-to)
      (org-capture 0))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; new key assignment (overrides `</span><span style="color: #D0372D; font-style: italic;">org-agenda-next-item</span><span style="color: #8D8D84; font-style: italic;">')</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(define-key org-agenda-mode-map</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"N" 'leuven-org-agenda-new)</span>
  )
</pre>
              </div>

              <p>Source: Sacha Chua.</p>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-10" class="outline-3">
        <h3 id="sec-28-10">Markup for rich export</h3>

        <div class="outline-text-3" id="text-28-10">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 11 (info "(org)Markup")</span>

  (leuven--section <span style="color: #036A07;">"11 (org)Markup"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-faces"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add a face to #+begin_quote and #+begin_verse blocks</span>
    (setq org-fontify-quote-and-verse-blocks t))

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Markup"</span>)

    <span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">??? change the face of a headline (as an additional information) if</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">it is marked DONE (to face `</span><span style="color: #D0372D; font-style: italic;">org-headline-done</span><span style="color: #8D8D84; font-style: italic;">')</span>
    (setq org-fontify-done-headline t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">11.1 hide the emphasis marker characters</span>
    (setq org-hide-emphasis-markers t)  <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">impact on table alignment!</span>
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-10-1" class="outline-4">
          <h4 id="sec-28-10-1">Images and Tables</h4>

          <div class="outline-text-4" id="text-28-10-1">
            <p>Automatic screenshot insertion.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-insert-image-or-take-screenshot</span> (name)
      <span style=
"color: #008000;">"Insert a link to an already existing image, or else to a screenshot.</span>
<span style=
"color: #008000;">    The screenshot is either taken to the given non-existing file name,</span>
<span style=
"color: #008000;">    or added into the given directory, defaulting to the current one."</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;">: Should limit to '("pdf" "jpeg" "jpg" "png" "ps" "eps")</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">which is org-export-latex-inline-image-extensions.</span>
      (interactive <span style="color: #036A07;">"GImage name? "</span>)
      (<span style="color: #0000FF;">when</span> (file-directory-p name)
        (setq name (concat
                    (make-temp-name
                     (expand-file-name
                      (concat (file-name-as-directory name)
                              (subst-char-in-string
                               <span style=
"color: #036A07;">"."</span> <span style="color: #036A07;">"-"</span>
                               (file-name-sans-extension
                                (file-name-nondirectory
                                 (buffer-file-name)))))))
                    <span style="color: #036A07;">".png"</span>)))
      (<span style="color: #0000FF;">unless</span> (file-exists-p name)
        (<span style="color: #0000FF;">if</span> (file-writable-p name)
            (<span style="color: #0000FF;">progn</span>
              (message <span style=
"color: #036A07;">"Taking screenshot into %s"</span> name)
              (call-process <span style=
"color: #036A07;">"import"</span> nil nil nil name)
              (message <span style=
"color: #036A07;">"Taking screenshot...done"</span>))
          (<span style=
"color: #CC0000; background-color: #FFFF88; font-weight: bold;">error</span> <span style="color: #036A07;">"Cannot create image file"</span>)))
      (insert (concat <span style=
"color: #036A07;">"[["</span> name <span style="color: #036A07;">"]]"</span>))
      (org-display-inline-images))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-10-2" class="outline-4">
          <h4 id="sec-28-10-2">Macro replacement</h4>

          <div class="outline-text-4" id="text-28-10-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">hide the brackets marking macro calls</span>
    (setq org-hide-macro-markers t)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">org-macro-insert</span> ()
      (interactive)
      (<span style=
"color: #0000FF;">let*</span> ((macros (org-macro--collect-macros))
             (macro (completing-read <span style=
"color: #036A07;">"Insert macro: "</span> (mapcar 'car macros)))
             (args (string-match <span style=
"color: #036A07;">"$[[:digit:]]"</span> (cdr (assoc macro macros))))
             pos)
        (insert (format  <span style="color: #036A07;">"{{{%s"</span> macro))
        (<span style="color: #0000FF;">when</span> args (insert <span style=
"color: #036A07;">"("</span>) (setq pos (point)) (insert <span style=
"color: #036A07;">")"</span>))
        (insert <span style="color: #036A07;">"}}}"</span>)
        (<span style="color: #0000FF;">when</span> pos (goto-char pos)))))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-10-3" class="outline-4">
          <h4 id="sec-28-10-3">Embedded LaTeX</h4>

          <div class="outline-text-4" id="text-28-10-3">
            <p>To get one entity in the middle of a word, use <code>{}</code>,
            i.e. some <code>w\entity{}rd</code> (new exporter only).</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">11.7.1 define user entities to produce special characters</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-entities"</span>

    (add-to-list 'org-entities-user
                 '(<span style="color: #036A07;">"ok"</span>
                   <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">\definecolor{checkmark}{HTML}{1FAC21}</span>
                   <span style=
"color: #036A07;">"{\\color{checkmark}\\ding{51}}"</span> nil
                   <span style=
"color: #036A07;">"&lt;font color='green'&gt;&amp;#x2714;&lt;/font&gt;"</span>
                   <span style="color: #036A07;">"OK"</span>
                   <span style="color: #036A07;">"OK"</span> <span style=
"color: #036A07;">"✔"</span>))

    (add-to-list 'org-entities-user
                 '(<span style="color: #036A07;">"nok"</span>
                   <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">\usepackage{pifont}</span>
                   <span style=
"color: #036A07;">"{\\color{red}\\ding{55}}"</span> nil
                   <span style=
"color: #036A07;">"&lt;font color='red'&gt;&amp;#x2718;&lt;/font&gt;"</span>
                   <span style="color: #036A07;">"NOK"</span>
                   <span style="color: #036A07;">"NOK"</span> <span style=
"color: #036A07;">"✘"</span>)))
</pre>
            </div>

            <p>To list all available entities, run <code>M-x
            org-entities-help</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">11.7 interpret "_" and "^" for export when braces are used</span>
  (setq org-export-with-sub-superscripts '{})

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">11.7 convert LaTeX fragments to images when exporting to HTML (using MathJax)</span>
  (setq org-export-with-LaTeX-fragments t) <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> undefined?</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">highlight LaTeX and related syntax</span>
  (setq org-highlight-latex-and-related '(latex script entities))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show entities as UTF8 characters</span>
  (setq org-pretty-entities t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; pretty entity display doesn't include formatting sub/superscripts</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-pretty-entities-include-sub-superscripts nil)</span>
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-11" class="outline-3">
        <h3 id="sec-28-11">Exporting</h3>

        <div class="outline-text-3" id="text-28-11">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 12 (info "(org)Exporting")</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">bind the exporter dispatcher to a key sequence</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Exporting"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">libraries in this list will be loaded once the export framework is needed</span>
    (setq org-export-backends '(ascii html icalendar latex odt))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(define-key org-mode-map</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "C-c C-e") 'org-export-dispatch)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> temporary (until Org 8 is bundled within Emacs)</span>
    (define-key org-mode-map
      (kbd <span style="color: #036A07;">"C-c C-e"</span>)
      (<span style="color: #0000FF;">lambda</span> (<span style=
"color: #6434A3;">&amp;optional</span> arg)
        (interactive <span style="color: #036A07;">"P"</span>)
        (<span style="color: #0000FF;">if</span> (fboundp 'org-export-dispatch)
            (funcall 'org-export-dispatch arg)
          (message (concat <span style=
"color: #036A07;">"This version of Org mode is no longer supported.  "</span>
                           <span style=
"color: #036A07;">"Please upgrade to 8 or later"</span>))
          (sit-for 1.5)))))
</pre>
          </div>

          <p>For Org buffers, add an enhanced version of
          <code>save-buffer</code> which does:</p>

          <ol class="org-ol">
            <li>Save buffer (updating dynamic blocks and tables)</li>

            <li>Execute the code blocks, and save another time</li>

            <li>Tangle code blocks, if any to be tangled</li>

            <li>Export to HTML and PDF, if such files already exist</li>

            <li>Call <code>send-patch</code>?</li>
          </ol>

          <p>Notes:</p>

          <ul class="org-ul">
            <li>Use the asynchronous export (if possible, so that I don’t loose
            time, or let it open to the value of that var)?</li>

            <li>Different behaviors can be obtained with <code>C-u</code> (or
            <code>C-u C-u</code>)</li>
          </ul>

          <p>Why not adding a recursive functionality as well (in Emacs Lisp
          too), to be launched from Dired?</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">org-save-buffer-and-do-related</span> ()
      <span style=
"color: #008000;">"Save buffer, execute/tangle code blocks, and export to HTML/PDF."</span>
      (interactive)
      (<span style="color: #0000FF;">let*</span> ((orgfile (buffer-file-name))
             (base-name (file-name-base orgfile))
             (htmlfile (concat base-name <span style=
"color: #036A07;">".html"</span>))
             (pdffile (concat base-name <span style=
"color: #036A07;">".pdf"</span>)))
        (save-buffer)                     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">see other commands in</span>
                                          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">before-save-hook</span><span style=
"color: #8D8D84; font-style: italic;">':</span>
                                          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">org-update-all-dblocks</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
                                          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">org-table-iterate-buffer-tables</span><span style="color: #8D8D84; font-style: italic;">'</span>
        (<span style="color: #0000FF;">when</span> (derived-mode-p 'org-mode)
          (org-babel-execute-buffer)
          (<span style="color: #0000FF;">let</span> ((before-save-hook nil))
            (save-buffer))
          (org-babel-tangle)
          (<span style="color: #0000FF;">when</span> (file-exists-p htmlfile)
            (<span style=
"color: #0000FF;">if</span> (file-newer-than-file-p orgfile htmlfile)
                (org-html-export-to-html)
              (message <span style=
"color: #036A07;">"HTML is up to date with Org file"</span>)))
          (<span style="color: #0000FF;">when</span> (file-exists-p pdffile)
            (<span style=
"color: #0000FF;">if</span> (file-newer-than-file-p orgfile pdffile)
                (<span style=
"color: #0000FF;">if</span> (string-match <span style=
"color: #036A07;">"^#\\+BEAMER_THEME: "</span> (buffer-string))
                    (org-beamer-export-to-pdf)
                  (org-latex-export-to-pdf))
              (message <span style=
"color: #036A07;">"PDF is up to date with Org file"</span>)))
          (beep))))

    (define-key org-mode-map
      (kbd <span style=
"color: #036A07;">"&lt;f9&gt;"</span>) 'org-save-buffer-and-do-related))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-11-1" class="outline-4">
          <h4 id="sec-28-11-1">Export options</h4>

          <div class="outline-text-4" id="text-28-11-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 12.2 (info "(org)Export options")</span>

  (leuven--section <span style=
"color: #036A07;">"12.2 (org)Export options"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Org generic export engine</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ox"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">12.3 don't insert a time stamp into the exported file</span>
    (setq org-export-time-stamp-file nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">13.1.5 export all drawers (including properties)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-export-with-drawers t)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default language of HTML export (see `</span><span style="color: #D0372D; font-style: italic;">org-export-language-setup</span><span style="color: #8D8D84; font-style: italic;">' </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;">)</span>
    (setq org-export-default-language <span style=
"color: #036A07;">"en"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">include priority cookies in export</span>
    (setq org-export-with-priority t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">activate smart quotes during export</span>
    (setq org-export-with-smart-quotes t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">allow #+BIND to define local variable values for export</span>
    (setq org-export-allow-bind-keywords t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">exported stuff will not be pushed onto the kill ring</span>
    (setq org-export-copy-to-kill-ring nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; export and publishing commands will run in background</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-export-in-background t)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; use a non-intrusive export dispatcher</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-export-dispatch-use-expert-ui t)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">export snippet translations</span>
    (add-to-list 'org-export-snippet-translation-alist
                 '(<span style="color: #036A07;">"l"</span> . <span style=
"color: #036A07;">"latex"</span>))
    (add-to-list 'org-export-snippet-translation-alist
                 '(<span style="color: #036A07;">"b"</span> . <span style=
"color: #036A07;">"beamer"</span>))

    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "ox" ends here</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">execute buffer when exporting it (see some thread with Eric Schulte,</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">end of December 2010)</span>
  <span style="color: #8D8D84;">;;;;;;;;;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'org-export-first-hook 'org-babel-execute-buffer)</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-11-2" class="outline-4">
          <h4 id="sec-28-11-2">HTML export</h4>

          <div class="outline-text-4" id="text-28-11-2">
            <p>To get a start for your CSS file, use the command <code>M-x
            org-export-htmlize-generate-css</code> to extract class
            definitions.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 12.5 (info "(org)HTML export")</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Org HTML export engine</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ox-html"</span>

    (setq org-html-checkbox-type 'unicode)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">output type to be used by htmlize when formatting code snippets</span>
    (setq org-export-htmlize-output-type 'css) <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; URL pointing to a CSS file defining text colors for htmlized Emacs</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; buffers</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-export-htmlized-org-css-url "style.css")</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">XML declaration</span>
    (setq org-html-xml-declaration
          '((<span style="color: #036A07;">"html"</span> . <span style=
"color: #036A07;">"&lt;!-- &lt;xml version=\"1.0\"&gt; --&gt;"</span>)
            (<span style="color: #036A07;">"was-html"</span> . <span style=
"color: #036A07;">"&lt;?xml version=\"1.0\" encoding=\"%s\"?&gt;"</span>)
            (<span style="color: #036A07;">"php"</span> . <span style=
"color: #036A07;">"&lt;?php echo \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"%s\\\" ?&gt;\"; ?&gt;"</span>)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">coding system for HTML export</span>
    (setq org-html-coding-system 'utf-8)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">format for the HTML postamble</span>
    (setq org-html-postamble
          <span style=
"color: #036A07;">"  &lt;div id=\"footer\"&gt;&lt;div id=\"copyright\"&gt;\n    Copyright &amp;copy; %d %a\n  &lt;/div&gt;&lt;/div&gt;"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">13.1.5 don't include the JavaScript snippets in exported HTML files</span>
    (setq org-html-head-include-scripts nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">12.5.9 turn inclusion of the default CSS style off</span>
    (setq org-html-head-include-default-style nil)
</pre>
            </div>

            <p><a href="http://tidy.sourceforge.net/">HTML Tidy</a> is a HTML
            linter. Please see <a href=
            "http://www.htmlpedia.org/wiki/HTML_Tidy">List of the Tidy
            errors</a>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">check that `</span><span style=
"color: #D0372D; font-style: italic;">tidy</span><span style=
"color: #8D8D84; font-style: italic;">' is in PATH, and that configuration file exists</span>
    (<span style=
"color: #0000FF;">when</span> (and (executable-find <span style=
"color: #036A07;">"tidy"</span>)
               (file-exists-p <span style=
"color: #036A07;">"~/.tidyrc"</span>)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">tidy-config</span>

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--export-html-final-filter</span> (contents backend info)
        (<span style=
"color: #0000FF;">if</span> (not (eq backend 'html)) contents
          (<span style="color: #0000FF;">let*</span> ((in-file <span style=
"color: #036A07;">"~/tidy-stdin.html"</span>)
                          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">this filepath must be readable by Cygwin</span>
                 (err-file <span style=
"color: #036A07;">"~/tidy-</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #036A07;">s.log"</span>)
                 new-contents)
            (<span style="color: #0000FF;">with-temp-file</span> in-file
              (insert contents))
            (setq new-contents
                  (shell-command-to-string
                   (format <span style=
"color: #036A07;">"tidy -config ~/.tidyrc -f %s %s"</span>
                           err-file in-file)))
            (message <span style="color: #036A07;">"HTML Tidy'ed"</span>)
            (message <span style=
"color: #036A07;">"%s"</span> (org-file-contents err-file))
            new-contents)))
      (add-to-list 'org-export-filter-final-output-functions
                   'leuven--export-html-final-filter))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">HTML checkbox output</span>
      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--checkbox-filter</span> (item backend info)
        (<span style=
"color: #0000FF;">when</span> (org-export-derived-backend-p backend 'html)
          (replace-regexp-in-string
           <span style="color: #036A07;">"\\`.*</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">&lt;code&gt;\\[</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">X</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">&amp;#xa0;</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">-</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">\\]&lt;/code&gt;</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">.*$"</span>
           (<span style="color: #0000FF;">lambda</span> (rep)
             (<span style=
"color: #0000FF;">let</span> ((check (match-string 2 rep)))
               (<span style=
"color: #0000FF;">cond</span> ((equal check <span style=
"color: #036A07;">"X"</span>) <span style=
"color: #036A07;">"&amp;#x2611;"</span>)
                     ((equal check <span style=
"color: #036A07;">"-"</span>) <span style=
"color: #036A07;">"&amp;#x2610;"</span>)
                     (t <span style="color: #036A07;">"&amp;#x2610;"</span>))))
           item
           nil nil 1)))
      (add-to-list 'org-export-filter-item-functions
                   'leuven--checkbox-filter)

    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "ox-html" ends here</span>
</pre>
            </div>

            <p>Emacs 23+ users: in order to avoid “Invalid face” errors, you
            need to use the version made available by Carsten Dominik in
            <code>org-mode/contrib/lisp</code> directory.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs-goodies-el)htmlize")</span>

  (leuven--section <span style=
"color: #036A07;">"(emacs-goodies-el)htmlize"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">HTML-ize font-lock buffers</span>
  (autoload 'htmlize-buffer <span style="color: #036A07;">"htmlize"</span>
    <span style=
"color: #008000;">"Convert BUFFER to HTML, preserving colors and decorations."</span> t)
  (autoload 'htmlize-region <span style="color: #036A07;">"htmlize"</span>
    <span style=
"color: #008000;">"Convert the region to HTML, preserving colors and decorations."</span> t)
  (autoload 'htmlize-file <span style="color: #036A07;">"htmlize"</span>
    <span style=
"color: #008000;">"Load FILE, fontify it, convert it to HTML, and save the result."</span> t)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"htmlize"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">output type of generated HTML</span>
    (setq htmlize-output-type 'css)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">override output type `</span><span style=
"color: #D0372D; font-style: italic;">inline-css</span><span style=
"color: #8D8D84; font-style: italic;">' used for htmlizing a region</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">htmlize-region-for-paste</span> (beg end)
      <span style=
"color: #008000;">"Htmlize the region and return just the HTML as a string.</span>
<span style="color: #008000;">    This forces the `</span><span style=
"color: #D0372D;">css</span><span style=
"color: #008000;">' style and only returns the HTML body, but without the</span>
<span style=
"color: #008000;">    BODY tag.  This should make it useful for inserting the text to another HTML</span>
<span style="color: #008000;">    buffer."</span>
      (<span style=
"color: #0000FF;">let*</span> ((htmlize-output-type 'css)  <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">was `</span><span style=
"color: #D0372D; font-style: italic;">inline-css</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
             (htmlbuf (htmlize-region beg end)))
        (<span style="color: #0000FF;">unwind-protect</span>
            (<span style="color: #0000FF;">with-current-buffer</span> htmlbuf
              (buffer-substring
               (plist-get htmlize-buffer-places 'content-start)
               (plist-get htmlize-buffer-places 'content-end)))
          (kill-buffer htmlbuf))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">charset declared by the resulting HTML documents</span>
    (setq htmlize-html-charset <span style="color: #036A07;">"utf-8"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">non-ASCII characters (codes in the 128-255 range) are copied to</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">HTML without modification -- if your HTML is in Unicode</span>
    (setq htmlize-convert-nonascii-to-entities nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">key binding</span>
    (global-set-key
      (kbd <span style="color: #036A07;">"M-P"</span>) 'htmlize-buffer)

    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "htmlize" ends here</span>
</pre>
            </div>

            <p>To get around PostScript problems, you can write the buffer to
            your browser and then print from there, and in color.</p>

            <p>This adds a Quick Print option to your menu bar (under
            File).</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">quick print preview (to Web browser) with `</span><span style="color: #D0372D; font-style: italic;">htmlize-view-buffer</span><span style="color: #8D8D84; font-style: italic;">'</span>
  (GNUEmacs
    (autoload 'htmlize-view-buffer <span style=
"color: #036A07;">"htmlize-view"</span>
      <span style=
"color: #008000;">"Convert buffer to html preserving faces and view in web browser."</span> t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">same key binding as Org export to HTML (open in browser)</span>
    (global-set-key
      (kbd <span style=
"color: #036A07;">"C-c C-e h o"</span>) 'htmlize-view-buffer)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">view current buffer as html in web browser</span>
    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"htmlize-view"</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add "Quick Print" entry to file menu</span>
      (htmlize-view-add-to-files-menu)))
</pre>
            </div>

            <p>Now, you can print from the browser in (complete) Unicode, using
            your system’s capabilities.</p>
          </div>
        </div>

        <div id="outline-container-sec-28-11-3" class="outline-4">
          <h4 id="sec-28-11-3">LaTeX and PDF export</h4>

          <div class="outline-text-4" id="text-28-11-3">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 12.6 (info "(org)LaTeX and PDF export")</span>
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (leuven--section <span style=
"color: #036A07;">"12.6 (org)LaTeX and PDF export"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">LaTeX back-end</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ox-latex"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">markup for </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> keywords and for tags, as a printf format</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">org-latex-format-headline</span> (todo todo-type priority text tags)
      <span style=
"color: #008000;">"Default format function for an headline."</span>
      (concat (<span style="color: #0000FF;">when</span> todo
                (format <span style=
"color: #036A07;">"{%s\\textbf{\\textsc{\\textsf{%s}}}} "</span>
                        (<span style=
"color: #0000FF;">cond</span> ((equal todo-type 'todo) <span style=
"color: #036A07;">"\\color{red}"</span>)
                              ((equal todo-type 'done) <span style=
"color: #036A07;">"\\color{teal}"</span>)
                              (t <span style=
"color: #036A07;">"\\color{gray}"</span>))
                        todo))
              (<span style="color: #0000FF;">when</span> priority
                (format <span style=
"color: #036A07;">"\\framebox{\\#%c} "</span> priority))
              text
              (<span style="color: #0000FF;">when</span> tags
                (format <span style=
"color: #036A07;">"\\hfill{}\\fbox{\\textsc{%s}}"</span>
                <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> source of "undefined control sequence"?</span>
                  (mapconcat 'identity tags <span style=
"color: #036A07;">":"</span>)))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">function for formatting the headline's text</span>
    (setq org-latex-format-headline-function
          'org-latex-format-headline)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default width for images</span>
    (setq org-latex-image-default-width <span style=
"color: #036A07;">".75\\linewidth"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">format string for links with unknown path type</span>
    (setq org-latex-link-with-unknown-path-format <span style=
"color: #036A07;">"\\colorbox{red}{%s}"</span>)
</pre>
            </div>

            <p>Look at the variable <code>org-latex-remove-logfiles</code>,
            which controls whether some of the files produced by LaTeX
            (<code>org-latex-logfiles-extensions</code>) are removed.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--change-pdflatex-program</span> (backend)
      <span style=
"color: #008000;">"Automatically run XeLaTeX, if asked, when exporting to LaTeX."</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default (in Windows binary)</span>
      (setq org-latex-pdf-process
            (<span style=
"color: #0000FF;">if</span> (executable-find <span style=
"color: #036A07;">"latexmk"</span>)
                '(<span style=
"color: #036A07;">"latexmk -CF -pdf %f &amp;&amp; latexmk -c"</span>)
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">must clean .fdb_latexmk, .fls, .ilg,</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">.ind, etc.</span>
              '(<span style=
"color: #036A07;">"pdflatex -interaction=nonstopmode -output-directory=%o %f"</span>
                <span style=
"color: #036A07;">"pdflatex -interaction=nonstopmode -output-directory=%o %f"</span>
                <span style=
"color: #036A07;">"pdflatex -interaction=nonstopmode -output-directory=%o %f"</span>)))

      (<span style="color: #0000FF;">when</span> (string-match <span style=
"color: #036A07;">"^#\\+LATEX_CMD: xelatex"</span> (buffer-string))
        (setq org-latex-pdf-process
              (<span style=
"color: #0000FF;">if</span> (executable-find <span style=
"color: #036A07;">"latexmk"</span>)
                  '(<span style=
"color: #036A07;">"latexmk -CF -pdf -pdflatex=xelatex %f &amp;&amp; latexmk -c"</span>)
                '(<span style=
"color: #036A07;">"xelatex -interaction=nonstopmode -output-directory=%o %f"</span>
                  <span style=
"color: #036A07;">"xelatex -interaction=nonstopmode -output-directory=%o %f"</span>
                  <span style=
"color: #036A07;">"xelatex -interaction=nonstopmode -output-directory=%o %f"</span>)))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">hook run before parsing an export buffer</span>
    (add-hook 'org-export-before-parsing-hook
              'leuven--change-pdflatex-program)
</pre>
            </div>

            <p>You can easily customize this variable on a per file basis. If
            you seldom use <code>bibtex</code>, have the default be to run
            <code>pdflatex</code> just once or twice. Then, for any Org file
            that needs <code>bibtex</code>, simply put in the following line
            (or a variation thereof):</p>

            <div class="org-src-container">
              <pre class="src src-org">
<span style=
"color: #008ED1; background-color: #EAEAFF;">#+BIND: org-latex-pdf-process ("pdflatex %b" "bibtex %b" "pdflatex %b" "pdflatex %b")</span>
</pre>
            </div>

            <p>Also, you can use <code>latexmk</code> (in TeX Live) which can
            save you some time when it is not necessary to rebuild index and/or
            bibliography.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">export source code using `</span><span style="color: #D0372D; font-style: italic;">listings</span><span style="color: #8D8D84; font-style: italic;">' (instead of `</span><span style="color: #D0372D; font-style: italic;">verbatim</span><span style="color: #8D8D84; font-style: italic;">')</span>
    (setq org-latex-listings t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">12.6.2 default packages to be inserted in the header</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">include the `</span><span style=
"color: #D0372D; font-style: italic;">listings</span><span style=
"color: #8D8D84; font-style: italic;">' package for fontified source code</span>
    (add-to-list 'org-latex-packages-alist '(<span style=
"color: #036A07;">""</span> <span style="color: #036A07;">"listings"</span>) t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">include the `</span><span style=
"color: #D0372D; font-style: italic;">xcolor</span><span style=
"color: #8D8D84; font-style: italic;">' package for colored source code</span>
    (add-to-list 'org-latex-packages-alist '(<span style=
"color: #036A07;">""</span> <span style="color: #036A07;">"xcolor"</span>) t)
</pre>
            </div>

            <p>When using the <code>utf8</code> option to <code>inputenc</code>
            (and not <code>utf8x</code> which should be avoided, as it uses
            <code>ucs</code> which is no longer maintained), we have 2
            solutions to support the UTF-8 <b>non-breaking space</b>:</p>

            <ul class="org-ul">
              <li>Convert it in Org mode, when exporting (via a filter), or

                <div class="org-src-container">
                  <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">filter for non-breaking spaces</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--latex-filter-nbsp</span> (text backend info)
    <span style=
"color: #008000;">"Convert non-breaking spaces when exporting to LaTeX/Beamer."</span>
    (<span style="color: #0000FF;">when</span> (memq backend '(latex beamer))
      (replace-regexp-in-string <span style=
"color: #036A07;">" "</span> <span style="color: #036A07;">"~"</span> text)))

  (add-to-list 'org-export-filter-plain-text-functions
               'leuven--latex-filter-nbsp)
</pre>
                </div>
              </li>

              <li>Convert it in LaTeX:

                <div class="org-src-container">
                  <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">convert `</span><span style=
"color: #D0372D; font-style: italic;">nbsp</span><span style=
"color: #8D8D84; font-style: italic;">' to its LaTeX equivalent</span>
  (add-to-list 'org-latex-packages-alist
               (concat <span style=
"color: #036A07;">"\\ifdefined\\DeclareUnicodeCharacter{"</span>
                       <span style=
"color: #036A07;">"\\DeclareUnicodeCharacter{00A0}{~}"</span>
                       <span style="color: #036A07;">"}\\fi"</span>) t)
</pre>
                </div>
              </li>
            </ul>

            <p>XXX The first one is better because … (see mail of Daniel
            Flipo)</p>

            <p>The exporter will <b>add</b> a language option to the LaTeX
            <code>babel</code> package according to the
            <code>#+LANGUAGE:</code> keyword (only) if:</p>

            <ul class="org-ul">
              <li>The <code>babel</code> package is explicitly loaded (in
              preamble), <span class="underline">and</span></li>

              <li>The language is different from the one set by the user.</li>
            </ul>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">include the `</span><span style=
"color: #D0372D; font-style: italic;">babel</span><span style=
"color: #8D8D84; font-style: italic;">' package for language-specific hyphenation and</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">typography</span>
    (add-to-list 'org-latex-packages-alist '(<span style=
"color: #036A07;">"french"</span> <span style=
"color: #036A07;">"babel"</span>) t)
</pre>
            </div>

            <p>What about <code>apacite</code> and <code>tikz</code> in
            <code>org-latex-packages-alist</code>?</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--change-pdflatex-packages</span> (backend)
      <span style=
"color: #008000;">"Automatically select the LaTeX packages to include (depending on PDFLaTeX</span>
<span style=
"color: #008000;">    vs. XeLaTeX) when exporting When exporting to LaTeX."</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">unconditionally remove `</span><span style="color: #D0372D; font-style: italic;">inputenc</span><span style="color: #8D8D84; font-style: italic;">' from all the default packages</span>
      (setq org-latex-packages-alist
            (delete '(<span style="color: #036A07;">"AUTO"</span> <span style=
"color: #036A07;">"inputenc"</span> t)
                    org-latex-packages-alist))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">unconditionally remove `</span><span style="color: #D0372D; font-style: italic;">fontenc</span><span style="color: #8D8D84; font-style: italic;">' from all the default packages</span>
      (setq org-latex-packages-alist
            (delete '(<span style="color: #036A07;">"T1"</span> <span style=
"color: #036A07;">"fontenc"</span> t)
                    org-latex-packages-alist))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">unconditionally remove `</span><span style="color: #D0372D; font-style: italic;">textcomp</span><span style="color: #8D8D84; font-style: italic;">' from all the default packages</span>
      (setq org-latex-packages-alist
            (delete '(<span style="color: #036A07;">""</span> <span style=
"color: #036A07;">"textcomp"</span> t)
                    org-latex-packages-alist))

      (<span style="color: #0000FF;">if</span> (string-match <span style=
"color: #036A07;">"^#\\+LATEX_CMD: xelatex"</span> (buffer-string))
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">packages to include when XeLaTeX is used</span>
          (setq org-export-latex-packages-alist
                '((<span style="color: #036A07;">""</span> <span style=
"color: #036A07;">"fontspec"</span> t)
                  (<span style="color: #036A07;">""</span> <span style=
"color: #036A07;">"xunicode"</span> t)
                  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add here things like `\setmainfont{Georgia}'</span>
                  ))

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">packages to include when PDFLaTeX is used</span>
        (setq org-export-latex-packages-alist
              '((<span style="color: #036A07;">"AUTO"</span> <span style=
"color: #036A07;">"inputenc"</span> t)
                (<span style="color: #036A07;">"T1"</span> <span style=
"color: #036A07;">"fontenc"</span> t)
                (<span style="color: #036A07;">""</span> <span style=
"color: #036A07;">"textcomp"</span> t))))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">packages to always include</span>
      (add-to-list 'org-export-latex-packages-alist
                   '(<span style=
"color: #036A07;">"frenchb"</span> <span style="color: #036A07;">"babel"</span>) t))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">hook run before parsing an export buffer</span>
    (add-hook 'org-export-before-parsing-hook
              'leuven--change-pdflatex-packages)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">12.6.5 default position for LaTeX figures</span>
    (setq org-latex-default-figure-position <span style=
"color: #036A07;">"!htbp"</span>)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "ox-latex" ends here</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-11-4" class="outline-4">
          <h4 id="sec-28-11-4">LaTeX Beamer and PDF export</h4>

          <div class="outline-text-4" id="text-28-11-4">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">12.6.6 Beamer class export</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(require 'ox-beamer)</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ox-beamer"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default title of a frame containing an outline</span>
    (setq org-beamer-outline-frame-title <span style=
"color: #036A07;">"Plan"</span>)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[default: "Outline"]</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-11-5" class="outline-4">
          <h4 id="sec-28-11-5">OpenDocument Text (ODT)</h4>

          <div class="outline-text-4" id="text-28-11-5">
            <p>ODT export is not loaded by default. You will have to load it
            explicitly or to add it to <code>org-export-backends</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ox-odt"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">convert "odt" format to "doc" format</span>
    (setq org-odt-preferred-output-format <span style=
"color: #036A07;">"doc"</span>))
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-12" class="outline-3">
        <h3 id="sec-28-12">Publishing</h3>

        <div class="outline-text-3" id="text-28-12">
          <p>Publish related Org mode files as a website.</p>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"></td>

              <td width="100%">
                <b>Publishing&nbsp;&nbsp;&nbsp;<span class="tag"><span class=
                "warning">warning</span></span></b><br />

                <p>It can be used for generating different PDF files from the
                same source file… See <a href=
                "http://orgmode.org/worg/org-tutorials/org-latex-export.html#sec-9-2">
                9.2 The Multiple Export Case</a>.</p>
              </td>
            </tr>
          </table>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 13 (info "(org)Publishing")</span>

  (leuven--section <span style="color: #036A07;">"13 (org)Publishing"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ox-publish"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show message about files *not* published</span>
    (setq org-publish-list-skipped-files nil)
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-12-1" class="outline-4">
          <h4 id="sec-28-12-1">Uploading files</h4>

          <div class="outline-text-4" id="text-28-12-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; 13.2 always publish all files</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; (do not use time stamp checking for skipping unmodified files)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-publish-use-timestamps-flag nil)</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-12-2" class="outline-4">
          <h4 id="sec-28-12-2">Triggering publication</h4>

          <div class="outline-text-4" id="text-28-12-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">13.4 force publishing all files</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">org-publish-all-force</span> ()
      (interactive)
      (org-publish-all t)))
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-13" class="outline-3">
        <h3 id="sec-28-13">Working With Source Code</h3>

        <div class="outline-text-3" id="text-28-13">
          <p>Literate programming and reproducible research.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 14 (info "(org)Working With Source Code")</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ob-core"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make the images in the Emacs buffer automatically refresh after</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">execution</span>
    (add-hook 'org-babel-after-execute-hook 'org-display-inline-images)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">org-babel-next-src-block</span>
      (after leuven-org-babel-next-src-block activate)
      <span style=
"color: #008000;">"Recenter after jumping to the next source block."</span>
      (recenter))

    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">org-babel-previous-src-block</span>
      (after leuven-org-babel-previous-src-block activate)
      <span style=
"color: #008000;">"Recenter after jumping to the previous source block."</span>
      (recenter))
    )
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">org-agenda-switch-to</span>
      (after leuven-org-agenda-switch-to activate)
      <span style=
"color: #008000;">"Recenter after jumping to the file which contains the item at point."</span>
      (recenter))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(with-eval-after-load "ob-shell"</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">;; command used to invoke a shell</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-babel-sh-command "bash")  ; now uses `</span><span style="color: #D0372D; font-style: italic;">shell-file-name</span><span style="color: #8D8D84; font-style: italic;">' (2013-12-14)</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">;; use plain old syntax (instead of `$(...)') for Cygwin</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(setq org-babel-sh-var-quote-fmt</span>
  <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">"`cat &lt;&lt;'BABEL_TABLE'\n%s\nBABEL_TABLE\n`"))</span>
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-13-1" class="outline-4">
          <h4 id="sec-28-13-1">Editing source code</h4>

          <div class="outline-text-4" id="text-28-13-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.2 (info "(org)Editing source code")</span>

  (leuven--section <span style=
"color: #036A07;">"14.2 (org)Editing source code"</span>)
</pre>
            </div>

            <p>Mapping between languages (listings in LaTeX) and their major
            mode (in Emacs).</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-src"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">mapping languages to their major mode (for editing the source code block</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">with `C-c '')</span>
    (add-to-list 'org-src-lang-modes
                 '(<span style="color: #036A07;">"dot"</span> . graphviz-dot)))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display the source code edit buffer in the current window, keeping</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">all other windows</span>
  (setq org-src-window-setup 'current-window)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> Bind this to the correct keys</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-babel-expand-src-block</span> ()
    (interactive)
    (<span style=
"color: #0000FF;">let</span> ((org-src-window-setup 'reorganize-frame))
      (org-babel-expand-src-block)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">indent the content of a source code block</span>
  (setq org-edit-src-content-indentation 2)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">fontify code in code blocks (highlight syntax in the org-buffer)</span>
  (setq org-src-fontify-natively t)     <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! create overlay</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! `</span><span style=
"color: #D0372D; font-style: italic;">org-block-background</span><span style=
"color: #8D8D84; font-style: italic;">' and remove</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! text property `</span><span style=
"color: #D0372D; font-style: italic;">org-block</span><span style=
"color: #8D8D84; font-style: italic;">'</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">preserve spaces and `</span><span style=
"color: #D0372D; font-style: italic;">tab</span><span style=
"color: #8D8D84; font-style: italic;">' characters in source code blocks</span>
  (setq org-src-preserve-indentation t) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">or add a `</span><span style=
"color: #D0372D; font-style: italic;">-i</span><span style=
"color: #8D8D84; font-style: italic;">' flag to you source block</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">same effect for `</span><span style=
"color: #D0372D; font-style: italic;">tab</span><span style=
"color: #8D8D84; font-style: italic;">' as in the language major mode buffer</span>
  (setq org-src-tab-acts-natively t)


  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style=
"color: #036A07;">"... Org Editing source code"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">allow indent region in the code edit buffer (according to language)</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-indent-region</span> (<span style=
"color: #6434A3;">&amp;optional</span> arg)
      (interactive <span style="color: #036A07;">"P"</span>)
      (or (org-babel-do-key-sequence-in-edit-buffer (kbd <span style=
"color: #036A07;">"C-M-\\"</span>))
          (indent-region arg)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make `C-c C-v C-x C-M-\' more convenient</span>
    (define-key org-mode-map
      (kbd <span style=
"color: #036A07;">"C-M-\\"</span>) 'leuven-org-indent-region))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">prevent auto-filling in src blocks</span>
  (setq org-src-prevent-auto-filling t)

  (global-set-key
    (kbd <span style=
"color: #036A07;">"C-c C-v C-d"</span>) 'org-babel-demarcate-block)
</pre>
            </div>

            <p>C-c TAB Toggle the visibility of existing tags in the buffer.
            This can be used as a cheap preview (sgml-tags-invisible).</p>

            <p>View just the source-code blocks within the current Org-babel
            file (something logically equivalent to “tangle”, but without
            creating a separate file).</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">only-code-overlays</span> nil
    <span style="color: #008000;">"Overlays hiding non-code blocks."</span>)
  (make-variable-buffer-local 'only-code-overlays)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">hide-non-code</span> ()
    <span style=
"color: #008000;">"Hide non-code-block content of the current Org mode buffer."</span>
    (interactive)
    (add-to-invisibility-spec '(non-code))
    (<span style="color: #0000FF;">let</span> (begs ends)
      (<span style="color: #0000FF;">save-excursion</span>
        (goto-char (point-min))
        (<span style=
"color: #0000FF;">while</span> (re-search-forward org-babel-src-block-regexp nil t)
          (push (match-beginning 5) begs)
          (push (match-end 5)       ends))
        (map 'list (<span style="color: #0000FF;">lambda</span> (beg end)
                     (<span style=
"color: #0000FF;">let</span> ((ov (make-overlay beg end)))
                       (push ov only-code-overlays)
                       (overlay-put ov 'invisible 'non-code)))
             (cons (point-min) (reverse ends))
             (append (reverse begs) (list (point-max)))))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">show-non-code</span> ()
    <span style=
"color: #008000;">"Show non-code-block content of the current Org mode buffer."</span>
    (interactive)
    (mapc 'delete-overlay only-code-overlays))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-13-2" class="outline-4">
          <h4 id="sec-28-13-2">Evaluating code blocks</h4>

          <div class="outline-text-4" id="text-28-13-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.5 (info "(org)Evaluating code blocks")</span>

  (leuven--section <span style=
"color: #036A07;">"14.5 (org)Evaluating code blocks"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">I don't want to execute code blocks with `C-c C-c' (evaluate code</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">block only with `C-c C-v e')</span>
  (setq org-babel-no-eval-on-ctrl-c-ctrl-c t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">languages for which Org-babel will raise literate programming </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s when</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">noweb references can not be resolved.</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ob-core"</span>
    (add-to-list 'org-babel-noweb-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span>-langs <span style=
"color: #036A07;">"emacs-lisp"</span>))
</pre>
            </div>

            <p>Write error messages to the Messages buffer for invalid
            <code>org-sbe</code> calls.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">debugging sbe calls</span>
  (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">org-sbe</span> (around get-err-msg activate)
    <span style="color: #008000;">"Issue messages at </span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #008000;">s."</span>
    (<span style="color: #0000FF;">condition-case</span> err
        (<span style="color: #0000FF;">progn</span>
      ad-do-it)
      (<span style=
"color: #CC0000; background-color: #FFFF88; font-weight: bold;">error</span>
       (message <span style="color: #036A07;">"</span><span style=
"color: #CC0000; background-color: #FFFF88;">Error</span><span style=
"color: #036A07;"> in org-sbe: %S"</span> err)
       (<span style=
"color: #ff0000; font-weight: bold;">signal</span> (car err) (cdr err)))))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-13-3" class="outline-4">
          <h4 id="sec-28-13-3">Library of Babel</h4>

          <div class="outline-text-4" id="text-28-13-3">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.6 (info "(org)Library of Babel")</span>

  (leuven--section <span style=
"color: #036A07;">"14.6 (org)Library of Babel"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">load the NAMED code blocks defined in Org mode files into the</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">library of Babel (global `</span><span style="color: #D0372D; font-style: italic;">org-babel-library-of-babel</span><span style="color: #8D8D84; font-style: italic;">' variable)</span>
    (<span style=
"color: #0000FF;">let</span> ((lob-file (concat (file-name-directory (locate-library <span style="color: #036A07;">"org"</span>))
                            <span style=
"color: #036A07;">"../doc/library-of-babel.org"</span>)))
      (<span style="color: #0000FF;">when</span> (file-exists-p lob-file)
        (org-babel-lob-ingest lob-file))))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-13-4" class="outline-4">
          <h4 id="sec-28-13-4">Languages</h4>

          <div class="outline-text-4" id="text-28-13-4">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ob-exp"</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">template used to export the body of code blocks</span>
    (setq org-babel-exp-code-template
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(concat "\n==:\n"</span>
                  org-babel-exp-code-template)
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">)</span>
    )

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">keep lower-case</span>
  (setq org-babel-results-keyword <span style=
"color: #036A07;">"results"</span>)
</pre>
            </div>

            <p>Customize the <code>org-babel-load-languages</code> variable to
            enable support for languages which can be evaluated in Org mode
            buffers.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 14.7 (info "(org)Languages")</span>

  (leuven--section <span style="color: #036A07;">"14.7 (org)Languages"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> Test executable-find (of Rterm, gnuplot, ruby, etc.) before</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">setting language to yes...</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Languages"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">configure Babel to support most languages</span>
    (<span style="color: #0000FF;">if</span> (locate-library <span style=
"color: #036A07;">"ob-shell"</span>)     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">ob-sh renamed on Dec 13th, 2013</span>
        (org-babel-do-load-languages    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">loads org, gnus-sum, etc...</span>
         'org-babel-load-languages
         '((R          . t)             <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">requires R and ess-mode</span>
           (awk        . t)
           (ditaa      . t)             <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">sudo aptitude install openjdk-6-jre</span>
           (dot        . t)
           (emacs-lisp . t)
           <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(latex   . t)             ; shouldn't you use #+begin/end_latex blocks instead?</span>
           (ledger     . t)             <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">requires ledger</span>
           (org        . t)
           (shell      . t)
           (sql        . t)))
      <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> (in the future) message saying "Upgrade to Org 8.3"</span>
      (org-babel-do-load-languages
       'org-babel-load-languages
       '((R          . t)
         (awk        . t)
         (ditaa      . t)
         (dot        . t)
         (emacs-lisp . t)
         <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(latex   . t)</span>
         (ledger     . t)
         (org        . t)
         (sh         . t)
         (sql        . t))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">accented characters on graphics</span>
    (setq org-babel-R-command
          (concat org-babel-R-command <span style=
"color: #036A07;">" --encoding=UTF-8"</span>)))
</pre>
            </div>

            <p><code>screen</code> offers support for interactive terminals.
            Mostly shell scripts. Heavily inspired by <code>eev</code>.</p>

            <p>Eric Schulte believes screen has more of a focus on sustained
            interaction with an interactive terminal.</p>
          </div>
        </div>

        <div id="outline-container-sec-28-13-5" class="outline-4">
          <h4 id="sec-28-13-5">Prettier (or at least fancier) code block
          delimiters</h4>

          <div class="outline-text-4" id="text-28-13-5">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">prettier-org-code-blocks</span> ()
      (interactive)
      (font-lock-add-keywords nil
        '((<span style="color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">\+begin_src</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">"</span>
           (0 (<span style=
"color: #0000FF;">progn</span> (compose-region (match-beginning 1) (match-end 1) ?¦)
                     nil)))
          (<span style="color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">\+end_src</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">"</span>
           (0 (<span style=
"color: #0000FF;">progn</span> (compose-region (match-beginning 1) (match-end 1) ?¦)
                     nil))))))

    (add-hook 'org-mode-hook 'prettier-org-code-blocks)
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-14" class="outline-3">
        <h3 id="sec-28-14">Miscellaneous</h3>

        <div class="outline-text-3" id="text-28-14">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 15 (info "(org)Miscellaneous")</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">from Dan Davison</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-switch-to-org-scratch</span> ()
    <span style=
"color: #008000;">"Switch to a temp Org buffer.  If the region is active, insert it."</span>
    (interactive)
    (<span style="color: #0000FF;">let</span> ((contents (and (region-active-p)
                         (buffer-substring (region-beginning)
                                           (region-end)))))
      (find-file <span style="color: #036A07;">"/tmp/org-scratch.org"</span>)
      (<span style="color: #0000FF;">if</span> contents (insert contents))))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-28-14-1" class="outline-4">
          <h4 id="sec-28-14-1">Ispell</h4>

          <div class="outline-text-4" id="text-28-14-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--org-switch-dictionary</span> ()
    <span style=
"color: #008000;">"Switch language if a `#+LANGUAGE:' Org meta-tag is on top 8 lines."</span>
    (<span style="color: #0000FF;">save-excursion</span>
      (goto-line (1+ 8))
      (<span style="color: #0000FF;">let</span> (lang dict
            (dict-alist '((<span style=
"color: #036A07;">"en"</span> . <span style=
"color: #036A07;">"american"</span>)
                          (<span style=
"color: #036A07;">"fr"</span> . <span style=
"color: #036A07;">"francais"</span>))))
        (<span style=
"color: #0000FF;">when</span> (re-search-backward <span style=
"color: #036A07;">"#\\+LANGUAGE: +</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[[:alpha:]_]*</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">"</span> 1 t)
          (setq lang (match-string 1))
          (setq dict (cdr (assoc lang dict-alist)))
          (<span style="color: #0000FF;">if</span> dict
              (<span style="color: #0000FF;">progn</span>
                (ispell-change-dictionary dict)
                (force-mode-line-update))
            (message <span style=
"color: #036A07;">"No Ispell dictionary for language `</span><span style=
"color: #D0372D;">%s</span><span style=
"color: #036A07;">' (see file `</span><span style=
"color: #D0372D;">%s</span><span style="color: #036A07;">')"</span>
                     lang (file-name-base))
            (sit-for 1.5))))))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">guess dictionary</span>
  (add-hook 'org-mode-hook 'leuven--org-switch-dictionary)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-14-2" class="outline-4">
          <h4 id="sec-28-14-2">Easy templates</h4>

          <div class="outline-text-4" id="text-28-14-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 15.2 (info "(org)Easy Templates")</span>

  (leuven--section <span style=
"color: #036A07;">"15.2 (org)Easy Templates"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Easy Templates"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">keep lower-case (easy templates)</span>
    (setq org-structure-template-alist
          '((<span style="color: #036A07;">"s"</span> <span style=
"color: #036A07;">"#+begin_src ?\n\n#+end_src"</span> <span style=
"color: #036A07;">"&lt;src lang=\"?\"&gt;\n\n&lt;/src&gt;"</span>)
            (<span style="color: #036A07;">"e"</span> <span style=
"color: #036A07;">"#+begin_example\n?\n#+end_example"</span> <span style=
"color: #036A07;">"&lt;example&gt;\n?\n&lt;/example&gt;"</span>)
            (<span style="color: #036A07;">"E"</span> <span style=
"color: #036A07;">"\\begin\{equation\}\n?\n\\end\{equation\}"</span> <span style="color: #036A07;">""</span>) <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">addition!</span>
            (<span style="color: #036A07;">"q"</span> <span style=
"color: #036A07;">"#+begin_quote\n?\n#+end_quote"</span> <span style=
"color: #036A07;">"&lt;quote&gt;\n?\n&lt;/quote&gt;"</span>)
            (<span style="color: #036A07;">"v"</span> <span style=
"color: #036A07;">"#+begin_verse\n?\n#+end_verse"</span> <span style=
"color: #036A07;">"&lt;verse&gt;\n?\n&lt;/verse&gt;"</span>)
            (<span style="color: #036A07;">"c"</span> <span style=
"color: #036A07;">"#+begin_center\n?\n#+end_center"</span> <span style=
"color: #036A07;">"&lt;center&gt;\n?\n&lt;/center&gt;"</span>)
            (<span style="color: #036A07;">"l"</span> <span style=
"color: #036A07;">"#+begin_latex\n?\n#+end_latex"</span> <span style=
"color: #036A07;">"&lt;literal style=\"latex\"&gt;\n?\n&lt;/literal&gt;"</span>)
            (<span style="color: #036A07;">"L"</span> <span style=
"color: #036A07;">"#+latex: "</span> <span style=
"color: #036A07;">"&lt;literal style=\"latex\"&gt;?&lt;/literal&gt;"</span>)
            (<span style="color: #036A07;">"h"</span> <span style=
"color: #036A07;">"#+begin_html\n?\n#+end_html"</span> <span style=
"color: #036A07;">"&lt;literal style=\"html\"&gt;\n?\n&lt;/literal&gt;"</span>)
            (<span style="color: #036A07;">"H"</span> <span style=
"color: #036A07;">"#+html: "</span> <span style=
"color: #036A07;">"&lt;literal style=\"html\"&gt;?&lt;/literal&gt;"</span>)
            (<span style="color: #036A07;">"a"</span> <span style=
"color: #036A07;">"#+begin_ascii\n?\n#+end_ascii"</span>)
            (<span style="color: #036A07;">"A"</span> <span style=
"color: #036A07;">"#+ascii: "</span>)
            (<span style="color: #036A07;">"i"</span> <span style=
"color: #036A07;">"#+index: ?"</span> <span style=
"color: #036A07;">"#+index: ?"</span>)
            (<span style="color: #036A07;">"I"</span> <span style=
"color: #036A07;">"#+include: %file ?"</span> <span style=
"color: #036A07;">"&lt;include file=%file markup=\"?\"&gt;"</span>)))

    (add-to-list 'org-structure-template-alist
                 '(<span style="color: #036A07;">"C"</span> <span style=
"color: #036A07;">"#+begin_comment\n?\n#+end_comment"</span>)))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-14-3" class="outline-4">
          <h4 id="sec-28-14-3">Speed keys</h4>

          <div class="outline-text-4" id="text-28-14-3">
            <p>Activate single letter commands (for example, outline navigation
            with <code>f</code>, <code>b</code>, <code>n</code>, and
            <code>p</code>) at beginning of a headline:</p>

            <dl class="org-dl">
              <dt><code>f</code></dt>

              <dd><code>org-forward-same-level</code>.</dd>

              <dt><code>b</code></dt>

              <dd><code>org-backward-same-level</code>.</dd>

              <dt><code>n</code></dt>

              <dd><code>outline-next-visible-heading</code>.</dd>

              <dt><code>p</code></dt>

              <dd><code>outline-previous-visible-heading</code>.</dd>
            </dl>

            <p>For navigating blocks:</p>

            <dl class="org-dl">
              <dt>F</dt>

              <dd><code>org-next-block</code>.</dd>

              <dt>B</dt>

              <dd><code>org-previous-block</code>.</dd>
            </dl>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 15.3 (info "(org)Speed keys")</span>

  (leuven--section <span style="color: #036A07;">"15.3 (org)Speed keys"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Speek keys"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">activate single letter commands at beginning of a headline</span>
    (setq org-use-speed-commands t)

    (add-to-list 'org-speed-commands-user '(<span style=
"color: #036A07;">"d"</span> org-todo <span style=
"color: #036A07;">"DONE"</span>))
    (add-to-list 'org-speed-commands-user '(<span style=
"color: #036A07;">"y"</span> org-todo-yesterday <span style=
"color: #036A07;">"DONE"</span>)))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-14-4" class="outline-4">
          <h4 id="sec-28-14-4">Code evaluation and security issues</h4>

          <div class="outline-text-4" id="text-28-14-4">
            <p>For security reasons, evaluation is not turned on by
            default.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 15.4 (info "(org)Code evaluation security") issues</span>

  (leuven--section <span style=
"color: #036A07;">"15.4 (org)Code evaluation security issues"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ob-core"</span>

    <span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">!! don't be prompted on every code block evaluation</span>
    (setq org-confirm-babel-evaluate nil))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-14-5" class="outline-4">
          <h4 id="sec-28-14-5">A cleaner outline view</h4>

          <div class="outline-text-4" id="text-28-14-5">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 15.8 A (info "(org)Clean view")</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Clean view"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">15.8 don't skip even levels for the outline</span>
    (setq org-odd-levels-only nil))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-14-6" class="outline-4">
          <h4 id="sec-28-14-6"><a id="ID-366386cb-9c4f-4d61-b676-e742e6277587"
          name="ID-366386cb-9c4f-4d61-b676-e742e6277587"></a>Interaction with
          other packages</h4>

          <div class="outline-text-4" id="text-28-14-6">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 15.10 (info "(org)Interaction")</span>

  (leuven--section <span style=
"color: #036A07;">"15.10 (org)Interaction"</span>)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">maximum level for Imenu access to Org-mode headlines</span>
    (setq org-imenu-depth 3)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">extension of Imenu</span>
    (<span style=
"color: #0000FF;">when</span> (and (fboundp 'org-babel-execute-src-block) <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">`</span><span style="color: #D0372D; font-style: italic;">org-babel</span><span style="color: #8D8D84; font-style: italic;">' has been</span>
                                                      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">loaded</span>
               (fboundp 'try-to-add-imenu)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">imenu</span><span style=
"color: #8D8D84; font-style: italic;">' has been loaded</span>

      (setq org-src-blocks-imenu-generic-expression
            `((<span style=
"color: #036A07;">"Snippets"</span> ,org-babel-src-name-w-name-regexp 2)))

      (add-hook 'org-mode-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  (setq imenu-generic-expression
                        org-src-blocks-imenu-generic-expression))))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">alternative to imenu</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">dan/find-in-buffer</span> ()
      (interactive)
      (<span style="color: #0000FF;">let</span> ((targets
             `((<span style=
"color: #036A07;">"&lt;named src blocks&gt;"</span> . ,org-babel-src-name-regexp)
               (<span style=
"color: #036A07;">"&lt;src block results&gt;"</span> . ,org-babel-result-regexp))))
        (occur
         (cdr
          (assoc
           (completing-read <span style=
"color: #036A07;">"Find: "</span> (mapcar #'car targets)) targets)))
        (other-window 1))))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-14-7" class="outline-4">
          <h4 id="sec-28-14-7">Org-crypt</h4>

          <div class="outline-text-4" id="text-28-14-7">
            <p>Org-crypt provides for encrypting individual entries in an
            otherwise non-encrypted file.</p>

            <p>To later decrypt an entry that’s encrypted, use <code>M-x
            org-decrypt-entry</code> or <code>C-c C-r</code> (fits nicely with
            the meaning of “reveal”).</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">keep my encrypted data (like account passwords) in my Org mode</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">files with a special tag instead</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Crypt"</span>)

    (<span style=
"color: #0000FF;">when</span> (try-require 'org-crypt)      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">loads org, gnus-sum, etc...</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">encrypt all entries before saving</span>
      (org-crypt-use-before-save-magic)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">which tag is used to mark headings to be encrypted</span>
      (setq org-tags-exclude-from-inheritance '(<span style=
"color: #036A07;">"crypt"</span>))))
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-15" class="outline-3">
        <h3 id="sec-28-15">Obsoleted syntax (since Org 7.8)</h3>

        <div class="outline-text-3" id="text-28-15">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">function to update Org mode buffers to use the new code block</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">syntax (switch between versions 7.7 and 7.8)</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">update-org-buffer</span> ()
    <span style=
"color: #008000;">"Update an Org mode buffer to the new data, code block and call line syntax."</span>
    (interactive)
    (<span style="color: #0000FF;">save-excursion</span>
      (flet ((to-re (lst) (concat <span style=
"color: #036A07;">"^[ \t]*#\\+"</span> (regexp-opt lst t)
                                  <span style=
"color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">\\[</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[[:alnum:]]+</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">\\]</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">?\\:[ \t]*"</span>))
             (update (re new)
                     (goto-char (point-min))
                     (<span style=
"color: #0000FF;">while</span> (re-search-forward re nil t)
                       (replace-match new nil nil nil 1))))
        (<span style=
"color: #0000FF;">let</span> ((old-re (to-re '(<span style="color: #036A07;">"RESULTS"</span> <span style="color: #036A07;">"DATA"</span> <span style="color: #036A07;">"SRCNAME"</span> <span style="color: #036A07;">"SOURCE"</span>)))
              (lob-re (to-re '(<span style="color: #036A07;">"LOB"</span>)))
              (case-fold-search t))
          (update old-re <span style="color: #036A07;">"name"</span>)
          (update lob-re <span style="color: #036A07;">"call"</span>)))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-16" class="outline-3">
        <h3 id="sec-28-16">Other</h3>

        <div class="outline-text-3" id="text-28-16">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't pad tangled code with newlines</span>
  (setq org-babel-tangle-pad-newline nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">how to combine blocks of the same name during tangling</span>
  (setq org-babel-tangle-named-block-combination 'append)


  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">minimum number of lines for output *block* (placed in a</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">#+begin_example...#+end_example) vs. output marked as literal by</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">inserting a *colon* at the beginning of the lines</span>
  (setq org-babel-min-lines-for-block-output 2)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> Make this the default behavior</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; grab the last line too, when selecting a subtree</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(org-end-of-subtree nil t)</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">backend aware export preprocess hook</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--org-export-preprocess-hook</span> ()
    <span style=
"color: #008000;">"Backend-aware export preprocess hook."</span>
    (<span style="color: #0000FF;">save-excursion</span>
      (<span style=
"color: #0000FF;">when</span> (eq org-export-current-backend 'latex)
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ignoreheading tag for bibliographies and appendices</span>
        (<span style="color: #0000FF;">let*</span> ((tag <span style=
"color: #036A07;">"ignoreheading"</span>))
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(goto-char (point-min))</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(while (re-search-forward (concat ":" tag ":") nil t)</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(delete-region (point-at-bol) (point-at-eol)))</span>
          (org-map-entries
           (<span style="color: #0000FF;">lambda</span> ()
             (delete-region (point-at-bol) (point-at-eol)))
           (concat <span style="color: #036A07;">":"</span> tag <span style=
"color: #036A07;">":"</span>))))
      (<span style=
"color: #0000FF;">when</span> (eq org-export-current-backend 'html)
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">set custom css style class based on matched tag</span>
        (<span style="color: #0000FF;">let*</span> ((match <span style=
"color: #036A07;">"Qn"</span>))
          (org-map-entries
           (<span style="color: #0000FF;">lambda</span> ()
             (org-set-property <span style=
"color: #036A07;">"HTML_CONTAINER_CLASS"</span> <span style=
"color: #036A07;">"inlinetask"</span>))
           match)))))

  (add-hook 'org-export-preprocess-hook 'leuven--org-export-preprocess-hook)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">insert-one-equal-or-two</span> ()
    (interactive)
    (<span style="color: #0000FF;">cond</span>
     ((or (bolp) (not (looking-back <span style="color: #036A07;">"="</span>)))
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insert just one =</span>
      (self-insert-command 1))
     ((<span style="color: #0000FF;">save-excursion</span>
        (backward-char)
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Skip symbol backwards.</span>
        (and (not (zerop (skip-syntax-backward <span style=
"color: #036A07;">"w_"</span>)))
             (not (looking-back <span style="color: #036A07;">"="</span>))
             (or (insert-and-inherit <span style=
"color: #036A07;">"="</span>) t))))
     (t
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insert == around following symbol</span>
      (delete-backward-char 1)
      (<span style="color: #0000FF;">unless</span> (looking-back <span style=
"color: #036A07;">"="</span>) (insert-and-inherit <span style=
"color: #036A07;">"="</span>))
      (<span style="color: #0000FF;">save-excursion</span>
        (skip-syntax-forward <span style="color: #036A07;">"w_"</span>)
        (<span style="color: #0000FF;">unless</span> (looking-at <span style=
"color: #036A07;">"="</span>) (insert-and-inherit <span style=
"color: #036A07;">"="</span>))))))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">must be in eval-after-load "org"?</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(define-key org-mode-map</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "=") 'insert-one-equal-or-two)</span>
</pre>
          </div>

          <p>Export the current subtree into an email body, using
          <b>properties</b> to populate the mail message:</p>

          <ul class="org-ul">
            <li><code>MAIL_SUBJECT</code> or subtree heading -&gt;
            “Subject”</li>

            <li><code>MAIL_TO</code> -&gt; “To”</li>

            <li><code>MAIL_CC</code> -&gt; “Cc</li>

            <li><code>MAIL_BCC</code> -&gt; “BCc”</li>

            <li><code>MAIL_FMT</code> -&gt; determines the format of the email
            (e.g., <code>org</code> by default, <code>ascii</code> or
            <code>html</code>)</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style="color: #036A07;">"... Org Mime"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">using Org mode to send buffer/subtree per mail</span>
    (<span style="color: #0000FF;">when</span> (try-require 'org-mime)

      (add-hook 'org-mode-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  (local-set-key
                    (kbd <span style=
"color: #036A07;">"C-c m"</span>) 'org-mime-subtree)))

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-mail-subtree</span> ()
        (interactive)
        (org-agenda-goto)
        (org-mime-subtree))

      (add-hook 'org-agenda-mode-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  (local-set-key
                    (kbd <span style=
"color: #036A07;">"C-c m"</span>) 'leuven-mail-subtree)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add a `</span><span style=
"color: #D0372D; font-style: italic;">mail_composed</span><span style=
"color: #8D8D84; font-style: italic;">' property with the current time when</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">org-mime-subtree</span><span style=
"color: #8D8D84; font-style: italic;">' is called</span>
      (add-hook 'org-mime-send-subtree-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  (org-entry-put (point) <span style=
"color: #036A07;">"mail_composed"</span>
                                 (current-time-string))))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-17" class="outline-3">
        <h3 id="sec-28-17">A.3 Adding hyperlink types</h3>

        <div class="outline-text-3" id="text-28-17">
          <p>For more flexibility, you can use a URL-like syntax which could
          then export conditionally on the output format.</p>

          <p>See <a href=
          "http://orgmode.org/worg/org-tutorials/org-latex-export.html#sec-10-3">
          http://orgmode.org/worg/org-tutorials/org-latex-export.html#sec-10-3</a></p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** A.3 (info "(org)Adding hyperlink types")</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style=
"color: #036A07;">"... Org Adding hyperlink types"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">define a new link type (`</span><span style="color: #D0372D; font-style: italic;">latex</span><span style="color: #8D8D84; font-style: italic;">') whose path argument can hold the name of</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">any LaTeX command</span>
    (org-add-link-type
     <span style="color: #036A07;">"latex"</span> nil
     (<span style="color: #0000FF;">lambda</span> (path desc format)
       (<span style="color: #0000FF;">cond</span>
        ((eq format 'html)
         (format <span style=
"color: #036A07;">"&lt;span class=\"%s\"&gt;%s&lt;/span&gt;"</span> path desc))
        ((eq format 'latex)
         (format <span style="color: #036A07;">"\\%s{%s}"</span> path desc)))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add background color by using custom links like [[bgcolor:red][</span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">Warning</span><span style="color: #8D8D84; font-style: italic;">!]]</span>
    (org-add-link-type
      <span style="color: #036A07;">"bgcolor"</span> nil
      (<span style="color: #0000FF;">lambda</span> (path desc format)
       (<span style="color: #0000FF;">cond</span>
        ((eq format 'html)
         (format <span style=
"color: #036A07;">"&lt;span style=\"background-color:%s;\"&gt;%s&lt;/span&gt;"</span> path desc))
        ((eq format 'latex)
         (format <span style=
"color: #036A07;">"\\colorbox{%s}{%s}"</span> path desc))
        (t
         (format <span style=
"color: #036A07;">"BGCOLOR LINK (%s): {%s}{%s}"</span> format path desc))))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-18" class="outline-3">
        <h3 id="sec-28-18">A.5 Tables and lists in arbitrary syntax</h3>

        <div class="outline-text-3" id="text-28-18">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-send-all-buffer-tables</span> ()
    <span style=
"color: #008000;">"Export all Org tables of the LaTeX document to their corresponding LaTeX tables."</span>
     (interactive)
     (org-table-map-tables
        (<span style=
"color: #0000FF;">lambda</span> () (orgtbl-send-table 'maybe))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-19" class="outline-3">
        <h3 id="sec-28-19">A.6 Dynamic blocks</h3>

        <div class="outline-text-3" id="text-28-19">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** A.6 (info "(org)Dynamic blocks")</span>

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org"</span>
    (message <span style=
"color: #036A07;">"... Org Update dynamic blocks and tables"</span>)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-org-update-buffer</span> ()
      <span style=
"color: #008000;">"Update all dynamic blocks and all tables in the buffer."</span>
      (interactive)
      (<span style="color: #0000FF;">when</span> (eq major-mode 'org-mode)
        (message <span style=
"color: #036A07;">"(Info) Update Org buffer %s"</span>
                 (file-name-nondirectory (buffer-file-name)))
        (sit-for 1.5)
        (<span style=
"color: #0000FF;">let</span> ((flyspell-mode-before-save flyspell-mode))
          (flyspell-mode -1)              <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">temporarily disable Flyspell to</span>
                                          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">avoid checking the following</span>
                                          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">modifications of the buffer</span>
          (org-align-all-tags)
          (org-update-all-dblocks)
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(when (fboundp 'org-table-iterate-buffer-tables)</span>
          (org-table-iterate-buffer-tables)
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">)</span>
          (<span style=
"color: #0000FF;">when</span> (file-exists-p (buffer-file-name (current-buffer)))
            (leuven-org-remove-redundant-tags))
          (<span style=
"color: #0000FF;">when</span> flyspell-mode-before-save (flyspell-mode 1)))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make sure that all dynamic blocks and all tables are always</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">up-to-date</span>
    (add-hook 'before-save-hook 'leuven-org-update-buffer)
    (message <span style=
"color: #036A07;">"Add leuven-org-update-buffer to before-save-hook  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;"</span>))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-28-20" class="outline-3">
        <h3 id="sec-28-20">Org-contrib</h3>

        <div class="outline-text-3" id="text-28-20"></div>

        <div id="outline-container-sec-28-20-1" class="outline-4">
          <h4 id="sec-28-20-1">Org-effectiveness</h4>

          <div class="outline-text-4" id="text-28-20-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(with-eval-after-load "org"</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(message "... Org Effectiveness")</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(when (try-require 'org-effectiveness)</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'org-mode-hook</span>
  <span style="color: #8D8D84;">;;               </span><span style=
"color: #8D8D84; font-style: italic;">(lambda ()</span>
  <span style="color: #8D8D84;">;;                 </span><span style=
"color: #8D8D84; font-style: italic;">(org-effectiveness-count-todo)</span>
  <span style="color: #8D8D84;">;;                 </span><span style=
"color: #8D8D84; font-style: italic;">(sit-for 0.2)))))</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-28-20-2" class="outline-4">
          <h4 id="sec-28-20-2">Org-notmuch</h4>

          <div class="outline-text-4" id="text-28-20-2">
            <p>Link emails from Org files.</p>
          </div>
        </div>

        <div id="outline-container-sec-28-20-3" class="outline-4">
          <h4 id="sec-28-20-3">Google Weather</h4>

          <div class="outline-text-4" id="text-28-20-3">
            <pre class="example">
* Weather
  :PROPERTIES:
  :CATEGORY: Weather
  :END:

%%(org-google-weather "Lille" "en-gb")
</pre>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add weather forecast in your Org agenda</span>
    (autoload 'org-google-weather <span style=
"color: #036A07;">"org-google-weather"</span>
      <span style=
"color: #008000;">"Return Org entry with the weather for LOCATION in LANGUAGE."</span> t)

    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"org-google-weather"</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(try-require 'url)</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add the city</span>
      (setq org-google-weather-format <span style=
"color: #036A07;">"%C %i %c, %l°-%h°"</span>)))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 25.9-org-mode ends here</span>
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-29" class="outline-2">
      <h2 id="sec-29">TeX</h2>

      <div class="outline-text-2" id="text-29">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 25.10 (info "(emacs)TeX Mode")</span>

(leuven--chapter leuven-chapter-25.10-tex-mode <span style=
"color: #036A07;">"25.10 TeX Mode"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-29-1" class="outline-3">
        <h3 id="sec-29-1">Native TeX Mode</h3>

        <div class="outline-text-3" id="text-29-1">
          <dl class="org-dl">
            <dt>(la)tex-mode</dt>

            <dd>Default Emacs built-in (La)TeX mode (menu <code>TeX</code>;
            text <code>LaTeX</code> displayed in the mode line).</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (leuven--section <span style=
"color: #036A07;">"25.10 (emacs)TeX Mode"</span>)
</pre>
          </div>

          <p>Under Windows, in the <b>native</b> TeX mode,
          <code>shell-file-name</code> must be <code>cmdproxy.exe</code>
          to:</p>

          <ul class="org-ul">
            <li>avoid the error “comint-send-string: writing to process:
            invalid argument, tex-shell”, and</li>

            <li>properly quote <code>tex-start-commands</code>.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">get colored PDFLaTeX output</span>
  (<span style="color: #0000FF;">define-derived-mode</span> <span style=
"color: #006699;">latex-output-mode</span> fundamental-mode <span style=
"color: #036A07;">"LaTeX-Output"</span>
    <span style=
"color: #008000;">"Simple mode for colorizing LaTeX output."</span>
    (set (make-local-variable 'font-lock-defaults)
         '(((<span style="color: #036A07;">"^!.*"</span> .
             compilation-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span>-face)    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">LaTeX </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span>
            (<span style="color: #036A07;">"^-+$"</span> .
             compilation-info-face)     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Latexmk separator</span>
            (<span style="color: #036A07;">"^Package .* </span><span style=
"color: #CC0000; background-color: #FFFF88;">Warning</span><span style=
"color: #036A07;">: .*"</span> .
             compilation-<span style=
"color: #CC0000; background-color: #FFFF88;">warning</span>-face)
            (<span style="color: #036A07;">"Reference .* undefined"</span> .
             compilation-<span style=
"color: #CC0000; background-color: #FFFF88;">warning</span>-face)
            (<span style="color: #036A07;">"^</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(?:</span><span style=
"color: #036A07;">Overfull</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">Underfull</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">Tight</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">Loose</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">.*"</span> .
             font-lock-string-face)
            (<span style="color: #036A07;">"^LaTeX Font </span><span style=
"color: #CC0000; background-color: #FFFF88;">Warning</span><span style=
"color: #036A07;">:"</span> .
             font-lock-string-face)
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">...</span>
            ))))

  (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">TeX-recenter-output-buffer</span>
    (after leuven-colorize-latex-output activate)
    (<span style=
"color: #0000FF;">with-selected-window</span> (get-buffer-window (TeX-active-buffer))
      (latex-output-mode)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-29-2" class="outline-3">
        <h3 id="sec-29-2">AUCTeX</h3>

        <div class="outline-text-3" id="text-29-2">
          <dl class="org-dl">
            <dt>(La)TeX-mode</dt>

            <dd>AUCTeX (menus <code>Preview</code>, <code>LaTeX</code>,
            <code>Command</code> and <code>Ref</code>; text
            <code>LaTeX/P</code> displayed in the mode line).</dd>
          </dl>

          <p>AUCTeX supports TeX and extensions such as LaTeX. For LaTeX, there
          is a (major) <code>LaTeX-mode</code> in AUCTeX which runs (in this
          order):</p>

          <ol class="org-ol">
            <li><code>text-mode-hook</code>, then</li>

            <li><code>TeX-mode-hook</code>, and then</li>

            <li>a hook <code>LaTeX-mode-hook</code> special to the LaTeX
            mode.</li>
          </ol>

          <p>If you need to make a customization via a hook which is only
          relevant for the LaTeX mode, put it into the
          <code>LaTeX-mode-hook</code>; if it is relevant for any AUCTeX mode,
          add it to <code>TeX-mode-hook</code> and if it is relevant for all
          text modes, append it to <code>text-mode-hook</code>.</p>

          <p>AUCTeX defines the <code>tex-mode.el</code> mode names as alias of
          its own modes: it aliases <code>(la)tex-mode</code> to
          <code>(La)TeX-mode</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (leuven--section <span style=
"color: #036A07;">"25.10 (emacs)AUCTeX Mode"</span>)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 1.2 (info "(auctex)Installation") of AUCTeX</span>

  (try-require 'tex-site)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">support for LaTeX documents</span>
  (GNUEmacs
    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"latex"</span>
</pre>
          </div>

          <p>You can detect the <b>successful activation of AUCTeX</b>: after
          loading a LaTeX file, AUCTeX gives you a <code>Command</code>
          menu.</p>

          <ul class="org-ul">
            <li>Press <code>C-c C-c File &lt;RET&gt; &lt;RET&gt;</code> to run
            <code>dvips</code> (note that the command is <code>File</code> and
            not <code>Dvips</code> as one might expect)</li>

            <li>Press <code>C-c C-c Print &lt;RET&gt; &lt;RET&gt;</code> to run
            <code>GSview</code> (also somewhat misleading name)</li>

            <li>If you want to print the document, do it from
            <code>GSview</code>.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; LaTeX-sensitive spell checking</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'tex-mode-hook</span>
      <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">(lambda ()</span>
      <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">(make-local-variable 'ispell-parser)</span>
      <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">(setq ispell-parser 'tex)))</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 2.6 (info "(auctex)Completion")</span>

      (leuven--section <span style=
"color: #036A07;">"2.6 (auctex)Completion"</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">if this is non-nil when AUCTeX is loaded, the TeX escape</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">character `\' will be bound to `</span><span style="color: #D0372D; font-style: italic;">TeX-electric-macro</span><span style="color: #8D8D84; font-style: italic;">'</span>
      (setq TeX-electric-escape t)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 2.8 (info "(auctex)Indenting")</span>

      (leuven--section <span style=
"color: #036A07;">"2.8 (auctex)Indenting"</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">leave the `</span><span style=
"color: #D0372D; font-style: italic;">tikzpicture</span><span style=
"color: #8D8D84; font-style: italic;">' code unfilled when doing `</span><span style="color: #D0372D; font-style: italic;">M-q</span><span style="color: #8D8D84; font-style: italic;">'</span>
      (add-to-list 'LaTeX-indent-environment-list '(<span style=
"color: #036A07;">"tikzpicture"</span>))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">auto-indentation (suggested by the AUCTeX manual -- instead of</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">adding a local key binding to `</span><span style="color: #D0372D; font-style: italic;">&lt;RET&gt;</span><span style="color: #8D8D84; font-style: italic;">' in the `</span><span style="color: #D0372D; font-style: italic;">LaTeX-mode-hook</span><span style="color: #8D8D84; font-style: italic;">')</span>
      (setq TeX-newline-function 'newline-and-indent)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 3 Controlling Screen (info "(auctex)Display")</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 3.1 (info "(auctex)Font Locking")</span>

      (leuven--section <span style=
"color: #036A07;">"3.1 (auctex)Font Locking"</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(for Org mode) add the `</span><span style="color: #D0372D; font-style: italic;">comment</span><span style="color: #8D8D84; font-style: italic;">' environment to the variable</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">LaTeX-verbatim-environments</span><span style="color: #8D8D84; font-style: italic;">' so that, if the `#+TBLFM' line</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">contains an odd number of dollar characters, this does not</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">cause problems with font-lock in LaTeX-mode</span>
      (add-to-list 'LaTeX-verbatim-environments <span style=
"color: #036A07;">"comment"</span>)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4.1 Executing (info "(auctex)Commands")</span>

      (leuven--section <span style=
"color: #036A07;">"4.1 Executing (auctex)Commands"</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add a command to execute on the LaTeX document</span>
      (add-to-list 'TeX-command-list
                   '(<span style=
"color: #036A07;">"XeLaTeX"</span> <span style="color: #036A07;">"%`xelatex%(mode)%' %t"</span> TeX-run-TeX nil t))

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--LaTeX-mode-hook</span> ()
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default command to run in the LaTeX buffer</span>
        (setq TeX-command-default
              (<span style="color: #0000FF;">save-excursion</span>
                (<span style="color: #0000FF;">save-restriction</span>
                  (widen)
                  (goto-char (point-min))
                  (<span style="color: #0000FF;">let</span> ((re (concat
                             <span style=
"color: #036A07;">"^\\s-*\\\\usepackage</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(?:</span><span style=
"color: #036A07;">\\[.*\\]</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">?"</span>
                             <span style=
"color: #036A07;">"{.*\\&lt;</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(?:</span><span style=
"color: #036A07;">font</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">math</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">spec\\&gt;.*}"</span>)))
                    (<span style="color: #0000FF;">save-match-data</span>
                      (<span style=
"color: #0000FF;">if</span> (re-search-forward re 3000 t)
                          <span style="color: #036A07;">"XeLaTeX"</span>
                        <span style="color: #036A07;">"LaTeX"</span>)))))))

      (add-hook 'LaTeX-mode-hook 'leuven--LaTeX-mode-hook)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't ask user for permission to save files before starting TeX</span>
      (setq TeX-save-query nil)

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">TeX-default</span> ()
        <span style=
"color: #008000;">"Choose the default command from `C-c C-c'."</span>
        (interactive)
        (TeX-save-document <span style=
"color: #036A07;">""</span>)          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">or just use `</span><span style=
"color: #D0372D; font-style: italic;">TeX-save-query</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
        (execute-kbd-macro (kbd <span style=
"color: #036A07;">"C-c C-c RET"</span>)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">rebind the "compile command" to default command from `C-c C-c'</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(in LaTeX mode only)</span>
      (define-key LaTeX-mode-map
        (kbd <span style="color: #036A07;">"&lt;f9&gt;"</span>) 'TeX-default)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use PDF mode by default (instead of DVI)</span>
      (setq-default TeX-PDF-mode t)
</pre>
          </div>

          <p>A decent viewer reloads the PDF automatically when the file has
          changed while staying on the same page (no need to close &amp;
          reopen).</p>

          <p>Support for forward search with PDF files means that the viewer
          jumps to the page in the output file corresponding to the position in
          the source file. Currently, this only works if you use the pdfsync
          LaTeX package and xpdf or SumatraPDF as your PDF viewer.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4.2 (info "(auctex)Viewing") the formatted output</span>

      (leuven--section <span style=
"color: #036A07;">"4.2 (auctex)Viewing the formatted output"</span>)

      (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">sumatrapdf-command</span>
        (concat windows-program-files-dir <span style=
"color: #036A07;">"SumatraPDF/SumatraPDF.exe"</span>)
        <span style=
"color: #008000;">"Path to the SumatraPDF executable."</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use a saner PDF viewer (evince, SumatraPDF)</span>
      (setcdr (assoc <span style=
"color: #036A07;">"^pdf$"</span> TeX-output-view-style)
              (<span style="color: #0000FF;">cond</span> (running-ms-windows
                     `(<span style=
"color: #036A07;">"."</span> (concat <span style=
"color: #036A07;">"\""</span> ,sumatrapdf-command <span style=
"color: #036A07;">"\" %o"</span>)))
                    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">under Windows, we could open the PDF file with</span>
                    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`start "" xxx.pdf' (in a command prompt)</span>
                    (t
                     '(<span style="color: #036A07;">"."</span> <span style=
"color: #036A07;">"evince %o"</span>))))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">for AUCTeX 11.86+</span>
      (<span style=
"color: #0000FF;">when</span> (boundp 'TeX-view-program-list)
        (add-to-list 'TeX-view-program-list
                     `(<span style="color: #036A07;">"SumatraPDF"</span>
                       (concat <span style=
"color: #036A07;">"\""</span> ,sumatrapdf-command <span style=
"color: #036A07;">"\" %o"</span>))))

      (<span style="color: #0000FF;">when</span> running-ms-windows
        (setcdr (assoc 'output-pdf TeX-view-program-selection)
                '(<span style="color: #036A07;">"SumatraPDF"</span>)))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4.3 (info "(auctex)Debugging") Catching the </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s</span>

      (leuven--section <span style=
"color: #036A07;">"4.3 (auctex)Debugging Catching the </span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #036A07;">s"</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't show output of TeX compilation in other window</span>
      (setq TeX-show-compilation nil)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4.7 (info "(auctex)Documentation")</span>
</pre>
          </div>

          <p><code>C-c ?</code> (or <code>M-x TeX-doc</code>) displays
          documentation for a package.</p>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%">
                <b>TeX-doc does not provide a list of available keywords for
                completion</b><br />

                <p>Nor a default when point is on a command name…</p>
              </td>
            </tr>
          </table>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 5.2 (info "(auctex)Multifile") Documents</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">assume that the file is a master file itself</span>
      (setq-default TeX-master t)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 5.3 Automatic (info "(auctex)Parsing Files")</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable parse on load (if no style hook is found for the file)</span>
      (setq TeX-parse-self t)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable automatic save of parsed style information when saving</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the buffer</span>
      (setq TeX-auto-save t)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 5.5 (info "(auctex)Automatic") Customization</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Add beamer.el to TeX-style-path</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 5.5.1 (info "(auctex)Automatic Global") Customization for the Site</span>

      (leuven--section <span style=
"color: #036A07;">"5.5.1 (auctex)Automatic Global Customization for the Site"</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">directory containing automatically generated TeX information</span>
      (setq TeX-auto-global
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">must end with a slash</span>
            <span style=
"color: #036A07;">"~/.emacs.d/auctex-auto-generated-info/"</span>)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 5.5.3 (info "(auctex)Automatic Local") Customization for a Directory</span>

      (leuven--section <span style=
"color: #036A07;">"5.5.3 (auctex)Automatic Local Customization for a Directory"</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">directory containing automatically generated TeX information</span>
      (setq TeX-auto-local <span style=
"color: #036A07;">"~/.emacs.d/auctex-auto-generated-info/"</span>)
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">must end with a slash</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-29-3" class="outline-3">
        <h3 id="sec-29-3">Preview-LaTeX</h3>

        <div class="outline-text-3" id="text-29-3">
          <p>You can detect the successful activation of
          <code>preview-latex</code>: after loading a LaTeX file,
          <code>preview-latex</code> gives you a <code>Preview</code> menu.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(preview-latex)Top")</span>

      (leuven--section <span style=
"color: #036A07;">"(preview-latex)Top"</span>)

      (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"preview"</span>

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">path to `</span><span style=
"color: #D0372D; font-style: italic;">gs</span><span style=
"color: #8D8D84; font-style: italic;">' command (for format conversions)</span>
        (setq preview-gs-command
          (<span style="color: #0000FF;">cond</span> (running-ms-windows
                 (or (executable-find <span style=
"color: #036A07;">"gswin32c.exe"</span>)
                     <span style=
"color: #036A07;">"C:/texlive/2013/tlpkg/tlgs/bin/gswin32c.exe"</span>)) <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">default value</span>
                (t
                 <span style="color: #036A07;">"/usr/bin/gs"</span>)))
        (leuven--file-exists-and-executable-p preview-gs-command)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">scale factor for included previews</span>
        (setq preview-scale-function 1.2))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-29-4" class="outline-3">
        <h3 id="sec-29-4">RefTeX</h3>

        <div class="outline-text-3" id="text-29-4">
          <p>AUCTeX is fantastic, and RefTeX just makes things better.</p>

          <p>To fill in <code>\ref{}</code> and <code>\cite{}</code> commands,
          you can use <code>C-c &amp;</code>
          (<code>reftex-view-crossref</code>).</p>

          <p>A Table of Contents of the entire (multifile) document with
          browsing capabilities is available with <code>C-c =</code>. Hitting
          <code>l</code> there will show all the labels and cites.</p>

          <p>Labels can be created with <code>C-c (</code> and referenced with
          <code>C-c )</code>. When referencing, you get a menu with all labels
          of a given type and context of the label definition. The selected
          label is inserted as a <code>\ref</code> macro.</p>

          <p>Citations can be made with <code>C-c [</code> which will use a
          regular expression to pull out a <b>formatted</b> list of articles
          from your BibTeX database. The selected citation is inserted as a
          <code>\cite</code> macro.</p>

          <p>Index entries can be made with <code>C-c /</code> which indexes
          the word at point or the current selection. More general index
          entries are created with <code>C-c &lt;</code>. <code>C-c &gt;</code>
          displays the compiled index.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      (add-hook 'LaTeX-mode-hook 'turn-on-reftex) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with AUCTeX LaTeX mode</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">minor mode with distinct support for `\label', `\ref', `\cite'</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">and `\index' in LaTeX</span>
      (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"reftex"</span>

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn all plug-ins on</span>
        (setq reftex-plug-into-AUCTeX t)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use a separate selection buffer for each label type -- so the</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">menu generally comes up faster</span>
        (setq reftex-use-multiple-selection-buffers t))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-29-5" class="outline-3">
        <h3 id="sec-29-5">BibTeX</h3>

        <div class="outline-text-3" id="text-29-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      ))                                <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "latex" ends here</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 25.10-tex-mode ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-30" class="outline-2">
      <h2 id="sec-30">SGML and HTML Modes</h2>

      <div class="outline-text-2" id="text-30">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(leuven--chapter leuven-chapter-25-text <span style=
"color: #036A07;">"25 Commands for Human Languages"</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 25.11 (info "(emacs)HTML Mode")</span>

  (leuven--section <span style=
"color: #036A07;">"25.11 (emacs)HTML Mode"</span>)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-30-1" class="outline-3">
        <h3 id="sec-30-1">HTML</h3>

        <div class="outline-text-3" id="text-30-1"></div>

        <div id="outline-container-sec-30-1-1" class="outline-4">
          <h4 id="sec-30-1-1">html-mode</h4>

          <div class="outline-text-4" id="text-30-1-1">
            <p>The default HTML mode, derived from SGML mode (see the HTML and
            SGML menus), works quite well for editing HTML4 documents (whose
            tags don’t have to close).</p>

            <dl class="org-dl">
              <dt><code>C-c C-v</code></dt>

              <dd><b>View</b> your file <b>in your browser</b>
              (<code>browse-url-of-buffer</code>).</dd>

              <dt><code>C-c C-b</code> (or <code>C-c &lt;left&gt;</code>)</dt>

              <dd>Jump to the opening HTML tag
              (<code>sgml-skip-tag-backward</code>).</dd>

              <dt><code>C-c C-f</code> (or <code>C-c &lt;right&gt;</code>)</dt>

              <dd>Jump to the closing HTML tag
              (<code>sgml-skip-tag-forward</code>).</dd>

              <dt><code>C-c TAB</code></dt>

              <dd>Hide all of the angle-bracketed tags in the buffer
              (<code>sgml-tags-invisible</code>). This can be used as a cheap
              <b>preview</b> of <b>just the bare text</b>.</dd>

              <dt><code>C-c /</code></dt>

              <dd><code>sgml-close-tag</code>.</dd>

              <dt><code>C-M-i</code></dt>

              <dd><code>ispell-complete-word</code>.</dd>
            </dl>

            <p>Plug <a href="http://tidy.sourceforge.net/">HTML Tidy</a> with
            <code>tidy.el</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">when</span> (and (locate-library <span style=
"color: #036A07;">"tidy"</span>)
             (executable-find <span style="color: #036A07;">"tidy"</span>))

    (autoload 'tidy-buffer <span style="color: #036A07;">"tidy"</span>
      <span style=
"color: #008000;">"Run Tidy HTML parser on current buffer."</span> t)
    (autoload 'tidy-parse-config-file <span style=
"color: #036A07;">"tidy"</span>
      <span style="color: #008000;">"Parse the `</span><span style=
"color: #D0372D;">tidy-config-file</span><span style=
"color: #008000;">'."</span> t)
    (autoload 'tidy-save-settings <span style="color: #036A07;">"tidy"</span>
      <span style="color: #008000;">"Save settings to `</span><span style=
"color: #D0372D;">tidy-config-file</span><span style=
"color: #008000;">'."</span> t)
    (autoload 'tidy-build-menu  <span style="color: #036A07;">"tidy"</span>
      <span style=
"color: #008000;">"Install an options menu for HTML Tidy."</span> t)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--html-mode-hook</span> ()
      <span style="color: #008000;">"Customize html(-helper)-mode."</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">set up a "tidy" menu in the menu bar</span>
      (<span style="color: #0000FF;">when</span> (boundp 'html-mode-map)
        (tidy-build-menu html-mode-map))
      (<span style="color: #0000FF;">when</span> (boundp 'html-helper-mode-map)
        (tidy-build-menu html-helper-mode-map))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">bind the key sequence `C-c C-c' to `</span><span style="color: #D0372D; font-style: italic;">tidy-buffer</span><span style="color: #8D8D84; font-style: italic;">'</span>
      (local-set-key
        (kbd <span style="color: #036A07;">"C-c C-c"</span>) 'tidy-buffer)

      (setq sgml-validate-command <span style="color: #036A07;">"tidy"</span>))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">also run from `</span><span style=
"color: #D0372D; font-style: italic;">html-helper-mode</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
    (add-hook 'html-mode-hook 'leuven--html-mode-hook))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-30-1-2" class="outline-4">
          <h4 id="sec-30-1-2">html-helper-mode</h4>

          <div class="outline-text-4" id="text-30-1-2">
            <p>You might also want to consider <code>html-helper-mode</code>,
            which has a lot more features than plain
            <code>html-mode</code>:</p>

            <ul class="org-ul">
              <li>autocompletion,</li>

              <li>auto-insertion of closing tags… and</li>

              <li>a lot more.</li>
            </ul>

            <p>When you open a buffer for HTML editing, a didactic HTML menu
            appears, so you can use your mouse to invoke commands.</p>

            <p>Using the prefix-arg (<code>C-u</code>) to relevant HTML tags,
            <code>html-helper-mode</code> will put tags around a region you’ve
            specified.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"html-helper-mode"</span>)

    (autoload 'html-helper-mode <span style=
"color: #036A07;">"html-helper-mode"</span>
      <span style=
"color: #008000;">"Mode for editing HTML documents."</span> t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">invoke html-helper-mode automatically on .html files</span>
    (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.html?\\'"</span> . html-helper-mode))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">invoke html-helper-mode automatically on .asp files</span>
    (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.asp\\'"</span> . html-helper-mode))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">invoke html-helper-mode automatically on .jsp files</span>
    (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.jsp\\'"</span> . html-helper-mode)))
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-30-2" class="outline-3">
        <h3 id="sec-30-2">XHTML</h3>

        <div class="outline-text-3" id="text-30-2">
          <p><a href="#sec-30-3">nXML</a> seems to be the most recommended mode
          to view and edit well-formed <b>XHTML</b> (reformulation of HTML as
          an XML application).</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.xhtml?\\'"</span> . xml-mode)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">alias for `</span><span style=
"color: #D0372D; font-style: italic;">nxml-mode</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
</pre>
          </div>

          <p>Alternatively, you can use <a href=
          "http://ourcomments.org/Emacs/nXhtml/doc/nxhtml.html">nXhtml</a>
          mode, derived from nXML mode. It adds a lot of things useful for
          <b>XHTML</b> files with mixed content:</p>

          <ul class="org-ul">
            <li>handling <b>multiple major modes</b> (Mumamo) in one buffer
            (for CSS, JS, PHP and similar things): get the correct syntax
            highlighting and indentation for each of them,</li>

            <li>folding,</li>

            <li>improved interface to Tidy (?),</li>

            <li>etc.</li>
          </ul>

          <p>Though, it takes a while to load.</p>

          <p>web-mode could be another alternative for editing HTML documents
          embedding CSS/JS.</p>
        </div>
      </div>

      <div id="outline-container-sec-30-3" class="outline-3">
        <h3 id="sec-30-3"><a id="ID-786a2051-476a-4277-82df-d8ebf8ba0e99" name=
        "ID-786a2051-476a-4277-82df-d8ebf8ba0e99"></a>XML</h3>

        <div class="outline-text-3" id="text-30-3">
          <p>nXML mode (default for editing XML files, since GNU Emacs 23.2)
          does:</p>

          <ul class="org-ul">
            <li>real-time <b>validation against a schema in RELAX NG</b>
            (actually RNC, i.e. the “Compact” Syntax): <code>C-c C-n</code>
            (assuming RNG validation is on),</li>

            <li><b>code completion</b> against the RNG schema.</li>
          </ul>

          <p>Some key bindings:</p>

          <dl class="org-dl">
            <dt><code>C-M-p</code></dt>

            <dd>Move backward over one element
            (<code>nxml-backward-element</code>).</dd>

            <dt><code>C-M-n</code></dt>

            <dd>Move forward over one element
            (<code>nxml-forward-element</code>).</dd>

            <dt><code>C-M-u</code></dt>

            <dd>Move up the element structure
            (<code>nxml-backward-up-element</code>).</dd>

            <dt><code>C-M-d</code></dt>

            <dd>Move down the element structure
            (<code>nxml-down-element</code>).</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"nxml-mode"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">remove the binding of `C-c C-x' (`</span><span style="color: #D0372D; font-style: italic;">nxml-insert-xml-declaration</span><span style="color: #8D8D84; font-style: italic;">'), used</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">by Org timeclocking commands</span>
    (define-key nxml-mode-map
      (kbd <span style="color: #036A07;">"C-c C-x"</span>) nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">view the buffer contents in a browser</span>
    (define-key nxml-mode-map
      (kbd <span style=
"color: #036A07;">"C-c C-v"</span>) 'browse-url-of-buffer))
      <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> (normally bound to `</span><span style="color: #D0372D; font-style: italic;">rng-validate-mode</span><span style="color: #8D8D84; font-style: italic;">')</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-30-4" class="outline-3">
        <h3 id="sec-30-4">Highlight the closing tag</h3>

        <div class="outline-text-3" id="text-30-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">highlight the current SGML tag context</span>
  (<span style="color: #0000FF;">when</span> (try-require 'hl-tags-mode)

    (add-hook 'html-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">sgml-mode</span>)
                <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">when `</span><span style=
"color: #D0372D; font-style: italic;">html-mode-hook</span><span style=
"color: #8D8D84; font-style: italic;">' is called from `</span><span style=
"color: #D0372D; font-style: italic;">html-helper-mode</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
                (hl-tags-mode 1)))

    (add-hook 'nxml-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (hl-tags-mode 1))))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 25 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-31" class="outline-2">
      <h2 id="sec-31">Editing Programs</h2>

      <div class="outline-text-2" id="text-31">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 26 Editing (info "(emacs)Programs")</span>

(leuven--chapter leuven-chapter-26-programs <span style=
"color: #036A07;">"26 Editing Programs"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-31-1" class="outline-3">
        <h3 id="sec-31-1">Major Modes for Programming Languages</h3>

        <div class="outline-text-3" id="text-31-1">
          <p>Have a look at:</p>

          <ul class="org-ul">
            <li><a href="http://cedet.sourceforge.net/">CEDET</a> for
            development in AWK, C/C++, C#, Calc, Erlang, Java, Javascript,
            Make, PHP, Python, Ruby and Scheme,</li>

            <li><a href="http://common-lisp.net/project/slime">SLIME</a> for
            Common Lisp development,</li>

            <li>JDEE for Java programs.</li>
          </ul>

          <p>Emacs tool for Emacs Lisp code analysis (to keep overview of the
          function calls and dependecies between functions/variables):
          byte-compile-generate-call-tree</p>

          <p>Also <code>who-calls.el</code></p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 26.1 Major Modes for (info "(emacs)Program Modes")</span>

  (leuven--section <span style=
"color: #036A07;">"26.1 Major Modes for (emacs)Program Modes"</span>)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (autoload 'graphviz-dot-mode <span style=
"color: #036A07;">"graphviz-dot-mode"</span>
    <span style="color: #008000;">"Major mode for the dot language."</span> t)
  (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.dot\\'"</span> . graphviz-dot-mode))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-31-2" class="outline-3">
        <h3 id="sec-31-2">Top-Level Definitions, or Defuns</h3>

        <div class="outline-text-3" id="text-31-2">
          <p>Imenu is a great tool allowing you to go to a function definition,
          but only if the definition is in the buffer you are currently editing
          (it won’t jump and open another file).</p>

          <p>XXX Autoloaded?</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 26.2 Top-Level Definitions, or (info "(emacs)Defuns")</span>

  (leuven--section <span style=
"color: #036A07;">"26.2 Top-Level Definitions, or (emacs)Defuns"</span>)

  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">making buffer indexes as menus</span>
    (<span style=
"color: #0000FF;">when</span> (try-require 'imenu)          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">awesome!</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically add Imenu to the menu bar in /any/ mode that supports it</span>
      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">try-to-add-imenu</span> ()
        (<span style="color: #0000FF;">condition-case</span> nil
            (imenu-add-to-menubar <span style="color: #036A07;">"Imenu"</span>)
          (<span style=
"color: #CC0000; background-color: #FFFF88; font-weight: bold;">error</span> nil)))
      (add-hook 'font-lock-mode-hook 'try-to-add-imenu)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show current function in mode line (based on Imenu)</span>
      (which-func-mode 1)))             <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">~ Stickyfunc mode (in header line)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(try-require 'imenu+)</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-31-3" class="outline-3">
        <h3 id="sec-31-3">Indentation for Programs</h3>

        <div class="outline-text-3" id="text-31-3">
          <p>Changing the “hanginess” of a brace and then reindenting, will not
          move the brace to a different line. For this, you’re better off
          getting an external program like GNU <code>indent</code>, which will
          rearrange brace location, among other things.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 26.3 (info "(emacs)Program Indent")ation</span>

    (leuven--section <span style=
"color: #036A07;">"26.3 (emacs)Program Indentation"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn on auto-fill mode in Lisp modes</span>
    (add-hook 'lisp-mode-hook 'turn-on-auto-fill)
    (add-hook 'emacs-lisp-mode-hook 'turn-on-auto-fill)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">auto-indentation: automatically jump to the "correct" column when</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the &lt;RET&gt; key is pressed while editing a program (act as if you</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">pressed `</span><span style=
"color: #D0372D; font-style: italic;">C-j</span><span style=
"color: #8D8D84; font-style: italic;">')</span>
    (GNUEmacs24
      (add-hook 'prog-mode-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  (local-set-key
                    (kbd <span style=
"color: #036A07;">"&lt;return&gt;"</span>) 'newline-and-indent))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun back-to-indentation-or-beginning ()</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(interactive)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(if (/= (point) (line-beginning-position))</span>
    <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">(beginning-of-line)</span>
    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(back-to-indentation)))</span>
    <span style="color: #8D8D84;">;;</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun align-with-spaces (beg end)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"Align selected using only spaces for whitespace."</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(interactive "r")</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(let ((indent-tabs-mode nil))</span>
    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(align beg end)))</span>

    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"sh-script"</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use the SMIE code for navigation and indentation</span>
      (setq sh-use-smie t))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-31-4" class="outline-3">
        <h3 id="sec-31-4">Commands for Editing with Parentheses</h3>

        <div class="outline-text-3" id="text-31-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 26.4 Commands for Editing with (info "(emacs)Parentheses")</span>

  (leuven--section <span style=
"color: #036A07;">"26.4 Commands for Editing with (emacs)Parentheses"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">jump to matching parenthesis</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">match-paren</span> (arg)
    <span style=
"color: #008000;">"Go to the matching parenthesis, if on a parenthesis."</span>
    (interactive <span style="color: #036A07;">"p"</span>)
    (<span style="color: #0000FF;">cond</span> ((looking-at <span style=
"color: #036A07;">"\\s\("</span>) (forward-list 1) (backward-char 1))
          ((looking-at <span style=
"color: #036A07;">"\\s\)"</span>) (forward-char 1) (backward-list 1))))

  (global-set-key
    (kbd <span style="color: #036A07;">"C-)"</span>) 'match-paren)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">highlight matching paren</span>
  (GNUEmacs
    (show-paren-mode 1)
    (setq show-paren-style 'mixed)
    (setq show-paren-ring-bell-on-mismatch t))
  (XEmacs
    (paren-set-mode 'paren))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">highlight surrounding parentheses</span>
  (GNUEmacs
    (autoload 'highlight-parentheses-mode <span style=
"color: #036A07;">"highlight-parentheses"</span>
      <span style=
"color: #008000;">"Minor mode to highlight the surrounding parentheses."</span> t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'emacs-lisp-mode-hook 'highlight-parentheses-mode)</span>

    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"highlight-parentheses"</span>

      (<span style=
"color: #0000FF;">define-globalized-minor-mode</span> <span style=
"color: #006699;">global-highlight-parentheses-mode</span>
        highlight-parentheses-mode
        (<span style="color: #0000FF;">lambda</span> ()
          (highlight-parentheses-mode t)))
      (global-highlight-parentheses-mode t)

      (setq hl-paren-background-colors
            '(<span style="color: #036A07;">"#FF993F"</span> <span style=
"color: #036A07;">"#B0FF3F"</span> <span style=
"color: #036A07;">"#3FFFB0"</span> <span style=
"color: #036A07;">"#3F99FF"</span>))

      (setq hl-paren-colors
            '(<span style="color: #036A07;">"black"</span> <span style=
"color: #036A07;">"black"</span> <span style=
"color: #036A07;">"black"</span> <span style=
"color: #036A07;">"black"</span>))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-31-5" class="outline-3">
        <h3 id="sec-31-5">Manipulating Comments</h3>

        <div class="outline-text-3" id="text-31-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 26.5 (info "(emacs)Comments")</span>

  (leuven--section <span style="color: #036A07;">"26.5 (emacs)Comments"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">always comments out empty lines</span>
  (setq comment-empty-lines t)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (GNUEmacs
    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">comment-dwim</span> (around leuven-comment activate)
      <span style=
"color: #008000;">"When called interactively with no active region, comment a single line instead."</span>
      (<span style=
"color: #0000FF;">if</span> (or (use-region-p) (not (called-interactively-p)))
          ad-do-it
        (comment-or-uncomment-region (line-beginning-position)
                                     (line-end-position))
        (message <span style="color: #036A07;">"Commented line"</span>))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-31-6" class="outline-3">
        <h3 id="sec-31-6">Documentation Lookup</h3>

        <div class="outline-text-3" id="text-31-6">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 26.6 (info "(emacs)Documentation") Lookup</span>

  (leuven--section <span style=
"color: #036A07;">"26.6 (emacs)Documentation Lookup"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show the function arglist or the variable docstring in the echo area</span>
  (GNUEmacs
    (add-hook 'emacs-lisp-mode-hook 'turn-on-eldoc-mode)
    (add-hook 'lisp-interaction-mode-hook 'turn-on-eldoc-mode)
    (add-hook 'ielm-mode-hook 'turn-on-eldoc-mode))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">highlight the arguments in `</span><span style="color: #D0372D; font-style: italic;">font-lock-variable-name-face</span><span style="color: #8D8D84; font-style: italic;">'</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--frob-eldoc-argument-list</span> (string)
    <span style=
"color: #008000;">"Upcase and fontify STRING for use with `</span><span style=
"color: #D0372D;">eldoc-mode</span><span style="color: #008000;">'."</span>
    (propertize (upcase string)
                'face 'font-lock-variable-name-face))
  (setq eldoc-argument-case 'leuven--frob-eldoc-argument-list)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-31-7" class="outline-3">
        <h3 id="sec-31-7"><a id="ID-a36b1dbd-1d05-4ff2-b19a-167e50c4f1f7" name=
        "ID-a36b1dbd-1d05-4ff2-b19a-167e50c4f1f7"></a>Hideshow minor mode</h3>

        <div class="outline-text-3" id="text-31-7">
          <p>TODO See <a href=
          "http://stackoverflow.com/questions/2399612/why-is-there-no-code-folding-in-emacs">
          http://stackoverflow.com/questions/2399612/why-is-there-no-code-folding-in-emacs</a></p>

          <p>You can have block-oriented <b>folding</b> in programming modes:
          Hideshow distinguishes end-of-block.</p>

          <p><code>hs-minor-mode.el</code> collapses code for a lot of
          languages, not only Lisp. See <a href=
          "#sec-27-5">outline-minor-mode</a> as well.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 26.7 (info "(emacs)Hideshow") minor mode</span>

  (leuven--section <span style=
"color: #036A07;">"26.7 (emacs)Hideshow minor mode"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable hideshow for programming modes</span>
  (add-hook 'prog-mode-hook
            (<span style="color: #0000FF;">lambda</span> ()
              (hs-minor-mode 1)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Especially after changing a couple of those really awkward</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">key bindings with `@' in the middle.</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Changing: C-c @ c-s  to C-c s  (hs-show-block)</span>
  <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">C-c @ c-h  to C-c h  (hs-hide-block)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Seems not to collide with anything when in cperl-mode at least.</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(define-key hs-minor-mode-map (kbd "C-c C-M-h") 'hs-hide-all)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(define-key hs-minor-mode-map (kbd "C-c C-M-s") 'hs-show-all)</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key (kbd "C-c @ @") 'hs-hide-all)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key (kbd "C-c @ @") 'hs-show-all)</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-c @ h"</span>) 'hs-hide-block)
  (global-set-key
    (kbd <span style="color: #036A07;">"C-c @ s"</span>) 'hs-show-block)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">if hideshowvis is not installed, do not attempt to configure it,</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">as this will prevent packages (including hideshowvis itself)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">from compiling</span>
  (<span style="color: #0000FF;">when</span> (and (display-graphic-p)
             (try-require 'hideshowvis))

    (autoload 'hideshowvis-enable <span style=
"color: #036A07;">"hideshowvis"</span>
      <span style="color: #008000;">"Highlight foldable regions."</span> t)

    (autoload 'hideshowvis-minor-mode <span style=
"color: #036A07;">"hideshowvis"</span>
      <span style=
"color: #008000;">"Will indicate regions foldable with hideshow in the fringe."</span> t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable hideshowvis for programming modes</span>
    (add-hook 'prog-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">more syntax definitions</span>
                (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">fold-dwim</span>)
                (hideshowvis-enable)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">+/- fold buttons</span>
    (define-fringe-bitmap 'hs-marker [0 24 24 126 126 24 24 0])

    (<span style="color: #0000FF;">defcustom</span> <span style=
"color: #BA36A5;">hs-fringe-face</span> 'hs-fringe-face
      <span style=
"color: #008000;">"*Specify face used to highlight the fringe on hidden regions."</span>
      <span style="color: #006FE0;">:type</span> 'face
      <span style="color: #006FE0;">:group</span> 'hideshow)

    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">hs-fringe-face</span>
      '((t (<span style="color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 2 <span style=
"color: #006FE0;">:color</span> <span style=
"color: #036A07;">"#808080"</span> <span style=
"color: #006FE0;">:style</span> released-button)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#999999"</span>)))
      <span style=
"color: #008000;">"Face used to highlight the fringe on folded regions"</span>
      <span style="color: #006FE0;">:group</span> 'hideshow)

    (<span style="color: #0000FF;">defcustom</span> <span style=
"color: #BA36A5;">hs-face</span> 'hs-face
      <span style=
"color: #008000;">"*Specify the face to to use for the hidden region indicator"</span>
      <span style="color: #006FE0;">:type</span> 'face
      <span style="color: #006FE0;">:group</span> 'hideshow)

    (<span style="color: #0000FF;">defface</span> <span style=
"color: #BA36A5;">hs-face</span>
      '((t (<span style="color: #006FE0;">:box</span> (<span style=
"color: #006FE0;">:line-width</span> 1 <span style=
"color: #006FE0;">:color</span> <span style="color: #036A07;">"#999999"</span>)
            <span style="color: #006FE0;">:foreground</span> <span style=
"color: #036A07;">"#999999"</span> <span style=
"color: #006FE0;">:background</span> <span style=
"color: #036A07;">"#FFF8C0"</span>)))
      <span style=
"color: #008000;">"Face to hightlight the ... area of hidden regions"</span>
      <span style="color: #006FE0;">:group</span> 'hideshow)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">display-code-line-counts</span> (ov)
      (<span style=
"color: #0000FF;">when</span> (eq 'code (overlay-get ov 'hs))
        (<span style="color: #0000FF;">let*</span> ((marker-string <span style=
"color: #036A07;">"*fringe-dummy*"</span>)
               (marker-length (length marker-string))
               (display-string
                <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(format "(%d)..."</span>
                <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(count-lines (overlay-start ov) (overlay-end ov)))</span>
                <span style="color: #036A07;">"..."</span>))
          (overlay-put ov 'help-echo <span style=
"color: #036A07;">"Hidden text. C-c,= to show"</span>)
          (put-text-property 0 marker-length
                             'display (list 'left-fringe
                                            'hs-marker
                                            'hs-fringe-face)
                             marker-string)
          (overlay-put ov 'before-string marker-string)
          (put-text-property 0 (length display-string)
                             'face 'hs-face display-string)
          (overlay-put ov 'display display-string))))

    (setq hs-set-up-overlay 'display-code-line-counts))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-31-8" class="outline-3">
        <h3 id="sec-31-8"><a id="ID-4b262301-5370-40c6-8da6-019215634e20" name=
        "ID-4b262301-5370-40c6-8da6-019215634e20"></a>Completion for Symbol
        Names</h3>

        <div class="outline-text-3" id="text-31-8">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 26.8 (info "(emacs)Symbol Completion")</span>

  (leuven--section <span style=
"color: #036A07;">"26.8 (emacs)Symbol Completion"</span>)
</pre>
          </div>

          <p>It’s more or less a convention that each language mode binds its
          symbol completion command (<code>completion-at-point</code>) to
          <code>&lt;M-tab&gt;</code>.</p>

          <p>Note that <code>&lt;M-tab&gt;</code> is used by many window
          managers themselves (typically for switching between windows) and is
          not passed to applications.</p>

          <p>In that case, you should:</p>

          <ul class="org-ul">
            <li>type <code>C-M-i</code> (or <code>&lt;escape&gt;
            &lt;tab&gt;</code>) for completion, or</li>

            <li>bind the command normally bound to <code>&lt;M-tab&gt;</code>
            to a key that is convenient for you to hit, such as
            <code>&lt;C-tab&gt;</code>.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">when you hit `</span><span style=
"color: #D0372D; font-style: italic;">&lt;C-tab&gt;</span><span style=
"color: #8D8D84; font-style: italic;">', call the command normally bound to `</span><span style="color: #D0372D; font-style: italic;">&lt;M-tab&gt;</span><span style="color: #8D8D84; font-style: italic;">'</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;C-tab&gt;"</span>)
    (<span style="color: #0000FF;">lambda</span> ()
      (interactive)
      (call-interactively (key-binding (kbd <span style=
"color: #036A07;">"&lt;M-tab&gt;"</span>)))))
</pre>
          </div>

          <p>See also <a href="#sec-34-2">Dabbrev</a>, Emacs’ standard
          autocompletion (on by default).</p>
        </div>
      </div>

      <div id="outline-container-sec-31-9" class="outline-3">
        <h3 id="sec-31-9">Glasses minor mode</h3>

        <div class="outline-text-3" id="text-31-9">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 26.9 (info "(emacs)Glasses") minor mode</span>

  (leuven--section <span style=
"color: #036A07;">"26.9 (emacs)Glasses minor mode"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"glasses"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">face to be put on capitals of an identifier looked through glasses</span>
    (setq glasses-face 'bold)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">string to be displayed as a visual separator in unreadable</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">identifiers</span>
    (setq glasses-separator <span style="color: #036A07;">""</span>))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 26 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-32" class="outline-2">
      <h2 id="sec-32">Compiling and Testing Programs</h2>

      <div class="outline-text-2" id="text-32">
        <p>It is possible to see a warning, while we are programming, if we did
        a mistake: there’s a CWarn mode for C and C++, but I don’t know about
        similar features for Java.</p>

        <p>flymake can compile in the background and colorize lines with
        errors/warnings</p>

        <ul class="org-ul">
          <li><a href=
          "http://flymake.sourceforge.net/">http://flymake.sourceforge.net/</a></li>

          <li><a href=
          "http://www.emacswiki.org/cgi-bin/wiki/JdeeFlymake">http://www.emacswiki.org/cgi-bin/wiki/JdeeFlymake</a></li>
        </ul>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 27 (info "(emacs)Building") Compiling and Testing Programs</span>

(leuven--chapter leuven-chapter-27-building <span style=
"color: #036A07;">"27 Compiling and Testing Programs"</span>

  (autoload 'flymake-mode <span style="color: #036A07;">"flymake"</span>
    <span style=
"color: #008000;">"Toggle on-the-fly syntax checking."</span> t)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"flymake"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">set up `</span><span style=
"color: #D0372D; font-style: italic;">flymake</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">activate-flymake</span> ()
      <span style=
"color: #008000;">"Activate Flymake when real buffer and you have write access."</span>
      (<span style="color: #0000FF;">when</span> (and (buffer-file-name)
                 (file-writable-p buffer-file-name))
        (flymake-mode t)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> add </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s to mode line</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--flymake-show-help</span> ()
      <span style="color: #008000;">"Display the </span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #008000;"> output of the current line in the mode line."</span>
      (<span style=
"color: #0000FF;">when</span> (get-char-property (point) 'flymake-overlay)
        (<span style=
"color: #0000FF;">let</span> ((help (get-char-property (point) 'help-echo)))
          (<span style="color: #0000FF;">if</span> help (message <span style=
"color: #036A07;">"%s"</span> help)))))

    (add-hook 'post-command-hook 'leuven--flymake-show-help))
</pre>
        </div>
      </div>

      <div id="outline-container-sec-32-1" class="outline-3">
        <h3 id="sec-32-1">Running Compilations under Emacs</h3>

        <div class="outline-text-3" id="text-32-1">
          <p>My build command: <code>cd /path/to/Makefile &amp;&amp; make -f
          Makefile</code>.</p>

          <p>You don’t need a <code>Makefile</code> to perform simple tasks,
          because <code>make</code> knows a lot of built in rules out of the
          box. For example, to compile a <code>.c</code> source file
          <code>foo.c</code> into a program <code>foo</code>, all you need is
          say <code>make -k foo</code>, and <code>make</code> will do it even
          without a <code>Makefile</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 27.1 Running (info "(emacs)Compilation")s under Emacs</span>

  (leuven--section <span style=
"color: #036A07;">"27.1 Running (emacs)Compilations under Emacs"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">http://www.emacswiki.org/emacs-en/eproject allows to define projects, and</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">in each project to define menu commands and shortcut keys as you like.</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">For example:</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make (f9)               : `-in src make' OR `</span><span style="color: #D0372D; font-style: italic;">make</span><span style="color: #8D8D84; font-style: italic;">'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">clean (C-f9)            : `rm -vf src/emacs-23.* etc/DOC* &amp;&amp; make clean' OR `make clean'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">run (f8)                : `</span><span style="color: #D0372D; font-style: italic;">src/emacs</span><span style="color: #8D8D84; font-style: italic;">' OR `</span><span style="color: #D0372D; font-style: italic;">./my-program</span><span style="color: #8D8D84; font-style: italic;">'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">stop (C-f8)             : `-e kill-compilation'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">---</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">configure               : `</span><span style="color: #D0372D; font-style: italic;">./configure</span><span style="color: #8D8D84; font-style: italic;">'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">install                 : `echo root-pass | sudo -S make install'</span>


  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">invoke a compiler with the same command as in the last invocation of</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">compile</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
  (autoload 'recompile <span style="color: #036A07;">"compile"</span>
    <span style=
"color: #008000;">"Re-compile the program including the current buffer."</span> t)
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;f9&gt;"</span>) 'recompile)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">scroll the `</span><span style=
"color: #D0372D; font-style: italic;">*compilation*</span><span style=
"color: #8D8D84; font-style: italic;">' buffer window to follow output as it</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">appears</span>
  (setq compilation-scroll-output t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of lines in a compilation window</span>
  (setq compilation-window-height (* 2 5))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; I also don't like that the compilation window sticks around after</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; a successful compile.  After all, most of the time, all I care</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; about is that the compile completed cleanly.  Here's how I make the</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; compilation window go away, only if there was no compilation</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s:</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq compilation-finish-function</span>
  <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">(lambda (buf str)</span>
  <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">(if (string-match "exited abnormally" str)</span>
  <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">;; there were </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s</span>
  <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">(message "Compilation </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s, press C-x ` to visit")</span>
  <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">;; no </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s, make compilation window go away in 0.5 sec</span>
  <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">(run-at-time 0.5 nil 'delete-windows-on buf)</span>
  <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">(message "NO COMPILATION </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">ERROR</span><span style="color: #8D8D84; font-style: italic;">S!"))))</span>


  (GNUEmacs
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">cc-goto-first-</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span>( buffer exit-condition )
      (<span style="color: #0000FF;">with-current-buffer</span> buffer
        (goto-char (point-min))
        (compilation-next-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span> 1)
        (beep)))

    (add-to-list 'compilation-finish-functions 'cc-goto-first-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span>))


  (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">make-clean-command</span> <span style=
"color: #036A07;">"make clean all"</span>
    <span style="color: #008000;">"*Command used by the `</span><span style=
"color: #D0372D;">make-clean</span><span style=
"color: #008000;">' function."</span>)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">make-clean</span> (<span style=
"color: #6434A3;">&amp;optional</span> arg)
    <span style="color: #008000;">"Run a make clean."</span>
    (interactive <span style="color: #036A07;">"P"</span>)
    (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">compile</span>)                  <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">needed for compile-internal</span>
    (<span style="color: #0000FF;">if</span> arg
        (setq make-clean-command
              (read-string <span style=
"color: #036A07;">"Command: "</span> make-clean-command)))
    (save-some-buffers (not compilation-ask-about-save) nil)
    (compile-internal make-clean-command <span style=
"color: #036A07;">"No more </span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #036A07;">s"</span>))

  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;S-f9&gt;"</span>) 'make-clean)
</pre>
          </div>

          <p>You’re debugging Bash code? I normally use
          <code>mode-compile.el</code> for this. Basically, it runs Bash with
          lots of debug output.</p>
        </div>
      </div>

      <div id="outline-container-sec-32-2" class="outline-3">
        <h3 id="sec-32-2">Compilation Mode</h3>

        <div class="outline-text-3" id="text-32-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 27.2 (info "(emacs)Compilation Mode")</span>

  (leuven--section <span style=
"color: #036A07;">"27.2 (emacs)Compilation Mode"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically jump to the first </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;"> during compilation</span>
  (setq compilation-auto-jump-to-first-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span> t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display the next compiler </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;"> message</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;f10&gt;"</span>) 'next-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display the previous compiler </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;"> message</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;S-f10&gt;"</span>) 'previous-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display the first compiler </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;"> message</span>
  (global-set-key
    (kbd <span style=
"color: #036A07;">"&lt;C-f10&gt;"</span>) 'first-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">highlight and parse the whole compilation output as soon as it</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">arrives</span>
  (setq compile-auto-highlight t)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-32-3" class="outline-3">
        <h3 id="sec-32-3">Searching with Grep under Emacs</h3>

        <div class="outline-text-3" id="text-32-3">
          <p>Find files matching some regexp, and click on the hyperlinks to
          the files to locate your match.</p>

          <p>The commands</p>

          <ul class="org-ul">
            <li><code>lgrep</code> (local search, with
            <code>grep-template</code>) and</li>

            <li><code>rgrep</code> (<b>recursive</b> search, with
            <code>grep-find-template</code>)</li>
          </ul>

          <p>are somehow more user-friendly than the <code>M-x grep</code>
          command.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 27.4 (info "(emacs)Grep Searching") under Emacs</span>

  (leuven--section <span style=
"color: #036A07;">"27.4 (emacs)Grep Searching under Emacs"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ignore case distinctions in the default `</span><span style="color: #D0372D; font-style: italic;">grep</span><span style="color: #8D8D84; font-style: italic;">' command</span>
  (setq grep-command <span style="color: #036A07;">"grep -i -H -n -e "</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">do not append `</span><span style=
"color: #D0372D; font-style: italic;">null-device</span><span style=
"color: #8D8D84; font-style: italic;">' (`</span><span style=
"color: #D0372D; font-style: italic;">/dev/null</span><span style=
"color: #8D8D84; font-style: italic;">' or `</span><span style=
"color: #D0372D; font-style: italic;">NUL</span><span style=
"color: #8D8D84; font-style: italic;">') to `</span><span style=
"color: #D0372D; font-style: italic;">grep</span><span style=
"color: #8D8D84; font-style: italic;">' commands</span>
  (setq grep-use-null-device nil)       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">not necessary if the `</span><span style=
"color: #D0372D; font-style: italic;">grep</span><span style=
"color: #8D8D84; font-style: italic;">' program</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">used supports the `</span><span style=
"color: #D0372D; font-style: italic;">-H</span><span style=
"color: #8D8D84; font-style: italic;">' option</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; for Windows</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq grep-find-command '("findstr /sn *" . 13))</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use `find -print0' and `xargs -0'</span>
  (setq grep-find-use-xargs 'gnu)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">run `</span><span style=
"color: #D0372D; font-style: italic;">grep</span><span style=
"color: #8D8D84; font-style: italic;">' via `</span><span style=
"color: #D0372D; font-style: italic;">find</span><span style=
"color: #8D8D84; font-style: italic;">', with user-friendly interface</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-c 3"</span>) 'rgrep)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">10.3.5 Org keyword search</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-grep-org-files</span> (regexp <span style=
"color: #6434A3;">&amp;optional</span> context)
    <span style=
"color: #008000;">"Recursively search for REGEXP in Org files in directory tree rooted at `</span><span style="color: #D0372D;">org-directory</span><span style="color: #008000;">'.</span>
<span style=
"color: #008000;">  Prefix argument determines number of lines of output context."</span>
    (interactive <span style="color: #036A07;">"sSearch regexp: \nP"</span>)
    (<span style=
"color: #0000FF;">let</span> ((grep-find-ignored-files '(<span style=
"color: #036A07;">"#*"</span> <span style="color: #036A07;">".#*"</span>))
          (grep-template (concat <span style=
"color: #036A07;">"grep &lt;X&gt; -i -nH "</span>
                                 (<span style=
"color: #0000FF;">when</span> context
                                   (concat <span style=
"color: #036A07;">"-C"</span> (number-to-string context)))
                                 <span style=
"color: #036A07;">" -e &lt;R&gt; &lt;F&gt;"</span>)))
      (rgrep regexp <span style=
"color: #036A07;">"*.org"</span> org-directory)))
</pre>
          </div>

          <p>See <code>leuven-helm-grep-org-files</code>.</p>
        </div>
      </div>

      <div id="outline-container-sec-32-4" class="outline-3">
        <h3 id="sec-32-4">Running Debuggers Under Emacs</h3>

        <div class="outline-text-3" id="text-32-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 27.6 Running (info "(emacs)Debuggers") Under Emacs</span>

  (leuven--section <span style=
"color: #036A07;">"27.6 Running (emacs)Debuggers Under Emacs"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"gdb-mi"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable Gdb-Many-Windows mode</span>
    (setq gdb-many-windows t))
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the only important parameter for GDB</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-32-5" class="outline-3">
        <h3 id="sec-32-5">Debugging Lisp programs</h3>

        <div class="outline-text-3" id="text-32-5">
          <p>Emacs has the basic debugger/stack trace, but it also has the
          Edebug facility, which is very powerful, for the more complex
          situation.</p>

          <p>With that source-level debugger for Emacs Lisp, you can:</p>

          <ul class="org-ul">
            <li>step through evaluation, stopping before and after each
            expression,</li>

            <li>set conditional or unconditional breakpoints.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Debugging Lisp programs</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">source-level debugger for Emacs Lisp</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"edebug"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display a trace of function entry and exit</span>
    (setq edebug-trace t)
</pre>
          </div>

          <p>While <code>edebug</code>’ging, use <code>T</code> to view a trace
          buffer (<code>*edebug-trace*</code>). Emacs will quickly execute the
          rest of your code, printing out the arguments and return values for
          each expression it evaluates.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">edebug-overlay-arrow</span> (around leuven-highlight-line activate)
      <span style=
"color: #008000;">"Highlight line currently being Edebug'ged."</span>
      (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">hl-line</span>)
      (hl-line-mode)
      ad-do-it)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-edebug-quit</span> ()
      <span style=
"color: #008000;">"Stop Edebug'ging and remove highlighting."</span>
      (interactive)
      (hl-line-mode -1)
      (top-level))

    (define-key edebug-mode-map
      [remap top-level] 'leuven-edebug-quit))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-32-6" class="outline-3">
        <h3 id="sec-32-6">Executing Lisp Expressions</h3>

        <div class="outline-text-3" id="text-32-6">
          <p>Just as in C, C++, Java, Perl, Python, etc, Lisp code is kept in
          files. All the normal editing operations are performed on files. In
          this respect, hacking in Lisp is like hacking in any other language
          that you are used to. What’s different is that what you are hacking
          is a running Lisp program. When you edit a function definition or add
          a new one, you compile it into a running program. There is no
          compile, link, run, debug cycle as you know it from C or Java.</p>

          <p>Ponder that for a minute.</p>

          <p>When you fix a bug in a C function, you have to recompile, relink,
          and reload your program before you can test the fix. You don’t do
          that in Lisp. You make the fix and then go straight to testing it.
          This process can be even faster than fixing a bug in a scripting
          language like Perl.</p>
        </div>
      </div>

      <div id="outline-container-sec-32-7" class="outline-3">
        <h3 id="sec-32-7">Libraries of Lisp Code for Emacs</h3>

        <div class="outline-text-3" id="text-32-7">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 27.8 (info "(emacs)Lisp Libraries") for Emacs</span>

  (leuven--section <span style=
"color: #036A07;">"27.8 (emacs)Lisp Libraries"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">force load of `</span><span style=
"color: #D0372D; font-style: italic;">.el</span><span style=
"color: #8D8D84; font-style: italic;">' files when they are newer than the `</span><span style="color: #D0372D; font-style: italic;">.elc</span><span style="color: #8D8D84; font-style: italic;">' files</span>
  (setq load-prefer-newer t)            <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">from Emacs 24.4</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-32-8" class="outline-3">
        <h3 id="sec-32-8">Evaluating Emacs Lisp Expressions</h3>

        <div class="outline-text-3" id="text-32-8">
          <dl class="org-dl">
            <dt><code>C-x C-e</code></dt>

            <dd>Evaluate the Emacs Lisp expression before point, and print the
            value in the echo area (<code>eval-last-sexp</code>).</dd>

            <dt><code>C-M-x</code> (in Emacs Lisp mode)</dt>

            <dd>Evaluate the defun containing or after point, and print the
            value in the echo area (<code>eval-defun</code>).</dd>
          </dl>

          <p>To (attempt to) cleanly reevaluate a buffer of Emacs Lisp code,
          use <code>nuke-and-eval</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 27.9 (info "(emacs)Lisp Eval") Expressions</span>

  (leuven--section <span style=
"color: #036A07;">"27.9 (emacs)Lisp Eval Expressions"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable the use of the command `</span><span style="color: #D0372D; font-style: italic;">eval-expression</span><span style="color: #8D8D84; font-style: italic;">' without confirmation</span>
  (put 'eval-expression 'disabled nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">maximum depth of lists to print in the result of the evaluation</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">commands before abbreviating them</span>
  (setq eval-expression-print-level nil) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">no limit</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">maximum length of lists to print in the result of the evaluation</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">commands before abbreviating them</span>
  (setq eval-expression-print-length nil) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">no limit</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-32-9" class="outline-3">
        <h3 id="sec-32-9">Lisp Interaction Buffers</h3>

        <div class="outline-text-3" id="text-32-9">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 27.10 Lisp Interaction Buffers</span>

  (leuven--section <span style=
"color: #036A07;">"27.10 (emacs)Lisp Interaction Buffers"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't display the "Welcome to GNU Emacs" buffer on startup</span>
  (setq inhibit-startup-screen t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't insert instructions in the `</span><span style="color: #D0372D; font-style: italic;">*scratch*</span><span style="color: #8D8D84; font-style: italic;">' buffer at startup</span>
  (setq initial-scratch-message nil)
</pre>
          </div>

          <p>Don’t use any specific mode for the initial buffer. That ensure
          that no Lisp or Org specific stuff gets loaded at each startup
          time.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">major mode command symbol to use for the initial `</span><span style="color: #D0372D; font-style: italic;">*scratch*</span><span style="color: #8D8D84; font-style: italic;">' buffer</span>
  (setq initial-major-mode 'fundamental-mode)
</pre>
          </div>

          <p><b>That code must be used in the <code>.emacs</code> file (or
          libraries loaded from it).</b> Otherwise, <code>*scratch*</code> will
          already have been created, in the default major mode.</p>

          <p>To evaluate a non-interactive command, simply use
          <code>IELM</code>.</p>
        </div>
      </div>

      <div id="outline-container-sec-32-10" class="outline-3">
        <h3 id="sec-32-10">Other</h3>

        <div class="outline-text-3" id="text-32-10">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">elint-current-buffer</span> ()
    (interactive)
    (elint-initialize)
    (elint-current-buffer))

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"elint"</span>
    (add-to-list 'elint-standard-variables 'current-prefix-arg)
    (add-to-list 'elint-standard-variables 'command-line-args-left)
    (add-to-list 'elint-standard-variables 'buffer-file-coding-system)
    (add-to-list 'elint-standard-variables 'emacs-major-version)
    (add-to-list 'elint-standard-variables 'window-system))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun elisp-indent-or-complete (&amp;optional arg)</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(interactive "p")</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(call-interactively 'lisp-indent-line)</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(unless (or (looking-back "^\\s-*")</span>
  <span style="color: #8D8D84;">;;          </span><span style=
"color: #8D8D84; font-style: italic;">(bolp)</span>
  <span style="color: #8D8D84;">;;          </span><span style=
"color: #8D8D84; font-style: italic;">(not (looking-back "[-[:alnum:]_*+/=&lt;&gt;!?]+")))</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(call-interactively 'lisp-complete-symbol)))</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(with-eval-after-load "lisp-mode"</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(define-key emacs-lisp-mode-map</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;tab&gt;") 'elisp-indent-or-complete))</span>
</pre>
          </div>

          <p>XXX Paredit (or smartparen or autopair)?</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">minor mode for editing parentheses</span>
  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"paredit"</span>)

    (autoload 'enable-paredit-mode <span style=
"color: #036A07;">"paredit"</span>
      <span style=
"color: #008000;">"Minor mode for pseudo-structurally editing Lisp code."</span> t)

    (add-hook 'emacs-lisp-mode-hook 'enable-paredit-mode)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Common Lisp editing extensions</span>
    (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"redshank"</span>)   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">requires `</span><span style=
"color: #D0372D; font-style: italic;">paredit</span><span style=
"color: #8D8D84; font-style: italic;">'</span>

      (autoload 'redshank-mode <span style="color: #036A07;">"redshank"</span>
        <span style=
"color: #008000;">"Minor mode for restructuring Lisp code (i.e., refactoring)."</span> t)

      (add-hook 'emacs-lisp-mode-hook 'turn-on-redshank-mode)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-32-11" class="outline-3">
        <h3 id="sec-32-11"><span class="todo TODO">TODO</span> From Thierry
        Volpiatto</h3>

        <div class="outline-text-3" id="text-32-11">
          <p>Seems good, except that it changes the behavior of TAB when done
          in a word. Instead of indenting, it completes the word at point,
          changing the buffer’s contents!</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Lisp complete or indent</span>
  (define-key lisp-interaction-mode-map
    [remap indent-for-tab-command] 'helm-lisp-completion-at-point-or-indent)
  (define-key emacs-lisp-mode-map
    [remap indent-for-tab-command] 'helm-lisp-completion-at-point-or-indent)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Lisp complete</span>
  (define-key lisp-interaction-mode-map
    [remap completion-at-point] 'helm-lisp-completion-at-point)
  (define-key emacs-lisp-mode-map
    [remap completion-at-point] 'helm-lisp-completion-at-point)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 27 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-33" class="outline-2">
      <h2 id="sec-33">Maintaining Programs</h2>

      <div class="outline-text-2" id="text-33">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 28 (info "(emacs)Maintaining") Programs</span>

(leuven--chapter leuven-chapter-28-maintaining <span style=
"color: #036A07;">"28 Maintaining Programs"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-33-1" class="outline-3">
        <h3 id="sec-33-1">Version Control</h3>

        <div class="outline-text-3" id="text-33-1">
          <p>Version control systems that interact with Emacs in a generic
          way.</p>

          <dl class="org-dl">
            <dt><code>C-x v d</code></dt>

            <dd>Open Dired buffer in VC-mode.</dd>

            <dt><code>C-x v v</code></dt>

            <dd>Take appropriate action (add, commit).</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 28.1 (info "(emacs)Version Control")</span>

  (leuven--section <span style=
"color: #036A07;">"28.1 (emacs)Version Control"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(try-require 'vc)                     ; for defining function `</span><span style="color: #D0372D; font-style: italic;">vc-switches</span><span style="color: #8D8D84; font-style: italic;">'</span>
  <span style=
"color: #8D8D84;">;;                                       </span><span style=
"color: #8D8D84; font-style: italic;">; (</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> autoload?)</span>
</pre>
          </div>
        </div>

        <div id="outline-container-sec-33-1-1" class="outline-4">
          <h4 id="sec-33-1-1">Version Control and the Mode Line</h4>

          <div class="outline-text-4" id="text-33-1-1">
            <p>“Unmodified-according-to-VC” buffers use <code>-</code> as a
            separator in their VC indicator, and modified buffers have
            <code>:</code> (e.g., <code>CVS-1.2</code> vs.
            <code>CVS:1.2</code>). The tooltip over the VC indicator also says
            more explicitly.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 28.1.2 (info "(emacs)VC Mode Line")</span>

  (leuven--section <span style=
"color: #036A07;">"28.1.2 Version Control and the Mode Line"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"vc"</span>

    (GNUEmacs
      (<span style="color: #0000FF;">when</span> (image-type-available-p 'png)
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">http://www.emacswiki.org/emacs/VcIcon</span>
        (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">vc-icon</span> ()
          <span style=
"color: #008000;">"Display a colored icon indicating the vc status of the current file."</span>
          (<span style="color: #0000FF;">let</span> ((icon (<span style=
"color: #0000FF;">if</span> (vc-workfile-unchanged-p (buffer-file-name))
                          (concat leuven--directory
                                  <span style=
"color: #036A07;">"Pictures/NormalIcon.png"</span>)
                        (concat leuven--directory
                                <span style=
"color: #036A07;">"Pictures/ModifiedIcon.png"</span>)))
                (bg-colour (face-attribute 'mode-line <span style=
"color: #006FE0;">:background</span>)))
            (propertize
             <span style="color: #036A07;">"  "</span>
             'display (find-image `((<span style=
"color: #006FE0;">:type</span> png
                                     <span style=
"color: #006FE0;">:file</span> ,icon
                                     <span style=
"color: #006FE0;">:ascent</span> center
                                     <span style=
"color: #006FE0;">:background</span> ,bg-colour))))))

        (setq-default mode-line-format
                      (push '(vc-mode (<span style=
"color: #006FE0;">:eval</span> (vc-icon))) mode-line-format)))))
</pre>
            </div>

            <p>If you choose a JPG icon, you must set its type to
            <code>jpeg</code> (<b>NOT</b> <code>jpg</code>) in
            <code>find-image</code>.</p>

            <p>But don’t forget that JPEG images can’t have <i>transparent
            backgrounds</i>…</p>

            <p>If PNG images are not correctly supported, see <a href=
            "#sec-48-2">Images</a>.</p>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"></td>

                <td width="100%">
                  <b>Lisp expression in mode-line-format</b><br />

                  <p>The Lisp expressions supported in
                  <code>mode-line-format</code> are those documented in the
                  manual, and nothing else. In particular, the
                  <code>:eval</code> part must appear explicitly, and any
                  symbol stands for its value (which is not eval’ed). IOW, a
                  full-blown Lisp evaluation there is not implemented…</p>
                </td>
              </tr>
            </table>
          </div>
        </div>

        <div id="outline-container-sec-33-1-2" class="outline-4">
          <h4 id="sec-33-1-2">Features of the Log Entry Buffer</h4>

          <div class="outline-text-4" id="text-33-1-2">
            <p>Show the diff we are about to commit: <code>C-c C-d</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 28.1.4 (info "(emacs)Log Buffer")</span>

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--vc-log-mode-setup</span> ()
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">check if `</span><span style=
"color: #D0372D; font-style: italic;">ispell-program-name</span><span style=
"color: #8D8D84; font-style: italic;">' seems correct</span>
    (<span style="color: #0000FF;">when</span> (ispell-check-program-name)
      (setq ispell-local-dictionary <span style=
"color: #036A07;">"american"</span>)
      (flyspell-mode)))

  (add-hook 'vc-log-mode-hook 'leuven--vc-log-mode-setup)
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"vc-git"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">major mode for editing git commit messages</span>
    (<span style="color: #0000FF;">when</span> (try-require 'git-commit-mode)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn on on-the-fly spell-checking</span>
      (add-hook 'git-commit-mode-hook 'turn-on-flyspell)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn off save-place</span>
      (add-hook 'git-commit-mode-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  (toggle-save-place 0)))))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-33-1-3" class="outline-4">
          <h4 id="sec-33-1-3">Examining And Comparing Old Revisions</h4>

          <div class="outline-text-4" id="text-33-1-3">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 28.1.6 (info "(emacs)Old Revisions")</span>

  (leuven--section <span style=
"color: #036A07;">"28.1.6 Examining And Comparing Old Revisions"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">switches for diff under VC</span>
  (setq vc-diff-switches diff-switches)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-33-1-4" class="outline-4">
          <h4 id="sec-33-1-4">VC Directory Mode</h4>

          <div class="outline-text-4" id="text-33-1-4">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 28.1.9 (info "(emacs)VC Directory Mode")</span>

  (leuven--section <span style=
"color: #036A07;">"28.1.9 VC Directory Mode"</span>)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-vc-jump</span> ()
    <span style="color: #008000;">"Jump to VC status buffer."</span>
    (interactive)
    (<span style="color: #0000FF;">let*</span> ((fname (buffer-file-name))
           (dname (<span style="color: #0000FF;">if</span> fname
                      (<span style=
"color: #0000FF;">if</span> (file-directory-p fname)
                          fname
                        (file-name-directory fname))
                    default-directory)))
      (message <span style=
"color: #036A07;">"VC status for directory: %s"</span> dname)
      (vc-dir dname)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">vc status without asking for a directory</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;C-f9&gt;"</span>) 'leuven-vc-jump)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">hide up-to-date and unregistered files</span>
  (add-hook  'vc-dir-mode-hook
             (<span style="color: #0000FF;">lambda</span> ()
               (define-key vc-dir-mode-map
                 (kbd <span style=
"color: #036A07;">"x"</span>) 'leuven-vc-dir-hide-up-to-date-and-unregistered)
               (define-key vc-dir-mode-map
                 (kbd <span style="color: #036A07;">"E"</span>) 'vc-ediff)
               (define-key vc-dir-mode-map
                 (kbd <span style=
"color: #036A07;">"#"</span>) 'vc-ediff-ignore-whitespace)
                                         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">ediff-windows-wordwise?</span>
               ))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-vc-dir-hide-up-to-date-and-unregistered</span> ()
    (interactive)
    (vc-dir-hide-up-to-date)
    (vc-dir-hide-unregistered))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">vc-dir-hide-unregistered</span> ()
    <span style=
"color: #008000;">"Hide unregistered items from display."</span>
    (interactive)
    (<span style="color: #0000FF;">let</span> ((crt (ewoc-nth vc-ewoc -1))
          (first (ewoc-nth vc-ewoc 0)))
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">go over from the last item to the first and remove the</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">unregistered files and directories with no child files</span>
      (<span style="color: #0000FF;">while</span> (not (eq crt first))
        (<span style="color: #0000FF;">let*</span> ((data (ewoc-data crt))
               (dir (vc-dir-fileinfo-&gt;directory data))
               (next (ewoc-next vc-ewoc crt))
               (prev (ewoc-prev vc-ewoc crt))
               <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ewoc-delete does not work without this...</span>
               (inhibit-read-only t))
          (<span style="color: #0000FF;">when</span> (or
                 <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">remove directories with no child files</span>
                 (and dir
                      (or
                       <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">nothing follows this directory</span>
                       (not next)
                       <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">next item is a directory</span>
                       (vc-dir-fileinfo-&gt;directory (ewoc-data next))))
                 <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">remove files in the unregistered state</span>
                 (eq (vc-dir-fileinfo-&gt;state data) 'unregistered))
            (ewoc-delete vc-ewoc crt))
          (setq crt prev)))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">vc-ediff-ignore-whitespace</span> (historic <span style=
"color: #6434A3;">&amp;optional</span> not-urgent)
    <span style=
"color: #008000;">"Ignore regions that differ in white space &amp; line breaks only."</span>
    (interactive (list current-prefix-arg t))
    (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">ediff</span>)
    (<span style=
"color: #0000FF;">let</span> ((ediff-ignore-similar-regions t))
      (call-interactively 'vc-ediff)))  <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> does not work yet</span>
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-33-1-5" class="outline-4">
          <h4 id="sec-33-1-5">Customizing VC</h4>

          <div class="outline-text-4" id="text-33-1-5">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 28.1.13 (info "(emacs)Customizing VC")</span>

  (leuven--section <span style=
"color: #036A07;">"28.1.13 Customizing VC"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">files covered by VC get backups (as with other files)</span>
  (setq vc-make-backup-files t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">http://www.emacswiki.org/emacs/VcTopDirectory</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">For git</span>
  (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">vc-dir-prepare-status-buffer</span>
             (before leuven-vcs-goto-top-directory activate compile)
    (<span style="color: #0000FF;">let*</span> ((backend (ad-get-arg 2))
           (vcs-dir (ad-get-arg 1))
           (vcs-top-dir (vc-call-backend backend 'responsible-p vcs-dir)))
      (<span style="color: #0000FF;">when</span> (stringp vcs-top-dir)
        (ad-set-arg 1 vcs-top-dir))))

  (GNUEmacs
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--ediff-revision</span> (file rev1 <span style=
"color: #6434A3;">&amp;optional</span> rev2)
      <span style=
"color: #008000;">"Run Ediff by comparing 'master' against the 'current'."</span>
      (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">ediff</span>)
      (find-file file)
      (<span style="color: #0000FF;">if</span> (and (buffer-modified-p)
               (y-or-n-p (format <span style=
"color: #036A07;">"Buffer %s is modified.  Save buffer? "</span>
                                 (buffer-name))))
          (save-buffer (current-buffer)))
      (ediff-load-version-control)
      (funcall
       (intern (format <span style=
"color: #036A07;">"ediff-%S-internal"</span> ediff-version-control-package))
       rev1 rev2 nil))

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-vc-diff</span> (<span style=
"color: #6434A3;">&amp;optional</span> arg)
      (interactive <span style="color: #036A07;">"P"</span>)
      (call-interactively
       (<span style="color: #0000FF;">cond</span> (arg
              (<span style="color: #0000FF;">lambda</span> ()
                (interactive)
                (vc-diff nil)))
             (t
              (<span style="color: #0000FF;">lambda</span> ()
                (interactive)
                (leuven--ediff-revision (buffer-file-name)
                                        (read-string <span style=
"color: #036A07;">"revision? "</span>
                                                     <span style=
"color: #036A07;">"HEAD"</span> nil <span style=
"color: #036A07;">"HEAD"</span>)
                                        <span style=
"color: #036A07;">""</span>))))))

    (define-key vc-prefix-map
      (kbd <span style="color: #036A07;">"="</span>) 'leuven-vc-diff))
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-33-2" class="outline-3">
        <h3 id="sec-33-2">Change Logs</h3>

        <div class="outline-text-3" id="text-33-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 28.2 (info "(emacs)Change Log")</span>

  (leuven--section <span style=
"color: #036A07;">"28.2 (emacs)Change Logs"</span>)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"add-log"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't make a new entry, when the last entry was made by you and on</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the same date</span>
    (setq add-log-always-start-new-record nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">adds the file's version number to the change log entry</span>
    (setq change-log-version-info-enabled t)

    (add-hook 'change-log-mode-hook
              (add-to-list
               'change-log-font-lock-keywords
               '(<span style="color: #036A07;">"^[0-9-]+:? +</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">^</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">Sun</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">Mon</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">Tue</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">Wed</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">Thu</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">Fri</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">Sat</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;"> [A-z][a-z][a-z] [0-9:+ ]+"</span>
                 (0 'change-log-date-face)
                 (<span style="color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[</span><span style="color: #036A07;">^</span><span style=
"color: #036A07;">&lt;(]+?</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">[   ]*[(&lt;]</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[[:alnum:]_.+-]+@[[:alnum:]_.-]+</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">[&gt;)]"</span> nil nil
                  (1 'change-log-name)
                  (2 'change-log-email))))))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-33-3" class="outline-3">
        <h3 id="sec-33-3">Tags Tables</h3>

        <div class="outline-text-3" id="text-33-3">
          <p>Using tags tables is the most generic approach to setup code
          navigation. A “tag” signifies a language object for which an index
          entry is available.</p>

          <p>Once you’ve built a <code>TAGS</code> file (<code>ctags</code> /
          <code>etags</code>), you can find all commands that match a
          regexp.</p>

          <p>Support for tags has been in Emacs for a long time: any
          installation of Emacs should comes with the <code>etags</code>
          program, which supports many different languages.</p>

          <p>Comparison of tools:</p>

          <dl class="org-dl">
            <dt>etags (Emacs-style TAGS file)</dt>

            <dd>
              Ada, Asm, C, Objective C, C++, C#, Cobol, Erlang, Forth, Fortran,
              HTML, Java, Lisp, Lua, Makefile, Pascal, Perl, PHP, Postscript,
              Prolog, Python, Scheme, TeX, TeXinfo, and YACC.

              <p>On Windows, Emacs comes with <code>etags</code> and a similar
              executable file called <code>ctags</code>. In the Emacs
              distribution, <code>etags.exe</code> = <code>ctags.exe</code> in
              the <code>bin</code> directory.</p>
            </dd>

            <dt>Exuberant Ctags</dt>

            <dd>
              Ant, Asm, Asp, Awk, Basic, BETA, C, C++, C#, Cobol, DosBatch,
              Eiffel, Erlang, Flex, Fortran, HTML, Java, JavaScript, Lisp, Lua,
              Makefile, MatLab, OCaml, Pascal, Perl, PHP, Python, REXX, Ruby,
              Scheme, Sh, SLang, SML, SQL, Tcl, TeX, Vera, Verilog, VHDL, Vim,
              and YACC.

              <p>You should download <b>Exuberant Ctags</b> from <a href=
              "http://ctags.sourceforge.net/">http://ctags.sourceforge.net/</a>
              or from Cygwin. Only <b>Exuberant</b> <code>ctags.exe</code>
              recognizes <code>-e</code> option (<i>etags mode</i>, which will
              create a tag file for use with the Emacs editor).</p>

              <p>Exuberant Ctags can be extended to look for other things via
              regular expression. It is a wonderful thing!</p>

              <p>For example, I can now look for tags in my shell code to by
              running:</p>

              <div class="org-src-container">
                <pre class="src src-sh">
etags --langdef=shell --regex-shell=<span style=
"color: #036A07;">'/function [_[:alnum:]]+/[_[:alnum:]]+/'</span> --language-force=shell
</pre>
              </div>
            </dd>

            <dt>Cscope</dt>

            <dd>C, but flexible enough to support C++ and Java, and to be used
            as a generalized “grep database”.</dd>

            <dt>ebrowse</dt>

            <dd>For C++, you will be better off with ebrowse, a program that
            also comes with Emacs. It understands C++ much better than etags
            does, and provides similar commands (so you don’t lose anything).
            Check out the Ebrowse manual, which is part of the Emacs
            distribution, for details.</dd>

            <dt>GNU Idutils</dt>

            <dt>GNU Global (gtags)</dt>

            <dd>
              C, C++, Yacc, Java, and PHP4.

              <p>Global is a lot smarter about finding tags tables, and is
              fairly fast to update.</p>
            </dd>
          </dl>

          <p><b>Emacs TAGS</b> and <b>Exuberant Ctags</b> don’t do fancy stuff,
          e.g. keeping an index of function references. They record only
          positions where a function (or variable etc.) is <b>defined</b>.</p>

          <p>Recording positions where a function is <b>called</b> (finding all
          <b>symbol references</b>) is the kind of thing external tools such as
          <b>GNU Global</b>, <b>GNU Idutils</b> and <b>Cscope</b> can do for
          you, if you’re working with a language that they support. <b>Grep</b>
          would be the fallback method.</p>

          <p>Please also see <a href=
          "http://hub.opensolaris.org/bin/view/Project+opengrok/">Comparison
          with Similar Tools</a>.</p>

          <p>Once you have a good tagging system in place, many tools become
          enabled for your language, such as:</p>

          <ul class="org-ul">
            <li>tag decoration mode (like drawing lines over the top of
            function tags),</li>

            <li>stickyfunc mode (which shows the current function in the header
            line),</li>

            <li><a href="#sec-33-4-2">Emacs Code Browser</a>, and</li>

            <li>tag jumping.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 28.3 (info "(emacs)Tags")</span>

  (leuven--section <span style=
"color: #036A07;">"28.3 (emacs)Tags Tables"</span>)
</pre>
          </div>
        </div>

        <div id="outline-container-sec-33-3-1" class="outline-4">
          <h4 id="sec-33-3-1">Creating Tags Tables</h4>

          <div class="outline-text-4" id="text-33-3-1">
            <p>First of all, you must build a <code>TAGS</code> file (which
            keeps the symbols from your project, by scanning all the source and
            header files with the <code>etags</code> command).</p>

            <p>For example, you can have a <code>TAGS</code> Makefile target to
            do this for you:</p>
            <pre class="example">
TAGS:
        rm -f TAGS
        find $$(pwd) \( -name \*.el \
                     -o -name \*.[chCH] \
                     \) -print | /usr/bin/ctags -e -
</pre>

            <p>You can create a <code>TAGS</code> file by using <code>M-x
            compile &lt;RET&gt; tags &lt;RET&gt;</code>.</p>

            <p>Alternatively,</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"etags"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">tags enhancements</span>
    (try-require 'sure-tags))
</pre>
            </div>

            <p>will make sure that <code>TAGS</code> file exists (and builds it
            if it doesn’t), allowing you to</p>

            <ul class="org-ul">
              <li>first rebuild the <code>TAGS</code> file or</li>

              <li>specify a new one</li>
            </ul>

            <p>when the search fails.</p>
          </div>
        </div>

        <div id="outline-container-sec-33-3-2" class="outline-4">
          <h4 id="sec-33-3-2">Selecting a Tags Table</h4>

          <div class="outline-text-4" id="text-33-3-2">
            <p>After this, you can select the tag file to use with the command
            <code>M-x visit-tags-table &lt;RET&gt;</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of file names of tags tables to search</span>
  (setq tags-table-list
        '(
          <span style="color: #036A07;">"~/TAGS"</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"/usr/local/lib/emacs/src/TAGS"</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"/usr/share/texmf-texlive/tex/latex/TAGS"</span>
          ))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-33-3-3" class="outline-4">
          <h4 id="sec-33-3-3">Finding a Tag</h4>

          <div class="outline-text-4" id="text-33-3-3">
            <p>You can search for the <b>first definition</b> of a tag
            (matching your regexp) by using <code>M-x find-tag</code> (bound to
            <code>M-.</code>). The default tag is the identifier under the
            cursor.</p>

            <p>To continue searching for <b>next definition</b>, use <code>C-u
            M-.</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">find-next-tag</span> ()
    (interactive)
    (find-tag nil t))
</pre>
            </div>

            <p>Use <code>M-*</code> (<code>M-x pop-tag-mark</code>) to <b>jump
            back</b> to where you last invoked <code>M-.</code>.</p>
          </div>
        </div>

        <div id="outline-container-sec-33-3-4" class="outline-4">
          <h4 id="sec-33-3-4">Select from multiple TAGS files</h4>

          <div class="outline-text-4" id="text-33-3-4">
            <p>You can search for <b>occurrences</b> of tags that match you
            regexp on all files in the TAGS table, by using <code>M-x
            tags-search &lt;RET&gt;</code>.</p>

            <p>To continue searching for next match, use ~M-,~.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"etags"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">select from multiple tags</span>
    (<span style="color: #0000FF;">when</span> (try-require 'etags-select)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">do a `</span><span style=
"color: #D0372D; font-style: italic;">find-tag-at-point</span><span style=
"color: #8D8D84; font-style: italic;">', and display all exact matches</span>
      (global-set-key
        (kbd <span style=
"color: #036A07;">"M-?"</span>) 'etags-select-find-tag-at-point)))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-33-3-5" class="outline-4">
          <h4 id="sec-33-3-5">Find Emacs Lisp symbol definition</h4>

          <div class="outline-text-4" id="text-33-3-5">
            <p>Find the definition of the Emacs Lisp symbol near point:</p>

            <dl class="org-dl">
              <dt><code>C-x F</code></dt>

              <dd>Find <b>function</b>.</dd>

              <dt><code>C-x V</code></dt>

              <dd>Find <b>variable</b>.</dd>

              <dt><code>C-x K</code></dt>

              <dd>Find function <b>bound to key</b> sequence.</dd>
            </dl>

            <p>Use <code>C-x 4</code> for displaying in another window, and
            <code>C-x 5</code> for displaying in another frame.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">find the definition of the Emacs Lisp function or variable near point</span>
  (GNUEmacs
    (find-function-setup-keys))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
(<span style="color: #0000FF;">progn</span>
  (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">thingatpt</span>)

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-find-symbol-at-point</span> ()
    <span style=
"color: #008000;">"Find the definition of the symbol at point."</span>
    (interactive)
    (<span style="color: #0000FF;">let</span> ((sym (symbol-at-point)))
      (funcall (<span style="color: #0000FF;">pcase</span> sym
                 ((pred facep)           'find-face)
                 ((pred symbol-function) 'find-function)
                 (_                      'find-variable))
               sym)))

  (global-set-key (kbd <span style=
"color: #036A07;">"&lt;S-return&gt;"</span>) 'leuven-find-symbol-at-point))
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-33-4" class="outline-3">
        <h3 id="sec-33-4">Emacs Development Environment</h3>

        <div class="outline-text-3" id="text-33-4"></div>

        <div id="outline-container-sec-33-4-1" class="outline-4">
          <h4 id="sec-33-4-1">Collection of Emacs Development Environment
          Tools</h4>

          <div class="outline-text-4" id="text-33-4-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 28.4 (info "(emacs)EDE")</span>

  (leuven--section <span style=
"color: #036A07;">"28.4 Emacs Development Environment"</span>)
</pre>
            </div>

            <p>CEDET (integrated into Emacs 23.2) brings improvements over a
            plain TAGS file. It provides:</p>

            <dl class="org-dl">
              <dt><a href=
              "http://www.gnu.org/software/emacs/manual/semantic.html">Semantic</a></dt>

              <dd>A <b>parser</b> and code analyzer which provides <b>smart
              completion</b> (“Intellisense”).</dd>

              <dt>EDE</dt>

              <dd>A <b>project management</b> system which can <b>generate
              Makefiles</b> to compile your code for you.</dd>

              <dt>SRecode</dt>

              <dd>A template / <b>code generation</b> system which can convert
              tags from semantic back into code.</dd>

              <dt>COGRE (COnnected GRaph Editor)</dt>

              <dd>A <b>UML diagram editor</b> which can generate code from a
              class diagram that you draw in Emacs.</dd>
            </dl>

            <p>See <a href=
            "http://cedet.sourceforge.net/languagesupport.shtml">supported
            languages</a>.</p>

            <p>The commands to display <b>symbol references</b> are:</p>

            <dl class="org-dl">
              <dt><code>C-c , g</code></dt>

              <dd><code>semantic-symref-symbol</code>.</dd>

              <dt><code>C-c , G</code></dt>

              <dd><code>semantic-symref</code> (current tag).</dd>
            </dl>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (<span style=
"color: #0000FF;">unless</span> (string&lt; emacs-version <span style=
"color: #036A07;">"23.2"</span>)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; enable global EDE (project management) features</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-ede-mode 1)</span>

    (setq semantic-default-submodes
          '(
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn Semantic DB mode on (Semantic parsers store the</span>
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">results of parsing source code in a database file, which can</span>
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">be saved for future Emacs sessions)</span>
            global-semanticdb-minor-mode

            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the idle scheduler with automatically reparse buffers in idle</span>
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">time</span>
            global-semantic-idle-scheduler-mode <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[minimum-features]</span>

            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display a summary of the symbol at point in the echo area</span>
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(~ ElDoc)</span>
            global-semantic-idle-summary-mode <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[code-helpers]</span>

            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display a tooltip with a list of possible completions near</span>
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the cursor</span>
            global-semantic-idle-completions-mode <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[gaudy-code-helpers]</span>

            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn Semantic MRU Bookmarks on (keep track of the Most</span>
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Recently Used tags)</span>
            global-semantic-mru-bookmark-mode

            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable Semantic-Stickyfunc mode (display a header line that</span>
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">shows the declaration line of the function or tag)</span>
            global-semantic-stickyfunc-mode <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[gaudy-code-helpers]</span>

            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable Semantic-Highlight-Func mode</span>
            global-semantic-highlight-func-mode <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[excessive-code-helpers]</span>

            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn on all active decorations</span>
            global-semantic-decoration-mode <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[gaudy-code-helpers]</span>
            ))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> if prog-mode, then Semantic will be launched after Emacs init, as</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the scratch buffer is in Emacs Lisp...</span>
    (add-hook 'java-mode-hook
              (<span style="color: #0000FF;">lambda</span> ()
                <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable parser features (Semantic mode) and install a</span>
                <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">Development</span><span style=
"color: #8D8D84; font-style: italic;">' menu on the menu-bar</span>
                (semantic-mode 1)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; smart completion, and display of information for tags &amp; classes</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(require 'semantic/ia)</span>
    <span style="color: #8D8D84;">;;</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(require 'semantic/db)</span>

    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"semantic"</span>

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--semantic</span> ()
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically complete whatever symbol you are typing</span>
        (local-set-key
          (kbd <span style=
"color: #036A07;">"C-c ?"</span>) 'semantic-ia-complete-symbol) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">better binding: `</span><span style=
"color: #D0372D; font-style: italic;">M-/</span><span style=
"color: #8D8D84; font-style: italic;">'?</span>

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">jump to the definition of the symbol under cursor</span>
        (local-set-key
          (kbd <span style=
"color: #036A07;">"C-c j"</span>) 'semantic-ia-fast-jump) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">where a symbol is declared</span>

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show the documentation of the symbol under cursor</span>
        (local-set-key
          (kbd <span style=
"color: #036A07;">"C-c q"</span>) 'semantic-ia-show-doc) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">show javadoc of the right method</span>

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show a summary about the symbol under cursor</span>
        (local-set-key
          (kbd <span style=
"color: #036A07;">"C-c s"</span>) 'semantic-ia-show-summary)


        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show possible public member functions or data members (when at `.'</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">or `</span><span style=
"color: #D0372D; font-style: italic;">-&gt;</span><span style=
"color: #8D8D84; font-style: italic;">' after an object name)</span>
        (local-set-key
          (kbd <span style=
"color: #036A07;">"C-c &gt;"</span>) 'semantic-complete-analyze-inline)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">toggle between the implementation and a prototype of symbol under</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">cursor</span>
        (local-set-key
          (kbd <span style=
"color: #036A07;">"C-c p"</span>) 'semantic-analyze-proto-impl-toggle)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">visit the header file under cursor</span>
        (local-set-key
          (kbd <span style=
"color: #036A07;">"C-c ="</span>) 'semantic-decoration-include-visit)


        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">unfold the block under cursor</span>
        (local-set-key
          (kbd <span style=
"color: #036A07;">"C-c +"</span>) 'semantic-tag-folding-show-block)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">fold the block under cursor</span>
        (local-set-key
          (kbd <span style=
"color: #036A07;">"C-c -"</span>) 'semantic-tag-folding-fold-block)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">C-c C-c is not a prefix key!</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; unfold all</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(local-set-key</span>
        <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "C-c C-c +") 'semantic-tag-folding-show-all)</span>
        <span style="color: #8D8D84;">;;</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; fold all</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(local-set-key</span>
        <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "C-c C-c -") 'semantic-tag-folding-fold-all)</span>
        )

      (add-hook 'prog-mode-hook 'leuven--semantic)

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--c-mode-semantic</span> ()
        <span style=
"color: #008000;">"Completion on `.' or `</span><span style="color: #D0372D;">-&gt;</span><span style="color: #008000;">'."</span>
        (local-set-key (kbd <span style=
"color: #036A07;">"."</span>) 'semantic-complete-self-insert)
        (local-set-key (kbd <span style=
"color: #036A07;">"&gt;"</span>) 'semantic-complete-self-insert)
        (local-set-key (kbd <span style=
"color: #036A07;">"C-c C-r"</span>) 'semantic-symref))

      (add-hook 'c-mode-common-hook 'leuven--c-mode-semantic))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">hooks, specific for Semantic</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--semantic-imenu</span> ()
      (imenu-add-to-menubar <span style="color: #036A07;">"TAGS"</span>))

    (add-hook 'semantic-init-hooks 'leuven--semantic-imenu)

    )
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-33-4-2" class="outline-4">
          <h4 id="sec-33-4-2"><a id="ID-5032bcdb-ac6b-4101-a0ce-28192fb7e247"
          name="ID-5032bcdb-ac6b-4101-a0ce-28192fb7e247"></a>Advanced Code
          Browsing</h4>

          <div class="outline-text-4" id="text-33-4-2">
            <p>Some people use CEDET in combination with <a href=
            "http://www.xemacs.org/Documentation/packages/html/ecb_2.html">ECB
            (the Emacs Code Browser)</a>, which provides views of directories
            and files.</p>

            <p>Keyboard navigation:</p>

            <dl class="org-dl">
              <dt><code>C-c . g d</code></dt>

              <dd>Go to directories.</dd>

              <dt><code>C-c . g s</code></dt>

              <dd>Go to sources.</dd>

              <dt><code>C-c . g m</code></dt>

              <dd>Go to methods.</dd>

              <dt><code>C-c . g h</code></dt>

              <dd>Go to history.</dd>

              <dt><code>C-c . g 1</code></dt>

              <dd>Go to edit buffer.</dd>
            </dl>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Emacs Code Browser</span>
  (custom-set-variables '(ecb-options-version <span style=
"color: #036A07;">"2.40"</span>))
  (<span style="color: #0000FF;">when</span> (try-require 'ecb-autoloads)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">trick for starting ECB 2.40 (with CEDET merged in Emacs since 23.2)</span>
    (GNUEmacs
      (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">semantic/analyze</span>))
    (<span style="color: #0000FF;">provide</span> '<span style=
"color: #D0372D;">semantic-analyze</span>)
    (<span style="color: #0000FF;">provide</span> '<span style=
"color: #D0372D;">semantic-ctxt</span>)
    (<span style="color: #0000FF;">provide</span> '<span style=
"color: #D0372D;">semanticdb</span>)
    (<span style="color: #0000FF;">provide</span> '<span style=
"color: #D0372D;">semanticdb-find</span>)
    (<span style="color: #0000FF;">provide</span> '<span style=
"color: #D0372D;">semanticdb-mode</span>)
    (<span style="color: #0000FF;">provide</span> '<span style=
"color: #D0372D;">semantic-load</span>)

    (setq stack-trace-on-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span> t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't show tip of the day at start time of ECB</span>
    (setq ecb-tip-of-the-day nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">toggle activation of ECB (between `</span><span style="color: #D0372D; font-style: italic;">ecb-activate</span><span style="color: #8D8D84; font-style: italic;">' and</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">ecb-deactivate</span><span style=
"color: #8D8D84; font-style: italic;">')</span>
    (global-set-key
      (kbd <span style="color: #036A07;">"C-c e"</span>) 'ecb-minor-mode)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key (kbd "&lt;M-left&gt;") 'ecb-goto-window-methods)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key (kbd "&lt;M-right&gt;") 'ecb-goto-window-edit1)</span>
    )
</pre>
            </div>

            <p>If you’ve installed CEDET and ECB, EmacsAssist is worth trying
            out: <a href=
            "http://www.mail-archive.com/gnu-emacs-sources@gnu.org/msg00292.html">
            http://www.mail-archive.com/gnu-emacs-sources@gnu.org/msg00292.html</a></p>

            <p>It uses CEDET to provide a handy symbols browser for the current
            file, that narrows down the list as you type substrings. Tastes
            differ, but I for one really like this.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
   (<span style="color: #0000FF;">when</span> (try-require 'eassist)

     (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--c-mode-eassist</span> ()
       (local-set-key
         (kbd <span style=
"color: #036A07;">"C-c t"</span>) 'eassist-switch-h-cpp)
       (local-set-key
         (kbd <span style=
"color: #036A07;">"C-x t"</span>) 'eassist-switch-h-cpp)
       (local-set-key
         (kbd <span style=
"color: #036A07;">"C-c e"</span>) 'eassist-list-methods))

     (add-hook 'c-mode-common-hook 'leuven--c-mode-eassist))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 28 ends here</span>
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-34" class="outline-2">
      <h2 id="sec-34">Abbrevs</h2>

      <div class="outline-text-2" id="text-34">
        <p>An “abbrev” is a <b>word</b> which has been defined (in a fixed
        list) to “expand” into a specified <b>expansion</b>.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 29 (info "(emacs)Abbrevs")</span>

(leuven--chapter leuven-chapter-29-abbrevs <span style=
"color: #036A07;">"29 Abbrevs"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">See (info "(autotype)") as well</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-34-1" class="outline-3">
        <h3 id="sec-34-1">Controlling Abbrev Expansion</h3>

        <div class="outline-text-3" id="text-34-1">
          <p>For complex templates, I use <code>YASnippet</code>. For example,
          new file templates (where it’s lisp evaluation is handy), class and
          function templates with docblocks, etc. I use it to reduce the
          repetitious parts of programming, and let me focus on getting things
          done.</p>

          <p><code>YASnippet</code> does support mirror fields and
          transformations. It also does support multiple snippet with same
          name. It will also expand snippets containing non-word-constituent
          characters, which <code>abbrev</code> can’t. So I can’t have
          <code>@p</code> expand to <code>@param</code> with
          <code>abbrev</code>, but I can with <code>YASnippet</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 29.3 Controlling (info "(emacs)Expanding Abbrevs")</span>

  (leuven--section <span style=
"color: #036A07;">"29.3 Controlling Expanding Abbrevs"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Yet Another Snippet extension for Emacs</span>
  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use the "standard" package (NOT `</span><span style="color: #D0372D; font-style: italic;">yasnippet-bundle</span><span style="color: #8D8D84; font-style: italic;">'!)</span>
    (<span style="color: #0000FF;">when</span> (try-require 'yasnippet)
</pre>
          </div>

          <p>See <a href="#sec-28-14-6">Interaction between Org and other
          packages</a>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      <span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">! make sure you initialise YASnippet *before* Org mode</span>
      (<span style="color: #0000FF;">when</span> (<span style=
"color: #0000FF;">featurep</span> '<span style="color: #D0372D;">org</span>)
        (message <span style="color: #036A07;">"(</span><span style=
"color: #CC0000; background-color: #FFFF88;">Error</span><span style=
"color: #036A07;">) Org is already loaded -&gt; Too late to initialize YASnippet!"</span>)
        (sit-for 3))

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">yas/org-very-safe-expand</span> ()
        (<span style=
"color: #0000FF;">let</span> ((yas/fallback-behavior 'return-nil))
          (yas/expand)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">allow YASnippet to do its thing in Org files</span>
      (add-hook 'org-mode-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">YASnippet (using the new org-cycle hooks)</span>
                  (add-to-list 'org-tab-first-hook
                               'yas/org-very-safe-expand)
                  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">When enabled, problem with inserting letter `t' in YASnippet fields</span>
                  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(define-key yas/keymap</span>
                  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "tab") 'yas/next-field) ; `</span><span style="color: #D0372D; font-style: italic;">yas/next-field-or-maybe-expand</span><span style="color: #8D8D84; font-style: italic;">'?</span>
                  ))
</pre>
          </div>

          <p><code>yas-snippet-dirs</code> is assumed to contain <b>directories
          of modes</b> with snippets.</p>

          <p>By default, put <b>your own snippets</b> in the directory
          <code>~/.emacs.d/snippets</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven-yasnippet-my-snippets-dir</span>
        <span style="color: #036A07;">"~/src/yasnippet/snippets"</span>
        <span style=
"color: #008000;">"Directory containing my personal additional YASnippets."</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">root directories that store the snippets</span>
      (<span style="color: #0000FF;">let</span> ((my-snippets
             leuven-yasnippet-my-snippets-dir)
            (org-snippets
             (concat leuven-local-repos-directory <span style=
"color: #036A07;">"yasnippet-org-mode"</span>)))

        (<span style=
"color: #0000FF;">when</span> (file-directory-p org-snippets)
          (add-to-list 'yas-snippet-dirs org-snippets))

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the first element is always the user-created snippets directory</span>
        (<span style=
"color: #0000FF;">when</span> (file-directory-p my-snippets)
          (add-to-list 'yas-snippet-dirs my-snippets)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use Snippet mode for files with a `</span><span style="color: #D0372D; font-style: italic;">yasnippet</span><span style="color: #8D8D84; font-style: italic;">' extension</span>
      (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.yasnippet\\'"</span> . snippet-mode))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable the YASnippet menu and tab-trigger expansion in *all*</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">buffers</span>
      (yas-global-mode 1)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; text that will be used in menu to represent the trigger</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq yas-trigger-symbol " &lt;tab&gt;")</span>
</pre>
          </div>

          <p>After editing your snippets:</p>

          <ul class="org-ul">
            <li><code>M-x yas-recompile-all</code> to compile all
            snippets,</li>

            <li><code>M-x yas-reload-all</code> to reload them all.</li>
          </ul>

          <p>;; <a href=
          "https://github.com/vderyagin/dotemacs/blob/master/conf/yasnippet-configuration.el">
          https://github.com/vderyagin/dotemacs/blob/master/conf/yasnippet-configuration.el</a>
          ;; <a href=
          "https://earthserver.com/Setting_up_a_C++11_development_environment_on_Linux_with_Clang_and_Emacs">
          https://earthserver.com/Setting_up_a_C++11_development_environment_on_Linux_with_Clang_and_Emacs</a></p>

          <p>Automatically reload snippets after saving.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
      (add-hook 'snippet-mode-hook
                (<span style="color: #0000FF;">lambda</span> ()
                  (setq require-final-newline nil)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically reload snippets after saving</span>
      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">recompile-and-reload-all-snippets</span> ()
        (interactive)
        (<span style=
"color: #0000FF;">when</span> (eq major-mode 'snippet-mode)
          (yas-recompile-all)
          (yas-reload-all)
          (message <span style=
"color: #036A07;">"Reloaded all snippets"</span>)))

      (add-hook 'after-save-hook 'recompile-and-reload-all-snippets)

      (global-set-key (kbd <span style=
"color: #036A07;">"C-c s"</span>) 'yas-insert-snippet)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-34-2" class="outline-3">
        <h3 id="sec-34-2"><a id="ID-0fa23e4a-e42c-4317-834c-d2ef7c9d741c" name=
        "ID-0fa23e4a-e42c-4317-834c-d2ef7c9d741c"></a>Dynamic Abbrev
        Expansion</h3>

        <div class="outline-text-3" id="text-34-2">
          <p>“Dynamic abbrevs” allow the meanings of abbreviations (expansions)
          to be <b>determined automatically from the contents of the
          buffer</b>. It is completely independent of Abbrev mode.</p>

          <p><code>M-/</code> runs the command <code>dabbrev-expand</code> by
          default. Expand previous word “dynamically”. <b>Expands to the most
          recent, preceding word</b> for which this is a prefix.</p>

          <p><code>C-M-/</code> runs the command
          <code>dabbrev-completion</code>. Completion on current word. Like
          <code>M-/</code> but finds all expansions in the current buffer and
          <b>presents suggestions for completion</b>.</p>

          <p>See <a href="#sec-31-8">completion for symbol names</a>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 29.7 (info "(emacs)Dabbrev Customization")</span>

  (leuven--section <span style=
"color: #036A07;">"29.7 Dabbrev Customization"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(with-eval-after-load "dabbrev"</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">;; preserve case when expanding the abbreviation</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(setq dabbrev-case-replace nil))</span>
</pre>
          </div>
        </div>

        <div id="outline-container-sec-34-2-1" class="outline-4">
          <h4 id="sec-34-2-1">Hippie-expand</h4>

          <div class="outline-text-4" id="text-34-2-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">expand text trying various ways to find its expansion</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"M-/"</span>) 'hippie-expand)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"hippie-exp"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of expansion functions tried (in order) by `</span><span style="color: #D0372D; font-style: italic;">hippie-expand</span><span style="color: #8D8D84; font-style: italic;">'</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(completion strategy)</span>
    (setq hippie-expand-try-functions-list
          '(try-expand-dabbrev          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">current buffer</span>
            try-expand-dabbrev-visible  <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">visible (parts of all) buffers</span>
            try-expand-dabbrev-all-buffers <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">all opened buffers</span>
            try-expand-dabbrev-from-kill <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">kill ring</span>
            try-complete-file-name-partially <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">file names</span>
            try-complete-file-name
            try-expand-all-abbrevs      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">abbreviations</span>
            try-expand-list
            try-expand-line
            try-complete-lisp-symbol-partially
            try-complete-lisp-symbol
            try-expand-whole-kill))

    (setq hippie-expand-try-functions-list
          '(try-complete-file-name-partially <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">file names</span>
            try-complete-file-name
            try-expand-all-abbrevs      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">abbreviations</span>
            try-expand-dabbrev          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">current buffer</span>
            try-expand-dabbrev-all-buffers <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">all opened buffers</span>
            try-expand-dabbrev-from-kill)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">kill ring</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">integrate YASnippet with `</span><span style="color: #D0372D; font-style: italic;">hippie-expand</span><span style="color: #8D8D84; font-style: italic;">'</span>
    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"yasnippet"</span>

      (add-to-list 'hippie-expand-try-functions-list
                    'yas/hippie-try-expand)))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-34-2-2" class="outline-4">
          <h4 id="sec-34-2-2">Auto-Complete</h4>

          <div class="outline-text-4" id="text-34-2-2">
            <p>Extensible inline text completion mechanism – really
            brilliant!</p>

            <p>Auto-complete uses the variable <code>ac-modes</code> to decide
            whether to enable auto-completion in a particular mode; by default,
            <code>org-mode</code> (which interprets the
            <code>&lt;tab&gt;</code> key) is not present in this list. So, to
            enable auto-completion in Org mode, simply add it to the
            <code>ac-modes</code>:</p>
            <pre class="example">
(add-to-list 'ac-modes 'org-mode)
</pre>

            <p>Auto start vs. <code>M-/</code>.</p>

            <p>According to the settings, completion is done by
            <code>TAB</code> or <code>RET</code>.</p>

            <p>There are other ways to select candidates:</p>

            <ul class="org-ul">
              <li><code>M-1</code> to select candidate 1,</li>

              <li><code>M-2</code> to select candidate 2,</li>

              <li>and so on.</li>
            </ul>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
  (GNUEmacs

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Auto Completion</span>
    (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"auto-complete-config"</span>)
      (idle-require 'auto-complete-config)

      (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"auto-complete-config"</span>

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">avoid flyspell processes when auto completion is being started</span>
        (ac-flyspell-workaround)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">optimize sources to use</span>
        (ac-config-default)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">change default sources</span>
        (setq-default ac-sources
                      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">buffers whom major-mode is same to of a current</span>
                      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">buffer</span>
                      '(ac-source-words-in-same-mode-buffers))

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">change sources for Emacs Lisp mode</span>
        (add-hook 'emacs-lisp-mode-hook
                  (<span style="color: #0000FF;">lambda</span> ()
                    (setq ac-sources
                          '(ac-source-words-in-same-mode-buffers
                            ac-source-words-in-buffer
                            ac-source-symbols))))

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable auto-complete-mode automatically for Sword mode</span>
        (add-to-list 'ac-modes 'sword-mode)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; delay to completions will be available</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq ac-delay 0.2)</span>

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">completion menu will be automatically shown</span>
        (setq ac-auto-show-menu 0.5)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">limit on number of candidates</span>
        (setq ac-candidate-limit 100)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">delay to show quick help</span>
        (setq ac-quick-help-delay 1.0)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">max height of candidate menu</span>
        (setq ac-menu-height 12)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; start auto-completion at current point</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(define-key ac-mode-map</span>
        <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "M-TAB") 'auto-complete)</span>

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">try expand</span>
        (define-key ac-completing-map
          (kbd <span style="color: #036A07;">"&lt;tab&gt;"</span>) 'ac-expand)

        (define-key ac-completing-map
          (kbd <span style="color: #036A07;">"C-?"</span>) 'ac-quick-help)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show a lastly completed candidate help in a "quick help" form</span>
        (define-key ac-mode-map
          (kbd <span style=
"color: #036A07;">"C-c h"</span>) 'ac-last-quick-help)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show a lastly completed candidate help in a "buffer help" form.</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">If you give an argument by `</span><span style="color: #D0372D; font-style: italic;">C-u</span><span style="color: #8D8D84; font-style: italic;">', its help buffer will not disappear</span>
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically.</span>
        (define-key ac-mode-map
          (kbd <span style="color: #036A07;">"C-c H"</span>) 'ac-last-help)
)))
</pre>
            </div>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 29 ends here</span>
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-35" class="outline-2">
      <h2 id="sec-35">Dired, the Directory Editor</h2>

      <div class="outline-text-2" id="text-35">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 30 (info "(emacs)Dired"), the Directory Editor</span>

(leuven--chapter leuven-chapter-30-dired <span style=
"color: #036A07;">"30 Dired, the Directory Editor"</span>
</pre>
        </div>

        <p>Type <code>0 w</code> (<code>dired-copy-filename-as-kill</code>) in
        Dired to put the <b>full path</b> to some local file into the kill
        ring.</p>

        <div class="note">
          <p>If you want to insert a link to a file in an Org mode document,
          you can also call <code>org-insert-link</code> (<code>C-c C-l</code>)
          with a <code>C-u</code> prefix (to get the regular
          <code>find-file</code> interface).</p>
        </div>
      </div>

      <div id="outline-container-sec-35-1" class="outline-3">
        <h3 id="sec-35-1">Entering Dired</h3>

        <div class="outline-text-3" id="text-35-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs)Dired Enter")</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">directory-browsing commands</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"dired"</span>

    (leuven--section <span style=
"color: #036A07;">"30.1 (emacs)Dired Enter"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">switches passed to `</span><span style=
"color: #D0372D; font-style: italic;">ls</span><span style=
"color: #8D8D84; font-style: italic;">' for Dired</span>
    (setq dired-listing-switches
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"-a -F --group-directories-first -l -p --time-style=long-iso"</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">causes display problems on Windows</span>
          <span style="color: #036A07;">"-a -F -l -p"</span>
          )
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-2" class="outline-3">
        <h3 id="sec-35-2">Deleting Files with Dired</h3>

        <div class="outline-text-3" id="text-35-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs)Dired Deletion")</span>

    (leuven--section <span style=
"color: #036A07;">"30.3 (emacs)Dired Deletion"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">recursive deletes allowed, after asking for each directory at top</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">level</span>
    (setq dired-recursive-deletes 'top)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-3" class="outline-3">
        <h3 id="sec-35-3">Visiting Files in Dired</h3>

        <div class="outline-text-3" id="text-35-3">
          <dl class="org-dl">
            <dt><code>^</code></dt>

            <dd><code>dired-up-directory</code>.</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs)Dired Visiting")</span>

    (leuven--section <span style=
"color: #036A07;">"30.5 (emacs)Dired Visiting"</span>)
</pre>
          </div>
        </div>

        <div id="outline-container-sec-35-3-1" class="outline-4">
          <h4 id="sec-35-3-1">Reuse Dired buffers</h4>

          <div class="outline-text-4" id="text-35-3-1">
            <p>Single Dired buffer.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">reuse Dired buffers, by running the command</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">dired-find-alternate-file</span><span style="color: #8D8D84; font-style: italic;">' (bound to `a') on a directory</span>
    (put 'dired-find-alternate-file 'disabled nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">reuse the current Dired directory buffer to visit another directory</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(limit Dired to 1 single buffer)</span>
    (<span style="color: #0000FF;">when</span> (try-require 'dired-single)

      (define-key dired-mode-map
        (kbd <span style=
"color: #036A07;">"&lt;return&gt;"</span>) 'dired-single-buffer)

      (define-key dired-mode-map
        (kbd <span style=
"color: #036A07;">"&lt;mouse-1&gt;"</span>) 'dired-single-buffer-mouse)

      (define-key dired-mode-map
        (kbd <span style="color: #036A07;">"^"</span>)
        (<span style="color: #0000FF;">lambda</span> ()
          (interactive)
          (dired-single-buffer <span style="color: #036A07;">".."</span>)))

      (define-key dired-mode-map
        (kbd <span style="color: #036A07;">"C-x C-j"</span>)
        (<span style="color: #0000FF;">lambda</span> ()
          (interactive)
          (dired-single-buffer <span style="color: #036A07;">".."</span>))))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-35-3-2" class="outline-4">
          <h4 id="sec-35-3-2">Open file with default tool (open directory with
          Windows Explorer)</h4>

          <div class="outline-text-4" id="text-35-3-2">
            <p>On top of the traditional ways, there are also these add-ons
            which open files using external programs (such as PDF viewers),
            based on their extension.</p>

            <p>One advantage is that using the traditional <code>!</code> (or
            <code>X</code>) switch with Dired locks up Emacs until you close
            the other program. These add-ons do not and leave Emacs free for
            continued used.</p>

            <table class="inlinetask" width="100%">
              <tr>
                <td valign="top"><b><span class=
                "todo TODO">TODO</span></b></td>

                <td width="100%"><b>Read <a href=
                "http://www.piprime.fr/1302/plus-qu-un-explorateur-de-fichiers-le-mode-dired-d-emacs/">
                http://www.piprime.fr/1302/plus-qu-un-explorateur-de-fichiers-le-mode-dired-d-emacs/</a></b><br />
                </td>
              </tr>
            </table>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
(<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">helm-c-open-file-with-default-tool</span> (file)
  <span style=
"color: #008000;">"Open FILE with the default tool on this platform."</span>
  (<span style="color: #0000FF;">let</span> (process-connection-type)
    (<span style="color: #0000FF;">if</span> (eq system-type 'windows-nt)
        (helm-w32-shell-execute-open-file file)
        (start-process <span style=
"color: #036A07;">"helm-c-open-file-with-default-tool"</span>
                       nil
                       (<span style=
"color: #0000FF;">cond</span> ((eq system-type 'gnu/linux)
                              <span style="color: #036A07;">"xdg-open"</span>)
                             ((or (eq system-type 'darwin) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Mac OS X</span>
                                  (eq system-type 'macos)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Mac OS 9</span>
                              <span style="color: #036A07;">"open"</span>))
                       file))))
</pre>
            </div>

            <p>If <code>xdg-open</code> is not available, one can replace it
            with <code>gnome-open</code> or <code>kde-open</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
(<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">dired-launch-command</span> ()
 (interactive)
 (dired-do-shell-command
  (case system-type
    (gnu/linux <span style=
"color: #036A07;">"gnome-open"</span>)            <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">right for gnome (ubuntu), not for other systems</span>
    (darwin <span style="color: #036A07;">"open"</span>))
  nil
  (dired-get-marked-files t current-prefix-arg)))

(define-key dired-mode-map
  (kbd <span style="color: #036A07;">"F"</span>) 'dired-launch-command)
</pre>
            </div>
          </div>

          <div id="outline-container-sec-35-3-2-1" class="outline-5">
            <h5 id="sec-35-3-2-1">Ask a WWW browser to display file</h5>

            <div class="outline-text-5" id="text-35-3-2-1">
              <p>Just ask a WWW browser to display the current file.</p>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    (define-key dired-mode-map
      (kbd <span style=
"color: #036A07;">"e"</span>) 'browse-url-of-dired-file) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">&lt;C-RET&gt;?</span>
</pre>
              </div>

              <p>It works for files as well as for directories.</p>

              <p>It opens the Windows explorer for:</p>

              <ul class="org-ul">
                <li>the <b>current directory</b> when invoked on
                <code>.</code>.</li>

                <li>the <b>parent directory</b> when invoked on
                <code>..</code>.

                  <table class="inlinetask" width="100%">
                    <tr>
                      <td valign="top"><b><span class=
                      "todo TODO">TODO</span></b></td>

                      <td width="100%">
                        <b>Mapcar on the browse-url function</b><br />

                        <p>See code of
                        <code>w32-dired-open-files-externally</code>.</p>
                      </td>
                    </tr>
                  </table>

                  <table class="inlinetask" width="100%">
                    <tr>
                      <td valign="top"><b><span class=
                      "todo TODO">TODO</span></b></td>

                      <td width="100%">
                        <b><code>C-u &lt;RET&gt;</code> opens dired on Org
                        link</b><br />

                        <p>We should probably have the same type of key binding
                        for opening Explorer from Dired.</p>
                      </td>
                    </tr>
                  </table>
                </li>
              </ul>
            </div>
          </div>

          <div id="outline-container-sec-35-3-2-2" class="outline-5">
            <h5 id="sec-35-3-2-2">Many files at once (for Windows)</h5>

            <div class="outline-text-5" id="text-35-3-2-2">
              <p>For those under Windows:</p>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">open files using Windows associations</span>
    (GNUEmacs
      (<span style="color: #0000FF;">when</span> running-ms-windows
        (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">w32-dired-open-files-externally</span> (<span style=
"color: #6434A3;">&amp;optional</span> arg)
          <span style=
"color: #008000;">"In Dired, open the marked files (or directories) with the default</span>
<span style="color: #008000;">        Windows tool."</span>
          (interactive <span style="color: #036A07;">"P"</span>)
          (mapcar
           (<span style="color: #0000FF;">lambda</span> (file)
             (w32-shell-execute <span style=
"color: #036A07;">"open"</span> (convert-standard-filename file)))
           (dired-get-marked-files nil arg)))

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">bind it to `E' in Dired mode</span>
        (define-key dired-mode-map
          (kbd <span style=
"color: #036A07;">"E"</span>) 'w32-dired-open-files-externally)))
</pre>
              </div>

              <p>It works for files as well as for directories. It opens the
              Windows explorer for the <b>current directory</b> when invoked on
              <code>.</code> (correct) or <code>..</code> (bug!!).</p>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-35-3-3" class="outline-4">
          <h4 id="sec-35-3-3">Open file with w3m</h4>

          <div class="outline-text-4" id="text-35-3-3">
            <p>See news “Opening html-File in Dired with w3m” for extra
            info.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">open current file with w3m</span>
    (<span style="color: #0000FF;">when</span> (executable-find <span style=
"color: #036A07;">"w3m"</span>)
      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">dired-find-w3m</span> ()
        <span style=
"color: #008000;">"In Dired, visit (with find-w3m) the file named on this line."</span>
        (interactive)
        (w3m-find-file (file-name-sans-versions (dired-get-filename) t)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add a binding "W" -&gt; `</span><span style="color: #D0372D; font-style: italic;">dired-find-w3m</span><span style="color: #8D8D84; font-style: italic;">' to Dired</span>
      (define-key dired-mode-map
        <span style="color: #036A07;">"W"</span> 'dired-find-w3m))
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-4" class="outline-3">
        <h3 id="sec-35-4">Dired Marks vs. Flags</h3>

        <div class="outline-text-3" id="text-35-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-make-executable</span> ()
      <span style=
"color: #008000;">"Make a script executable, from the buffer in which you edit it."</span>
      (interactive)
      (shell-command (concat <span style=
"color: #036A07;">"chmod +x "</span> buffer-file-name)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-5" class="outline-3">
        <h3 id="sec-35-5">Operating on Files</h3>

        <div class="outline-text-3" id="text-35-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs)Operating on Files")</span>

    (leuven--section <span style=
"color: #036A07;">"30.7 (emacs)Operating on Files"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">try to guess a default target directory</span>
    (setq dired-dwim-target t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">copy recursively without asking</span>
    (setq dired-recursive-copies 'always)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-6" class="outline-3">
        <h3 id="sec-35-6">Updating the Dired Buffer</h3>

        <div class="outline-text-3" id="text-35-6">
          <p>Check this out as well: <a href=
          "http://www.emacswiki.org/emacs/DiredSortMenu">http://www.emacswiki.org/emacs/DiredSortMenu</a></p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs)Dired Updating")</span>

    (leuven--section <span style=
"color: #036A07;">"30.15 (emacs)Dired Updating"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add-on for sorting</span>
    (try-require 'dired-sort-map)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">press `s' then `s', `x', `t', `n' or `d' to sort by</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Size, eXtension, Time, Name or name grouping Dirs</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-7" class="outline-3">
        <h3 id="sec-35-7">Dired and <code>find</code></h3>

        <div class="outline-text-3" id="text-35-7">
          <p>For searches in Dired, see <code>dired-do-search</code>
          (<code>A</code>).</p>

          <ul class="org-ul">
            <li>Search through all <b>marked files</b> for a match for
            regexp</li>

            <li>Stops when a match is found</li>

            <li>To continue searching for next match, use command “M-,”</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs)Dired and Find")</span>

    (leuven--section <span style=
"color: #036A07;">"30.16 (emacs)Dired and Find"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; what to use in place of `</span><span style="color: #D0372D; font-style: italic;">-ls</span><span style="color: #8D8D84; font-style: italic;">' as the final argument</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq find-ls-option '("-print0 | xargs -0 ls -ld" . "-ld"))</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; quicker to collate the matches and then use `</span><span style="color: #D0372D; font-style: italic;">xargs</span><span style="color: #8D8D84; font-style: italic;">' to run the</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; command (variable defined in `</span><span style="color: #D0372D; font-style: italic;">find-dired.el</span><span style="color: #8D8D84; font-style: italic;">')</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(when Cygwin... </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">search for files with names matching a wild card pattern and Dired</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the output</span>
    (global-set-key
      (kbd <span style="color: #036A07;">"C-c 1"</span>) 'find-name-dired)
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">case insensitive if `</span><span style=
"color: #D0372D; font-style: italic;">read-file-name-completion-ignore-case</span><span style="color: #8D8D84; font-style: italic;">' is non-nil</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">find-grep-dired</span><span style=
"color: #8D8D84; font-style: italic;">' case insensitivity</span>
    (setq find-grep-options <span style="color: #036A07;">"-i -q"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">search for files with contents matching a wild card pattern and Dired</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the output</span>
    (global-set-key
      (kbd <span style="color: #036A07;">"C-c 2"</span>) 'find-grep-dired)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-8" class="outline-3">
        <h3 id="sec-35-8">Editing the Dired Buffer</h3>

        <div class="outline-text-3" id="text-35-8">
          <p><code>Wdired</code> mode is great for renaming (a lot of) files in
          a directory, as it allows editing the Dired buffer like a text file,
          using all the power of Emacs. That is, one can use keyboard macros,
          search and replace, rectangle mode (great for adding prefixes to file
          names), flip mode bits with the mouse, etc.!</p>

          <p>To enter it, type <code>C-x C-q</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs)Wdired")</span>

    (leuven--section <span style=
"color: #036A07;">"30.17 Editing the (emacs)Wdired Buffer"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">put a Dired buffer in a mode in which filenames are editable</span>
    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"wdired"</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">permissions bits of the files are editable</span>
      (setq wdired-allow-to-change-permissions t))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-9" class="outline-3">
        <h3 id="sec-35-9">Viewing Image Thumbnails in Dired</h3>

        <div class="outline-text-3" id="text-35-9">
          <p><code>M-x image-dired</code> and choose a directory with
          images.</p>

          <p>Prerequisites:</p>

          <ul class="org-ul">
            <li><a href="http://www.imagemagick.org./">ImageMagick</a>
            package</li>

            <li>JpegTRAN program</li>

            <li><a href=
            "http://www.sno.phy.queensu.ca/~phil/exiftool/">exiftool</a> to
            <b>edit comments and tags</b> for each image.</li>
          </ul>

          <p>Key bindings:</p>

          <dl class="org-dl">
            <dt>C-t d</dt>

            <dd><code>image-dired-display-thumbs</code> (on marked files).</dd>

            <dt>C-t e</dt>

            <dd><code>image-dired-dired-edit-comment-and-tags</code>.</dd>
          </dl>

          <p>For more information, see:</p>

          <ul class="org-ul">
            <li><a href=
            "http://www.emacswiki.org/Tumme">http://www.emacswiki.org/Tumme</a></li>

            <li><a href=
            "http://wikemacs.org/wiki/Image-dired">http://wikemacs.org/wiki/Image-dired</a></li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs)Image-Dired")</span>

    (leuven--section <span style=
"color: #036A07;">"30.18 Viewing Image Thumbnails in Dired"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use Dired to browse and manipulate your images</span>
    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"image-dired"</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">maximum number of files to show before </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">warning</span><span style="color: #8D8D84; font-style: italic;"> the user</span>
      (setq image-dired-show-all-from-dir-max-files 100)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">size of button-like border around thumbnails</span>
      (setq image-dired-thumb-relief 0)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">size of the margin around thumbnails</span>
      (setq image-dired-thumb-margin 4))
</pre>
          </div>

          <p>The following code block is currently disabled, because it causes
          problems with Org and PDF LaTeX: when we’ve opened the TeX file, to
          compile it from LaTeX because an error has been reported (with no
          details), then the TeX file blocks the next automatic exports
          (<code>C-u C-c C-e</code>), asking for confirmation because the TeX
          buffer is open…</p>
          <pre class="example">
Reverting buffer `prestations/'.
prestations-2013-06.tex changed on disk; really edit the buffer? (y, n, r or C-h) n
</pre>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
(add-hook 'dired-mode-hook
          (<span style="color: #0000FF;">lambda</span> ()

            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Auto-refresh dired on file change</span>
            (auto-revert-mode)
            (setq-default auto-revert-interval 1)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-10" class="outline-3">
        <h3 id="sec-35-10">Dired Extra</h3>

        <div class="outline-text-3" id="text-35-10">
          <p>Extra Dired functionality</p>

          <ul class="org-ul">
            <li><code>dired-x</code> has a feature to “guess” the right shell
            command and the right external viewer for documents (see
            <code>dired-guess-shell-alist-user</code>)</li>

            <li>You can also jump to the Dired buffer corresponding to the
            current buffer by pressing <code>C-x C-j</code>
            (<code>dired-jump</code>). If in Dired already, pop up a level and
            goto old directory’s line.

              <p><b>Standard</b> alternative: <code>C-x d &lt;RET&gt;</code>,
              though it doesn’t set point on the right file.</p>
            </li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Dired Extra</span>

    (leuven--section <span style="color: #036A07;">"30.XX (dired-x)Top"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">load `</span><span style=
"color: #D0372D; font-style: italic;">dired-x.el</span><span style=
"color: #8D8D84; font-style: italic;">' when Dired is first invoked (for example, when</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">you first type `C-x d')</span>
    (add-hook 'dired-load-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (load <span style="color: #036A07;">"dired-x"</span>)))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "dired" ends here</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-11" class="outline-3">
        <h3 id="sec-35-11">Dired+</h3>

        <div class="outline-text-3" id="text-35-11">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Dired+</span>

  (leuven--section <span style="color: #036A07;">"30.XX Dired+"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">extensions to Dired (provides fancy highlighting, etc.)</span>
  (add-hook 'dired-load-hook
            (<span style="color: #0000FF;">lambda</span> ()
              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't hide details in Dired</span>
              (setq diredp-hide-details-initially-flag nil)

              <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't wrap "next" command around to buffer beginning</span>
              (setq diredp-wrap-around-flag nil)

              (try-require 'dired+)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-35-12" class="outline-3">
        <h3 id="sec-35-12">Emulation of <code>ls</code> on MS-Windows</h3>

        <div class="outline-text-3" id="text-35-12">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(emacs)ls in Lisp")</span>

  (leuven--section <span style=
"color: #036A07;">"G.4 (emacs)ls in Lisp"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">emulate insert-directory completely in Emacs Lisp</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ls-lisp"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">disable the case sensitive sort of file names</span>
    (setq ls-lisp-ignore-case t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">sort directories first</span>
    (setq ls-lisp-dirs-first t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use ISO 8601 dates (on MS-Windows)</span>
    (setq ls-lisp-format-time-list
          '(<span style="color: #036A07;">"%Y-%m-%d %H:%M"</span>
            <span style="color: #036A07;">"%Y-%m-%d %H:%M"</span>))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use localized date/time format</span>
    (setq ls-lisp-use-localized-time-format t))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 30 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-36" class="outline-2">
      <h2 id="sec-36">The Calendar and the Diary</h2>

      <div class="outline-text-2" id="text-36">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 31 The (info "(emacs)Calendar/Diary")</span>

(leuven--chapter leuven-chapter-31-calendar-diary <span style=
"color: #036A07;">"31 The Calendar and the Diary"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-36-1" class="outline-3">
        <h3 id="sec-36-1">Calendar Motion</h3>

        <div class="outline-text-3" id="text-36-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 31.1 (info "(emacs)Calendar Motion")</span>

  (leuven--section <span style=
"color: #036A07;">"31.1 (emacs)Calendar Motion"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">years must be written in full</span>
  (setq diary-abbreviated-year-flag nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">set the style of calendar and diary dates to ISO (how to interpret</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the dates)</span>
  (setq calendar-date-style 'iso)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">week in the calendar begins on Monday</span>
  (setq calendar-week-start-day 1)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">mark all visible dates that have diary entries</span>
  (<span style="color: #0000FF;">when</span> (file-exists-p <span style=
"color: #036A07;">"~/diary"</span>)
    (setq calendar-mark-diary-entries-flag t))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">mark the current date (by changing its face) after generating a calendar,</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">if today's date is visible</span>
  (add-hook 'calendar-today-visible-hook 'calendar-mark-today)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-36-2" class="outline-3">
        <h3 id="sec-36-2">Scroll Calendar</h3>

        <div class="outline-text-3" id="text-36-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 31.2 (info "(emacs)Scroll Calendar")</span>

  (leuven--section <span style=
"color: #036A07;">"31.2 (emacs)Scroll Calendar"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">fix foolish calendar-mode scrolling after loading `</span><span style="color: #D0372D; font-style: italic;">calendar.el</span><span style="color: #8D8D84; font-style: italic;">'</span>
  (add-hook 'calendar-load-hook
            (<span style="color: #0000FF;">lambda</span> ()
              (define-key calendar-mode-map
                (kbd <span style=
"color: #036A07;">"&gt;"</span>) 'scroll-calendar-left)
              (define-key calendar-mode-map
                (kbd <span style=
"color: #036A07;">"&lt;"</span>) 'scroll-calendar-right)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-36-3" class="outline-3">
        <h3 id="sec-36-3">Times of Sunrise/Sunset</h3>

        <div class="outline-text-3" id="text-36-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 31.7 Times of (info "(emacs)Sunrise/Sunset")</span>

  (leuven--section <span style=
"color: #036A07;">"31.7 Times of (emacs)Sunrise/Sunset"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">calendar functions for solar events</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"solar"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name of the calendar location</span>
    (setq calendar-location-name <span style=
"color: #036A07;">"Leuven, BE"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">latitude of `</span><span style=
"color: #D0372D; font-style: italic;">calendar-location-name</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
    (setq calendar-latitude 50.88)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">longitude of `</span><span style=
"color: #D0372D; font-style: italic;">calendar-location-name</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
    (setq calendar-longitude 4.70))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-36-4" class="outline-3">
        <h3 id="sec-36-4">Diary</h3>

        <div class="outline-text-3" id="text-36-4">
          <p>The Emacs diary keeps track of appointments or other events on a
          daily basis, in conjunction with the calendar. To use the diary
          feature, you must first create a “diary file” containing a list of
          events and their dates.</p>

          <p>But <a href="#sec-28">Org</a> outperforms it!</p>
        </div>
      </div>

      <div id="outline-container-sec-36-5" class="outline-3">
        <h3 id="sec-36-5">Appointments</h3>

        <div class="outline-text-3" id="text-36-5">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 31.11 (info "(emacs)Appointments")</span>

  (leuven--section <span style=
"color: #036A07;">"31.11 (emacs)Appointments"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">insinuate appt if `</span><span style=
"color: #D0372D; font-style: italic;">diary-file</span><span style=
"color: #8D8D84; font-style: italic;">' exists</span>
  (<span style="color: #0000FF;">if</span> (file-readable-p <span style=
"color: #036A07;">"~/diary"</span>)
      (try-require 'appt)               <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">requires `</span><span style=
"color: #D0372D; font-style: italic;">diary-lib</span><span style=
"color: #8D8D84; font-style: italic;">', which requires</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">diary-loaddefs</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
    (message <span style=
"color: #036A07;">"Appointment reminders library `</span><span style=
"color: #D0372D;">appt</span><span style=
"color: #036A07;">' not loaded (no diary file found)"</span>))

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"appt"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">send the first </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">warning</span><span style="color: #8D8D84; font-style: italic;"> 60 minutes before an appointment</span>
    (setq appt-message-<span style=
"color: #CC0000; background-color: #FFFF88;">warning</span>-time 60) <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">[default: 12]</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">warn every 15 minutes</span>
    (setq appt-display-interval 15)     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">[default: 3]</span>
</pre>
          </div>

          <p>Send notifications using <code>notifications-notify</code> (which
          was added in Emacs 24). It uses <code>notify-send</code> (if the
          <code>libnotify-bin</code> Ubuntu package is installed).</p>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%"><b>For Windows users: use `todochicku.el’ and
              the snarl notifier</b><br /></td>
            </tr>
          </table>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%"><b>Diff between shell-command and call-process?
              Blocking call?</b><br /></td>
            </tr>
          </table>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use a separate window to display appointment reminders</span>
    (setq appt-display-format 'window)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">function called to display appointment reminders *in a window*</span>
    (setq appt-disp-window-function (function leuven--appt-display))

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--appt-display</span> (mins-to-appt current-time notification-string)
      <span style=
"color: #008000;">"Display a reminder for appointments.</span>
<span style="color: #008000;">    Use `</span><span style=
"color: #D0372D;">libnotify</span><span style=
"color: #008000;">' if available and if display is graphical, or fall back on a</span>
<span style="color: #008000;">    message in the echo area."</span>
      (or (listp mins-to-appt)
          (setq notification-string (list notification-string)))
      (<span style=
"color: #0000FF;">dotimes</span> (i (length notification-string))
        (<span style="color: #0000FF;">cond</span> ((and (display-graphic-p)
                    (executable-find <span style=
"color: #036A07;">"notify-send"</span>))
               (shell-command
                (concat <span style="color: #036A07;">"notify-send "</span>
                        <span style=
"color: #036A07;">"-i /usr/share/icons/gnome/32x32/status/appointment-soon.png "</span>
                        <span style="color: #036A07;">"-t 1000 "</span>
                        <span style="color: #036A07;">"'Appointment' "</span>
                        <span style=
"color: #036A07;">"'"</span> (nth i notification-string) <span style=
"color: #036A07;">"'"</span>)))
              (t
               (message <span style=
"color: #036A07;">"%s"</span> (nth i notification-string))
               (sit-for 1)))))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">turn appointment checking on (enable reminders)</span>
    (<span style="color: #0000FF;">when</span> leuven-load-verbose
      (message <span style=
"color: #036A07;">"(Info) Enable appointment reminders..."</span>))
    (GNUEmacs
      (appt-activate 1))
    (XEmacs
      (appt-initialize))
    (<span style="color: #0000FF;">when</span> leuven-load-verbose
      (message <span style=
"color: #036A07;">"(Info) Enable appointment reminders... Done"</span>))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable appointment notification, several minutes beforehand</span>
    (add-hook 'diary-hook 'appt-make-list)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">keep your appointment list clean: if you delete an appointment from</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">your Org agenda file, delete the corresponding alert</span>
    (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">org-agenda-to-appt</span> (before leuven-org-agenda-to-appt activate)
      <span style="color: #008000;">"Clear the existing `</span><span style=
"color: #D0372D;">appt-time-msg-list</span><span style=
"color: #008000;">'."</span>
      (setq appt-time-msg-list nil))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add today's appointments (found in `</span><span style="color: #D0372D; font-style: italic;">org-agenda-files</span><span style="color: #8D8D84; font-style: italic;">') each time the</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">agenda buffer is (re)built</span>
    (add-hook 'org-finalize-agenda-hook
              'org-agenda-to-appt)      <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! don't use the `</span><span style=
"color: #D0372D; font-style: italic;">org-agenda-mode-hook</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! because the Org agenda files would</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! be opened once by</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! `</span><span style=
"color: #D0372D; font-style: italic;">org-agenda-to-appt</span><span style=
"color: #8D8D84; font-style: italic;">', and then</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! killed by `</span><span style=
"color: #D0372D; font-style: italic;">org-release-buffers</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! (because `</span><span style=
"color: #D0372D; font-style: italic;">org-agenda-to-appt</span><span style=
"color: #8D8D84; font-style: italic;">' closes</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! all the files it opened itself -- as</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! they weren't already opened), to be</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! finally re-opened!</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add today's appointments (found in `</span><span style="color: #D0372D; font-style: italic;">org-agenda-files</span><span style="color: #8D8D84; font-style: italic;">') each time such a</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">file is saved</span>
    (add-hook 'after-save-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (<span style=
"color: #0000FF;">when</span> (and (eq major-mode 'org-mode)
                           (org-agenda-file-p))
                  (org-agenda-to-appt))))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "appt" ends here</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-36-6" class="outline-3">
        <h3 id="sec-36-6">Advanced Calendar/Diary Usage</h3>

        <div class="outline-text-3" id="text-36-6">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 31.15 (info "(emacs)Advanced Calendar/Diary Usage")</span>

  (leuven--section <span style=
"color: #036A07;">"31.15 (emacs)Advanced Calendar/Diary Usage"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">get rid of some holidays</span>
  (setq holiday-general-holidays nil)   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">too U.S.-centric holidays</span>
  (setq holiday-oriental-holidays nil)  <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Oriental holidays</span>
  (setq holiday-hebrew-holidays nil)    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">religious holidays</span>
  (setq holiday-islamic-holidays nil)   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">religious holidays</span>
  (setq holiday-bahai-holidays nil)     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Baha'i holidays</span>
  (setq holiday-solar-holidays nil)     <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">sun-related holidays</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">mark dates of holidays in the calendar window</span>
  (setq calendar-mark-holidays-flag t)
</pre>
          </div>

          <p>After the calendar is loaded, <code>calendar-holidays</code> is
          the list of notable days for the command <code>M-x
          holidays</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-insert-current-date</span> (prefix)
    <span style=
"color: #008000;">"Insert the current date in ISO format.</span>
<span style=
"color: #008000;">  With one PREFIX argument, add day of week.  With two PREFIX arguments, add day</span>
<span style="color: #008000;">  of week and time."</span>
    (interactive <span style="color: #036A07;">"P"</span>)
    (<span style="color: #0000FF;">let</span> ((format (<span style=
"color: #0000FF;">cond</span> ((not prefix) <span style=
"color: #036A07;">"%Y-%m-%d"</span>)
                        ((equal prefix '(4)) <span style=
"color: #036A07;">"%Y-%m-%d %a"</span>)
                        ((equal prefix '(16)) <span style=
"color: #036A07;">"%Y-%m-%d %a %H:%M"</span>))))
      (insert (format-time-string format))))

  (global-set-key
    (kbd <span style=
"color: #036A07;">"C-c ."</span>) 'leuven-insert-current-date)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-36-7" class="outline-3">
        <h3 id="sec-36-7">Calendar framework</h3>

        <div class="outline-text-3" id="text-36-7">
          <p>After displaying your <code>calfw</code> buffer, you can get a
          HTML buffer with <code>M-x htmlfontify-buffer</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* Calendar view framework on Emacs</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">calendar view framework on Emacs</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"calfw"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Unicode characters</span>
    (setq cfw:fchar-junction ?╋
          cfw:fchar-vertical-line ?┃
          cfw:fchar-horizontal-line ?━
          cfw:fchar-left-junction ?┣
          cfw:fchar-right-junction ?┫
          cfw:fchar-top-junction ?┯
          cfw:fchar-top-left-corner ?┏
          cfw:fchar-top-right-corner ?┓))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">calendar view for org-agenda</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"calfw-org"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">remove some strings (tags and filenames) from item summary</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">cfw:org-summary-format</span> (item)
      <span style=
"color: #008000;">"Format an item (How should it be displayed?)."</span>
      (<span style=
"color: #0000FF;">let*</span> ((time (cfw:org-tp item 'time))
             (time-of-day (cfw:org-tp item 'time-of-day))
             (time-str (and time-of-day
                            (format <span style=
"color: #036A07;">"%02i:%02i "</span>
                                    (/ time-of-day 100)
                                    (% time-of-day 100))))
             (category (cfw:org-tp item 'org-category))
             (tags (cfw:org-tp item 'tags))
             (marker (cfw:org-tp item 'org-marker))
             (buffer (and marker (marker-buffer marker)))
             (text (cfw:org-extract-summary item))
             (props (cfw:extract-text-props item 'face 'keymap)))
        (propertize
         (concat
          (<span style=
"color: #0000FF;">if</span> time-str (apply 'propertize time-str props)) text <span style="color: #036A07;">" "</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(and buffer (buffer-name buffer))</span>
          )
         'keymap cfw:org-text-keymap
         <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Delete the display property, since displaying images will break our</span>
         <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">table layout</span>
         'display nil))))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 31 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-37" class="outline-2">
      <h2 id="sec-37">Sending Mail</h2>

      <div class="outline-text-2" id="text-37">
        <p>Minimal configuration for sending a bug report, for example.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 32 (info "(emacs)Sending Mail")</span>

(leuven--chapter leuven-chapter-32-sending-mail <span style=
"color: #036A07;">"32 Sending Mail"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">full name of this user</span>
  (setq user-full-name <span style="color: #036A07;">"John Doe"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">full mailing address of this user</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(used in MAIL envelope FROM, and to select the default personality ID)</span>
  (setq user-mail-address <span style=
"color: #036A07;">"johndoe@example.com"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">sending mail</span>
  (setq send-mail-function 'smtpmail-send-it)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default SMTP server (overriden by `</span><span style="color: #D0372D; font-style: italic;">smtpmail-smtp-server</span><span style="color: #8D8D84; font-style: italic;">')</span>
  (setq smtpmail-default-smtp-server <span style=
"color: #036A07;">"smtp"</span>) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">SMTP process must be running there</span>

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 32 ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-38" class="outline-2">
      <h2 id="sec-38">Gnus</h2>

      <div class="outline-text-2" id="text-38">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 34 (info "(emacs)Gnus")</span>

(leuven--chapter leuven-chapter-34-gnus <span style=
"color: #036A07;">"34 Gnus"</span>

  (global-set-key
    (kbd <span style="color: #036A07;">"C-c n"</span>)
    (<span style="color: #0000FF;">lambda</span> ()
      (interactive)
      (switch-or-start 'gnus <span style="color: #036A07;">"*Group*"</span>)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">directory beneath which additional per-user Gnus-specific files are</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">placed</span>
  (setq gnus-directory <span style=
"color: #036A07;">"~/.gnus.d/"</span>)    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">this should end with a directory</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">separator</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">a newsreader for GNU Emacs</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"gnus"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">package to compose an outgoing mail (Message, with Gnus paraphernalia)</span>
    (setq mail-user-agent 'gnus-user-agent)
    (XEmacs
      (setq toolbar-mail-reader 'gnus))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">reading mail with Gnus</span>
    (setq read-mail-command 'gnus))
</pre>
        </div>
      </div>

      <div id="outline-container-sec-38-1" class="outline-3">
        <h3 id="sec-38-1">BBDB</h3>

        <div class="outline-text-3" id="text-38-1">
          <p>bbdb3: <a href=
          "https://savannah.nongnu.org/projects/bbdb">https://savannah.nongnu.org/projects/bbdb</a></p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Insidious bbdb</span>

  (leuven--section <span style="color: #036A07;">"Insidious bbdb"</span>)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* (info "(bbdb)Installation")</span>

  (<span style="color: #0000FF;">unless</span> (<span style=
"color: #0000FF;">ignore-</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #0000FF;">s</span> (load-library <span style=
"color: #036A07;">"bbdb-autoloads"</span>)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">"hand-made"</span>
    (autoload 'bbdb <span style="color: #036A07;">"bbdb-com"</span>
      <span style="color: #008000;">"Insidious Big Brother Database."</span> t)
    (autoload 'bbdb-name <span style="color: #036A07;">"bbdb-com"</span>
      <span style="color: #008000;">"Insidious Big Brother Database."</span> t)
    (autoload 'bbdb-company <span style="color: #036A07;">"bbdb-com"</span>
      <span style="color: #008000;">"Insidious Big Brother Database."</span> t)
    (autoload 'bbdb-net <span style="color: #036A07;">"bbdb-com"</span>
      <span style="color: #008000;">"Insidious Big Brother Database."</span> t)
    (autoload 'bbdb-notes <span style="color: #036A07;">"bbdb-com"</span>
      <span style="color: #008000;">"Insidious Big Brother Database."</span> t)

    (autoload 'bbdb-insinuate-gnus <span style=
"color: #036A07;">"bbdb-gnus"</span>
      <span style="color: #008000;">"Hook BBDB into Gnus."</span>)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(autoload 'bbdb-insinuate-message "bbdb"</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"Hook BBDB into `</span><span style=
"color: #D0372D; font-style: italic;">message-mode</span><span style=
"color: #8D8D84; font-style: italic;">'.") ; BBDB 2.35</span>
    (autoload 'bbdb-insinuate-message <span style=
"color: #036A07;">"bbdb-message"</span>
      <span style="color: #008000;">"Hook BBDB into `</span><span style=
"color: #D0372D;">message-mode</span><span style="color: #008000;">'."</span>))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">search the BBDB</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"&lt;C-f11&gt;"</span>) 'bbdb)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"bbdb"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">coding system used for reading and writing `</span><span style="color: #D0372D; font-style: italic;">bbdb-file</span><span style="color: #8D8D84; font-style: italic;">'</span>
    (setq bbdb-file-coding-system 'utf-8)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ensure `</span><span style=
"color: #D0372D; font-style: italic;">~/.bbdb</span><span style=
"color: #8D8D84; font-style: italic;">' never becomes non utf-8 again (it is defined with</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">defconst</span><span style=
"color: #8D8D84; font-style: italic;">', so it is reset whenever `</span><span style="color: #D0372D; font-style: italic;">bbdb.el</span><span style="color: #8D8D84; font-style: italic;">' is loaded)</span>
    (add-hook 'bbdb-load-hook
              (<span style="color: #0000FF;">lambda</span> ()
                (setq bbdb-file-coding-system 'utf-8)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable the various package-specific BBDB functions</span>
    (bbdb-initialize 'gnus 'message)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">- add bindings for the default keys to Gnus and configure Gnus to</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">notify the BBDB when new messages are loaded (required if the</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">BBDB is to be able to display BBDB entries for messages displayed</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">in Gnus)</span>
    <span style="color: #8D8D84;">;;</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">- add a binding for `</span><span style=
"color: #D0372D; font-style: italic;">M-TAB</span><span style=
"color: #8D8D84; font-style: italic;">' to Message mode.  This will enable</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">completion of addresses based on BBDB records</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">what do we do when invoking bbdb interactively (`:' to display sender)</span>
    (setq bbdb-mua-update-interactive-p '(query . create))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">update BBDB silently (don't display an auto-updated BBDB window)</span>
    (setq bbdb-mua-pop-up nil)
</pre>
          </div>
        </div>

        <div id="outline-container-sec-38-1-1" class="outline-4">
          <h4 id="sec-38-1-1">Interfaces</h4>

          <div class="outline-text-4" id="text-38-1-1">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* (info "(bbdb)Interfaces")</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">mail aliases (local mailing lists)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'message-setup-hook 'bbdb-define-all-aliases) ; BBDB 2.35</span>
    (add-hook 'message-setup-hook 'bbdb-mail-aliases) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 3</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">always use full name when sending mail</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(even if User Name has an address of the form <a href="mailto:user.name%40domain">&lt;user.name@domain&gt;</a>)</span>
    (setq bbdb-dwim-net-address-allow-redundancy t) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 2.35</span>
    (setq bbdb-mail-avoid-redundancy nil) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 3</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">no popup on auto-complete</span>
    (setq bbdb-completion-display-record nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">completion is done across the set of all full-names and user-ids</span>
    (setq bbdb-completion-type nil)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-38-1-2" class="outline-4">
          <h4 id="sec-38-1-2">Reader-specific Features</h4>

          <div class="outline-text-4" id="text-38-1-2">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* (info "(bbdb)Reader-specific Features")</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">marking posters with records in the BBDB</span>
    (setq bbdb/gnus-summary-mark-known-posters t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">mark authors in the Summary Buffer who have records in the BBDB</span>
    (setq bbdb/gnus-summary-known-poster-mark <span style=
"color: #036A07;">"B"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display the poster's name from the BBDB if we have one</span>
    (setq bbdb/gnus-summary-prefer-real-names t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">replace the information provided in the From header with data from</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the BBDB if we have one</span>
    (setq bbdb/gnus-summary-prefer-bbdb-data t)

    (setq bbdb/gnus-summary-show-bbdb-names t)
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-38-1-3" class="outline-4">
          <h4 id="sec-38-1-3">Options</h4>

          <div class="outline-text-4" id="text-38-1-3">
            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* (info "(bbdb)Options")</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">You can add the author of a mail or posting to the BBDB</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">by hitting `:'</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name of the file which contains your personal database</span>
    (setq bbdb-file <span style="color: #036A07;">"~/.bbdb"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">no default area code to use when prompting for a new phone number</span>
    (setq bbdb-default-area-code nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default country to use if none is specified</span>
    (setq bbdb-default-country <span style="color: #036A07;">""</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">disable syntax-checking of telephone numbers</span>
    (setq bbdb-north-american-phone-numbers-p nil) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 2.35</span>
    (setq bbdb-phone-style nil)         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 3</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">restoration of the window configuration</span>
    (setq bbdb-electric-p t)            <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 2.35</span>
    (setq bbdb-electric t)              <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 3</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't display a continuously-updating BBDB window while in GNUS</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq bbdb-use-pop-up nil)       ; BBDB 2.35</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq bbdb-pop-up-layout nil)    ; BBDB 3</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">desired number of lines in a GNUS pop-up BBDB window</span>
    (setq bbdb-pop-up-target-lines 1)   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 2.35</span>
    (setq bbdb-pop-up-window-size 1)    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 3</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default display layout</span>
    (setq bbdb-display-layout 'multi-line)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default display layout pop-up BBDB buffers</span>
    (setq bbdb-pop-up-display-layout 'one-line)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">omit creation-date and time stamp from BBDB display</span>
    (setq bbdb-display-layout-alist
          '((one-line          (order     . (phones notes))
                               (name-end  . 24)
                               (toggle    . t)
                               (omit      . (net AKA mail-alias gnus-private
                                                 creation-date timestamp)))
            (multi-line        (indention . 14)
                               (toggle    . t)
                               (omit      . (AKA creation-date timestamp)))
            (pop-up-multi-line (indention . 14))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">allow cycling of email addresses while completing them</span>
    (setq bbdb-complete-name-allow-cycling t) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 2.35</span>
    (setq bbdb-complete-mail-allow-cycling t) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">BBDB 3</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">save the database without asking (any time it would ask)</span>
    (setq bbdb-offer-save 'auto)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically add some text to the notes field of the BBDB record</span>
    (add-hook 'bbdb-notice-hook 'bbdb-auto-notes-hook)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">capture auto-notes</span>
    (setq bbdb-auto-notes-alist
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">organization</span>
          `((<span style="color: #036A07;">"Organization"</span> (<span style=
"color: #036A07;">".*"</span> Organization 0))

            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">X-Face bitmaps of the people</span>
            (<span style=
"color: #036A07;">"x-face"</span> ,(list (concat <span style=
"color: #036A07;">"[ \t\n]*</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[</span><span style="color: #036A07;">^</span><span style=
"color: #036A07;"> \t\n]*</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">"</span>
                                     <span style=
"color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[ \t\n]+</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[</span><span style="color: #036A07;">^</span><span style=
"color: #036A07;"> \t\n]+</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">?"</span>
                                     <span style=
"color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[ \t\n]+</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[</span><span style="color: #036A07;">^</span><span style=
"color: #036A07;"> \t\n]+</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">?"</span>
                                     <span style=
"color: #036A07;">"</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[ \t\n]+</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07;">[</span><span style="color: #036A07;">^</span><span style=
"color: #036A07;"> \t\n]+</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">?"</span>)
                             'face
                             <span style=
"color: #036A07;">"\\1\\3\\5\\7"</span>)))))
</pre>
            </div>
          </div>
        </div>

        <div id="outline-container-sec-38-1-4" class="outline-4">
          <h4 id="sec-38-1-4">Utilities</h4>

          <div class="outline-text-4" id="text-38-1-4">
            <p>BBDB 3 has a dial interface which allows you to call an external
            interface to make a call. This is done by modifying
            <code>bbdb-dial-function</code>. There are examples which interface
            with Skype to make a phone call.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 34 ends here</span>
</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-39" class="outline-2">
      <h2 id="sec-39">Document Viewing</h2>

      <div class="outline-text-2" id="text-39">
        <p>If <code>doc-view</code> is not showing the PDF files as images in
        Emacs, it may be because:</p>

        <ul class="org-ul">
          <li>no PNG support is available in Emacs (see <a href=
          "#sec-48-2">Images</a>), or</li>

          <li>some conversion utility for PDF files (Ghostscript) is not on
          your <code>PATH</code>.</li>
        </ul>

        <p>In that case, <code>doc-view</code> falls back to show you the plain
        text contents of the PDF if <code>doc-view-pdftotext-program</code> is
        on your <code>PATH</code>.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 35 (info "(emacs)Document View")</span>

(leuven--chapter leuven-chapter-35-document-view <span style=
"color: #036A07;">"35 Document Viewing"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">view PDF/PostScript/DVI files in Emacs</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-39-1" class="outline-3">
        <h3 id="sec-39-1">Navigation</h3>

        <div class="outline-text-3" id="text-39-1">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 35.1 (info "(emacs)Navigation")</span>

  (leuven--section <span style=
"color: #036A07;">"35.1 (emacs)Navigation"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">doc-view</span><span style=
"color: #8D8D84; font-style: italic;">' integrates with the usual bookmark facility.  So simply</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use `C-x r m' (`</span><span style=
"color: #D0372D; font-style: italic;">bookmark-set</span><span style=
"color: #8D8D84; font-style: italic;">') to jump back to the last page you've</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">read in a PDF document.</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-39-2" class="outline-3">
        <h3 id="sec-39-2">Conversion</h3>

        <div class="outline-text-3" id="text-39-2">
          <p>In <code>doc-view-mode</code>, you can use <code>C-s</code> to do
          regexp search on the page images.</p>

          <p>In addition, by pressing <code>C-c C-t</code>, you can open the
          <b>text</b>-only representation (actually, the output of the command
          <code>pdftotext</code>) of the current doc in a new buffer, which is
          more suitable for heavy manipulation of the text of the PDF.</p>

          <p>Another option, without <code>doc-view</code>, is <code>! pdtotext
          ? - &lt;RET&gt;</code>.</p>

          <p><code>doc-view-enlarge</code> (<code>+</code>) and
          <code>doc-view-shrink</code> (<code>-</code>) work fine to zoom in or
          out.</p>
        </div>
      </div>

      <div id="outline-container-sec-39-3" class="outline-3">
        <h3 id="sec-39-3">XXX</h3>

        <div class="outline-text-3" id="text-39-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">antiword will be run on every `</span><span style="color: #D0372D; font-style: italic;">.doc</span><span style="color: #8D8D84; font-style: italic;">' file you open</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> sudo aptitude install antiword (or via Cygwin setup)</span>
  (autoload 'no-word <span style="color: #036A07;">"no-word"</span>
    <span style="color: #008000;">"Word to txt."</span>)
  (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.doc\\'"</span> . no-word))



  (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.docx\\'"</span> . docx2txt))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">docx2txt</span> ()
    <span style="color: #008000;">"Run `</span><span style=
"color: #D0372D;">docx2txt</span><span style=
"color: #008000;">' on the entire buffer."</span>
    (shell-command-on-region (point-min) (point-max) <span style=
"color: #036A07;">"docx2txt.pl"</span> t t))



  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">un-xls files</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> sudo aptitude install xlhtml</span>
  (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.xls\\'"</span> . no-xls))
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">no-xls</span> (<span style=
"color: #6434A3;">&amp;optional</span> filename)
    <span style="color: #008000;">"Run `</span><span style=
"color: #D0372D;">xlhtml</span><span style=
"color: #008000;">' and `w3m -dump' on the entire buffer.</span>
<span style=
"color: #008000;">  Optional FILENAME says what filename to use.  This is only necessary for</span>
<span style="color: #008000;">  buffers without proper `</span><span style=
"color: #D0372D;">buffer-file-name</span><span style=
"color: #008000;">'.  FILENAME should be a real</span>
<span style="color: #008000;">  filename, not a path."</span>
    (interactive <span style="color: #036A07;">"fExcel File: "</span>)
    (<span style="color: #0000FF;">when</span> (and filename
               (not (buffer-file-name)))
      (write-file (make-temp-file filename)))
    (erase-buffer)
    (shell-command
     (format <span style=
"color: #036A07;">"xlhtml -nc -te %s | w3m -dump -T text/html"</span>
             (buffer-file-name))
     (current-buffer))
    (setq buffer-file-name nil)
    (set-buffer-modified-p nil))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">no-ppt</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> sudo aptitude install ppthtml</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> Not that good! (some text repeated multiple times)</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">no-ppt</span> (<span style=
"color: #6434A3;">&amp;optional</span> filename)
    <span style="color: #008000;">"Run `</span><span style=
"color: #D0372D;">ppthtml</span><span style=
"color: #008000;">' and `w3m -dump' on the entire buffer.</span>
<span style=
"color: #008000;">  Optional FILENAME says what filename to use.  This is only necessary for</span>
<span style="color: #008000;">  buffers without proper `</span><span style=
"color: #D0372D;">buffer-file-name</span><span style=
"color: #008000;">'.  FILENAME should be a real</span>
<span style="color: #008000;">  filename, not a path."</span>
    (interactive <span style="color: #036A07;">"fPowerPoint File: "</span>)
    (<span style="color: #0000FF;">when</span> (and filename
               (not (buffer-file-name)))
      (write-file (make-temp-file filename)))
    (erase-buffer)
    (shell-command
     (format <span style=
"color: #036A07;">"ppthtml %s | w3m -dump -T text/html"</span> (buffer-file-name))
     (current-buffer))
    (setq buffer-file-name nil)
    (set-buffer-modified-p nil))
  (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.ppt\\'"</span> . no-ppt))

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 35 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-40" class="outline-2">
      <h2 id="sec-40">Running Shell Commands from Emacs</h2>

      <div class="outline-text-2" id="text-40">
        <p>See customizations at <a href=
        "http://snarfed.org/why_i_run_shells_inside_emacs">http://snarfed.org/why_i_run_shells_inside_emacs</a>.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 36 Running (info "(emacs)Shell") Commands from Emacs</span>

(leuven--chapter leuven-chapter-36-shell <span style=
"color: #036A07;">"36 Running Shell Commands from Emacs"</span>
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">transform shell names to what they really are</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"sh-script"</span>

    (add-to-list 'sh-alias-alist '(sh . bash)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span><span style="color: #8D8D84; font-style: italic;"> Test the following (added on 2011-08-03)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(when (eq system-type 'windows-nt)</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">;; Workaround for Cygwin shell, when set 'CYGWIN=noglob'.  By default</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">;; shell-quote-argument' quoted by double '\' chars, this cause failure.</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(defun shell-quote-argument (argument)</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(concat "'" argument "'"))</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">;; Workaround for Cygwin when 'shell-file-name' is 'bash'.</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(setq null-device "/dev/null"))</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; Use shell from Cygwin/MinGW.</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq shell-file-name "bash")</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setenv "SHELL" "/bin/bash")</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq explicit-bash-args '("-i"))</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq explicit-sh-args '("-i"))</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-40-1" class="outline-3">
        <h3 id="sec-40-1">Single Shell</h3>

        <div class="outline-text-3" id="text-40-1">
          <p><code>M-!</code> (<code>shell-command</code>) reads a line of text
          using the minibuffer and executes it as a shell command, in a
          subshell made just for that command.</p>

          <p><code>M-|</code> (<code>shell-command-on-region</code>) passes the
          contents of the region as the standard input to the shell command. By
          prefixing it with <code>C-u</code>, it deletes the old region and
          <b>replaces</b> it with the output from the shell command.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.1 Single Shell</span>

  (leuven--section <span style="color: #036A07;">"36.1 Single Shell"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">force interactive behavior (to get my handy shell aliases)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> Fix for Zsh (zsh:1: command not found: shopt)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defadvice shell-command (before leuven-shell-command activate)</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(ad-set-arg 0</span>
  <span style="color: #8D8D84;">;;               </span><span style=
"color: #8D8D84; font-style: italic;">(concat "source ~/.bashrc; shopt -s -q expand_aliases;\n "</span>
  <span style="color: #8D8D84;">;;                       </span><span style=
"color: #8D8D84; font-style: italic;">(ad-get-arg 0))))</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">for single shell commands (= "the" reference)</span>
  (setq shell-file-name                 <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">must be in the `</span><span style=
"color: #D0372D; font-style: italic;">PATH</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
        (or (<span style="color: #0000FF;">ignore-</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #0000FF;">s</span>
              (file-name-nondirectory (or (executable-find <span style=
"color: #036A07;">"zsh"</span>)
                                          (executable-find <span style=
"color: #036A07;">"bash"</span>)
                                          (executable-find <span style=
"color: #036A07;">"sh"</span>))))
            (<span style=
"color: #0000FF;">when</span> running-ms-windows <span style=
"color: #036A07;">"cmdproxy.exe"</span>)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use `</span><span style=
"color: #D0372D; font-style: italic;">shell-file-name</span><span style=
"color: #8D8D84; font-style: italic;">' as the default shell</span>
  (setenv <span style="color: #036A07;">"SHELL"</span> shell-file-name)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">switch used to have the shell execute its command line argument</span>
  (setq shell-command-switch <span style=
"color: #036A07;">"-c"</span>)      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">/c</span><span style=
"color: #8D8D84; font-style: italic;">' does not work with XEmacs</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">quote process arguments to ensure correct parsing on Windows</span>
  (setq w32-quote-process-args t)
</pre>
          </div>

          <p>The above assignments may <b>NOT</b> be done <b>in an
          eval-after-load</b> as those variables are used by the (La)TeX modes
          (default + AUCTeX) among others.</p>
        </div>
      </div>

      <div id="outline-container-sec-40-2" class="outline-3">
        <h3 id="sec-40-2">Interactive Shell</h3>

        <div class="outline-text-3" id="text-40-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.2 Interactive Shell</span>

  (leuven--section <span style=
"color: #036A07;">"36.2 Interactive Shell"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">for the interactive (sub)shell (and AUCTeX compilation?)</span>
  (setq explicit-shell-file-name shell-file-name)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-40-3" class="outline-3">
        <h3 id="sec-40-3">Shell Mode</h3>

        <div class="outline-text-3" id="text-40-3">
          <dl class="org-dl">
            <dt><code>RET</code></dt>

            <dd><b>Execute</b> the <b>command on</b> the <b>current
            line</b>.</dd>

            <dt><code>TAB</code></dt>

            <dd><b>Complete</b> current command, file name or variable
            name.</dd>

            <dt><code>C-c C-d</code></dt>

            <dd>Send <code>EOF</code> character.</dd>

            <dt><code>C-c C-u</code></dt>

            <dd>Erase current line (equivalent to <code>C-u</code> in Unix
            shells).</dd>

            <dt><code>C-c C-c</code></dt>

            <dd>Interrupt current job (equivalent to <code>C-c</code> in Unix
            shells, <code>BREAK</code> signal).</dd>

            <dt><code>C-c C-z</code></dt>

            <dd>Suspend or stop current job (equivalent to <code>C-z</code> in
            Unix shells, <code>STOP</code> signal).</dd>

            <dt><code>C-c C-o</code></dt>

            <dd><b>Delete output</b> (only) <b>from last command</b>.</dd>

            <dt><code>C-c C-r</code></dt>

            <dd>Move <b>first line of output</b> from your last command <b>to
            top of window</b>.</dd>

            <dt><code>C-c C-e</code></dt>

            <dd>Move <b>last line of output</b> from your last command <b>to
            bottom of window</b>, showing the maximum of the output.</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.3 Shell Mode</span>

  (leuven--section <span style="color: #036A07;">"36.3 Shell Mode"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">general command-interpreter-in-a-buffer stuff (lisp, shell, R, ...)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(when (try-require 'comint)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">comint prompt is read only</span>
    (setq comint-prompt-read-only t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">no duplicates in command history</span>
    (setq-default comint-input-ignoredups t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">input to interpreter causes windows showing the buffer to scroll</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(inserting at the bottom)</span>
    (setq-default comint-scroll-to-bottom-on-input t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">output to interpreter causes windows showing the buffer to scroll</span>
    (setq-default comint-move-point-for-output t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">maximum size in lines for Comint buffers (if the function</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">comint-truncate-buffer</span><span style=
"color: #8D8D84; font-style: italic;">' is on `</span><span style=
"color: #D0372D; font-style: italic;">comint-output-filter-functions</span><span style="color: #8D8D84; font-style: italic;">')</span>
    (setq comint-buffer-maximum-size (* 5 1024))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">size of the input history ring</span>
    (setq comint-input-ring-size 1000)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">strip `</span><span style=
"color: #D0372D; font-style: italic;">^M</span><span style=
"color: #8D8D84; font-style: italic;">' characters</span>
    (add-to-list 'process-coding-system-alist
                 '(<span style=
"color: #036A07;">"bash"</span> . (undecided-dos . undecided-unix)))
    (add-to-list 'process-coding-system-alist
                 '(<span style=
"color: #036A07;">"zsh"</span> . (undecided-dos . undecided-unix)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show completion list when ambiguous</span>
    (setq comint-completion-autolist t)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use the `</span><span style=
"color: #D0372D; font-style: italic;">up</span><span style=
"color: #8D8D84; font-style: italic;">' and `</span><span style=
"color: #D0372D; font-style: italic;">down</span><span style=
"color: #8D8D84; font-style: italic;">' arrow keys to traverse through the previous</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">commands</span>
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--up-down-keys</span> ()
      <span style="color: #008000;">"Customize the Shell mode."</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(local-set-key</span>
      <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;up&gt;") 'comint-previous-input)</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(local-set-key</span>
      <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;down&gt;") 'comint-next-input)</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(local-set-key</span>
      <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;C-up&gt;") 'comint-previous-matching-input-from-input)</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(local-set-key</span>
      <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "&lt;C-down&gt;") 'comint-next-matching-input-from-input)</span>
      (local-set-key
        (kbd <span style=
"color: #036A07;">"&lt;up&gt;"</span>) 'comint-previous-matching-input-from-input)
      (local-set-key
        (kbd <span style=
"color: #036A07;">"&lt;down&gt;"</span>) 'comint-next-matching-input-from-input))

    (add-hook 'comint-mode-hook 'leuven--up-down-keys)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-comint-clear</span> ()
      <span style="color: #008000;">"Clear the Comint buffer."</span>
      (interactive)
      (<span style=
"color: #0000FF;">let</span> ((comint-buffer-maximum-size 0))
        (comint-truncate-buffer)))

    (global-set-key (kbd <span style=
"color: #036A07;">"C-x ! c"</span>) 'leuven-comint-clear)

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">)</span>
</pre>
          </div>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%"><b>Fix case when 2 Shell buffers are run in the
              same dir (same name error!)</b><br /></td>
            </tr>
          </table>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--rename-buffer-to-curdir</span> (<span style=
"color: #6434A3;">&amp;optional</span> _string)
    <span style=
"color: #008000;">"Change Shell buffer's name to current directory."</span>
    (rename-buffer (concat <span style=
"color: #036A07;">"*shell "</span> default-directory <span style=
"color: #036A07;">"*"</span>)))

  (add-hook 'shell-mode-hook
            (<span style="color: #0000FF;">lambda</span> ()
              (leuven--rename-buffer-to-curdir)
              (add-hook 'comint-output-filter-functions
                        'leuven--rename-buffer-to-curdir nil t)))
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">local to Shell comint</span>
</pre>
          </div>

          <p>If you ever tried to run a program like <code>git</code> under
          <code>M-x shell</code>, you will have come across the warning
          “terminal is not fully functional” followed by unusable behavior.
          This is because <code>git</code> sends its output through a pager
          (probably <code>less</code>), which requires a real <a href=
          "#sec-40-8">terminal emulator</a>.</p>

          <p>Setting the <code>PAGER</code> environment variable to
          <code>/bin/cat</code> (but only inside Emacs) solves this
          problem:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (setenv <span style="color: #036A07;">"PAGER"</span> <span style=
"color: #036A07;">"/usr/bin/cat"</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-40-4" class="outline-3">
        <h3 id="sec-40-4">Shell Prompts</h3>

        <div class="outline-text-3" id="text-40-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.4 Shell Prompts</span>

  (leuven--section <span style="color: #036A07;">"36.4 Shell Prompts"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">regexp to match prompts in the inferior shell</span>
  (setq shell-prompt-pattern <span style=
"color: #036A07;">"^[</span><span style="color: #036A07;">^</span><span style=
"color: #036A07;">#$%&gt;\n]*[#$%&gt;] *"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">regexp to recognize prompts in the inferior process (only used if the</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">variable `</span><span style=
"color: #D0372D; font-style: italic;">comint-use-prompt-regexp</span><span style="color: #8D8D84; font-style: italic;">' is non-nil)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun set-shell-prompt-regexp ()</span>
    (setq comint-prompt-regexp shell-prompt-pattern)
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">)</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'comint-mode-hook 'set-shell-prompt-regexp)</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-40-5" class="outline-3">
        <h3 id="sec-40-5">History</h3>

        <div class="outline-text-3" id="text-40-5">
          <dl class="org-dl">
            <dt><code>M-p</code> (or <code>&lt;C-up&gt;</code>)</dt>

            <dd>Fetch the next <b>earlier</b> old command
            (<code>comint-previous-input</code>), but doesn’t execute it.</dd>

            <dt><code>M-n</code> (or <code>&lt;C-down&gt;</code>)</dt>

            <dd>Fetch the next <b>later</b> old command
            (<code>comint-next-input</code>), but doesn’t execute it.</dd>

            <dt><code>M-r</code></dt>

            <dd>Begin an incremental <b>regexp search of old commands</b>.</dd>

            <dt><code>C-c C-l</code></dt>

            <dd>Display the current buffer’s <b>history</b> of shell
            commands.</dd>

            <dt><code>C-c C-p</code></dt>

            <dd>Move to <b>previous command prompt</b>.</dd>

            <dt><code>C-c C-n</code></dt>

            <dd>Move to <b>next command prompt</b>.</dd>
          </dl>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.5 History</span>

  (leuven--section <span style="color: #036A07;">"36.5 History"</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-40-6" class="outline-3">
        <h3 id="sec-40-6">Directory Tracking</h3>

        <div class="outline-text-3" id="text-40-6">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.6 Directory Tracking</span>

  (leuven--section <span style=
"color: #036A07;">"36.6 Directory Tracking"</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-40-7" class="outline-3">
        <h3 id="sec-40-7">Options</h3>

        <div class="outline-text-3" id="text-40-7">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.7 Options</span>

  (leuven--section <span style="color: #036A07;">"36.7 Options"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">disable command echoing</span>
  (setq-default comint-process-echoes t) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">for Linux (not needed for Cygwin)</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-40-8" class="outline-3">
        <h3 id="sec-40-8"><a id="ID-d12c2e1e-8147-4b39-8128-aaa70fbf4657" name=
        "ID-d12c2e1e-8147-4b39-8128-aaa70fbf4657"></a>Terminal emulator</h3>

        <div class="outline-text-3" id="text-40-8">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.8 Terminal emulator</span>

  (leuven--section <span style=
"color: #036A07;">"36.8 Terminal emulator"</span>)
</pre>
          </div>

          <p>From my experience, none of the terminal emulators in Emacs
          (<code>term</code>, <code>ansi-term</code>, <code>multi-term</code>)
          is supported under Windows. It looks like the main reason is all of
          them rely on low-level support for terminals (<code>stty</code>,
          etc.) which is not provided by Windows.</p>

          <p>Though, <code>term</code>, <code>ansi-term</code>, and
          <code>multi-term</code> do <b>work in Cygwin Emacs</b>.</p>
        </div>
      </div>

      <div id="outline-container-sec-40-9" class="outline-3">
        <h3 id="sec-40-9">Term Mode</h3>

        <div class="outline-text-3" id="text-40-9">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.9 Term Mode</span>

  (leuven--section <span style="color: #036A07;">"36.9 Term Mode"</span>)
</pre>
          </div>

          <p>Emacs <b>Shell mode</b> doesn’t support (all) terminal control
          codes, so <code>less</code> doesn’t work (“page-at-a-time”
          feature).</p>

          <p>Shell mode buffers do not use ptys (pseudo-terminals), so programs
          running in such a buffer (the shell, the programs run by the shell,
          etc.) can’t perform character-at-a-time input. Each line is typed in
          full and only sent when <code>&lt;RET&gt;</code> is pressed. To see
          proof, run the <code>tty</code> command in a Shell mode buffer, and
          its output will be <code>not a tty</code>.</p>

          <p>Note that it may seem that this is not true because you can
          perform command-line editing with <code>C-b</code>, <code>C-f</code>,
          etc. But this is only because <code>shell-mode</code> itself
          simulates the typical command-line editing features of shells like
          Bash, Zsh, etc. using Emacs own internal editing capabilities.</p>

          <p>Anyway, you can:</p>

          <ul class="org-ul">
            <li>use <code>isearch</code> to search through the command
            output,</li>

            <li>copy stuff into the kill ring or</li>

            <li>use the rectangle functions.</li>
          </ul>

          <p>Or you might just prefer the Emacs key bindings over the ones your
          shell offers.</p>

          <p>On the other hand, <b>Term mode</b> provides a proper <b>terminal
          emulator</b> (though not as good as the good old <code>xterm</code>).
          You must use it for applications that are interactive with your
          terminal (such as the command <code>top</code>).</p>

          <p>Note – In Shell mode, use <code>M-x proced</code> instead of
          <code>top</code>.</p>

          <p>Note – <code>MPlayer</code> commands do not work in the Emacs
          shell. Use <code>term</code> for <code>/</code> and <code>*</code> to
          decrease / increase volume.</p>

          <p>You can switch to <b>line mode</b> (<code>C-c C-j</code>) when you
          need Term to <i>basically</i> act like a Shell mode buffer, and move
          around the buffer pretty much like anywhere else in Emacs. Copy /
          kill-ring commands, <code>isearch</code>, etc. do work.</p>

          <p>Then, you can use <code>C-c C-k</code> to switch back to
          <b>character mode</b>, the default, which is like your normal
          <b>terminal</b> emulator except the escape key.</p>

          <p>It’s wrong to think that <code>M-x term</code> captures everything
          it seems (which would defeat the purpose of running it inside
          Emacs):</p>

          <ul class="org-ul">
            <li>In the default character mode, <code>C-c</code> is the key
            prefix.</li>

            <li>In line mode, you don’t need a prefix.</li>
          </ul>

          <p>Try also to use <code>M-x ansi-term</code> that is much better
          than <code>term</code>:</p>

          <ul class="org-ul">
            <li>with <code>M-x term</code>, you can run <b>only one
            shell</b>;</li>

            <li>with <code>M-x ansi-term</code>, you can start more than one
            (<code>*ansi-term*&lt;2&gt;</code>,
            <code>*ansi-term*&lt;3&gt;</code>).</li>
          </ul>

          <p>Note that <code>TERM</code> is different in both environments:</p>

          <ul class="org-ul">
            <li>In <code>M-x shell</code>, <code>TERM=emacs</code></li>

            <li>In <code>M-x term</code>, <code>TERM=eterm-color</code></li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">managing multiple terminal buffers in Emacs</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(and fixing some troubles of `</span><span style="color: #D0372D; font-style: italic;">term-mode</span><span style="color: #8D8D84; font-style: italic;">': key bindings, etc.)</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"multi-term on POSIX hosts has let me switch from using screen, with</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">one Emacs screen and lots of shell screens; to just using Emacs, with</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">lots of terminals inside it."</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(when (locate-library "multi-term")</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(autoload 'multi-term "multi-term"</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">"Create new term buffer." t)</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(autoload 'multi-term-next "multi-term"</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">"Go to the next term buffer." t)</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(setq multi-term-program shell-file-name)</span>
  <span style="color: #8D8D84;">;;</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">;; (global-set-key (kbd "C-c t") 'multi-term-next)</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key</span>
  <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "C-c T") 'multi-term))       ; create a new one</span>
</pre>
          </div>

          <table class="inlinetask" width="100%">
            <tr>
              <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

              <td width="100%"><b>Try <i>visual</i> commands (like
              <code>top</code> or <code>less</code>) in
              <code>multi-term</code></b><br /></td>
            </tr>
          </table>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; run an inferior shell, with I/O through buffer `</span><span style="color: #D0372D; font-style: italic;">*shell*</span><span style="color: #8D8D84; font-style: italic;">'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(kbd "C-c !")</span>
  <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(cond (running-ms-windows 'shell)</span>
  <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">(t 'term)))</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">toggle to and from the `</span><span style="color: #D0372D; font-style: italic;">*shell*</span><span style="color: #8D8D84; font-style: italic;">' buffer</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-!"</span>)
    (<span style="color: #0000FF;">lambda</span> ()
      (interactive)
      (switch-or-start 'shell <span style="color: #036A07;">"*shell*"</span>)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-40-10" class="outline-3">
        <h3 id="sec-40-10">Paging in Term</h3>

        <div class="outline-text-3" id="text-40-10">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.10 Paging in Term</span>

  (leuven--section <span style="color: #036A07;">"36.10 Paging in Term"</span>)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-40-11" class="outline-3">
        <h3 id="sec-40-11">Remote Host</h3>

        <div class="outline-text-3" id="text-40-11">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 36.11 Remote Host</span>

  (leuven--section <span style="color: #036A07;">"36.11 Remote Host"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">load ssh.el file</span>
  (add-to-list 'same-window-regexps <span style=
"color: #036A07;">"^\\*ssh-.*\\*</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">(</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">|</span><span style=
"color: #036A07;">&lt;[0-9]+&gt;</span><span style=
"color: #036A07; font-weight: bold;">\\</span><span style=
"color: #036A07; font-weight: bold;">)</span><span style=
"color: #036A07;">"</span>)
  (autoload 'ssh <span style="color: #036A07;">"ssh"</span>
    <span style=
"color: #008000;">"Open a network login connection via `</span><span style=
"color: #D0372D;">ssh</span><span style="color: #008000;">'."</span> t)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">this is to run ESS remotely on another computer in my own Emacs, or</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">just plain old reading remote files</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">See http://emacs.1067599.n5.nabble.com/SSH-inside-Emacs-td225528.html</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">- plink (with `</span><span style=
"color: #D0372D; font-style: italic;">dumb</span><span style=
"color: #8D8D84; font-style: italic;">' terminal option?) as interactive shell</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">- ssh -t -t user@host</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">- Cygwin'ized Emacs</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">- MSYS (MinGW)</span>
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-40-12" class="outline-3">
        <h3 id="sec-40-12">Serial Terminal</h3>

        <div class="outline-text-3" id="text-40-12">
          <p>Since GNU Emacs 23, there’s now support for serial port access.
          The new command <code>serial-term</code> starts an interactive
          terminal on a serial port.</p>
        </div>
      </div>

      <div id="outline-container-sec-40-13" class="outline-3">
        <h3 id="sec-40-13">Helper for GNU Emacs on w32</h3>

        <div class="outline-text-3" id="text-40-13">
          <p>Let Emacs, for example, find the program
          <code>/usr/bin/w3m</code>.</p>

          <p><b>But it causes problems (Emacs crashes or unable to connect)
          when reading mail with Gnus…</b></p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; let Emacs recognize Cygwin paths (e.g. /usr/local/lib)</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(when (and running-ms-windows</span>
    <span style="color: #8D8D84;">;;            </span><span style=
"color: #8D8D84; font-style: italic;">(executable-find "mount")) ; Cygwin bin directory found</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(when (try-require 'cygwin-mount)</span>
    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(cygwin-mount-activate)))</span>
</pre>
          </div>

          <p>See <code>w32-settings.el</code> for more!</p>
        </div>
      </div>

      <div id="outline-container-sec-40-14" class="outline-3">
        <h3 id="sec-40-14">Emacs Speaks Statistics (ESS)</h3>

        <div class="outline-text-3" id="text-40-14">
          <p><a href=
          "http://ess.r-project.org/Manual/ess.html">http://ess.r-project.org/Manual/ess.html</a></p>

          <p>To run statistical processes under ESS, Windows users will need to
          make sure that the directories for <code>R</code> and
          <code>Rterm</code> are in their <code>PATH</code> environment
          variable.</p>

          <p>Start an R session with <code>M-x R</code>.</p>

          <p>Magic underscore (<code>_</code>):</p>

          <ul class="org-ul">
            <li>Pressing underscore once inserts <code>&lt;-</code>.</li>

            <li>Pressing underscore twice inserts a literal underscore.</li>
          </ul>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">accented characters on graphics</span>
  (add-to-list 'process-coding-system-alist
               '(<span style="color: #036A07;">"R.*"</span> . iso-latin-1))

  (leuven--section <span style="color: #036A07;">"Utilities -- ESS"</span>)

  (add-to-list 'auto-mode-alist '(<span style=
"color: #036A07;">"\\.[rR]\\'"</span> . R-mode))

  (autoload 'R <span style="color: #036A07;">"ess-site"</span>
    <span style=
"color: #008000;">"Call 'R', the 'GNU S' system from the R Foundation."</span> t)

  (autoload 'R-mode <span style="color: #036A07;">"ess-site"</span>
    <span style="color: #008000;">"Major mode for editing R source."</span> t)
</pre>
          </div>

          <p>Customize variables for ESS (set these variables <b>before</b>
          loading <code>ess-site</code>).</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of seconds to highlight the evaluated region</span>
  (setq ess-blink-delay .6)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">start R in current working directory, don't ask user</span>
  (setq ess-ask-for-ess-directory nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default ESS indentation style</span>
  (setq ess-default-style 'DEFAULT)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">new inferior ESS process appears in another window in the current frame</span>
  (setq inferior-ess-same-window nil)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; add to list of prefixes recognized by ESS</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq ess-r-versions '("R-3.0.2"))    ; R-current</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; matching versions will appear after doing M-x R &lt;tab&gt; &lt;tab&gt;</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ESS: Emacs Speaks Statistics</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ess-site"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use eldoc to report R function names</span>
    (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">ess-eldoc</span>)
    (add-hook 'inferior-ess-mode-hook 'ess-use-eldoc)

    )
</pre>
          </div>

          <p>See <a href=
          "http://www.emacswiki.org/emacs/EmacsSpeaksStatistics">http://www.emacswiki.org/emacs/EmacsSpeaksStatistics</a>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ESS[</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">BUG</span><span style="color: #8D8D84; font-style: italic;">S] dialect</span>
  (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">ess-bugs-d</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">avoid Emacs hanging on large evaluations</span>
  (setq ess-eval-visibly 'nowait)
</pre>
          </div>

          <p>Get info for object at point, and display it in an electric buffer
          with the command <code>ess-describe-object-at-point</code> (bound to
          <code>C-c C-d C-e</code>, repeat <code>C-e</code> or <code>e</code>
          to cycle between <code>str()</code>, <code>head()</code>,
          <code>tail()</code> and <code>summary()</code>). Use
          <code>other-window</code> to switch to <code>*ess-describe*</code>
          window.</p>

          <p>It was inspired by Erik Iverson’s
          <code>ess-R-object-tooltip</code>.</p>
        </div>
      </div>

      <div id="outline-container-sec-40-15" class="outline-3">
        <h3 id="sec-40-15">Proced</h3>

        <div class="outline-text-3" id="text-40-15">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* Proced</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">start Proced in a similar manner to Dired</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-x p"</span>) 'proced)

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"proced"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">current sort scheme for proced listing</span>
    (setq-default proced-sort 'start)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">display of Proced buffer as process tree</span>
    (setq-default proced-tree-flag t))
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-41" class="outline-2">
      <h2 id="sec-41">Using Emacs Server</h2>

      <div class="outline-text-2" id="text-41">
        <p>The Emacs version you’re using and the <code>emacsclient</code>
        version you’re using must be from the <b>same Emacs version</b>… If the
        latter is not the cause of a refused connection, re-try <code>M-x
        server-start</code> in Emacs.</p>

        <p><code>emacsclient</code> is waiting for Emacs to tell it it’s done
        editing that file. That’s important if you use <code>emacsclient</code>
        as your <code>EDITOR</code>. If you want <code>emacsclient</code> to
        return immediately, use the <code>-n</code> option.</p>

        <p>Do you use <code>emacsclient</code> in terminals? If not, just use
        parameter <code>-c -n</code>, which creates an X Window and doesn’t
        wait for <code>(server-edit)</code>.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 37 (info "(emacs)Emacs Server")</span>

(leuven--chapter leuven-chapter-37-emacs-server <span style=
"color: #036A07;">"37 Using Emacs as a Server"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">use Emacs as a server (with the `</span><span style="color: #D0372D; font-style: italic;">emacsclient</span><span style="color: #8D8D84; font-style: italic;">' program)</span>
  (GNUEmacs
    (idle-require 'server)              <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">after init</span>
    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"server"</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">test whether server is (definitely) running, avoiding the message of</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"server-start" while opening another Emacs session</span>
      (or (equal (server-running-p) t)

          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">start the Emacs server</span>
          (server-start))               <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">~ 0.20 s</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">save file without confirmation before returning to the client</span>
      (<span style="color: #0000FF;">defadvice</span> <span style=
"color: #006699;">server-edit</span> (before save-buffer-if-needed activate)
        <span style=
"color: #008000;">"Save current buffer before marking it as done."</span>
        (<span style=
"color: #0000FF;">when</span> server-buffer-clients (save-buffer)))))

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 37 ends here</span>
</pre>
        </div>

        <p>Since GNU Emacs 23, there is also a <code>--daemon</code> flag to
        start the server in a convenient way.</p>

        <table class="inlinetask" width="100%">
          <tr>
            <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

            <td width="100%">
              <b>Understand the following:</b><br />

              <div class="figure"></div>

              <div class="org-src-container">
                <pre class="src src-emacs-lisp">
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'server-done-hook</span>
        <span style="color: #8D8D84;">;;        </span><span style=
"color: #8D8D84; font-style: italic;">(lambda ()</span>
        <span style="color: #8D8D84;">;;          </span><span style=
"color: #8D8D84; font-style: italic;">(shell-command "screen -r -X select `cat ~/tmp/emacsclient-caller`")))</span>
</pre>
              </div>

              <p>and see <a href=
              "http://blog.jr0cket.co.uk/2012/10/using-emacs-24-server-on-mac-osx-for.html">
              http://blog.jr0cket.co.uk/2012/10/using-emacs-24-server-on-mac-osx-for.html</a>
              for ideas about having the right <code>emacsclient</code> used to
              connect to the Emacs server.</p>
            </td>
          </tr>
        </table>
      </div>
    </div>

    <div id="outline-container-sec-42" class="outline-2">
      <h2 id="sec-42">Printing Hard Copies</h2>

      <div class="outline-text-2" id="text-42">
        <p>You can print any buffer with <code>C-u M-x
        ps-print-buffer-with-faces &lt;RET&gt;</code>. Because of the
        <code>C-u</code>, it will prompt for a file to place the PostScript
        into. You can then convert PS to PDF, if so desired.</p>

        <p>You can print without faces (i.e. no colour) with
        <code>ps-print-buffer</code>.</p>

        <p>You may wish to set <code>ps-print-landscape</code> to
        <code>t</code>.</p>

        <p>See (info "(emacs)Windows Printing”) for several methods of
        correctly setting up printing on Windows.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 38 (info "(emacs)Printing")</span>

(leuven--chapter leuven-chapter-38-printing <span style=
"color: #036A07;">"38 Printing Hard Copies"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">print Emacs buffer on line printer</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">for {lpr,print}-{buffer,region}</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"lpr"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name of program for printing a file</span>
    (setq lpr-command (executable-find <span style=
"color: #036A07;">"enscript"</span>))
                                    <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">TODO</span><span style="color: #8D8D84; font-style: italic;"> Install `</span><span style="color: #D0372D; font-style: italic;">enscript</span><span style="color: #8D8D84; font-style: italic;">'</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of strings to pass as extra options for the printer program</span>
    (setq lpr-switches (list <span style=
"color: #036A07;">"--font=Courier8"</span>
                             <span style=
"color: #036A07;">"--header-font=Courier10"</span>
                             (format <span style=
"color: #036A07;">"--header=%s"</span> (buffer-name))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name of a printer to which data is sent for printing</span>
    (setq printer-name
          (<span style=
"color: #0000FF;">cond</span> (running-ms-windows <span style=
"color: #036A07;">"//PRINT-SERVER/Brother HL-4150CDN"</span>) <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>
                (t t))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-ps-print-buffer-with-faces-query</span> ()
    <span style=
"color: #008000;">"Query user before printing the buffer."</span>
    (interactive)
    (<span style="color: #0000FF;">when</span> (y-or-n-p <span style=
"color: #036A07;">"Are you sure you want to print this buffer? "</span>)
      (ps-print-buffer-with-faces)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">generate and print a PostScript image of the buffer</span>
  (GNUEmacs
    (<span style="color: #0000FF;">when</span> running-ms-windows
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">override `Print Screen' globally used as a hotkey by Windows</span>
      (w32-register-hot-key (kbd <span style=
"color: #036A07;">"&lt;snapshot&gt;"</span>))
      (global-set-key
        (kbd <span style=
"color: #036A07;">"&lt;snapshot&gt;"</span>) 'leuven-ps-print-buffer-with-faces-query)))

  (global-set-key
    (kbd <span style=
"color: #036A07;">"M-p"</span>) 'leuven-ps-print-buffer-with-faces-query)

  (XEmacs
    (setq toolbar-print-function 'ps-print-buffer-with-faces))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">print text from the buffer as PostScript</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"ps-print"</span>

    (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">gsprint-program</span>
      (concat windows-program-files-dir <span style=
"color: #036A07;">"Ghostgum/gsview/gsprint.exe"</span>)
      <span style=
"color: #008000;">"Defines the Windows path to the gsview executable."</span>)

    (leuven--file-exists-and-executable-p gsprint-program)

    (<span style="color: #0000FF;">if</span> (and gsprint-program
             (executable-find gsprint-program))

        (<span style="color: #0000FF;">progn</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name of a local printer for printing PostScript files</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">adjusted to run Ghostscript</span>
          (setq ps-printer-name t)

          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name of program for printing a PostScript file</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">tell Emacs where ghostscript print utility is located</span>
          (setq ps-lpr-command gsprint-program)

          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of extra switches to pass to `</span><span style="color: #D0372D; font-style: italic;">ps-lpr-command</span><span style="color: #8D8D84; font-style: italic;">'</span>
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">tell Ghostscript to query which printer to use</span>
          (setq ps-lpr-switches '(<span style=
"color: #036A07;">"-query"</span>)))
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">'("-q" "-dNOPAUSE" "-dBATCH" "-sDEVICE=mswinpr2")</span>

      (setq ps-printer-name <span style=
"color: #036A07;">"//PRINT-SERVER/Brother HL-4150CDN"</span>) <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">XXX</span>
      (setq ps-lpr-command <span style="color: #036A07;">""</span>)
      (setq ps-lpr-switches '(<span style="color: #036A07;">"raw"</span>)))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq ps-</span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">-handler-message 'system)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">size of paper to format for</span>
    (setq ps-paper-type 'a4)
    (setq ps-warn-paper-type nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">print in portrait mode</span>
    (setq ps-landscape-mode nil)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq ps-print-control-characters nil)</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of columns</span>
    (setq ps-number-of-columns 1)

    (setq ps-left-margin 40)
    (setq ps-right-margin 56)
    (setq ps-bottom-margin 22)
    (setq ps-top-margin 32)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Page layout: Header [file-name     2001-06-18 Mon]</span>
    (setq ps-print-header-frame nil)    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">no box around the header</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">see http://www.emacswiki.org/emacs/PsPrintPackage-23</span>
    (setq ps-header-frame-alist '((fore-color . <span style=
"color: #036A07;">"#CCCCCC"</span>)))
    (setq ps-header-lines 1)
    (setq ps-header-font-family 'Helvetica)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq ps-header-font-size 11)</span>
    (setq ps-header-title-font-size 11)
    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">ps-time-stamp-yyyy-mm-dd-aaa</span> ()
      <span style=
"color: #008000;">"Return date as \"2001-06-18 Mon\" (ISO date + day of week)."</span>
      (format-time-string <span style="color: #036A07;">"%Y-%m-%d %a"</span>))
    (setq ps-right-header '(ps-time-stamp-yyyy-mm-dd-aaa))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Page layout: Footer [                         n/m]</span>
    (setq ps-footer-offset 14)
    (setq ps-footer-line-pad .50)
    (setq ps-print-footer t)
    (setq ps-print-footer-frame nil)    <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">no box around the footer</span>
    (setq ps-footer-frame-alist '((fore-color . <span style=
"color: #036A07;">"#666666"</span>)))
    (setq ps-footer-lines 1)
    (setq ps-footer-font-family 'Helvetica)
    (setq ps-footer-font-size 8)
    (setq ps-left-footer nil)
    (setq ps-right-footer (list <span style=
"color: #036A07;">"/pagenumberstring load"</span>)) <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">Page n of m</span>

    (setq ps-font-family 'Courier)      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">see `</span><span style=
"color: #D0372D; font-style: italic;">ps-font-info-database</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">legitimate values include Courier, Helvetica, NewCenturySchlbk,</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Palatino and Times</span>
    (setq ps-font-size 9.1)

    (setq ps-use-face-background t)

    (setq ps-line-spacing 3))

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 38 ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-43" class="outline-2">
      <h2 id="sec-43">Sorting Text</h2>

      <div class="outline-text-2" id="text-43">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 39 (info "(emacs)Sorting") Text</span>

(leuven--chapter leuven-chapter-39-sorting <span style=
"color: #036A07;">"39 Sorting Text"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">key binding</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-c ^"</span>) 'sort-lines)

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 39 ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-44" class="outline-2">
      <h2 id="sec-44">Saving Emacs Sessions</h2>

      <div class="outline-text-2" id="text-44">
        <table class="inlinetask" width="100%">
          <tr>
            <td valign="top"><b><span class="todo TODO">TODO</span></b></td>

            <td width="100%"><b>Check that there is no extra ~/.saves
            directory!</b><br /></td>
          </tr>
        </table>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 42 (info "(emacs)Saving Emacs Sessions")</span>

(leuven--chapter leuven-chapter-42-saving-emacs-sessions <span style=
"color: #036A07;">"42 Saving Emacs Sessions"</span>

  (try-require 'saveplace)
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"saveplace"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">automatically save place in each file</span>
    (setq-default save-place t)         <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">default value for all buffers</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name of the file that records `</span><span style="color: #D0372D; font-style: italic;">save-place-alist</span><span style="color: #8D8D84; font-style: italic;">' value</span>
    (setq save-place-file
          (convert-standard-filename <span style=
"color: #036A07;">"~/.emacs.d/.places"</span>))
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! a .txt extension would load `</span><span style="color: #D0372D; font-style: italic;">org</span><span style="color: #8D8D84; font-style: italic;">' at</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! the time Emacs is killed (if not</span>
                                        <span style=
"color: #8D8D84;">;</span><span style=
"color: #8D8D84; font-style: italic;">! already loaded)!</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">do not make backups of master save-place file</span>
    (setq save-place-version-control <span style=
"color: #036A07;">"never"</span>))

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 42 ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-45" class="outline-2">
      <h2 id="sec-45">Hyperlinking and Navigation Features</h2>

      <div class="outline-text-2" id="text-45">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 45 (info "(emacs)Hyperlinking")</span>

(leuven--chapter leuven-chapter-45-hyperlinking <span style=
"color: #036A07;">"45 Hyperlinking and Navigation Features"</span>
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** pass a URL to a WWW browser</span>

  (leuven--section <span style=
"color: #036A07;">"pass a URL to a WWW browser"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default browser started when you click on some URL in the buffer</span>
  (setq browse-url-browser-function
        (<span style="color: #0000FF;">if</span> (not (display-graphic-p))
            'w3m-browse-url
          (<span style="color: #0000FF;">if</span> running-ms-windows
              'browse-url-default-windows-browser
            'browse-url-generic)))
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq browse-url-browser-function</span>
  <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">'(("file:///usr/share/doc/hyperspec/" . w3m-browse-url)</span>
  <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">("emacswiki.org" . w3m-browse-url)</span>
  <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">("lispdoc.com" . w3m-browse-url)</span>
  <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">( "." . browse-url-firefox)))</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">that let me use `</span><span style=
"color: #D0372D; font-style: italic;">w3m</span><span style=
"color: #8D8D84; font-style: italic;">' for EmacsWiki/Common Lisp documentation and</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Firefox otherwise.</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; name of the browser program used by `</span><span style="color: #D0372D; font-style: italic;">browse-url-generic</span><span style="color: #8D8D84; font-style: italic;">'</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq browse-url-generic-program</span>
  <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">(when (and (display-graphic-p)</span>
  <span style="color: #8D8D84;">;;                  </span><span style=
"color: #8D8D84; font-style: italic;">(not running-ms-windows))</span>
  <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">(executable-find "firefox"))) ; could be `</span><span style="color: #D0372D; font-style: italic;">google-chrome</span><span style="color: #8D8D84; font-style: italic;">'</span>

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven--browse</span> (url)
    <span style=
"color: #008000;">"If prefix is specified, use the system default browser, else use the</span>
<span style="color: #008000;">  configured Emacs one."</span>
    (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">browse-url</span>)
    (<span style="color: #0000FF;">if</span> current-prefix-arg
        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">open in your desktop browser (firefox here)</span>
        (<span style=
"color: #0000FF;">when</span> url (browse-url-default-browser url))
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">open using your Emacs browser (whatever that is configured to)</span>
      (<span style=
"color: #0000FF;">if</span> url (browse-url url) (call-interactively 'browse-url))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-browse-url</span> (<span style=
"color: #6434A3;">&amp;optional</span> url)
    <span style="color: #008000;">"Browse the URL passed in."</span>
    (interactive)
    (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">w3m</span>)
    (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">browse-url</span>)
    (setq url (or url
                  (w3m-url-valid (w3m-anchor))
                  (browse-url-url-at-point)
                  (find-tag-default)))
    (setq url (read-string (format <span style=
"color: #036A07;">"URL \"%s\" :"</span> url) url nil url))
    (leuven--browse url))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Web search</span>

  (leuven--section <span style="color: #036A07;">"Web search"</span>)

  (<span style=
"color: #0000FF;">when</span> t                               <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">(try-require 'browse-url)</span>

    (<span style="color: #0000FF;">defconst</span> <span style=
"color: #BA36A5;">leuven--google-maxlen</span> (* 32 7)
      <span style=
"color: #008000;">"Maximum length of search string to send.</span>
<span style=
"color: #008000;">    This prevents you from accidentally sending a 5 MB query string."</span>)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-google-search</span> ()
      <span style=
"color: #008000;">"Prompt for a query in the minibuffer, launch the web browser and</span>
<span style="color: #008000;">    query Google."</span>
      (interactive)
      (<span style=
"color: #0000FF;">let</span> ((query (read-from-minibuffer <span style=
"color: #036A07;">"Google Search: "</span>)))
        (browse-url (concat <span style=
"color: #036A07;">"http://www.google.com/search?q="</span>
                            (url-hexify-string query)))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun google-it (search-string)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"Search for SEARCH-STRING on Google."</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(interactive "sSearch for: ")</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(browse-url (concat "http://www.google.com/search?q="</span>
    <span style="color: #8D8D84;">;;                   </span><span style=
"color: #8D8D84; font-style: italic;">(url-hexify-string</span>
    <span style="color: #8D8D84;">;;                     </span><span style=
"color: #8D8D84; font-style: italic;">(encode-coding-string search-string 'utf-8)))))</span>

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-google-search-word-at-point</span> ()
      <span style="color: #008000;">"Google the word at point."</span>
      (interactive)
      (browse-url
       (concat <span style=
"color: #036A07;">"http://www.google.com/search?q="</span> (find-tag-default))))

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-google-search-region</span> (prefix start end)
      <span style=
"color: #008000;">"Create a search URL and send it to the web browser."</span>
      (interactive <span style="color: #036A07;">"P\nr"</span>)
      (<span style=
"color: #0000FF;">if</span> (&gt; (- end start) leuven--google-maxlen)
          (message <span style=
"color: #036A07;">"Search string too long!"</span>)
        (<span style=
"color: #0000FF;">let</span> ((query (buffer-substring-no-properties start end)))
          (browse-url
           (concat <span style=
"color: #036A07;">"http://www.google.com/search?q="</span>
                   (url-hexify-string query))))))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(defun google-search-selection ()</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">"Create a Google search URL and send it to your web browser."</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(interactive)</span>
    <span style="color: #8D8D84;">;;   </span><span style=
"color: #8D8D84; font-style: italic;">(let (start end term url)</span>
    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(if (or (not (fboundp 'region-exists-p)) (region-exists-p))</span>
    <span style="color: #8D8D84;">;;         </span><span style=
"color: #8D8D84; font-style: italic;">(progn</span>
    <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">(setq start (region-beginning)</span>
    <span style="color: #8D8D84;">;;                 </span><span style=
"color: #8D8D84; font-style: italic;">end   (region-end))</span>
    <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">(if (&gt; (- start end) leuven--google-maxlen)</span>
    <span style="color: #8D8D84;">;;               </span><span style=
"color: #8D8D84; font-style: italic;">(setq term (buffer-substring</span>
    <span style=
"color: #8D8D84;">;;                           </span><span style=
"color: #8D8D84; font-style: italic;">start (+ start leuven--google-maxlen)))</span>
    <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">(setq term (buffer-substring start end)))</span>
    <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">(google-it term))</span>
    <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">(beep)</span>
    <span style="color: #8D8D84;">;;       </span><span style=
"color: #8D8D84; font-style: italic;">(message "Region not active"))))</span>


         (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">google</span> (what)
           <span style=
"color: #008000;">"Use Google to search for WHAT."</span>
           (interactive <span style="color: #036A07;">"sSearch: "</span>)
           (<span style="color: #0000FF;">save-window-excursion</span>
             (delete-other-windows)
             (<span style=
"color: #0000FF;">let</span> ((dir default-directory))
               (w3m-browse-url (concat <span style=
"color: #036A07;">"http://www.google.com/search?q="</span>
                                       (w3m-url-encode-string what)))
               (cd dir)
               (recursive-edit))))
         (global-set-key
           (kbd <span style="color: #036A07;">"C-c g s"</span>) 'google)
</pre>
        </div>

        <p>If you know how to build the right url to the documentation of a
        given operator, you can just replace the google url with the right one
        in the following code:</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">pm/region-or-word</span> (prompt)
    <span style=
"color: #008000;">"Read a string from the minibuffer, prompting with PROMPT.</span>
<span style="color: #008000;">  If `</span><span style=
"color: #D0372D;">transient-mark-mode</span><span style=
"color: #008000;">' is non-nil and the mark is active, it defaults to the</span>
<span style=
"color: #008000;">  current region, else to the word at or before point.  This function returns a</span>
<span style="color: #008000;">  list (string) for use in `</span><span style=
"color: #D0372D;">interactive</span><span style="color: #008000;">'."</span>
    (list (read-string prompt (or (and (use-region-p)
                                       (buffer-substring-no-properties
                                        (region-beginning) (region-end)))
                                  (current-word)))))

  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">pm/google</span> (string)
    <span style="color: #008000;">"Ask a WWW browser to Google STRING.</span>
<span style=
"color: #008000;">  Prompt for a string, defaulting to the active region or the current word at or</span>
<span style="color: #008000;">  before point."</span>
    (interactive (pm/region-or-word <span style=
"color: #036A07;">"Google: "</span>))
    (browse-url (concat <span style=
"color: #036A07;">"http://google.com/search?num=100&amp;q="</span> string)))
</pre>
        </div>

        <p>(end of interrupt)</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
    (<span style="color: #0000FF;">defvar</span> <span style=
"color: #BA36A5;">leuven--google-prefix-map</span> (make-sparse-keymap)
      <span style="color: #008000;">"Keymap for my Google commands."</span>)

    <span style="color: #8D8D84;">;;     </span><span style=
"color: #8D8D84; font-style: italic;">(global-set-key (kbd "M-s") 'leuven-google-search-region)</span>

    (global-set-key
      (kbd <span style=
"color: #036A07;">"C-c g"</span>) leuven--google-prefix-map)

    (define-key leuven--google-prefix-map
      (kbd <span style="color: #036A07;">"g"</span>) 'leuven-google-search)

    (define-key leuven--google-prefix-map
      (kbd <span style=
"color: #036A07;">"w"</span>) 'leuven-google-search-word-at-point)

    (define-key leuven--google-prefix-map
      (kbd <span style=
"color: #036A07;">"r"</span>) 'leuven-google-search-region)
)
</pre>
        </div>
      </div>

      <div id="outline-container-sec-45-1" class="outline-3">
        <h3 id="sec-45-1">Emacs-w3m</h3>

        <div class="outline-text-3" id="text-45-1">
          <p>Emacs/W3 is dead, long live <a href=
          "http://emacs-w3m.namazu.org/">Emacs-w3m</a> (a terrific text-based
          web and file browser).</p>

          <p>For Win32, use the Cygwin version of the executable.</p>

          <p><code>w3m-browse-url</code> asks Emacs-w3m to browse a URL.</p>

          <p>When JavaScript is needed or the “design” is just too bad, use an
          <b>external browser</b>: you can open the current page in your
          graphical browser by hitting <code>M</code> (bound to
          <code>w3m-view-url-with-external-browser</code>) – at your own risk.
          For what “risk” means, please see: <code>(info
          "(emacs-w3m)Gnus")</code>.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Emacs-w3m</span>

  (leuven--section <span style="color: #036A07;">"Emacs-w3m"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">only use if `</span><span style=
"color: #D0372D; font-style: italic;">w3m</span><span style=
"color: #8D8D84; font-style: italic;">' command is available on system</span>
  (<span style="color: #0000FF;">when</span> (executable-find <span style=
"color: #036A07;">"w3m"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name of the executable file of the `</span><span style="color: #D0372D; font-style: italic;">w3m</span><span style="color: #8D8D84; font-style: italic;">' command</span>
    (setq w3m-command <span style="color: #036A07;">"w3m"</span>)
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">I don't want `</span><span style=
"color: #D0372D; font-style: italic;">/usr/bin/w3m</span><span style=
"color: #8D8D84; font-style: italic;">' (which requires `</span><span style=
"color: #D0372D; font-style: italic;">cygwin-mount</span><span style=
"color: #8D8D84; font-style: italic;">')</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">w3m</span><span style=
"color: #8D8D84; font-style: italic;">' slows down the startup process dramatically</span>
    (<span style="color: #0000FF;">unless</span> (try-require 'w3m-autoloads)
      (autoload 'w3m <span style="color: #036A07;">"w3m"</span>
        <span style="color: #008000;">"Visit the WWW page using w3m."</span> t)
      (autoload 'w3m-find-file <span style="color: #036A07;">"w3m"</span>
        <span style=
"color: #008000;">"Find a local file using emacs-w3m."</span> t)
      (autoload 'w3m-browse-url <span style="color: #036A07;">"w3m"</span>
        <span style="color: #008000;">"Ask emacs-w3m to show a URL."</span> t))

    (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"w3m"</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 3.1 Browsing Web Pages</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">go ahead, just try it</span>
      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-w3m-goto-url</span> ()
        <span style=
"color: #008000;">"Type in directly the URL to visit (avoiding to hit `</span><span style="color: #D0372D;">C-k</span><span style="color: #008000;">')."</span>
        (interactive)
        (<span style=
"color: #0000FF;">let</span> ((w3m-current-url <span style="color: #036A07;">""</span>))
          (call-interactively 'w3m-goto-url)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">make w3m stop "stealing" my arrow keys, allowing to move the</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">cursor down the lines of an HTML email (in Gnus)</span>
      (setq w3m-minor-mode-map nil)

      (define-key w3m-mode-map
        (kbd <span style="color: #036A07;">"U"</span>) 'leuven-w3m-goto-url)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">fix inappropriate key bindings for moving from place to place in a</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">page (let the cursor keys behave normally, don't jump from link to</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">link)</span>
      (define-key w3m-mode-map
        (kbd <span style="color: #036A07;">"&lt;up&gt;"</span>) 'previous-line)
      (define-key w3m-mode-map
        (kbd <span style="color: #036A07;">"&lt;down&gt;"</span>) 'next-line)
      (define-key w3m-mode-map
        (kbd <span style=
"color: #036A07;">"&lt;left&gt;"</span>) 'backward-char)
      (define-key w3m-mode-map
        (kbd <span style=
"color: #036A07;">"&lt;right&gt;"</span>) 'forward-char)

      (define-key w3m-mode-map
        (kbd <span style=
"color: #036A07;">"&lt;tab&gt;"</span>) 'w3m-next-anchor)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">moving from page to page</span>
      (define-key w3m-mode-map
        (kbd <span style="color: #036A07;">"F"</span>) 'w3m-view-next-page)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 3.5 Using Tabs</span>

      (define-key w3m-mode-map
        (kbd <span style=
"color: #036A07;">"&lt;C-tab&gt;"</span>) 'w3m-next-buffer)
      (define-key w3m-mode-map
        (kbd <span style=
"color: #036A07;">"&lt;C-S-tab&gt;"</span>) 'w3m-previous-buffer)

      (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">w3m-new-tab</span> ()
        (interactive)
        (w3m-copy-buffer nil nil nil t))

      (define-key w3m-mode-map
        (kbd <span style="color: #036A07;">"C-t"</span>) 'w3m-new-tab)

      (define-key w3m-mode-map
        (kbd <span style="color: #036A07;">"C-w"</span>) 'w3m-delete-buffer)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 5.1 General Variables</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">send referers only when both the current page and the target</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">page are provided by the same server</span>
      (setq w3m-add-referer 'lambda)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">home page</span>
      (setq w3m-home-page <span style=
"color: #036A07;">"http://www.emacswiki.org/"</span>)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">number of steps in columns used when scrolling a window</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">horizontally</span>
      (setq w3m-horizontal-shift-columns 1)  <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">2</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">proxy settings</span>
      (<span style=
"color: #0000FF;">when</span> (string= (upcase (system-name)) <span style=
"color: #036A07;">"PC3701"</span>)
        (setq w3m-command-arguments
                 (nconc w3m-command-arguments
                        '(<span style=
"color: #036A07;">"-o"</span> <span style="color: #036A07;">"http_proxy=proxy:8080"</span>))))
                                 <span style=
"color: #8D8D84;">; </span><span style=
"color: #CC0000; background-color: #FFFF88; font-style: italic;">FIXME</span><span style="color: #8D8D84; font-style: italic;"> https_proxy for HTTPS support</span>

      (setq w3m-no-proxy-domains '(<span style=
"color: #036A07;">"localhost"</span> <span style=
"color: #036A07;">"127.0.0.1"</span>))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 5.2 Image Variables</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">always display images</span>
      (setq w3m-default-display-inline-images t)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">show favicon images if they are available</span>
      (setq w3m-use-favicon t)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 5.4 Cookie Variables</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">functions for cookie processing</span>
      (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"w3m-cookie"</span>

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ask user whether accept bad cookies or not</span>
        (setq w3m-cookie-accept-bad-cookies 'ask)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of trusted domains</span>
        (setq w3m-cookie-accept-domains
              '(<span style="color: #036A07;">"google.com"</span> <span style=
"color: #036A07;">"google.be"</span>
                <span style="color: #036A07;">"yahoo.com"</span> <span style=
"color: #036A07;">".yahoo.com"</span> <span style=
"color: #036A07;">"groups.yahoo.com"</span>
                <span style="color: #036A07;">"www.dyndns.org"</span>)))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable cookies (mostly required to use sites such as Gmail)</span>
      (setq w3m-use-cookies t)

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 5.14 Other Variables</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of content types, regexps (matching a url or a file</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">name), commands to view contents, and filters to override the</span>
      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">content type specified at first</span>
      (setq w3m-content-type-alist
            (append '((<span style=
"color: #036A07;">"text/html"</span> <span style=
"color: #036A07;">"\\.xhtml\\'"</span> nil nil))
                    w3m-content-type-alist))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">toggle a minor mode showing link numbers</span>
      (<span style="color: #0000FF;">when</span> (try-require 'w3m-lnum)

        (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-w3m-go-to-link-number</span> ()
          <span style=
"color: #008000;">"Turn on link numbers and ask for one to go to."</span>
          (interactive)
          (<span style="color: #0000FF;">let</span> ((active w3m-lnum-mode))
            (<span style=
"color: #0000FF;">when</span> (not active) (w3m-lnum-mode))
            (<span style="color: #0000FF;">unwind-protect</span>
                (w3m-move-numbered-anchor (read-number
                                           <span style=
"color: #036A07;">"Anchor number: "</span>))
              (<span style=
"color: #0000FF;">when</span> (not active) (w3m-lnum-mode))
              (w3m-view-this-url))))

        (define-key w3m-mode-map
          (kbd <span style=
"color: #036A07;">"f"</span>) 'leuven-w3m-go-to-link-number)

        <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable link numbering mode by default</span>
        (add-hook 'w3m-mode-hook 'w3m-lnum-mode))

      ))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-45-1-1" class="outline-4">
          <h4 id="sec-45-1-1">9.1 Turning Gnus into a web browser!</h4>

          <div class="outline-text-4" id="text-45-1-1">
            <p><code>Nnshimbun</code> is a Gnus back end, but it is distributed
            with emacs-w3m, not Gnus, exceptionally.</p>

            <p><code>Nnshimbun</code> allows you to turn Gnus into an
            exceptionally useful web browser. You can skim through the articles
            on a newspaper’s web server without having to see all the
            advertisement. You can read articles in mailing list archives as if
            you were subscribed to the list. You can also read submissions in
            bulletin boards, etc…</p>
          </div>
        </div>

        <div id="outline-container-sec-45-1-2" class="outline-4">
          <h4 id="sec-45-1-2">EWW (Emacs Web Browser)</h4>

          <div class="outline-text-4" id="text-45-1-2">
            <p><code>eww</code> is the new web-browser for Emacs. See <a href=
            "http://lars.ingebrigtsen.no/2013/06/eww.html">http://lars.ingebrigtsen.no/2013/06/eww.html</a>.</p>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-45-2" class="outline-3">
        <h3 id="sec-45-2">Google Maps</h3>

        <div class="outline-text-3" id="text-45-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (GNUEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Google maps</span>
    (try-require 'google-maps))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-45-3" class="outline-3">
        <h3 id="sec-45-3">Babel translator</h3>

        <div class="outline-text-3" id="text-45-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Babel</span>

  (leuven--section <span style="color: #036A07;">"Babel"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">interface to web translation services such as Babelfish</span>
  (<span style="color: #0000FF;">when</span> (locate-library <span style=
"color: #036A07;">"babel"</span>)

    (autoload 'babel <span style="color: #036A07;">"babel"</span>
      <span style=
"color: #008000;">"Use a web translation service to translate the message MSG."</span> t)
    (autoload 'babel-region <span style="color: #036A07;">"babel"</span>
      <span style=
"color: #008000;">"Use a web translation service to translate the current region."</span> t)
    (autoload 'babel-as-string <span style="color: #036A07;">"babel"</span>
      <span style=
"color: #008000;">"Use a web translation service to translate MSG, returning a string."</span> t)
    (autoload 'babel-buffer <span style="color: #036A07;">"babel"</span>
      <span style=
"color: #008000;">"Use a web translation service to translate the current buffer."</span> t)

    (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-babel-translate</span> ()
      <span style=
"color: #008000;">"Translate using many online translators."</span>
      (interactive)
      (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">babel</span>)
      (<span style="color: #0000FF;">let</span> (source)
        (switch-to-buffer <span style=
"color: #036A07;">"*leuven--translate*"</span>)
        (erase-buffer)
        (yank)
        (setq source (buffer-substring-no-properties (point-min) (point-max)))
        (erase-buffer)
        (insert <span style="color: #036A07;">"--- Source ---\n\n"</span>)
        (insert source)
        (insert <span style=
"color: #036A07;">"\n\n\n--- Translation FR -&gt; EN done by FreeTranslation ---\n\n"</span>)
        (insert (babel-work source <span style=
"color: #036A07;">"fr"</span> <span style=
"color: #036A07;">"en"</span> 'babel-free-fetch 'babel-free-wash))
        (insert <span style=
"color: #036A07;">"\n\n\n--- Translation EN -&gt; FR done by FreeTranslation ---\n\n"</span>)
        (insert (babel-work source <span style=
"color: #036A07;">"en"</span> <span style=
"color: #036A07;">"fr"</span> 'babel-free-fetch 'babel-free-wash)))))

)
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-46" class="outline-2">
      <h2 id="sec-46">Other Amusements</h2>

      <div class="outline-text-2" id="text-46">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 46 Other (info "(emacs)Amusements")</span>

(leuven--chapter leuven-chapter-46-amusements <span style=
"color: #036A07;">"46 Other Amusements"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">define a default menu bar</span>
  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"menu-bar"</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">get rid of the Games in the Tools menu</span>
    (define-key menu-bar-tools-menu
      [games] nil))

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 46 ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-47" class="outline-2">
      <h2 id="sec-47">Customization</h2>

      <div class="outline-text-2" id="text-47">
        <p>Emacs 24 custom themes allow loading multiple themes simultaneously.
        If you don’t want the previous theme to stay in effect, you will need
        to unload it first.</p>

        <p>Install Leuven Theme via the <i>Emacs Lisp Packages</i> (or use the
        one bundled in GNU Emacs 24.4)</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* 48 (info "(emacs)Customization")</span>

(leuven--chapter leuven-chapter-48-customization <span style=
"color: #036A07;">"48 Customization"</span>

  (GNUEmacs24
    (<span style="color: #0000FF;">ignore-</span><span style=
"color: #CC0000; background-color: #FFFF88;">error</span><span style=
"color: #0000FF;">s</span>
      (load-theme 'leuven t)))
</pre>
        </div>
      </div>

      <div id="outline-container-sec-47-1" class="outline-3">
        <h3 id="sec-47-1">Color</h3>

        <div class="outline-text-3" id="text-47-1">
          <p>You can govern the sort order of colors now such as HSV or RGB
          distance from a particular color…</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">color sort order for `</span><span style=
"color: #D0372D; font-style: italic;">list-colors-display</span><span style=
"color: #8D8D84; font-style: italic;">'</span>
  (setq list-colors-sort '(rgb-dist . <span style=
"color: #036A07;">"#FFFFFF"</span>))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-47-2" class="outline-3">
        <h3 id="sec-47-2">Color theme</h3>

        <div class="outline-text-3" id="text-47-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (XEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">the real color theme functions</span>
    (<span style=
"color: #0000FF;">when</span> (try-require 'color-theme-autoloads)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">`</span><span style=
"color: #D0372D; font-style: italic;">color-theme-print</span><span style=
"color: #8D8D84; font-style: italic;">' allows to keep what you see</span>

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">initialize the color theme package</span>
      (<span style=
"color: #0000FF;">if</span> (fboundp 'color-theme-initialize)
          (color-theme-initialize))

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">color themes will be installed for all frames</span>
      (setq color-theme-is-global t)

      <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">set my default color theme</span>
      (<span style=
"color: #0000FF;">when</span> (try-require 'color-theme-leuven)
        (color-theme-leuven)))

    (setq options-save-faces t))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-47-3" class="outline-3">
        <h3 id="sec-47-3">Not sorted</h3>

        <div class="outline-text-3" id="text-47-3">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; limit serving to catch infinite recursions for you before they</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">;; cause actual stack overflow in C, which would be fatal for Emacs</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(setq max-lisp-eval-depth 600)        ; 1000?</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">limit on number of Lisp variable bindings &amp; unwind-protects</span>
  (setq max-specpdl-size 3000)          <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">XEmacs 21.5.29</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">speed up things by preventing garbage collections</span>
  (setq gc-cons-threshold 3500000)      <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">make Gnus fast</span>
                                        <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">from (info "(gnus)FAQ 9-2")</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">don't display messages at start and end of garbage collection (as it</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">hides too many interesting messages)</span>
  (setq garbage-collection-messages nil)
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-47-4" class="outline-3">
        <h3 id="sec-47-4">Variables</h3>

        <div class="outline-text-3" id="text-47-4">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 48.3 (info "(emacs)Variables")</span>

  (leuven--section <span style=
"color: #036A07;">"48.3 (emacs)Variables"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">file local variables specifications are obeyed, without query --</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">RISKY!</span>
  (setq enable-local-variables t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">obey `</span><span style=
"color: #D0372D; font-style: italic;">eval</span><span style=
"color: #8D8D84; font-style: italic;">' variables -- RISKY!</span>
  (setq enable-local-eval t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">record safe values for some local variables</span>
  (setq safe-local-variable-values
        '((TeX-master . t)
          (ac-sources . (ac-source-words-in-buffer ac-source-dictionary))
          <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(ac-user-dictionary-files . ("../dictionary.txt"))</span>
          (flyspell-mode . -1)
          (flyspell-mode . 1)
          (ispell-local-dictionary . <span style=
"color: #036A07;">"american"</span>)
          (ispell-local-dictionary . <span style=
"color: #036A07;">"francais"</span>)
          (org-tags-column . -80)       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">org-issues.org</span>
          (outline-minor-mode)
          (whitespace-style face tabs spaces trailing lines
                            space-before-tab::space newline indentation::space
                            empty space-after-tab::space space-mark tab-mark
                            newline-mark)))
</pre>
          </div>

          <p>Have a look at (info "(emacs)Directory Variables”).</p>
        </div>
      </div>

      <div id="outline-container-sec-47-5" class="outline-3">
        <h3 id="sec-47-5">Key Bindings</h3>

        <div class="outline-text-3" id="text-47-5">
          <p>The keys <code>C-c LETTER</code> are <a href=
          "http://www.gnu.org/software/emacs/manual/html_node/elisp/Key-Binding-Conventions.html">
          reserved for user functions</a>.</p>

          <p>You can get a list of all the disabled functions by typing:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
M-: (<span style="color: #0000FF;">let</span> (lst) (mapatoms (<span style=
"color: #0000FF;">lambda</span> (x) (<span style=
"color: #0000FF;">if</span> (get x 'disabled) (push x lst)))) lst) &lt;RET&gt;
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 48.4 Customizing (info "(emacs)Key Bindings")</span>

  (leuven--section <span style=
"color: #036A07;">"48.4 Customizing (emacs)Key Bindings"</span>)
</pre>
          </div>

          <p>See as well Print keybindings (pkb).</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">print the key bindings in a tabular form</span>
  (GNUEmacs
   (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-keytable</span> (arg)
     <span style=
"color: #008000;">"Print the key bindings in a tabular form."</span>
     (interactive <span style=
"color: #036A07;">"sEnter a modifier string:"</span>)
     (<span style=
"color: #0000FF;">with-output-to-temp-buffer</span> <span style=
"color: #036A07;">"*Key table*"</span>
       (<span style="color: #0000FF;">let*</span> ((i 0)
              (keys (list <span style="color: #036A07;">"a"</span> <span style=
"color: #036A07;">"b"</span> <span style=
"color: #036A07;">"c"</span> <span style=
"color: #036A07;">"d"</span> <span style=
"color: #036A07;">"e"</span> <span style=
"color: #036A07;">"f"</span> <span style=
"color: #036A07;">"g"</span> <span style=
"color: #036A07;">"h"</span> <span style=
"color: #036A07;">"i"</span> <span style=
"color: #036A07;">"j"</span> <span style=
"color: #036A07;">"k"</span> <span style="color: #036A07;">"l"</span>
                          <span style="color: #036A07;">"m"</span> <span style=
"color: #036A07;">"n"</span> <span style=
"color: #036A07;">"o"</span> <span style=
"color: #036A07;">"p"</span> <span style=
"color: #036A07;">"q"</span> <span style=
"color: #036A07;">"r"</span> <span style=
"color: #036A07;">"s"</span> <span style=
"color: #036A07;">"t"</span> <span style=
"color: #036A07;">"u"</span> <span style=
"color: #036A07;">"v"</span> <span style=
"color: #036A07;">"w"</span> <span style="color: #036A07;">"x"</span>
                          <span style="color: #036A07;">"y"</span> <span style=
"color: #036A07;">"z"</span> <span style=
"color: #036A07;">"&lt;return&gt;"</span> <span style=
"color: #036A07;">"&lt;down&gt;"</span> <span style=
"color: #036A07;">"&lt;up&gt;"</span> <span style=
"color: #036A07;">"&lt;right&gt;"</span>
                          <span style=
"color: #036A07;">"&lt;left&gt;"</span> <span style=
"color: #036A07;">"&lt;home&gt;"</span> <span style=
"color: #036A07;">"&lt;end&gt;"</span> <span style=
"color: #036A07;">"&lt;f1&gt;"</span> <span style=
"color: #036A07;">"&lt;f2&gt;"</span> <span style=
"color: #036A07;">"&lt;f3&gt;"</span>
                          <span style=
"color: #036A07;">"&lt;f4&gt;"</span> <span style=
"color: #036A07;">"&lt;f5&gt;"</span> <span style=
"color: #036A07;">"&lt;f6&gt;"</span> <span style=
"color: #036A07;">"&lt;f7&gt;"</span> <span style=
"color: #036A07;">"&lt;f8&gt;"</span> <span style=
"color: #036A07;">"&lt;f9&gt;"</span>
                          <span style=
"color: #036A07;">"&lt;f10&gt;"</span> <span style=
"color: #036A07;">"&lt;f11&gt;"</span> <span style=
"color: #036A07;">"&lt;f12&gt;"</span> <span style=
"color: #036A07;">"1"</span> <span style=
"color: #036A07;">"2"</span> <span style=
"color: #036A07;">"3"</span> <span style=
"color: #036A07;">"4"</span> <span style=
"color: #036A07;">"5"</span> <span style="color: #036A07;">"6"</span>
                          <span style="color: #036A07;">"7"</span> <span style=
"color: #036A07;">"8"</span> <span style=
"color: #036A07;">"9"</span> <span style=
"color: #036A07;">"0"</span> <span style=
"color: #036A07;">"`"</span> <span style=
"color: #036A07;">"~"</span> <span style=
"color: #036A07;">"!"</span> <span style=
"color: #036A07;">"@"</span> <span style=
"color: #036A07;">"#"</span> <span style=
"color: #036A07;">"$"</span> <span style=
"color: #036A07;">"%"</span> <span style="color: #036A07;">"^"</span>
                          <span style=
"color: #036A07;">"&amp;"</span> <span style=
"color: #036A07;">"*"</span> <span style=
"color: #036A07;">"("</span> <span style=
"color: #036A07;">")"</span> <span style=
"color: #036A07;">"-"</span> <span style=
"color: #036A07;">"_"</span> <span style=
"color: #036A07;">"="</span> <span style=
"color: #036A07;">"+"</span> <span style=
"color: #036A07;">"\\"</span> <span style=
"color: #036A07;">"|"</span> <span style=
"color: #036A07;">"{"</span> <span style="color: #036A07;">"["</span>
                          <span style="color: #036A07;">"]"</span> <span style=
"color: #036A07;">"}"</span> <span style=
"color: #036A07;">";"</span> <span style=
"color: #036A07;">"'"</span> <span style=
"color: #036A07;">":"</span> <span style=
"color: #036A07;">"\""</span> <span style=
"color: #036A07;">"&lt;"</span> <span style=
"color: #036A07;">"&gt;"</span> <span style=
"color: #036A07;">","</span> <span style=
"color: #036A07;">"."</span> <span style=
"color: #036A07;">"/"</span> <span style="color: #036A07;">"?"</span>
                          ))
              (n (length keys))
              (modifiers (list <span style=
"color: #036A07;">""</span> <span style=
"color: #036A07;">"S-"</span> <span style=
"color: #036A07;">"C-"</span> <span style=
"color: #036A07;">"M-"</span> <span style="color: #036A07;">"M-C-"</span>))
              (k))
         (or (string= arg <span style=
"color: #036A07;">""</span>) (setq modifiers (list arg)))
         (setq k (length modifiers))
         (princ (format <span style=
"color: #036A07;">" %-10.10s |"</span> <span style=
"color: #036A07;">"Key"</span>))
         (<span style="color: #0000FF;">let</span> ((j 0))
           (<span style="color: #0000FF;">while</span> (&lt; j k)
             (princ (format <span style=
"color: #036A07;">" %-28.28s |"</span> (nth j modifiers)))
             (setq j (1+ j))))
         (princ <span style="color: #036A07;">"\n"</span>)
         (princ (format <span style=
"color: #036A07;">"_%-10.10s_|"</span> <span style=
"color: #036A07;">"__________"</span>))
         (<span style="color: #0000FF;">let</span> ((j 0))
           (<span style="color: #0000FF;">while</span> (&lt; j k)
             (princ (format <span style="color: #036A07;">"_%-28.28s_|"</span>
                            <span style=
"color: #036A07;">"_______________________________"</span>))
             (setq j (1+ j))))
         (princ <span style="color: #036A07;">"\n"</span>)
         (<span style="color: #0000FF;">while</span> (&lt; i n)
           (princ (format <span style=
"color: #036A07;">" %-10.10s |"</span> (nth i keys)))
           (<span style="color: #0000FF;">let</span> ((j 0))
             (<span style="color: #0000FF;">while</span> (&lt; j k)
               (<span style="color: #0000FF;">let*</span> ((binding
                       (key-binding (read-kbd-macro
                                     (concat (nth j modifiers)
                                             (nth i keys)))))
                      (binding-string <span style=
"color: #036A07;">"_"</span>))
                 (<span style="color: #0000FF;">when</span> binding
                   (<span style=
"color: #0000FF;">if</span> (eq binding 'self-insert-command)
                       (setq binding-string (concat <span style=
"color: #036A07;">"'"</span> (nth i keys) <span style=
"color: #036A07;">"'"</span>))
                     (setq binding-string (format <span style=
"color: #036A07;">"%s"</span> binding))))
                 (setq binding-string
                       (substring binding-string 0
                                  (min (length binding-string) 28)))
                 (princ (format <span style=
"color: #036A07;">" %-28.28s |"</span> binding-string))
                 (setq j (1+ j)))))
           (princ <span style="color: #036A07;">"\n"</span>)
           (setq i (1+ i)))
         (princ (format <span style=
"color: #036A07;">"_%-10.10s_|"</span> <span style=
"color: #036A07;">"__________"</span>))
         (<span style="color: #0000FF;">let</span> ((j 0))
           (<span style="color: #0000FF;">while</span> (&lt; j k)
             (princ (format <span style="color: #036A07;">"_%-28.28s_|"</span>
                            <span style=
"color: #036A07;">"_______________________________"</span>))
             (setq j (1+ j))))))
     (delete-window)
     (setq truncate-lines t)))
</pre>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-47-6" class="outline-3">
        <h3 id="sec-47-6">Syntax Table</h3>

        <div class="outline-text-3" id="text-47-6">
          <p>The syntax table contains information that tells Emacs how to
          operate on text, words, sentences etc. It will make Emacs know enough
          about all the symbols in a buffer. Syntax table is used for example
          for:</p>

          <ul class="org-ul">
            <li>commands like <code>forward-word</code> (<code>M-f</code>) or
            <code>backward-kill-word</code> (<code>M-DEL</code>),</li>

            <li>spell-checking of words,</li>

            <li>expansion commands of abbrevs,</li>

            <li>etc.</li>
          </ul>

          <p>Evaluate <code>current-word</code> and see whether characters such
          as <code>-</code> and <code>_</code> are considered part of the word
          (depending on the current major mode).</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 48.5 The (info "(emacs)Syntax") Table</span>

  (leuven--section <span style=
"color: #036A07;">"48.5 The (emacs)Syntax Table"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">now '-' is not considered a word-delimiter</span>
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">(add-hook 'emacs-lisp-mode-hook</span>
  <span style="color: #8D8D84;">;;           </span><span style=
"color: #8D8D84; font-style: italic;">(lambda ()</span>
  <span style="color: #8D8D84;">;;             </span><span style=
"color: #8D8D84; font-style: italic;">(modify-syntax-entry ?- "w")))</span>
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter 48 ends here</span>
</pre>
          </div>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-48" class="outline-2">
      <h2 id="sec-48">Emacs Display</h2>

      <div class="outline-text-2" id="text-48">
        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* Emacs Display</span>

(leuven--chapter leuven-chapter-XX-emacs-display <span style=
"color: #036A07;">"XX Emacs Display"</span>
</pre>
        </div>
      </div>

      <div id="outline-container-sec-48-1" class="outline-3">
        <h3 id="sec-48-1">Faces</h3>

        <div class="outline-text-3" id="text-48-1">
          <p>You can get text properties of any char by typing <code>C-u C-x
          =</code>.</p>

          <p>Under Windows, you can get the current <b>font</b> by typing
          <code>(w32-select-font)</code> followed by <code>C-x C-e</code>.</p>

          <p>You can find the current <b>font string</b> by typing <code>M-x
          ielm &lt;RET&gt; (frame-parameters) &lt;RET&gt;</code> – see the line
          <code>font</code>.</p>

          <p>To check if some font is available in Emacs do following:</p>

          <ol class="org-ol">
            <li>Switch to the <code>*scratch*</code> buffer.</li>

            <li>Type <code>(prin1-to-string (x-list-fonts
            "font-you-want-to-check or pattern"))</code>.</li>

            <li>Place the cursor after the last closing paren and hit
            <code>C-j</code>. List of the names of available fonts matching
            given pattern will appear in the current buffer
            (<code>*scratch*</code>).</li>

            <li>For listing of all available fonts, use <code>(prin1-to-string
            (x-list-fonts "*"))</code> or <code>(dolist (i (x-list-fonts "*"))
            (princ i) (terpri))</code> for a better output.</li>
          </ol>

          <p>Under Linux, use the <code>xfontsel</code> utility (or the
          command-line <code>xlsfonts</code>) to try out different fonts. After
          choosing a font, click the select button in <code>xfontsel</code>
          window. This will copy font name you choose to copy &amp; paste
          buffer.</p>

          <p>Now Emacs should start with that font.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** (info "(elisp)Faces")</span>

  (leuven--section <span style="color: #036A07;">"Faces"</span>)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">enable more bold and italic fonts to be displayed</span>
  (setq w32-enable-synthesized-fonts t)
</pre>
          </div>

          <p>For reasons unknown to me, Emacs takes a long time to change fonts
          in an X environment.</p>

          <p>Rather than using <code>(set-default-font ...)</code> in
          <code>.emacs</code>, stick the font definition in your
          <code>.Xresources</code> file (key ‘Emacs*font’) and then use
          <code>xrdb -load</code> to activate it. You will find that startup
          time is greatly improved!</p>

          <p>Edit your <code>~/.Xresources</code> file to have a line with
          “Emacs.font”. Then do a <code>xrdb -merge ~/.Xresources</code> or
          restart your X11 to validate the modification. I let Emacs do this
          for me:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">merge-x-resources</span> ()
    (<span style=
"color: #0000FF;">let</span> ((file (file-name-nondirectory (buffer-file-name))))
      (<span style="color: #0000FF;">when</span> (or (string= file <span style=
"color: #036A07;">".Xdefaults"</span>)
                (string= file <span style=
"color: #036A07;">".Xresources"</span>))
        (start-process <span style=
"color: #036A07;">"xrdb"</span> nil <span style=
"color: #036A07;">"xrdb"</span> <span style=
"color: #036A07;">"-merge"</span> (buffer-file-name))
        (message (format <span style=
"color: #036A07;">"Merged %s into X resource database"</span> file)))))

  (add-hook 'after-save-hook 'merge-x-resources)
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">allow any scalable font</span>
  (<span style="color: #0000FF;">when</span> running-ms-windows
    (setq scalable-fonts-allowed t))
</pre>
          </div>
        </div>

        <div id="outline-container-sec-48-1-1" class="outline-4">
          <h4 id="sec-48-1-1">UTF-8</h4>

          <div class="outline-text-4" id="text-48-1-1">
            <p>Fonts that have a good UTF-8 coverage are:</p>

            <ul class="org-ul">
              <li>DejaVu Sans Mono</li>

              <li>DejaVu Sans</li>

              <li>FreeMono (FreeSans, FreeSerif)</li>

              <li>Monospace</li>
            </ul>

            <p>None of them has all four variants, some have regular (medium)
            and bold or light and regular, one regular and oblique.</p>
          </div>
        </div>

        <div id="outline-container-sec-48-1-2" class="outline-4">
          <h4 id="sec-48-1-2">Anti-aliasing</h4>

          <div class="outline-text-4" id="text-48-1-2">
            <p>To see if anti-aliasing is active, use <code>xmag</code> (under
            Linux) or any of the other magnifier applications. The fonts should
            have gray edges.</p>
          </div>
        </div>

        <div id="outline-container-sec-48-1-3" class="outline-4">
          <h4 id="sec-48-1-3">Adjust the height of the default face</h4>

          <div class="outline-text-4" id="text-48-1-3">
            <p>There are a few commands to adjust the font sizes:</p>

            <dl class="org-dl">
              <dt><code>C-x C-+</code></dt>

              <dd>Increase the default face height by one step.</dd>

              <dt><code>C-x C--</code></dt>

              <dd>Decrease the default face height by one step.</dd>

              <dt><code>C-x C-0</code></dt>

              <dd>Resets to defaults.</dd>
            </dl>

            <p>Those bindings are global and repeatable, e.g. <code>C-x C-+ C-+
            C-+</code>.</p>

            <div class="org-src-container">
              <pre class="src src-emacs-lisp">
)
</pre>
            </div>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-48-2" class="outline-3">
        <h3 id="sec-48-2"><a id="ID-9432da83-fa9d-4466-a4da-57f33d662bbd" name=
        "ID-9432da83-fa9d-4466-a4da-57f33d662bbd"></a>Images</h3>

        <div class="outline-text-3" id="text-48-2">
          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 38.16 (info "(elisp)Images")</span>
</pre>
          </div>

          <p>How do I get image support? See <code>image-library-alist</code>,
          a list of image types vs. external libraries needed to display
          them.</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
(describe-variable 'image-library-alist)
</pre>
          </div>

          <p>If you use compiled Emacs binaries (available on the <a href=
          "http://ftp.gnu.org/gnu/emacs/windows/">GNU Website</a>), eventually,
          copy those DLLs (<code>libpng14-14.dll</code>, for example) from an
          old EmacsW32 installation to your Emacs <code>bin</code> directory,
          and restart Emacs for image support to be enabled.</p>

          <p>If you use Cygwin Emacs, install <code>libpng</code> via Cygwin as
          well.</p>

          <p>You can do:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
(image-type-available-p 'png)
</pre>
          </div>

          <p>to check if you have <code>png</code> image support in your
          Emacs.</p>

          <p>To check all image libraries at once:</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
(mapcar (<span style="color: #0000FF;">lambda</span> (elt)
          (list (car elt) (image-type-available-p (car elt))))
        dynamic-library-alist)
</pre>
          </div>

          <p>If missing image libraries bother you, read
          <code>README.W32</code> (or <code>nt/INSTALL</code>).</p>

          <p>For animated GIF (or multi-page TIFF):</p>

          <ul class="org-ul">
            <li><code>f</code> steps through image frame, and</li>

            <li><code>RET</code> animates.</li>
          </ul>

          <p>No need for ImageMagick.</p>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-49" class="outline-2">
      <h2 id="sec-49">Calc</h2>

      <div class="outline-text-2" id="text-49">
        <p><code>C-x *</code> invokes the GNU Emacs Calculator.</p>
      </div>

      <div id="outline-container-sec-49-1" class="outline-3">
        <h3 id="sec-49-1">Introduction</h3>

        <div class="outline-text-3" id="text-49-1"></div>

        <div id="outline-container-sec-49-1-1" class="outline-4">
          <h4 id="sec-49-1-1">Basic Commands</h4>

          <div class="outline-text-4" id="text-49-1-1">
            <p>Start the Calc: <code>C-x * c</code>.</p>
          </div>
        </div>

        <div id="outline-container-sec-49-1-2" class="outline-4">
          <h4 id="sec-49-1-2">“Quick Calculator” Mode</h4>

          <div class="outline-text-4" id="text-49-1-2">
            <p>Run the Calculator in the minibuffer: <code>C-x * q</code>
            (<code>M-x quick-calc</code>).</p>
          </div>
        </div>
      </div>

      <div id="outline-container-sec-49-2" class="outline-3">
        <h3 id="sec-49-2">Embedded Mode</h3>

        <div class="outline-text-3" id="text-49-2">
          <p>Try the Embedded mode of Calc: <code>C-x * e</code> (no need to
          mark the region).</p>

          <p>Similar commands: in place of <code>e</code>,</p>

          <dl class="org-dl">
            <dt><code>w</code></dt>

            <dd>Start Embedded mode on the current “word”.</dd>

            <dt><code>j</code></dt>

            <dd>Operate on <b>assignments</b>.</dd>
          </dl>

          <p>You need to type <code>C-x * e</code> again to exit the Embedded
          mode.</p>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-50" class="outline-2">
      <h2 id="sec-50">IRC client for Emacs</h2>

      <div class="outline-text-2" id="text-50">
        <p>See <a href="http://en.wikipedia.org/wiki/List_of_IRC_commands">List
        of Internet Relay Chat commands</a>:</p>

        <ul class="org-ul">
          <li><code>/whois</code></li>

          <li><code>/leave</code></li>
        </ul>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* Emacs IRC client</span>

<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Other IRC for Emacs: rcirc, circe, bitlbee, liece, riece, zenirc, erc</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Circe is advised by Tassilo (contributor)</span>

  (autoload 'circe <span style="color: #036A07;">"circe"</span>
    <span style="color: #008000;">"Connect to an IRC server."</span> t)

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">connect to the Freenode network</span>
  (<span style="color: #0000FF;">defun</span> <span style=
"color: #006699;">leuven-irc-connect</span> ()
    <span style="color: #008000;">"Connect to Freenode."</span>
    (interactive)
    (circe <span style="color: #036A07;">"irc.freenode.net"</span> <span style=
"color: #036A07;">"6667"</span> <span style=
"color: #036A07;">"freenode"</span>))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">... upon hitting `C-c i'</span>
  (global-set-key
    (kbd <span style="color: #036A07;">"C-c i"</span>)
    (<span style="color: #0000FF;">lambda</span> ()
      (interactive)
      (switch-or-start 'leuven-irc-connect
                       <span style=
"color: #036A07;">"irc.freenode.net:6667"</span>)))

  (<span style="color: #0000FF;">with-eval-after-load</span> <span style=
"color: #036A07;">"circe"</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 1 Basics</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default channels to join whenever connecting to Freenode</span>
    (setq circe-server-auto-join-channels
          '((<span style="color: #036A07;">"^freenode$"</span>
             <span style="color: #036A07;">"#emacs"</span>
             <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"#gnus"</span>
             <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"#latex"</span>
             <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"#ledger"</span>
             <span style="color: #036A07;">"#org-mode"</span>
             <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"#stumpwm"</span>
             <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"#zsh"</span>
             <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"#xemacs"</span>
             )))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 2 Reference</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 2.3 Configuration</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">default nick</span>
    (setq circe-default-nick <span style="color: #036A07;">"johndoe"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">your "real name" on IRC</span>
    (setq circe-default-realname <span style=
"color: #036A07;">"John Doe"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">authentication info</span>
    (setq freenode-passwd <span style="color: #036A07;">""</span>)
    (setq circe-nickserv-passwords
          `((<span style=
"color: #036A07;">"freenode"</span> ,freenode-passwd)))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 3 Fighting Information Overload</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 3.1 Channels</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">When other people say things in buffers that are currently buried (no</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">window is showing them), the mode line will now show you the</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">abbreviated channel or nick name.  Use `C-c C-SPC' to switch to these</span>
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">buffers.</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 3.3 Keywords</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">list of keywords to highlight</span>
    (setq lui-highlight-keywords
          '(
            <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">"[</span><span style=
"color: #8D8D84; font-style: italic;">^</span><span style=
"color: #8D8D84; font-style: italic;">&lt;]vauban"</span>
            <span style="color: #036A07;">"org"</span> <span style=
"color: #036A07;">"beamer"</span> <span style=
"color: #036A07;">"ledger"</span> <span style="color: #036A07;">"tikz"</span>))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">add IRC color support to LUI</span>
    (<span style="color: #0000FF;">when</span> (try-require 'lui-irc-colors)
      (add-to-list 'lui-pre-output-hook 'lui-irc-colors))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** 4 Hacking and Tweaking</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">*** 4.2 Using fly spell mode</span>

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">check if `</span><span style=
"color: #D0372D; font-style: italic;">ispell-program-name</span><span style=
"color: #8D8D84; font-style: italic;">' seems correct</span>
    (<span style="color: #0000FF;">when</span> (ispell-check-program-name)
      (setq lui-flyspell-p t)
      (setq lui-flyspell-alist '((<span style=
"color: #036A07;">"."</span> <span style=
"color: #036A07;">"american"</span>))))

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">** Others</span>

    (setq circe-highlight-nick-type 'occurrence)

    (<span style=
"color: #0000FF;">when</span> (try-require 'circe-highlight-all-nicks)
      (enable-circe-highlight-all-nicks))

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">format for messages to queries or channels</span>
    (setq circe-format-self-say <span style=
"color: #036A07;">"&lt;{nick}&gt; {body}"</span>)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">truncate the buffer (at the top) if it grows too much</span>
    (setq lui-max-buffer-size 30000)

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">column at which Lui should break output</span>
    (setq lui-fill-column 79)

    )                                   <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">with-eval-after-load "circe" ends here</span>
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Jabber (GTalk)</span>
  (<span style=
"color: #0000FF;">when</span> (try-require 'jabber-autoloads-<span style=
"color: #CC0000; background-color: #FFFF88;">XXX</span>)
    (setq jabber-account-list '((<span style=
"color: #036A07;">"johndoe@example.com"</span>
                                 (<span style=
"color: #006FE0;">:network-server</span> . <span style=
"color: #036A07;">"talk.google.com"</span>)
                                 (<span style=
"color: #006FE0;">:connection-type</span> . ssl)
                                 (<span style=
"color: #006FE0;">:port</span> . 443))))

    (setq jabber-history-enabled t)

    (setq jabber-use-global-history nil)

    (setq jabber-history-dir <span style=
"color: #036A07;">"~/.emacs.d/jabber"</span>)

    (setq jabber-vcard-avatars-retrieve nil)

    (setq jabber-chat-buffer-show-avatar nil))
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-51" class="outline-2">
      <h2 id="sec-51">Emacs and Microsoft Windows/MS-DOS</h2>

      <div class="outline-text-2" id="text-51">
        <p>Eventually have a look as well at <code>input-decode-map</code>.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* App G Emacs and (info "(emacs)Microsoft Windows/MS-DOS")</span>

(leuven--chapter leuven-chapter-AppG-ms-dos <span style=
"color: #036A07;">"Appendix G Emacs and MS-DOS"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">divide key (needed in GNU Emacs for Windows)</span>
  (GNUEmacs
    (global-set-key
      (kbd <span style=
"color: #036A07;">"&lt;kp-divide&gt;"</span>) (kbd <span style=
"color: #036A07;">"/"</span>)))

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">numeric keypad (needed in XEmacs for Windows)</span>
  (XEmacs
    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">keys to the right of the regular keyboard</span>
    (define-key key-translation-map [kp-divide]     [?/])
    (define-key key-translation-map [kp-multiply]   [?*])
    (define-key key-translation-map [kp-subtract]   [?-])
    (define-key key-translation-map [kp-add]        [?+])
    (define-key key-translation-map [kp-enter]     [?\r])
    (define-key key-translation-map [kp-decimal]    [?.])

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">keys with digits</span>
    (define-key key-translation-map [kp-0]          [?0])
    (define-key key-translation-map [kp-1]          [?1])
    (define-key key-translation-map [kp-2]          [?2])
    (define-key key-translation-map [kp-3]          [?3])
    (define-key key-translation-map [kp-4]          [?4])
    (define-key key-translation-map [kp-5]          [?5])
    (define-key key-translation-map [kp-6]          [?6])
    (define-key key-translation-map [kp-7]          [?7])
    (define-key key-translation-map [kp-8]          [?8])
    (define-key key-translation-map [kp-9]          [?9])

    <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">additional keypad duplicates of keys ordinarily found elsewhere</span>
    (define-key key-translation-map [kp-left]     [left])
    (define-key key-translation-map [kp-right]   [right])
    (define-key key-translation-map [kp-up]         [up])
    (define-key key-translation-map [kp-down]     [down])
    (define-key key-translation-map [kp-begin]   [begin])
    (define-key key-translation-map [kp-home]     [home])
    (define-key key-translation-map [kp-end]       [end])
    (define-key key-translation-map [kp-next]     [next])
    (define-key key-translation-map [kp-prior]   [prior])
    (define-key key-translation-map [kp-insert] [insert])
    (define-key key-translation-map [kp-delete] [delete]))

)                                       <span style=
"color: #8D8D84;">; </span><span style=
"color: #8D8D84; font-style: italic;">chapter G ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-52" class="outline-2">
      <h2 id="sec-52">Reporting Bugs</h2>

      <div class="outline-text-2" id="text-52">
        <p>To get a backtrace when a specific regexp is displayed in the echo
        area (through calls to message), set the variable
        <code>debug-on-message</code>.</p>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Recovery from Problems</span>

<span style="color: #8D8D84;">;;</span><span style=
"color: #8D8D84; font-style: italic;">* Reporting Bugs</span>

(leuven--chapter leuven-chapter-99-debugging <span style=
"color: #036A07;">"99 Debugging"</span>

  <span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">get the backtrace when uncaught </span><span style="color: #CC0000; background-color: #FFFF88; font-style: italic;">error</span><span style="color: #8D8D84; font-style: italic;">s occur</span>
  (setq debug-on-<span style=
"color: #CC0000; background-color: #FFFF88;">error</span> nil))            <span style="color: #8D8D84;">; </span><span style="color: #8D8D84; font-style: italic;">was set to `t' at beginning of buffer</span>
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(<span style="color: #0000FF;">when</span> (and (string-match <span style=
"color: #036A07;">"GNU Emacs"</span> (version))
           leuven-load-verbose)
  (ad-disable-advice 'message 'before 'leuven-when-was-that)
  (ad-update 'message))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(<span style="color: #0000FF;">when</span> leuven-load-verbose
  (message <span style="color: #036A07;">"| Chapter | Time |"</span>)
  (message <span style="color: #036A07;">"|---------+------|"</span>)
  (mapcar (<span style="color: #0000FF;">lambda</span> (el)
            (message el))
          (nreverse leuven--load-times-list))
  (message <span style="color: #036A07;">"|---------+------|"</span>)
  (message <span style=
"color: #036A07;">"|         | =vsum(@-I..@-II) |"</span>))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(message <span style="color: #036A07;">"Loading `</span><span style=
"color: #D0372D;">%s</span><span style=
"color: #036A07;">'...done (in %.3f s)"</span>
         load-file-name
         (- (float-time) leuven-before-time))
(sit-for 0.3)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(<span style=
"color: #0000FF;">let</span> ((elapsed (float-time (time-subtract (current-time)
                                          emacs-start-time))))
  (message <span style="color: #036A07;">"Loading `</span><span style=
"color: #D0372D;">%s</span><span style=
"color: #036A07;">'... loaded in %.3f s"</span> load-file-name elapsed))

(add-hook 'after-init-hook
          `(<span style="color: #0000FF;">lambda</span> ()
             (<span style=
"color: #0000FF;">let</span> ((elapsed (float-time (time-subtract (current-time)
                                                       emacs-start-time))))
               (message <span style=
"color: #036A07;">"Loading %s...done (%.3fs) [after-init]"</span>
                        ,load-file-name elapsed)))
  t)
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(message <span style=
"color: #036A07;">"Emacs initialization: %s"</span> (emacs-init-time))
</pre>
        </div>

        <div class="org-src-container">
          <pre class="src src-emacs-lisp">
(message <span style=
"color: #036A07;">"* --[ Loaded Emacs Leuven 20140407.1625]--"</span>)

(<span style="color: #0000FF;">provide</span> '<span style=
"color: #D0372D;">emacs-leuven</span>)


<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">This is for the sake of Emacs.</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">Local Variables:</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">coding: utf-8</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">ispell-local-dictionary: "american"</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">eval: (when (locate-library "rainbow-mode") (require 'rainbow-mode) (rainbow-mode))</span>
<span style="color: #8D8D84;">;; </span><span style=
"color: #8D8D84; font-style: italic;">End:</span>

<span style="color: #8D8D84;">;;; </span><span style=
"color: #8D8D84; font-style: italic;">emacs-leuven.el ends here</span>
</pre>
        </div>
      </div>
    </div>

    <div id="outline-container-sec-53" class="outline-2">
      <h2 id="sec-53">Startup time</h2>

      <div class="outline-text-2" id="text-53"></div>

      <div id="outline-container-sec-53-1" class="outline-3">
        <h3 id="sec-53-1">Context</h3>

        <div class="outline-text-3" id="text-53-1">
          <p>Identify what parts of your <code>.emacs</code> take so long. You
          can do this e.g. by starting Emacs with <code>emacs -q</code>, set up
          your <code>load-path</code>, and then evaluate</p>

          <div class="org-src-container">
            <pre class="src src-emacs-lisp">
(benchmark-run
  (<span style="color: #0000FF;">require</span> '<span style=
"color: #D0372D;">some-package</span>))
</pre>
          </div>

          <p>The first number appearing in the echo area will be the time
          needed to run that command.</p>

          <p>Use autoloads, which delay the loading of the complete package
          until one of the interactive functions is used.</p>

          <p>If you want to set options which need to be evaluated after a
          package is loaded, you can use <code>eval-after-load</code>.</p>
        </div>
      </div>

      <div id="outline-container-sec-53-2" class="outline-3">
        <h3 id="sec-53-2">Timings from my system</h3>

        <div class="outline-text-3" id="text-53-2">
          <p>After much optimization…</p>

          <p>$ time emacs -f kill-emacs real 0m0.157s user 0m0.140s sys
          0m0.012s $ time emacs -q -f kill-emacs real 0m0.137s user 0m0.116s
          sys 0m0.016s $ time emacs -Q -f kill-emacs real 0m0.051s user
          0m0.028s sys 0m0.020s</p>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006FE0;">time</span> emacs -f kill-emacs 2&gt;&amp;1
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006FE0;">time</span> emacs -q -f kill-emacs 2&gt;&amp;1
</pre>
          </div>

          <div class="org-src-container">
            <pre class="src src-sh">
<span style="color: #006FE0;">time</span> emacs -Q -f kill-emacs 2&gt;&amp;1
</pre>
          </div>

          <p>Note that your first test is going to be dramatically slower than
          subsequent tests.</p>
        </div>
      </div>
    </div>
  </div>

  <div id="postamble" class="status">
    <div id="footer">
      <div id="copyright">
        Copyright © Fabrice Niessen
      </div>
    </div>
  </div>
</body>
</html>
